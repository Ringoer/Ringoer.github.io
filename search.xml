<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Welcome to No. 68 Floating Island</title>
      <link href="/uncategorized/mainpage/"/>
      <url>/uncategorized/mainpage/</url>
      
        <content type="html"><![CDATA[<p></p><p align="center"><b><font size="6">Are You Going To Scarborough Fair ?</font></b></p><br><img src="http://pic.ringoer.com/id63819688.png" alt="id=63819688" title="id=63819688"><p></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Webpack 入门 2</title>
      <link href="/frontend/webpack-2/"/>
      <url>/frontend/webpack-2/</url>
      
        <content type="html"><![CDATA[<p>也不能总是只搞 js 吧，我三剑客另两位呢？Webpack 其之二</p><a id="more"></a><hr><p><a href="https://download.ringoer.com/webpack-demo-2.rar" target="_blank" rel="noopener">点我下载本章代码</a></p><h1 id="HTML-插件"><a href="#HTML-插件" class="headerlink" title="HTML 插件"></a>HTML 插件</h1><p>首先先搞一个能看的页面出来</p><p>那当然是选择我们的 HTML</p><p>因为 webpack 只能把资源处理成 js，所以要想得到 HTML，我们就要使用 plugin</p><p>在官方文档的 plugin 中找到 html，发现有这么一个插件</p><p><strong>html-webpack-plugin</strong></p><p>点开之后可以得到其引导，让我们先安装它</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev html-webpack-plugin</span><br></pre></td></tr></table></figure><p>该插件将为你生成一个 HTML5 文件， 其中包括使用 <code>script</code> 标签的 body 中的所有 webpack 包。</p><p>向 module.exports 写入字段 plugins，大致变为如下模样</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">'production'</span>,</span><br><span class="line">  entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">    filename: <span class="string">'[name].[contenthash].js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [<span class="keyword">new</span> HtmlWebpackPlugin()]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>然后试试构建！</p><p>可以发现 dist 目录下产生了新的 js 和一个 html，并为这个 html 自动绑定了 js</p><p><img src="https://pic.ringoer.com/webpack-2-0.png" alt=""></p><p>但是这个页面也太白板了，能不能指定一些个性化设置呢</p><p>查看 <a href="https://github.com/jantimon/html-webpack-plugin#configuration" target="_blank" rel="noopener">插件文档</a> 可以发现有这么一段代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        title: <span class="string">'My App'</span>,</span><br><span class="line">        filename: <span class="string">'assets/admin.html'</span></span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>抄进来试试构建！</p><p>发现 dist 目标文件夹变成了这样</p><p><img src="https://pic.ringoer.com/webpack-2-1.png" alt=""></p><p>可以看到 title 被我们成功定制了，但是路径错了？！为什么多了一个 assets？？</p><p>我们发现配置中有 assets 的部分是 filename 字段，想到之前配置中的 output 也有 filename 字段，是指示输出的文件名用的，所以结合构建结果来看插件中的配置应该也同理</p><p>但是这样还是太单薄了，能不能再丰富一点？</p><h1 id="HTML-模板"><a href="#HTML-模板" class="headerlink" title="HTML 模板"></a>HTML 模板</h1><p>答案是可以！</p><p>继续查看插件文档，有一个地方的代码引起了我们的注意</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(), <span class="comment">// Generates default index.html</span></span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;  <span class="comment">// Also generate a test.html</span></span><br><span class="line">        filename: <span class="string">'test.html'</span>,</span><br><span class="line">        template: <span class="string">'src/assets/test.html'</span></span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>注释是说，如果配置了两个 HtmlWebpackPlugin 实例，那么两个实例都会被构建</p><p>其中第二个实例指定了一个新字段，template，翻译是模板，那我们可以猜测这个东西是指示入口 html 文件的</p><p>正好我们目录下有个 index.html，个性化一下先</p><p><img src="https://pic.ringoer.com/webpack-2-2.png" alt=""></p><p>然后指定 template 的路径到这个 html</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        title: <span class="string">'My App'</span>,</span><br><span class="line">        filename: <span class="string">'index.html'</span>,</span><br><span class="line">        template: <span class="string">'index.html'</span></span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>然后再构建一下，发现 dist 结果现在变成了这样</p><p><img src="https://pic.ringoer.com/webpack-2-3.png" alt=""></p><p>虽然构建成功了，自动使用我们提供的模板，并引入了 main.js</p><p>但是我们配置的 title 没有覆盖模板的 title，并且里面自带的 index.js 还留着</p><p>可以猜测配置多余的 title 是没用的，并且不应该自带 js</p><p>现在去掉模板里的 title 和 js 引用再试试</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>构建！</p><p>得到的新 dist 变成这样</p><p><img src="https://pic.ringoer.com/webpack-2-4.png" alt=""></p><p>虽然 js 确实自动插进去了，但是……我的 title 呢！！！</p><p>怎么办怎么办，看看插件文档吧</p><p>正好下一节就提出了一个类似 jsp 的语法</p><p><code>&lt;%= htmlWebpackPlugin.options.title %&gt;</code></p><p>将这个语句写在模板中，可以在构建的时候自动获取配置中的 title</p><p>来试试</p><p><img src="https://pic.ringoer.com/webpack-2-5.png" alt=""></p><p>构建！</p><p><img src="https://pic.ringoer.com/webpack-2-6.png" alt=""></p><p>发现成功插入了新的 title！可以推知其它配置也可以采用类似的方法</p><h1 id="css-loader"><a href="#css-loader" class="headerlink" title="css loader"></a>css loader</h1><p>但是这样的页面好丑……我要加 CSS</p><p>看看插件文档怎么说的</p><p>直接在插件文档中搜 css</p><p>发现官方文档里这么说</p><blockquote><p>If you have any CSS assets in webpack’s output (for example, CSS extracted with the <a href="https://github.com/webpack-contrib/mini-css-extract-plugin" target="_blank" rel="noopener">mini-css-extract-plugin</a>) then these will be included with <code>&lt;link&gt;</code> tags in the HTML head.</p></blockquote><p>意思就是如果要 CSS，你去用 mini-css-extract-plugin 吧</p><p>这也太麻烦了，我想简单点，回头看看 webpack 文档</p><p>在指南中的 加载 CSS 章节发现了这么一段</p><p><img src="https://pic.ringoer.com/webpack-2-7.png" alt=""></p><p>先安装，然后把配置抄过来看看</p><p>然后加个 style.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ol</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 index.js 中引入这个 css</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">![webpack<span class="number">-2</span><span class="number">-8</span>](https:<span class="comment">//pic.ringoer.com/webpack-2-8.png)import './style.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> string = <span class="string">'hello'</span></span><br><span class="line"><span class="built_in">console</span>.log(string)</span><br></pre></td></tr></table></figure><p>试试构建，完成后用 file 协议打开 index.html 看看</p><p><img src="https://pic.ringoer.com/webpack-2-8.png" alt=""></p><p>发现成功引入了 css，而且自动化作 style 标签插在了 document.head 中</p><p>此时的 main.xxx.js 变成了复杂的一大串 js 代码，这其实就是 loader 的效果——将其它内容转换为 js</p><p>查看配置，发现用到了两个 loader，根据名称，我们可以推测，任何以 .css 结尾的文件，都会通过 test 的测试，然后从后向前依次调用 loader处理</p><p>先调用 css-loader 将 css 内容转化为 webpack 能理解的 js 内容，再调用 style-loader 将 js 内容中的样式部分化作 style 标签插入到 document.head 上</p><p>那如果我有多个 css 呢？试试看！</p><p>新建一个 style2.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ol</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后在 index.js 中引入它</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./style.css'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./style2.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> string = <span class="string">'hello'</span></span><br><span class="line"><span class="built_in">console</span>.log(string)</span><br></pre></td></tr></table></figure><p>然后构建！刷新页面发现变成了这样</p><p><img src="https://pic.ringoer.com/webpack-2-9.png" alt=""></p><p>多个 css 文件会化作多个 style 标签被插入</p><h1 id="css-抽取"><a href="#css-抽取" class="headerlink" title="css 抽取"></a>css 抽取</h1><p>但是如果我 css 多了，插作 style 标签的话，不方便管理，也会加大页面代码冗余</p><p>能不能抽成 css 文件呢？可以！</p><p>我们知道 webpack 基本功能是提取内容变为 js，刚才的 loader 也是这个功能，那现在要提取作非 js 的 css 文件了，肯定需要的是 plugin</p><p>想起刚才 html 的时候，他让我们去用 mini-css-extract-plugin，那我们就去看看</p><p>先安装这个插件</p><p><code>npm install --save-dev mini-css-extract-plugin</code></p><p>然后我们发现了这么一段代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: [<span class="keyword">new</span> MiniCssExtractPlugin()],</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/i</span>,</span><br><span class="line">        use: [MiniCssExtractPlugin.loader, <span class="string">'css-loader'</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>抄下来</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">'production'</span>,</span><br><span class="line">  entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">    filename: <span class="string">'[name].[contenthash].js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      title: <span class="string">'My App'</span>,</span><br><span class="line">      filename: <span class="string">'index.html'</span>,</span><br><span class="line">      template: <span class="string">'index.html'</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin()</span><br><span class="line">  ],</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: [MiniCssExtractPlugin.loader, <span class="string">'css-loader'</span>]</span><br><span class="line">        <span class="comment">// use: [</span></span><br><span class="line">        <span class="comment">//   'style-loader',</span></span><br><span class="line">        <span class="comment">//   'css-loader'</span></span><br><span class="line">        <span class="comment">// ]</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>然后好像没说什么别的了，试试构建吧</p><p><img src="https://pic.ringoer.com/webpack-2-10.png" alt=""></p><p>构建之后发现！！js 文件变简单了，css 也自动抽成了 main.css，还自动在 index.html 中引入了</p><p>不过为什么仅仅是 main.css？我的哈希呢？</p><p>根据之前猜测的 filename 指示输出文件名，来试试修改配置</p><p>将 plugins 中的 filename 改成如下模样，再试试构建</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">        filename: <span class="string">'[name].[contenthash].css'</span></span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>得到了如下结果</p><p><img src="https://pic.ringoer.com/webpack-2-11.png" alt=""></p><p>现在我们的 CSS 也有每次不同的文件名了！</p><h1 id="下集预告"><a href="#下集预告" class="headerlink" title="下集预告"></a>下集预告</h1><p>file 协议也太野蛮了，我要 http 协议</p><p><a href="https://ringoer.com/frontend/webpack-3/" target="_blank" rel="noopener">点我查看下集</a></p><hr><p>感谢阅读</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webpack 入门 1</title>
      <link href="/frontend/webpack-1/"/>
      <url>/frontend/webpack-1/</url>
      
        <content type="html"><![CDATA[<p>目前版本第一的打包工具 Webpack 其之一</p><a id="more"></a><hr><p><a href="https://download.ringoer.com/webpack-demo-1.rar" target="_blank" rel="noopener">点我下载本章代码</a></p><h1 id="什么是-Webpack"><a href="#什么是-Webpack" class="headerlink" title="什么是 Webpack"></a>什么是 Webpack</h1><p>首先贴出 webpack 的官网</p><p><a href="https://webpack.js.org/" target="_blank" rel="noopener">webpack</a></p><p><a href="https://www.webpackjs.com/" target="_blank" rel="noopener">webpack 中文文档</a></p><p>本质上，webpack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)。当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。构建过程是拓扑排序的一种</p><p>说到底，webpack 基本的功能，其实就是把高版本 js 转换成 js，以及把非 js 的文件转换成 js</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>先安装一下吧</p><p>我们可以看到，官方文档的指南里给出了如下命令行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir webpack-demo &amp;&amp; <span class="built_in">cd</span> webpack-demo</span><br><span class="line">npm init -y</span><br><span class="line">npm install webpack webpack-cli --save-dev</span><br></pre></td></tr></table></figure><p>那我们也照做一下，完成后目录结构如下</p><p><img src="https://pic.ringoer.com/webpack-1-0.png" alt=""></p><h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><p>指南里还要求我们首先建一个新目录，里面包含一个 src 的一个 index.js，以及一下 index.html</p><p>index.html 中记得连接到 index.js</p><p><img src="https://pic.ringoer.com/webpack-1-1.png" alt=""></p><p>然后让我们试试高版本 js 转换成低版本 js 的功能。一般是 ES6 转换成 ES5</p><p>让我们先从文档里找一个能用的 webpack 配置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./path/to/my/entry/file.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">    filename: <span class="string">'my-first-webpack.bundle.js'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>就他了！</p><p>建立一个 webpack.config.js 文件用来保存配置</p><p><img src="https://pic.ringoer.com/webpack-1-2.png" alt=""></p><p>然后试试运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>npx 命令指示 node 从当前目录下的 node_modules 中寻找webpack</p><p>然后发现报错了？！怎么回事呢</p><p>看看报错说什么</p><p><img src="https://pic.ringoer.com/webpack-1-3.png" alt=""></p><p>报错说他不能识别 <code>./path/to/my/entry/file.js</code> 这个文件是什么</p><p>这个字符串在哪里提到了呢？在配置中的 entry</p><p>entry 这个词很明显是入口的意思，加上是 js 结尾，我们试试看用我们现在目录中唯一的 js 替换</p><p><img src="https://pic.ringoer.com/webpack-1-4.png" alt=""></p><p>现在配置变成这样，再试试打包吧！</p><p>这次很顺利的成功了</p><p><img src="https://pic.ringoer.com/webpack-1-5.png" alt=""></p><p>检查目录，发现目录下多了个 dist 文件夹，里面多了个 my-first-webpack.bundle.js 文件</p><p><img src="https://pic.ringoer.com/webpack-1-6.png" alt=""></p><p>打开内容一看，就是和我们的 index.js 里面是一样的内容！甚至还自己分析了语义，省去了不必要的代码</p><p>这就是 webpack 的基本功能 js 转换</p><h1 id="模式"><a href="#模式" class="headerlink" title="模式"></a>模式</h1><p>显然代码一般都有开发和部署两种状态，webpack 也有不同的对应代码</p><p>在配置中可以添加 mode 字段来指示 webpack 模式，有两种选择</p><ol><li>production，部署模式，默认</li><li>development，开发模式</li></ol><p>具体来说，打包出来的东西会有区别，比如刚才的代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> string = <span class="string">'hello'</span></span><br><span class="line"><span class="built_in">console</span>.log(string)</span><br></pre></td></tr></table></figure><p>在部署模式会被打包成上图样式</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"hello"</span>);</span><br></pre></td></tr></table></figure><p>在开发模式会打包成如下样式</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").</span></span><br><span class="line"><span class="comment"> * This devtool is not neither made for production nor for readable output files.</span></span><br><span class="line"><span class="comment"> * It uses "eval()" calls to create a separate source file in the browser devtools.</span></span><br><span class="line"><span class="comment"> * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)</span></span><br><span class="line"><span class="comment"> * or disable the default devtool with "devtool: false".</span></span><br><span class="line"><span class="comment"> * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/******/</span> (<span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="comment">// webpackBootstrap</span></span><br><span class="line"><span class="comment">/*!**********************!*\</span></span><br><span class="line"><span class="comment">  !*** ./src/index.js ***!</span></span><br><span class="line"><span class="comment">  \**********************/</span></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">"let string = 'hello'\r\nconsole.log(string)\n\n//# sourceURL=webpack://webpack-demo/./src/index.js?"</span>);</span><br><span class="line"><span class="comment">/******/</span> &#125;)()</span><br><span class="line">;</span><br></pre></td></tr></table></figure><p>多了很多不必要的代码，为了方便程序员查看</p><h1 id="输出哈希"><a href="#输出哈希" class="headerlink" title="输出哈希"></a>输出哈希</h1><p>从配置信息中可以看出，配置里不仅指示了入口文件，还指示了 output——输出文件的配置</p><p>上述配置中令输出文件夹命名为 dist，这也是大部分构建工具的配置</p><p>还指示了 filename，可以猜出是输出的 js 文件的文件名</p><p>在刚才尝试不同模式的构建中，我们已经发现不同的构建会覆盖旧有的文件，但输出文件名仍然是同一个</p><p>根据以前学习的浏览器缓存知识可以了解到，浏览器发现你在 html 文件中的连接 js 名称没变，那就会认为现在的页面还是使用原有的缓存，显然不利于页面的更新</p><p>于是我们要为新构建的 js 指定一个每次都不一样的名称</p><p>但是总不能手动配置吧？那也太烦了</p><p>还好 webpack 提供了 filename 模板</p><p>可以通过 <code>[name].[contenthash].js</code> 来指定随机的新 filename，其中的 contenthash 是依据文件内容进行哈希，也就是说只要文件内容有变化，新打包出来的文件一定不同名</p><p>让我们试试吧</p><p><img src="https://pic.ringoer.com/webpack-1-7.png" alt=""></p><p>更换了新配置之后发现生成了一个 main.xxxxx.js 文件！成功了！</p><h1 id="快捷构建"><a href="#快捷构建" class="headerlink" title="快捷构建"></a>快捷构建</h1><p>每次构建都产生一个不同名文件，虽然有利于浏览器更新，但是不利于本地……毕竟总不能每次都手动删除一下 dist 吧2333</p><p>这时候我们可以考虑修改 node 默认的配置</p><p>可以向 package.json 文件中的 scripts 字段加入如下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"webpack"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>与命令行不同，写在此处的命令可以不加 npx，默认是在本目录下查找</p><p>接下来我们运行 <code>npm run build</code> 就等同于运行 <code>npx webpack</code></p><p><img src="https://pic.ringoer.com/webpack-1-8.png" alt=""></p><p>于是我们就可以把 rm 语句也加进去</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"rm -rf ./dist &amp;&amp; webpack"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&amp;&amp; 表示前项执行成功才执行后项</p><p>现在就可以在运行 <code>npm run build</code> 的时候同时删除旧文件了</p><p>注：有的不能用 rm 命令的时候，可以用 rimraf 命令代替</p><h1 id="下集预告"><a href="#下集预告" class="headerlink" title="下集预告"></a>下集预告</h1><p>只有 js 怎么够？！我要完整的三剑客！</p><p><a href="https://ringoer.com/frontend/webpack-2/" target="_blank" rel="noopener">点我查看下集</a></p><hr><p>感谢阅读</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>框架模式之 MVC</title>
      <link href="/programing/mvc/"/>
      <url>/programing/mvc/</url>
      
        <content type="html"><![CDATA[<p>常听说 spring MVC，现在都发展到前端 MVC 了</p><a id="more"></a><hr><h1 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h1><p>经典 MVC 模式中，M 是指 Model 业务模型，V 是指 View 用户界面，C 则是 Controller 控制器</p><p>通常是为了使得代码模式固化，让代码复杂度相对稳定</p><h1 id="表现"><a href="#表现" class="headerlink" title="表现"></a>表现</h1><h2 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h2><p>比如在 spring 中，Model 通常包括 domain、mapper、dao 等三层，定义了对象模型以及对象对应的存取方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// domain</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    User()&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>.id;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span></span>&#123;<span class="keyword">this</span>.id=id;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// mapper</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span></span>&#123;</span><br><span class="line">    <span class="function">User <span class="title">selectUserById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// dap</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">selectUserById</span><span class="params">(Integer id)</span></span>&#123;<span class="keyword">return</span> userMapper.selectUserById(id);&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Controller 则是 controller 层 和 service 层，定义了数据接口和关于数据处理的业务方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// service</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserService</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">(Integer id)</span></span>&#123;<span class="keyword">return</span> ResponseUtil.ok(userDao.selectUserById(id));&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// controller</span></span><br><span class="line"><span class="meta">@RestController</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserController</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/info"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getUser</span><span class="params">(@RequestParam Integer userId)</span></span>&#123;<span class="keyword">return</span> userService.getUser(userId);&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>特别的，当 controller 的注解是 @RestController 的时候，仅作为数据接口</p><p>当注解是 @Controller 的时候，可以返回数据或页面，比如 thymeleaf 渲染的页面</p><p>这时候，返回页面的 controller 就是所谓的 View</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>(<span class="string">""</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserController</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/index"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> <span class="string">"index.html"</span>;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h2><p>而在前端中，一般不需要考虑与数据库的交互，数据来源一般都是后端提供的数据接口</p><p>这时候，Controller 就不需要提供数据接口，只需要访问，于是原本在后端分离开的 controller 和 service 就融合在了一起，负责提供业务方法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Controller = <span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        el: el,</span><br><span class="line">        init()&#123;</span><br><span class="line">model.bindEvents(el)</span><br><span class="line">        &#125;,</span><br><span class="line">        add(target,value)&#123;</span><br><span class="line">            model.data[target]+=value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Model 则是负责保存需要用到的用户数据，并为数据设置事件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Model = &#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">        n: <span class="number">100</span></span><br><span class="line">    &#125;,</span><br><span class="line">    events: &#123;</span><br><span class="line">        click: <span class="function"><span class="params">()</span>=&gt;</span><span class="built_in">console</span>.log(n)</span><br><span class="line">    &#125;,</span><br><span class="line">    bindEvents(el)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> <span class="keyword">this</span>.events)&#123;</span><br><span class="line">            el.addEventListener(key,<span class="keyword">this</span>.events[key])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>View 则是负责接收业务方法的信号，重新渲染页面，监听数据事件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> View = &#123;</span><br><span class="line">    html: <span class="string">`233&#123;&#123;n&#125;&#125;`</span>,</span><br><span class="line">    render(el)&#123; <span class="comment">// 被触发</span></span><br><span class="line">        html.replace(<span class="string">'&#123;&#123;n&#125;&#125;'</span>,model.data.n)</span><br><span class="line">        el.innerHTML=<span class="keyword">this</span>.html</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>于是又多了一个和后端不一样的地方——model 和 view 都要关注用户事件</p><p>所以前端 MVC 一般还有一个概念，就是 EventBus 事件总线</p><p>EventBus 提供一系列事件绑定、触发、解除等相关的方法，然后交由 Model 和 View 来调用</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> EventBus = &#123;</span><br><span class="line">    on(el, eventName, fn)&#123;</span><br><span class="line">        el.addEventListener(eventName,fn)</span><br><span class="line">    &#125;,</span><br><span class="line">    off(el, eventName, fn)&#123;</span><br><span class="line">        el.removeEventListener(eventName,fn)</span><br><span class="line">    &#125;,</span><br><span class="line">    trigger(el, eventName)&#123;</span><br><span class="line">        el.dispatchEvent(eventName)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是现在这些方法怎么转移使用呢？</p><p>基于 js 的特性，可以选择原型链继承或者类继承</p><p>此处可以选择类继承，让 Model、View、EventBus 都成为 class</p><p>然后 Model、View 都 extends EventBus，就可以拥有 EventBus 的所有方法</p><p>之后在使用的时候，声明一个该类的实例即可</p><h1 id="表驱动编程"><a href="#表驱动编程" class="headerlink" title="表驱动编程"></a>表驱动编程</h1><p>上述伪代码中，我们采用了遍历 model.events 的方法来为 events 里的每个键值对都执行绑定</p><p>实际上就是先为要绑定的列表作成一个哈希表，然后遍历这个表</p><p>基于这种方法的编程，代码复杂度恒定——无论增加多少个表项，都不需要修改绑定部分的业务代码</p><h1 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h1><p>其实 MVC 也就是一种模块化，毕竟代码分离了</p><p>模块化说到底就是为了方便维护各个部分的代码</p><p>比如同一个页面上有多块不同的功能，这时候我总不可以牵一发而动全身吧，那重构和渲染成本也太高了</p><p>这时候就可以选择在编程的时候模块化，使得代码耦合度降低，上层实现不直接依赖于底层架构</p><p>具体来说就是我们可以把页面上的每个不同功能的部分都应用一次 MVC 架构，这样每个部分都是直接依赖 MVC 提供的接口，而不关心内部的实现</p><p>就像前后端通信一样，只需要接口文档规定好，不需要调用者去关心接口内部是怎么写的</p><p>既然前后端分离的好处显而易见，那模块分离的好处，是不是也同理呢？</p><hr><p>感谢阅读</p>]]></content>
      
      
      <categories>
          
          <category> programing </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>百文纪念</title>
      <link href="/diary/20201212/"/>
      <url>/diary/20201212/</url>
      
        <content type="html"><![CDATA[<p>博客上写满 100 篇了，来点来点</p><a id="more"></a><p>在双十二之际写下这篇百文纪念</p><p>但是其实已经超过一百不少了</p><p>四舍五入就是二百文纪念（？）</p><p>这一百文见证了我从算法到后端到前端的转变</p><p>下一百文又有什么样的变化呢</p><p>楽しみだな</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>拆箱即用的 http 服务器</title>
      <link href="/programing/parcel/"/>
      <url>/programing/parcel/</url>
      
        <content type="html"><![CDATA[<p>有时候只是想走一下 http 访问，但是我不想特意写个后端！！！！</p><p>有没有什么好办法呢？</p><a id="more"></a><hr><p>那就是伟大的 parcel ！</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>通过以下命令即可安装 parcel</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g parcel-bundler</span><br></pre></td></tr></table></figure><h1 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h1><p>选择一个目录，在这里新建一个 index.html</p><p>写好 html 之后，在当前目录下启动 parcel</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parcel index.html -p 8080</span><br></pre></td></tr></table></figure><p>就会在 8080 端口（默认是 1234）启动 http 服务</p><p>不需要任何配置，非常好用。而 webpack 需要的配置太多了不适合快速开发</p><h1 id="热更新"><a href="#热更新" class="headerlink" title="热更新"></a>热更新</h1><p>parcel 还有更好用的一点——页面热更新！</p><p>但是要使用页面热更新，对 html 页面是有要求的</p><p>那就是 html 需要引入至少一个外联的 script 标签</p><p>外联的目标 script 可以是空的，但这个标签不能省略，否则不能热更新</p><p>好了，现在不论你修改的是 html，还是 html 外联的 css，都会在保存之后立刻重新编译然后渲染到页面上，不需要手动刷新页面了</p><h1 id="配置目录"><a href="#配置目录" class="headerlink" title="配置目录"></a>配置目录</h1><p>刚才说到了编译——其实 parcel 是会自动帮你打包的</p><p>比如现在目录下只有</p><ul><li>index.html</li><li>style.css</li><li>main.js</li></ul><p>启动了 parcel 之后，parcel 会自动把你的 html 以及外联的所有文件都组织起来，自己编码后打包成一个 dist 文件夹</p><p>现在开发目录下就变成了 3 个文件加上 1 个文件夹了</p><p>所以建议开发目录中，最好把静态文件都放在同一个文件夹中，按惯例命名为 src</p><p>目录结构就变成这样</p><ul><li>src<ul><li>index.html</li><li>style.css</li><li>main.js</li></ul></li><li>dist<ul><li>…</li></ul></li></ul><p>这样更有利于文件资源管理</p><h1 id="引用路径"><a href="#引用路径" class="headerlink" title="引用路径"></a>引用路径</h1><p>parcel 之所以会产生 dist 文件夹，就是因为它自己把资源编码了</p><p>这时候你的路径就不是原本的路径了</p><p>比如你通过 js 动态插入一个 img 标签，这个 img 的 src 是不能正确命中资源的</p><p>这时候你需要通过 js 的 import 语句来解决这个问题</p><hr><p>感谢阅读</p>]]></content>
      
      
      <categories>
          
          <category> programing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> http(s) </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>手把手教你做一个自己的导航首页</title>
      <link href="/frontend/navigation-page/"/>
      <url>/frontend/navigation-page/</url>
      
        <content type="html"><![CDATA[<p>拥有无限潜能的前端导航项目</p><a id="more"></a><hr><p>前端三件套，首先当然是——</p><p>搞什么开发，当然是先需求分析</p><h1 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h1><p>前端导航一般都有两个主要功能</p><ol><li>搜索</li><li>快捷标签页</li></ol><p>通过墨刀作图，可以得到如图原型图</p><p><img src="https://pic.ringoer.com/navigation-page-0.png" alt="产品原型图"></p><h1 id="页面结构"><a href="#页面结构" class="headerlink" title="页面结构"></a>页面结构</h1><p>得到产品原型图以后，分析一下页面的结构</p><p>首先能够确定的是两边留白，中间三行</p><p>大致就是 3x3 表格模样，特别适合 grid 布局</p><p>什么？兼容？想那么多干啥，先自己写出来，跑起来再说，2333</p><p>在 grid 布局中，用到中间一列，上部放置搜索框，中部放置标签页，下部放置授权标志</p><p>那大致可以得到如下 HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">main</span>&gt;</span><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>header 中包含两个组件，所以 header 应该写成如下模样</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"searchBox"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"keyword"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"search()"</span> <span class="attr">id</span>=<span class="string">"submit"</span>&gt;</span>搜索<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br></pre></td></tr></table></figure><p>main 中包含多个标签页，数量不确定，行数也不确定，所以标签页决定通过 js 动态插入</p><p>然后新增功能需要一个新增窗口，先画原型图</p><p><img src="https://pic.ringoer.com/navigation-page-1.png" alt="弹出页原型图"></p><p>可见弹出窗口也需要一些组件，且需要用户通过”添加”按钮提供控制</p><p>所以可得如下 main</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"tab"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"delete"</span> <span class="attr">onclick</span>=<span class="string">"cancel()"</span>&gt;</span>×<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>链接：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"url"</span> <span class="attr">placeholder</span>=<span class="string">"请输入链接"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>描述：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"desp"</span> <span class="attr">placeholder</span>=<span class="string">"请输入描述"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"insertCard()"</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br></pre></td></tr></table></figure><p>而 footer 的内容不是动态的，所以可以直接写死</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>© 2017 — 2020 ringoer.com 版权所有<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure><p>最后再引入对全文操作的 js 文件，可得全页面的 HTML 如下</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>导航<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"searchBox"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"keyword"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"search()"</span> <span class="attr">id</span>=<span class="string">"submit"</span>&gt;</span>搜索<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"tab"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"delete"</span> <span class="attr">onclick</span>=<span class="string">"cancel()"</span>&gt;</span>×<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>链接：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"url"</span> <span class="attr">placeholder</span>=<span class="string">"请输入链接"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>描述：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"desp"</span> <span class="attr">placeholder</span>=<span class="string">"请输入描述"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"insertCard()"</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>© 2017 — 2020 ringoer.com 版权所有<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>接下来开始写CSS</p><h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><h2 id="全局初始化"><a href="#全局初始化" class="headerlink" title="全局初始化"></a>全局初始化</h2><p>先 fix 一下默认的样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后为 body 选择一个合适的灰色</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f0f0f0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h2><p>然后就是定位了</p><ol><li>大小，显然要占满全屏，100vh 和 100vw 安排上</li><li>滚动条肯定不给左右给上下，overflow 安排</li><li>说好的 3x3 布局，grid 安排</li></ol><p>可以得到如下 CSS</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.app</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100vw</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden auto;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">8</span>fr <span class="number">1</span>fr;</span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="number">100px</span> <span class="number">1</span>fr <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">grid-template-areas</span>: </span><br><span class="line">  <span class="string">". header ."</span></span><br><span class="line">  <span class="string">". main ."</span></span><br><span class="line">  <span class="string">". footer ."</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后 app 里的 header main footer 都是要做居中的，3 个flex 安排上</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.app</span>&gt;*&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来给三个块分配 grid 空间</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">header</span>&#123;</span><br><span class="line">  <span class="attribute">grid-area</span>: header;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">main</span>&#123;</span><br><span class="line">  <span class="attribute">grid-area</span>: main;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">footer</span>&#123;</span><br><span class="line">  <span class="attribute">grid-area</span>: footer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后先来做 header 吧</p><h2 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h2><p>header 包含两个框，输入和按钮，并且还要居中</p><p>所以决定用一个 div 包住这两个，然后把 div 居中，里面一左一右摆放</p><p>先做个定宽居中 div</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.searchBox</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">800px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>之所以这里不用写居中，是因为容器 header 已经定义了 flex 居中了</p><p>然后写搜索框宽度，显然这个是自适应的</p><p>那么反过来，先决定 button 的样式</p><p>首先让 button 宽 80px 吧</p><button style="width: 80px">搜索</button><p>然后为了 button 好看，一般会给 padding</p><button style="width: 80px; padding: 8px 12px;">搜索</button><p>接下来背景色给个浅蓝色吧，同时字给白色（为了看得见）</p><button style="width: 80px; padding: 8px 12px;background-color: cornflowerblue;color:white;">搜索</button><p>这边框好丑，我要给白边加圆角</p><button style="width: 80px; padding: 8px 12px;background-color: cornflowerblue;color:white;border: 1px solid #ccc;border-radius: 4px;">搜索</button><p>现在就还挺好看的</p><p>然后给一下上下 margin，以及为了同行显示的 inline-block，可以得到如下 CSS</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#submit</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">background-color</span>: cornflowerblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>再来做一个搜索框</p><p>首先给个 padding 让字显示位置不要那么贴边</p><p>然后再和 button 一样弄好看点</p><p>最后再弄个计算宽度来自适应</p><p>可以得到如下 CSS</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#keyword</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(100% - 100px);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>搜索就做好了！</p><h2 id="主容器"><a href="#主容器" class="headerlink" title="主容器"></a>主容器</h2><p>首先要让弹窗不能影响我们的布局，于是把弹窗显示去掉</p><p>display: none; 即可去除</p><p>之所以选用 display none，是因为它不会渲染到页面上</p><p>而 visibility hidden 虽然不保留事件，但还是会渲染到页面上占据空间</p><p>opacity 更离谱，事件都还留着</p><p>然后开始做主容器内容</p><p>显然主容器的每列是平均布局，有多列</p><p>多列适合 flex column，但是平均布局不能用 space-between，否则空间分配会失常</p><p>所以先得到容器样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">1200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来每一个标签页，都有自己的一张卡片一样的样式</p><p>在卡片中，也有 logo、description、叉叉等三部分内容</p><p>其中叉叉是绝对定位在右上角的，前两个则是纵向居中排列在卡片中</p><p>可以得到卡片样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">160px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">1px</span> black;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里给 margin 预留了足够位置，所以不需要使用 负 margin 法 来平衡</p><p>然后给叉叉定位</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.delete</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>因为平时没选中的时候是看不见叉叉的，所以 visibility: hidden;</p><p>然后定义 logo 样式，此处我使用文本而不是矢量图</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.logo</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">80px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>慢着，描述变长的时候，描述怎么换行了？</p><p>给描述上一个不许换行的样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.desp</span>&#123;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来定义选中卡片的时候的行为</p><p>显然选中的行为一般都是变大或者上浮，此处选择上浮</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-10px);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上浮不能太突兀，给卡片加个过渡动画吧</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card</span>&#123;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当选中的时候，叉叉也要能看到才对</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.delete</span>&#123;</span><br><span class="line">  <span class="attribute">visibility</span>: visible;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是这时候，点叉叉还是点不到，怎么回事呢？因为叉叉浮起不够高，点到别的了！</p><p>让叉叉浮起来</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.delete</span>&#123;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OK，主容器部分做好了</p><h2 id="弹窗"><a href="#弹窗" class="headerlink" title="弹窗"></a>弹窗</h2><p>弹窗有几个要点</p><ol><li>绝对定位在视口中央</li><li>三列内容，纵向居中排列，加一个叉</li><li>当它显示时，按键等级（层叠上下文）要比主页高</li></ol><p>于是可以得到如下 CSS</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#tab</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">  <span class="comment">/* display: flex; */</span></span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">1px</span> black;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-50%,-50%);</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>至于 z-index 为什么是 1 呢？</p><p>因为我们刚才给 container 里的 card 里的 delete 赋值了 z-index=1，所以导致 container 的层级也升高了，所以这时候 tab 的 z-index 要不低于 container，才能浮在 container 上方</p><p>接下来为了方便布局，让所有内部子元素都以块级元素形式显示，并设置上下边距</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#tab</span>&gt;*&#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>tab 里的 delete 和 card 里的不一样，默认是显示的</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#tab</span>&gt;<span class="selector-class">.delete</span>&#123;</span><br><span class="line">  <span class="attribute">visibility</span>: visible;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>再修整一下 tab 里元素的样式，弄好看点</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#url</span>,<span class="selector-id">#desp</span>&#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#tab</span>&gt;<span class="selector-tag">button</span>&#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#0381aa</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#00a7de</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="响应式"><a href="#响应式" class="headerlink" title="响应式"></a>响应式</h2><p>我们刚才都是以 PC 端为基准开发的，现在要支持移动端，怎么办呢？</p><p>答案就是一个媒体查询就完事了</p><p>分析可得在移动端，容器的 3x3 布局变为 1x3 布局，card 也最多只能排列下两个</p><p>所以可得 CSS</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">media</span> (max-width: <span class="number">600px</span>)&#123;</span><br><span class="line">  <span class="selector-class">.app</span>&#123;</span><br><span class="line">    <span class="attribute">grid-template-areas</span>: </span><br><span class="line">    <span class="string">"header header header"</span></span><br><span class="line">    <span class="string">"main main main"</span></span><br><span class="line">    <span class="string">"footer footer footer"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.card</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">35vw</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">28vw</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">3vw</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.logo</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">60px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>响应式这样就完成了，不错吧？</p><h1 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h1><p>基本的骨架弄好了，现在要赋予这个项目血肉</p><h2 id="搜索-1"><a href="#搜索-1" class="headerlink" title="搜索"></a>搜索</h2><p>从上到下，第一个就是搜索</p><p>很简单，只要研究一下百度的搜索格式就可以了</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">search</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> baseUrl = <span class="string">'https://www.baidu.com/s?ie=UTF-8&amp;wd='</span></span><br><span class="line">  <span class="keyword">let</span> keyword = <span class="built_in">document</span>.querySelector(<span class="string">'#keyword'</span>).value</span><br><span class="line">  keyword = keyword.replaceAll(<span class="string">' '</span>, <span class="string">'%20'</span>)</span><br><span class="line">  <span class="built_in">window</span>.open(baseUrl + keyword)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意搜索中要改一下默认的 http 字符转义问题，一般是空格转换成 %20 就行了</p><h2 id="标签页渲染"><a href="#标签页渲染" class="headerlink" title="标签页渲染"></a>标签页渲染</h2><p>然后是最重要的标签页渲染的功能</p><p>为了体现效果，此处先多搞几个重复的标签页</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> base_navs = [&#123; <span class="string">'href'</span>: <span class="string">'https://ringoer.com'</span>, <span class="string">'desp'</span>: <span class="string">'Ringoer\'s Site'</span>, <span class="string">'logo'</span>: <span class="string">'R'</span> &#125;,</span><br><span class="line">&#123; <span class="string">'href'</span>: <span class="string">'https://baidu.com'</span>, <span class="string">'desp'</span>: <span class="string">'百度'</span>, <span class="string">'logo'</span>: <span class="string">'B'</span> &#125;,</span><br><span class="line">&#123; <span class="string">'href'</span>: <span class="string">'https://baidu.com'</span>, <span class="string">'desp'</span>: <span class="string">'百度'</span>, <span class="string">'logo'</span>: <span class="string">'B'</span> &#125;,</span><br><span class="line">&#123; <span class="string">'href'</span>: <span class="string">'https://baidu.com'</span>, <span class="string">'desp'</span>: <span class="string">'百度'</span>, <span class="string">'logo'</span>: <span class="string">'B'</span> &#125;,</span><br><span class="line">&#123; <span class="string">'href'</span>: <span class="string">'https://baidu.com'</span>, <span class="string">'desp'</span>: <span class="string">'百度'</span>, <span class="string">'logo'</span>: <span class="string">'B'</span> &#125;,</span><br><span class="line">&#123; <span class="string">'href'</span>: <span class="string">'https://baidu.com'</span>, <span class="string">'desp'</span>: <span class="string">'百度'</span>, <span class="string">'logo'</span>: <span class="string">'B'</span> &#125;,</span><br><span class="line">&#123; <span class="string">'href'</span>: <span class="string">'https://baidu.com'</span>, <span class="string">'desp'</span>: <span class="string">'百度'</span>, <span class="string">'logo'</span>: <span class="string">'B'</span> &#125;,</span><br><span class="line">&#123; <span class="string">'href'</span>: <span class="string">'https://baidu.com'</span>, <span class="string">'desp'</span>: <span class="string">'百度'</span>, <span class="string">'logo'</span>: <span class="string">'B'</span> &#125;,</span><br><span class="line">&#123; <span class="string">'href'</span>: <span class="string">'https://baidu.com'</span>, <span class="string">'desp'</span>: <span class="string">'百度'</span>, <span class="string">'logo'</span>: <span class="string">'B'</span> &#125;,</span><br><span class="line">&#123; <span class="string">'href'</span>: <span class="string">'https://baidu.com'</span>, <span class="string">'desp'</span>: <span class="string">'百度'</span>, <span class="string">'logo'</span>: <span class="string">'B'</span> &#125;,</span><br><span class="line">&#123; <span class="string">'href'</span>: <span class="string">'https://baidu.com'</span>, <span class="string">'desp'</span>: <span class="string">'百度'</span>, <span class="string">'logo'</span>: <span class="string">'B'</span> &#125;,</span><br><span class="line">&#123; <span class="string">'href'</span>: <span class="string">'https://baidu.com'</span>, <span class="string">'desp'</span>: <span class="string">'百度'</span>, <span class="string">'logo'</span>: <span class="string">'B'</span> &#125;,</span><br><span class="line">&#123; <span class="string">'href'</span>: <span class="string">'https://baidu.com'</span>, <span class="string">'desp'</span>: <span class="string">'百度'</span>, <span class="string">'logo'</span>: <span class="string">'B'</span> &#125;,]</span><br></pre></td></tr></table></figure><p>接下来，渲染到页面上</p><p>首先读取列表里的每个项目</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> container = <span class="built_in">document</span>.querySelector(<span class="string">'.container'</span>)</span><br><span class="line">container.innerHTML = <span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; navList.length; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> nav = navList[i]</span><br><span class="line">    container.appendChild(createCard(i, nav.href, nav.desp, nav.logo))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后在最后加上”添加”标签页</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">container.appendChild(createCard(navList.length, <span class="string">'/'</span>, <span class="string">'添加'</span>, <span class="string">'+'</span>))</span><br></pre></td></tr></table></figure><p>逻辑就完成了</p><p>那么来看看 createCard 方法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createCard</span>(<span class="params">i, href, desp, logo</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> card = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>)</span><br><span class="line">  card.className = <span class="string">'card'</span></span><br><span class="line">  card.addEventListener(<span class="string">'click'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (logo === <span class="string">'+'</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> tab = <span class="built_in">document</span>.querySelector(<span class="string">'#tab'</span>)</span><br><span class="line">      tab.style.display = <span class="string">'flex'</span>;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">window</span>.open(href)</span><br><span class="line">  &#125;, <span class="literal">false</span>)</span><br><span class="line">  <span class="keyword">if</span> (logo === <span class="string">'+'</span>) &#123;</span><br><span class="line">    card.innerHTML = <span class="string">'&lt;div class="logo"&gt;'</span> + logo + <span class="string">'&lt;/div&gt;'</span> +</span><br><span class="line">      <span class="string">'&lt;div class="desp"&gt;'</span> + desp + <span class="string">'&lt;/div&gt;'</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    card.innerHTML = <span class="string">'&lt;div class="delete" onclick="deleteCard('</span> + i.toString() + <span class="string">',event)"&gt;×&lt;/div&gt;'</span> +</span><br><span class="line">      <span class="string">'&lt;div class="logo"&gt;'</span> + logo + <span class="string">'&lt;/div&gt;'</span> +</span><br><span class="line">      <span class="string">'&lt;div class="desp"&gt;'</span> + desp + <span class="string">'&lt;/div&gt;'</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> card</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>先动态创建 card，然后根据是不是”添加”标签页，来动态绑定事件并插入子元素，最后返回 card</p><p>为了可以正常打开 tab 页，”添加”标签页的 click 事件让 tab 页的 display 从 none 变成了 flex，就可以显示了</p><p>可以看到里面提及了 delete 按钮拥有的 delete 事件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteCard</span>(<span class="params">i, event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ans = confirm(<span class="string">'确定要删除这个标签吗？'</span>)</span><br><span class="line">  <span class="keyword">if</span> (ans) &#123;</span><br><span class="line">    navList.splice(i, <span class="number">1</span>)</span><br><span class="line">    draw()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  event.stopPropagation()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里一定要阻止冒泡，否则事件一旦冒泡，就会触发 card 的点击事件，导致虽然删除了 card，但是发生了跳转</p><p>这时候发现，我刷新一下怎么就重置了？？</p><p>所以要保存用户使用数据</p><p>为了方便起见，这里保存到 localStorage</p><p>在初始化的时候先读取内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> navList = <span class="built_in">JSON</span>.parse(localStorage.getItem(<span class="string">'navList'</span>))</span><br><span class="line"><span class="keyword">if</span> (!navList) &#123;</span><br><span class="line">  navList = base_navs</span><br><span class="line">&#125;</span><br><span class="line">draw()</span><br></pre></td></tr></table></figure><p>然后在每次渲染之后都存数据</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">localStorage.setItem(<span class="string">'navList'</span>, <span class="built_in">JSON</span>.stringify(navList))</span><br></pre></td></tr></table></figure><p>这样就可以得到完整的 draw 方法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> container = <span class="built_in">document</span>.querySelector(<span class="string">'.container'</span>)</span><br><span class="line">  container.innerHTML = <span class="string">''</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; navList.length; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> nav = navList[i]</span><br><span class="line">    container.appendChild(createCard(i, nav.href, nav.desp, nav.logo))</span><br><span class="line">  &#125;</span><br><span class="line">  container.appendChild(createCard(navList.length, <span class="string">'/'</span>, <span class="string">'添加'</span>, <span class="string">'+'</span>))</span><br><span class="line">  localStorage.setItem(<span class="string">'navList'</span>, <span class="built_in">JSON</span>.stringify(navList))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样渲染功能也大功告成了！</p><h2 id="新增"><a href="#新增" class="headerlink" title="新增"></a>新增</h2><p>最后是 tab 页提供的新增功能</p><p>分析需求可得</p><ol><li>只允许 http 或 https 开头的 url</li><li>取 url 去掉协议后的第一个字符作为 logo</li><li>渲染到最后一个，但还在”添加”标签页之前</li></ol><p>于是可得如下 js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertCard</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> url = <span class="built_in">document</span>.querySelector(<span class="string">'#url'</span>).value</span><br><span class="line">  <span class="keyword">let</span> desp = <span class="built_in">document</span>.querySelector(<span class="string">'#desp'</span>).value</span><br><span class="line">  <span class="keyword">if</span> (!url.match(<span class="string">'[http|https]://*'</span>)) &#123;</span><br><span class="line">    alert(<span class="string">'请输入包含http或https的链接格式！'</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> tab = <span class="built_in">document</span>.querySelector(<span class="string">'#tab'</span>)</span><br><span class="line">    tab.style.display = <span class="string">'none'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> logo = (url.split(<span class="string">'//'</span>)[<span class="number">1</span>])[<span class="number">0</span>].toUpperCase()</span><br><span class="line"></span><br><span class="line">  navList.push(<span class="built_in">JSON</span>.parse(<span class="string">'&#123; "href": "'</span> + url + <span class="string">'", "desp": "'</span> + desp + <span class="string">'", "logo": "'</span> + logo + <span class="string">'" &#125;'</span>))</span><br><span class="line"></span><br><span class="line">  draw()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这是主要功能，但是这个 tab 页还得支持关闭呀</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cancel</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> tab = <span class="built_in">document</span>.querySelector(<span class="string">'#tab'</span>)</span><br><span class="line">  tab.style.display = <span class="string">'none'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重新 none 就好了</p><p>ok，运行试试吧，这就是你的前端导航项目</p><h1 id="改进"><a href="#改进" class="headerlink" title="改进"></a>改进</h1><p>其实简单的项目还有很多值得改进的地方</p><p>比如我这个写法，并没有完美复刻设计图</p><p>大致有以下改进点</p><ol><li>完美复刻设计图</li><li>改用 vue 或 react 做这个项目</li><li>支持用户在线保存设置</li><li>改善 logo，支持图片</li></ol><p>以上点就够喝一壶了2333</p><p>那就到这里了</p><hr><p>感谢阅读</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> project </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>同源策略与跨域方案</title>
      <link href="/frontend/cross-domain/"/>
      <url>/frontend/cross-domain/</url>
      
        <content type="html"><![CDATA[<p>有时候浏览器的 ajax 请求不能正常拉取到别的站点的数据，这是为什么呢？</p><a id="more"></a><hr><h1 id="同源策略"><a href="#同源策略" class="headerlink" title="同源策略"></a>同源策略</h1><p>为了阻止一些低成本的跨站攻击，浏览器采取了同源策略</p><p>同源策略要求 3 个标准都要完全一致</p><ol><li>协议</li><li>域名</li><li>端口</li></ol><p>三个只要有任何一个不一致，那就认为不是同源，这时候的请求虽然能成功发到目标服务器，但并不能取得数据，因为数据被浏览器扣留了</p><p>举几个例子（http 默认地址是 80 端口，https 是 443，此时写与不写并无区别）</p><table><thead><tr><th>站点 A</th><th>站点 B</th><th>是否同源</th></tr></thead><tbody><tr><td><a href="http://ringoer.com/" target="_blank" rel="noopener">http://ringoer.com/</a></td><td><a href="https://ringoer.com/" target="_blank" rel="noopener">https://ringoer.com/</a></td><td>否，协议不同</td></tr><tr><td><a href="https://www.ringoer.com/" target="_blank" rel="noopener">https://www.ringoer.com/</a></td><td><a href="https://ringoer.com/" target="_blank" rel="noopener">https://ringoer.com/</a></td><td>否，域名不同</td></tr><tr><td><a href="https://ringoer.com:12450/" target="_blank" rel="noopener">https://ringoer.com:12450/</a></td><td><a href="https://ringoer.com/" target="_blank" rel="noopener">https://ringoer.com/</a></td><td>否，端口不同</td></tr><tr><td><a href="https://ringoer.com/archives/" target="_blank" rel="noopener">https://ringoer.com/archives/</a></td><td><a href="https://ringoer.com/tags/index.html" target="_blank" rel="noopener">https://ringoer.com/tags/index.html</a></td><td>是</td></tr></tbody></table><p>同源又称之为”同一个域”（不是域名）</p><h1 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h1><p>但有的时候不得不跨站请求数据，比如前后端分离的时候，服务器地址往往和前端地址不一样</p><p>为了解决同源策略带来的限制，提出了跨域方案</p><p>常用的跨域方案有 JSONP 跨域和 CORS 跨域，还有一些其它的基于 iframe 的跨域，此处不介绍</p><h1 id="JSONP-跨域"><a href="#JSONP-跨域" class="headerlink" title="JSONP 跨域"></a>JSONP 跨域</h1><p>JSONP 跨域是在 IE 上的一种妥协</p><p>主要原理是利用 js 脚本可以任意引用，从而在 A 站与 B 站达成协议的情况下，B 站直接在 js 脚本里包藏数据，A 站直接引用这个脚本</p><p>但是 A 站引用后也不能直接看到脚本内容，所以通常采用的方式是 A 站预定义一个数据处理方法，B 站在脚本中直接调用该方法并传入数据</p><p>同时一般为了保持隐秘性，会让每次的数据处理方法名都不一样</p><p>一个 JSONP 实例如下</p><p>首先准备两台服务器模拟 A 站和 B 站</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">var</span> ringoer = express();</span><br><span class="line"></span><br><span class="line">ringoer.get(<span class="string">'/'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.sendFile(__dirname + <span class="string">'/index.html'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> serverringoer = ringoer.listen(<span class="number">9999</span>, () =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> host = serverringoer.address().address;</span><br><span class="line">  <span class="keyword">var</span> port = serverringoer.address().port;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"启动于 http://%s:%s"</span>, host, port);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.sendFile(__dirname + <span class="string">'/index.html'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.get(<span class="string">'/friends.json'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.sendFile(__dirname + <span class="string">'/friends.json'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.get(<span class="string">'/friends.js'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> str = fs.readFileSync(<span class="string">'friends.js'</span>).toString()</span><br><span class="line">  <span class="keyword">let</span> json = fs.readFileSync(<span class="string">'friends.json'</span>).toString()</span><br><span class="line">  <span class="keyword">let</span> random = req.query.callback</span><br><span class="line">  str = str.replace(<span class="string">'&#123;&#123;callback&#125;&#125;'</span>, random.toString())</span><br><span class="line">    .replace(<span class="string">`'&#123;&#123;data&#125;&#125;'`</span>, json)</span><br><span class="line">  <span class="built_in">console</span>.log(str)</span><br><span class="line">  res.send(str);</span><br><span class="line">&#125;);</span><br><span class="line">app.get(<span class="string">'/static/*'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.sendFile(__dirname + req.path);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8888</span>, () =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> host = server.address().address;</span><br><span class="line">  <span class="keyword">var</span> port = server.address().port;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"启动于 http://%s:%s"</span>, host, port);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>然后准备一个 html 用于显示 A 站的页面，请求 B 站的数据</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span>点我发请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"data"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    test.onclick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> random = <span class="built_in">Math</span>.random().toString()</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>)</span></span><br><span class="line"><span class="javascript">      script.src = <span class="string">'http://qq.com:8888/friends.js?callback='</span> + random</span></span><br><span class="line"><span class="javascript">      <span class="built_in">window</span>[random] = <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        data.innerHTML = <span class="built_in">JSON</span>.stringify(res)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.body.appendChild(script)</span></span><br><span class="line"><span class="javascript">      script.onload = <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="undefined">        script.remove()</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>html 里的内部 js 定义了一个随机函数，函数的效果是将字符串塞进显示区域内</p><p>同时定义了 script 标签取回后的动作，是执行取回的 js 后（默认动作），移除自身这个标签</p><p>再准备一个 friend.js 用于给 B 站返回</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>[<span class="string">'&#123;&#123;callback&#125;&#125;'</span>](</span><br><span class="line">  <span class="string">'&#123;&#123;data&#125;&#125;'</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>该代码执行一个函数，传入指定的数据</p><p>这里是保留两个占位符，用服务器取得的请求参数（B 站代码的第 15 行）和数据库里取回的数据来填充</p><p>所以还要再写一个 json 用来临时顶替数据库保存数据</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"ringoer"</span>,</span><br><span class="line">    <span class="attr">"age"</span>: <span class="number">20</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"enatsu"</span>,</span><br><span class="line">    <span class="attr">"age"</span>: <span class="number">20</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>先设置一下本地的 hosts 文件改变寻址，再启动两台服务器，访问 A 站的首页并点击按键发送请求，就可以看到原本不能取得的数据被打印在了 A 站首页的内容区域</p><h1 id="CORS-跨域"><a href="#CORS-跨域" class="headerlink" title="CORS 跨域"></a>CORS 跨域</h1><p>CORS 跨域是利用 Access-Control-Allow-Origin 的请求头，来设置跨域允许</p><p>该请求头一般是在服务端处理请求，要回送响应的时候，设置在响应包中</p><p>该请求头的值可以是星号表示允许所有跨域，也可以是由分号分隔的域名列表</p><p>一个 CORS 实例如下</p><p>首先准备两台服务器模拟 A 站和 B 站</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> ringoer = express();</span><br><span class="line"></span><br><span class="line">ringoer.get(<span class="string">'/'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.sendFile(__dirname + <span class="string">'/index.html'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> serverringoer = ringoer.listen(<span class="number">9999</span>, () =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> host = serverringoer.address().address;</span><br><span class="line">  <span class="keyword">var</span> port = serverringoer.address().port;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"启动于 http://%s:%s"</span>, host, port);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.sendFile(__dirname + <span class="string">'/index.html'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.get(<span class="string">'/friends.json'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.setHeader(<span class="string">'Access-Control-Allow-Origin'</span>, <span class="string">'http://enatsu.com:9999'</span>)</span><br><span class="line">  res.sendFile(__dirname + <span class="string">'/friends.json'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.get(<span class="string">'/static/*'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.sendFile(__dirname + req.path);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8888</span>, () =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> host = server.address().address;</span><br><span class="line">  <span class="keyword">var</span> port = server.address().port;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"启动于 http://%s:%s"</span>, host, port);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>然后准备一个 html 用于显示 A 站的页面，请求 B 站的数据</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"static/style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span>点我发请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"data"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    test.onclick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="javascript">      xhr.open(<span class="string">'GET'</span>, <span class="string">'http://qq.com:8888/friends.json'</span>)</span></span><br><span class="line"><span class="javascript">      xhr.onreadystatechange = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="undefined">          data.innerText = xhr.response</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">      xhr.send()</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>html 里的内部 js 定义了一个 ajax，并规定当 ajax 返回数据时，填充数据到内容区域</p><p>再准备一个 friend.json 用于给 B 站返回</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"ringoer"</span>,</span><br><span class="line">    <span class="attr">"age"</span>: <span class="number">20</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"enatsu"</span>,</span><br><span class="line">    <span class="attr">"age"</span>: <span class="number">20</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>先设置一下本地的 hosts 文件改变寻址，再启动两台服务器，访问 A 站的首页并点击按键发送请求，就可以看到数据成功填充，并且控制台的请求包有 ‘Access-Control-Allow-Origin’ 字段</p><h1 id="简单请求和非简单请求"><a href="#简单请求和非简单请求" class="headerlink" title="简单请求和非简单请求"></a>简单请求和非简单请求</h1><p>但是刚刚的 CORS 跨域只是最简单的 CORS 跨域，其实 CORS 跨域还有很多限制</p><p>浏览器将CORS请求分成两类：简单请求和非简单请求</p><p>只要同时满足以下两大条件，就属于简单请求</p><ol><li><p>请求方法是以下三种方法之一</p><ul><li>HEAD</li><li>GET</li><li>POST</li></ul><p>刚才的例子中我们采用的就是 GET 方法</p></li><li><p>HTTP 请求包的头部不含有除以下字段外的其它字段</p><ul><li><p>Accept</p></li><li><p>Accept-Language</p></li><li><p>Content-Language</p></li><li><p>Last-Event-ID</p></li><li><p>Content-Type，只能是空或以下三种之一</p><ul><li>application/x-www-form-urlencoded</li><li>multipart/form-data</li><li>text/plain</li></ul><p>可见 application/json 请求是不行的</p></li></ul></li></ol><p>这是为了兼容表单，因为历史上表单一直可以发出跨域请求</p><p>ajax 的跨域设计就是，只要表单可以发，ajax 就可以直接发</p><p>说是上面那么说，其实实际开发的时候谁记得住（</p><p>只要记得把 Chrome 开发者工具的 Disable cache 开了，然后看看请求有没有发个 options 预检就行了</p><p>如果后端没有配置的话，任何非简单请求都不会被放行</p><h1 id="简单请求"><a href="#简单请求" class="headerlink" title="简单请求"></a>简单请求</h1><p>对于简单请求，浏览器会在请求包中增加一个 Origin 字段，然后直接发出 CORS 请求</p><p>如果 Origin 指定的源不在许可范围内，服务器就会返回一个正常的 HTTP 响应，浏览器发现响应包中没有 Access-Control-Allow-Origin 字段，就会抛出一个错误</p><p>如果成功返回了，浏览器得到的响应可能会多出几个字段</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: http://enatsu.com</span><br><span class="line">Access-Control-Allow-Credentials: true</span><br><span class="line">Access-Control-Expose-Headers: Authorization</span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br></pre></td></tr></table></figure><p>其中前三个都是和 CORS 高度相关的头部，且第一个和第四个是一定会出现的头部</p><h2 id="Access-Control-Allow-Origin"><a href="#Access-Control-Allow-Origin" class="headerlink" title="Access-Control-Allow-Origin"></a>Access-Control-Allow-Origin</h2><p>如果 CORS 成功返回，则该字段只能是两种情况之一</p><ol><li>星号，表示允许所有跨域</li><li>与请求中 Origin 字段相同</li></ol><h2 id="Access-Control-Allow-Credentials"><a href="#Access-Control-Allow-Credentials" class="headerlink" title="Access-Control-Allow-Credentials"></a>Access-Control-Allow-Credentials</h2><p>浏览器在 CORS 请求中默认是不发送 Cookie 的</p><p>如果服务器允许该源的 CORS 请求发送 Cookie，将该字段设为 true 即可</p><p>该字段不能设为 false，如果想设为 false，可以直接删除该字段</p><h2 id="Access-Control-Expose-Headers"><a href="#Access-Control-Expose-Headers" class="headerlink" title="Access-Control-Expose-Headers"></a>Access-Control-Expose-Headers</h2><p>浏览器在 CORS 请求中，响应包的默认头部一般只有以下 6 个基本字段</p><ol><li>Cache-Control</li><li>Content-Language</li><li>Content-Type</li><li>Expires</li><li>Last-Modified</li><li>Pragma</li></ol><p>但是看到 Etag 什么的也别惊讶，毕竟实际开发不能认死理对吧</p><p>如果需要让浏览器拿到其它字段，服务器必须设置该字段的值</p><p>比如上例中设置该字段的值为 Authorization，则浏览器就可以从响应头部中取得字段 Authorization 的值</p><h2 id="Content-Type"><a href="#Content-Type" class="headerlink" title="Content-Type"></a>Content-Type</h2><p>该字段取值取决于返回的数据类型，不解释了</p><h2 id="withCredentials"><a href="#withCredentials" class="headerlink" title="withCredentials"></a>withCredentials</h2><p>刚才说到浏览器在 CORS 请求中默认是不发送 Cookie 的，如果有这个需求，应该由服务器设置 Access-Control-Allow-Credentials 为 true</p><p>但其实这样还不够，原则上来说，不止服务端要同意，前端也要主动设置 XMLHTTPRequest 的 withCredentials 为 true，否则即使服务器同意，前端也不会发送 Cookie</p><p>但是呢，还是有的浏览器搞特殊，不设也会发，所以刚才只是说原则上是这样，2333</p><p>除了这两个要求之外，当有跨域 Cookie 需求的时候，Access-Control-Allow-Origin 的值也不能是星号，必须是具体值</p><h1 id="非简单请求"><a href="#非简单请求" class="headerlink" title="非简单请求"></a>非简单请求</h1><p>当你请求动词是 PUT、DELETE 之类的时候，或者 Content-Type 是 application/json 的时候，就是非简单请求</p><p>非简单请求的CORS请求，会在正式通信之前，增加一次HTTP查询请求，称为”预检”请求（preflight）</p><h2 id="预检请求"><a href="#预检请求" class="headerlink" title="预检请求"></a>预检请求</h2><p>浏览器会先向目标服务器发送一个 OPTIONS 请求，询问服务器当前域名是否被许可，以及允许哪些 HTTP 动词和头部字段</p><p>预检请求除了请求方法是 OPTIONS 之外，还包含三个关键字段</p><ol><li>Origin，表示请求源</li><li>Access-Control-Request-Method，表示浏览器会用到哪些 HTTP 请求动词</li><li>Access-Control-Request-Headers，表示浏览器会发送哪些简单请求之外的头部字段，用逗号隔开</li></ol><p>上述前两个字段都是必须给出的</p><h2 id="预检请求的响应"><a href="#预检请求的响应" class="headerlink" title="预检请求的响应"></a>预检请求的响应</h2><p>服务器确认了上述三个字段的值之后，就会做出响应</p><p>如果服务器拒绝响应，会返回一个正常的 HTTP 响应，但是没有任何头部字段，浏览器就会认为服务器拒绝了跨域预检申请，此时会触发 ajax 或 XMLHttpRequest 的 error 事件</p><p>如果服务器同意了预检请求，就会在返回的响应包中加入一些特殊的头部字段，一般有以下 4 种</p><ol><li><p>Access-Control-Allow-Methods，指示服务器接受哪些 HTTP 方法，必须</p></li><li><p>Access-Control-Allow-Headers，指示服务器允许的头部字段</p><p>如果请求中包含 Access-Control-Request-Headers 字段，则响应中该字段是必须的</p></li><li><p>Access-Control-Allow-Credentials，指示是否允许跨域 Cookie，与简单请求中相同</p></li><li><p>Access-Control-Max-Age，指示当前预检请求的有效期，单位为秒，在有效期内不需要再次发出第二次预检请求</p></li></ol><h2 id="预检请求之后"><a href="#预检请求之后" class="headerlink" title="预检请求之后"></a>预检请求之后</h2><p>即便通过了预检，浏览器和服务器之间的交互还是存在间隙，不能像真同源一样通信</p><p>具体表现在浏览器会在每条请求中都加入 Origin 字段，服务器则会在每条响应中都加入 Access-Control-Allow-Origin 字段</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>CORS 跨域，功能更强大，但是细节更复杂，需要开发者盯紧开发者工具，并且和后端的同学协调好（但是也便于甩锅2333</p><p>JSONP 跨域只支持 GET 方法，但是支持旧时代的浏览器（比如 IE），以及向某些达成合意但是因为某些原因不支持 CORS 的网站发送跨域请求</p><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener">跨域资源共享 CORS 详解</a></p><hr><p>感谢阅读</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> browser </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>异步回调与Promise</title>
      <link href="/frontend/promise/"/>
      <url>/frontend/promise/</url>
      
        <content type="html"><![CDATA[<p>在 ajax 中，我们提到了 Promise 式封装</p><p>那么什么是 Promise 呢？</p><a id="more"></a><p>首先要来介绍一下什么是异步回调</p><p>我们在计算机网络中学过通信方式一般有三种：全双工、半双工、单工</p><p>最理想的方式当然是全双工</p><h1 id="异步回调"><a href="#异步回调" class="headerlink" title="异步回调"></a>异步回调</h1><h2 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h2><p>异步也是一种全双工</p><p>简单来说，就是当一个任务发出后，发件人不需要等待执行方的返回结果，而可以先去做其它事情，等待</p><p>比如你加某个人为 qq 好友，发出请求后你就不需要管了，可以自己先去聊天，等到对方同意或拒绝你的好友请求，你才会收到通知，回来处理这件事</p><h2 id="回调"><a href="#回调" class="headerlink" title="回调"></a>回调</h2><p>那回调又是什么呢？回调其实解决了异步的一个非常重要的问题——我要这个结果做什么用，简单说就是当异步结果返回的时候，该做什么呢</p><p>在上文 qq 好友的例子中，qq 通知你好友请求返回结果了，你根据结果做出的动作就是回调</p><p>比如好友请求通过，你的回调就是找好友聊天</p><p>比如失败，你的回调可能是自我分析是什么情况，也可以是什么都不做</p><p>在浏览器中，就是浏览器的异步请求取回结果的时候，如果是成功，要进行什么处理、给出什么输出呢？失败的话要不要处理、怎么处理这个错误呢？</p><p>举个例子，就是 setTimeout</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function"><span class="params">()</span>=&gt;</span><span class="built_in">console</span>.log(<span class="string">'success'</span>)</span><br><span class="line">setTimeout(fn,<span class="number">1000</span>)</span><br></pre></td></tr></table></figure><p>执行 setTimeout 后，将在 1000ms 后执行 fn</p><p>此处的 fn 就是回调函数</p><h2 id="异步和回调的关系"><a href="#异步和回调的关系" class="headerlink" title="异步和回调的关系"></a>异步和回调的关系</h2><p>上文可以看出，回调函数其实就是事件完成后，处理结果的方法</p><p>但其实事件不一定是异步的，也可以是同步的</p><p>即便是同步的函数，也可以使用回调函数，区别只不过是异步任务执行后可以先做别的再收通知，同步任务执行后必须原地等通知罢了</p><p>但是如果一层层回调，会变成什么样呢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">       setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">           run()</span><br><span class="line">       &#125;,<span class="number">0</span>) </span><br><span class="line">    &#125;,<span class="number">0</span>)</span><br><span class="line">&#125;,<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>看，是不是随着回调层数的增加，代码逐渐向右突出。。。这也太难看了</p><p>这就是回调地狱</p><p>而为了解决这个问题，提出了 Promise</p><h1 id="Promise-定义"><a href="#Promise-定义" class="headerlink" title="Promise 定义"></a>Promise 定义</h1><p>Promise 是将“生产者代码”和“消费者代码”连接在一起的一个特殊的 JavaScript 对象。</p><p>用我们的类比来说：这就是就像是“订阅列表”。</p><p>“生产者代码”花费它所需的任意长度时间来产出所承诺的结果，而 “promise” 将在它准备好时，将结果向所有订阅了的代码开放。</p><h1 id="Promise-用途"><a href="#Promise-用途" class="headerlink" title="Promise 用途"></a>Promise 用途</h1><p>一开始主要是为了解决回调地狱而产生的</p><p>现在则已经是前端异步处理的统一解决方案</p><h1 id="Promise-用法"><a href="#Promise-用法" class="headerlink" title="Promise 用法"></a>Promise 用法</h1><p>一般在函数中作为函数返回值，例如</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">task</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'promise 正在运行'</span>)</span><br><span class="line">        resolve(<span class="number">233</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述代码也可以直接赋值</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> task = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise 正在运行'</span>)</span><br><span class="line">    resolve(<span class="number">233</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>首先介绍一下，Promise 有以下状态</p><ol><li>pending，Promise 尚未返回结果</li><li>settled，Promise 已经返回结果，但不确定是成功还是失败<ol><li>fulfilled，Promise 已经成功（resolve）返回</li><li>rejected，Promise 已经失败（reject）返回</li></ol></li></ol><p>可见，Promise 的构造函数要求传入一个包含两个参数的 executor（可执行代码段），两个参数分别是 Promise 给出的两个函数，分别指示 resolve 和 reject 调用的函数</p><p>当然两个参数也可以叫别的名字，只要顺序不变就没有影响，但是一般都是叫 resolve 和 reject</p><p>这段 executor 是立即执行的，但是对结果的处理是异步的，直到 settled 之前，这个 Promise 都不算结束</p><p>即使在 executor 中，半路上就 resolve/reject 了，executor 的代码段还是会完整执行，不会中断</p><p>那么怎么处理 Promise 的返回结果呢？</p><h1 id="Promise-方法"><a href="#Promise-方法" class="headerlink" title="Promise 方法"></a>Promise 方法</h1><p>Promise 的 prototype 上有 3 个重要的回调方法</p><ol><li>then</li><li>catch</li><li>finally</li></ol><p>3 个方法都支持链式调用</p><h2 id="then"><a href="#then" class="headerlink" title="then"></a>then</h2><p>then 方法的函数声明伪代码如下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">promise.then(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123; <span class="comment">/* handle a successful result */</span> &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123; <span class="comment">/* handle an error */</span> &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>可以接受两个参数，分别表示对于 fulfilled 和 rejected 状态的 Promise 结果的处理函数</p><p>第一个函数接受一个参数，表示成功的结果</p><p>第二个函数接受一个参数，表示失败的原因</p><p>其中 fulfilled 结果处理函数是必要的，rejected 处理函数可以不写出，但如果 Promise 被 reject，而没有其它地方处理这个 error 的话，会直接报错，停止解释器</p><p>上例中的代码，加上 then 回调后，变为如下模样</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> task = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise 正在运行'</span>)</span><br><span class="line">    resolve(<span class="number">233</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)  <span class="comment">// expected output: 233</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>then 可以多级传递，比如</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> task = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise 正在运行'</span>)</span><br><span class="line">    resolve(<span class="number">233</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res) <span class="comment">// expected output: 233</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">114514</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res) <span class="comment">// expected output: 114514</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>链式调用中，结果会沿着链传递</p><p>但是分开调用是不对的，比如</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> task = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise 正在运行'</span>)</span><br><span class="line">    resolve(<span class="number">233</span>)</span><br><span class="line">&#125;)</span><br><span class="line">task.then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res) <span class="comment">// expected output: 233</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">114514</span></span><br><span class="line">&#125;)</span><br><span class="line">task.then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res) <span class="comment">// expected output: 233</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>分开调用，结果不会互相传递</p><p>then 中除了被动出错，也可以使用 throw 子句主动抛出错误</p><h2 id="catch"><a href="#catch" class="headerlink" title="catch"></a>catch</h2><p>上例中使用 catch 的话，一般可以写成以下模样</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> task = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123; <span class="comment">// executor</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise 正在运行'</span>)</span><br><span class="line">    reject(<span class="number">233</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123; <span class="comment">// then</span></span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>如果在 Promise 的 executor 或者 then 中出错了，都可以用 catch 捕获错误，因为 catch 在他们的下游</p><p>此时如果是 executor 出错，then 会被跳过，沿着 Promise 链往下寻找 catch 直到找到第一个 catch 为止</p><p>catch 既然支持链式调用，那么 catch 自然也可以再抛出</p><p>比如</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> task = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123; <span class="comment">// executor</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise 正在运行'</span>)</span><br><span class="line">    reject(<span class="string">'2323'</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123; <span class="comment">// then</span></span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err!==<span class="string">'233'</span>) <span class="keyword">throw</span> err</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'err 233 is catched'</span>)</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>注意，此处要使用 throw 子句来抛出，不能是 return</p><p>如果是 return，接下来的结果就要用 then 来接收</p><h2 id="finally"><a href="#finally" class="headerlink" title="finally"></a>finally</h2><p>上例中使用 finally 的话，一般可以写成以下模样</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> task = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123; <span class="comment">// executor</span></span><br><span class="line">    resolve(<span class="number">233</span>)</span><br><span class="line">&#125;).finally(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise 开始运行'</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res) <span class="comment">// expected output: 233</span></span><br><span class="line">&#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>显然，finally 不一定要写在最后，一般只是用来做阶段性封口而已</p><p>比如此处，在 executor 执行完毕后，不论 executor 是否出错，都会执行 finally，告诉用户 promise 开始了</p><p>然后，不论是 resolve 还是 reject，结果都会越过 finally 传递到可以处理这个结果的回调</p><hr><p>以上就是 Promise 的基本用法</p><p>现在来深究一下 Promise 这么个好东</p><h1 id="Promise-手写"><a href="#Promise-手写" class="headerlink" title="Promise 手写"></a>Promise 手写</h1><p>面试必考的手写 Promise 部分，你会多少呢？</p><h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p>首先先实现基本的 Promise 功能——resolve 和 reject</p><p>容易想到以下基本形</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">P</span>(<span class="params">executor</span>)</span>&#123;</span><br><span class="line">    executor(resolve,reject)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>那么 resolve 和 reject 从哪里来？显然要由 Promise 提供</p><p>这两个函数还兼顾了取结果和改状态的效果，所以得到如下形状</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">P</span>(<span class="params">executor</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.status = <span class="string">'pending'</span></span><br><span class="line">    <span class="keyword">this</span>.result = <span class="literal">undefined</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        executor(<span class="keyword">this</span>.resolve.bind(<span class="keyword">this</span>),<span class="keyword">this</span>.reject.bind(<span class="keyword">this</span>))</span><br><span class="line">    &#125; <span class="keyword">catch</span>(err)&#123;</span><br><span class="line">        <span class="keyword">this</span>.reject(err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">P.prototype.resolve = <span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.status === <span class="string">'pending'</span>)&#123;</span><br><span class="line">        <span class="keyword">this</span>.status = <span class="string">'fulfilled'</span></span><br><span class="line">    <span class="keyword">this</span>.result = result</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">P.prototype.reject = <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.status === <span class="string">'pending'</span>)&#123;</span><br><span class="line">        <span class="keyword">this</span>.status = <span class="string">'rejected'</span></span><br><span class="line">    <span class="keyword">this</span>.result = err</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改数据的时候，要注意不能随便覆盖结果</p><p>注意，我们要在 resolve 和 reject 中使用访问 this 的 status 和 result，所以这两个函数</p><ol><li>必须有自己的 this，不能是箭头函数</li><li>必须指向当前操作的对象，所以要使用 bind 绑定 this</li></ol><p>这样 Promise 最基本的功能就实现了，接下来实现最重要的功能 then</p><h2 id="Promise-then"><a href="#Promise-then" class="headerlink" title="Promise.then"></a>Promise.then</h2><p>容易得到以下形状</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">P.prototype.then = <span class="function"><span class="keyword">function</span>(<span class="params">success,fail</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.status===<span class="string">'fulfilled'</span>) <span class="keyword">this</span>.result = success(<span class="keyword">this</span>.result)</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">this</span>.result = fail(<span class="keyword">this</span>.result)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是这时候我们发现，这个 then 只能执行同步的链式调用</p><p>那怎么异步调用呢？答案就是发布订阅模式</p><p>可以得到以下代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">P</span>(<span class="params">executor</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.status = <span class="string">'pending'</span></span><br><span class="line">    <span class="keyword">this</span>.result = <span class="literal">undefined</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">this</span>.onfulfilled = []</span><br><span class="line">    <span class="keyword">this</span>.onrejected = [] <span class="comment">// 添加两个事件组</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        executor(<span class="keyword">this</span>.resolve.bind(<span class="keyword">this</span>),<span class="keyword">this</span>.reject.bind(<span class="keyword">this</span>))</span><br><span class="line">    &#125; <span class="keyword">catch</span>(err)&#123;</span><br><span class="line">        <span class="keyword">this</span>.reject(err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">P.prototype.resolve = <span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.status === <span class="string">'pending'</span>)&#123;</span><br><span class="line">        <span class="keyword">this</span>.status = <span class="string">'fulfilled'</span></span><br><span class="line">    <span class="keyword">this</span>.result = result</span><br><span class="line">        <span class="keyword">this</span>.onfulfilled.map(<span class="function"><span class="params">event</span>=&gt;</span>event.call(<span class="keyword">this</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">P.prototype.reject = <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.status === <span class="string">'pending'</span>)&#123;</span><br><span class="line">        <span class="keyword">this</span>.status = <span class="string">'rejected'</span></span><br><span class="line">    <span class="keyword">this</span>.result = err</span><br><span class="line">        <span class="keyword">this</span>.onrejected.map(<span class="function"><span class="params">event</span>=&gt;</span>event.call(<span class="keyword">this</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">P.prototype.then = <span class="function"><span class="keyword">function</span>(<span class="params">success,fail</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.status === <span class="string">'pending'</span>)&#123;</span><br><span class="line">        <span class="keyword">this</span>.onfulfilled.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.result = success(<span class="keyword">this</span>.result)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">this</span>.onrejected.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.result = fail(<span class="keyword">this</span>.result)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.status === <span class="string">'fulfilled'</span>) <span class="keyword">this</span>.result = success(<span class="keyword">this</span>.result)</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">this</span>.result = fail(<span class="keyword">this</span>.result)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行测试例</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p=<span class="keyword">new</span> P(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'start'</span>)</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>resolve(<span class="number">233</span>),<span class="number">0</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'end'</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res++)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">666</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span>=&gt;</span><span class="built_in">console</span>.log(res))</span><br></pre></td></tr></table></figure><p>可以得到以下结果</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">start</span><br><span class="line">end</span><br><span class="line"><span class="number">233</span></span><br><span class="line"><span class="number">666</span></span><br></pre></td></tr></table></figure><p>现在 then 也可以支持异步返回了！但是 catch 似乎还没实现，不过我水平不够了，到此为止了2333</p><h2 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all"></a>Promise.all</h2><p>Promise.all 的核心要义就是传入多个 Promise，然后按顺序返回所有结果</p><p>容易想到以下形状</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">P.all = <span class="function"><span class="keyword">function</span>(<span class="params">promises</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> P(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> n = <span class="number">0</span>, len = promises.length</span><br><span class="line">            <span class="keyword">let</span> ans = []</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">in</span> promises)&#123;</span><br><span class="line">                P.resolve(promises[i])</span><br><span class="line">                .then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">                    ans[i] = res</span><br><span class="line">                    n++</span><br><span class="line">                    <span class="keyword">if</span>(n === len)&#123;</span><br><span class="line">                        resolve(ans)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(err)&#123;</span><br><span class="line">            reject(err)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是我们还需要一个 P.resolve 来得到一个新的 P</p><p>所以还要写</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">P.resolve = <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(data <span class="keyword">instanceof</span> P)&#123;</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> P(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>resolve(data))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行以下测试例</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise1 = P.resolve(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">let</span> promise2 = <span class="keyword">new</span> P(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  setTimeout(resolve, <span class="number">100</span>, <span class="string">'foo'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> promise3 = <span class="number">42</span></span><br><span class="line"></span><br><span class="line">P.all([promise1, promise2, promise3]).then(<span class="function"><span class="keyword">function</span>(<span class="params">values</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(values)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>可得结果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[3, &quot;foo&quot;, 42]</span><br></pre></td></tr></table></figure><h2 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race"></a>Promise.race</h2><p>Promise.race 的核心要义就是传入多个 Promise，然后返回第一个决议的结果，无论是成功还是失败</p><p>其实把 all 的计数器去掉就可以了</p><p>容易想到以下形状</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">P.race = <span class="function"><span class="keyword">function</span>(<span class="params">promises</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> P(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> ans = <span class="literal">undefined</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">in</span> promises)&#123;</span><br><span class="line">                P.resolve(promises[i])</span><br><span class="line">                .then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">                    ans = res</span><br><span class="line">                    resolve(ans)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(err)&#123;</span><br><span class="line">            reject(err)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行以下测试例</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise1 = <span class="keyword">new</span> P(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(resolve, <span class="number">500</span>, <span class="string">'one'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> promise2 = <span class="keyword">new</span> P(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(resolve, <span class="number">100</span>, <span class="string">'two'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">P.race([promise1, promise2]).then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>可得结果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">two</span><br></pre></td></tr></table></figure><h2 id="完整的-Promise"><a href="#完整的-Promise" class="headerlink" title="完整的 Promise"></a>完整的 Promise</h2><p>总结一下，可以得到如下的手写 Promise</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">P</span>(<span class="params">executor</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.status = <span class="string">'pending'</span></span><br><span class="line">    <span class="keyword">this</span>.result = <span class="literal">undefined</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">this</span>.onfulfilled = []</span><br><span class="line">    <span class="keyword">this</span>.onrejected = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        executor(<span class="keyword">this</span>.resolve.bind(<span class="keyword">this</span>),<span class="keyword">this</span>.reject.bind(<span class="keyword">this</span>))</span><br><span class="line">    &#125; <span class="keyword">catch</span>(err)&#123;</span><br><span class="line">        <span class="keyword">this</span>.reject(err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">P.prototype.resolve = <span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.status === <span class="string">'pending'</span>)&#123;</span><br><span class="line">        <span class="keyword">this</span>.status = <span class="string">'fulfilled'</span></span><br><span class="line">    <span class="keyword">this</span>.result = result</span><br><span class="line">        <span class="keyword">this</span>.onfulfilled.map(<span class="function"><span class="params">event</span>=&gt;</span>event.call(<span class="keyword">this</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">P.prototype.reject = <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.status === <span class="string">'pending'</span>)&#123;</span><br><span class="line">        <span class="keyword">this</span>.status = <span class="string">'rejected'</span></span><br><span class="line">    <span class="keyword">this</span>.result = err</span><br><span class="line">        <span class="keyword">this</span>.onrejected.map(<span class="function"><span class="params">event</span>=&gt;</span>event.call(<span class="keyword">this</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">P.prototype.then = <span class="function"><span class="keyword">function</span>(<span class="params">success,fail</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.status === <span class="string">'pending'</span>)&#123;</span><br><span class="line">        <span class="keyword">this</span>.onfulfilled.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.result = success(<span class="keyword">this</span>.result)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">this</span>.onrejected.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.result = fail(<span class="keyword">this</span>.result)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.status === <span class="string">'fulfilled'</span>) <span class="keyword">this</span>.result = success(<span class="keyword">this</span>.result)</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">this</span>.result = fail(<span class="keyword">this</span>.result)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">&#125;</span><br><span class="line">P.resolve = <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(data <span class="keyword">instanceof</span> P)&#123;</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> P(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>resolve(data))</span><br><span class="line">&#125;</span><br><span class="line">P.reject = <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(data <span class="keyword">instanceof</span> P)&#123;</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> P(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>reject(data))</span><br><span class="line">&#125;</span><br><span class="line">P.all = <span class="function"><span class="keyword">function</span>(<span class="params">promises</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> P(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> n = <span class="number">0</span>, len = promises.length</span><br><span class="line">            <span class="keyword">let</span> ans = []</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">in</span> promises)&#123;</span><br><span class="line">                P.resolve(promises[i])</span><br><span class="line">                .then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">                    ans[i] = res</span><br><span class="line">                    n++</span><br><span class="line">                    <span class="keyword">if</span>(n === len)&#123;</span><br><span class="line">                        resolve(ans)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(err)&#123;</span><br><span class="line">            reject(err)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">P.race = <span class="function"><span class="keyword">function</span>(<span class="params">promises</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> P(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> ans = <span class="literal">undefined</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">in</span> promises)&#123;</span><br><span class="line">                P.resolve(promises[i])</span><br><span class="line">                .then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">                    ans = res</span><br><span class="line">                    resolve(ans)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(err)&#123;</span><br><span class="line">            reject(err)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="https://zh.javascript.info/promise-basics" target="_blank" rel="noopener">Promise</a></p><p><a href="https://www.jianshu.com/p/90b6280dd1b6" target="_blank" rel="noopener">手写Promise.all和Promise.race</a></p><hr><p>谢谢阅读</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>事件循环</title>
      <link href="/frontend/event-loop/"/>
      <url>/frontend/event-loop/</url>
      
        <content type="html"><![CDATA[<p>我们经常看到 setTimeout 中延迟设置为 0，但真的是 0 延迟吗？</p><a id="more"></a><h1 id="事件循环"><a href="#事件循环" class="headerlink" title="事件循环"></a>事件循环</h1><p>这涉及到 javascript 的事件循环机制</p><p>众所周知，javascript 是单线程的，但是却支持异步，和 CPU 非常相似</p><p>对照 CPU 的进程调度，可以发现任务是排队执行的，并且有不同的优先级队列</p><p>但是我们可以发现，以下输出不是按顺序的</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">res</span>=&gt;</span><span class="built_in">console</span>.log(<span class="string">'then1'</span>)).then(<span class="function"><span class="params">res</span>=&gt;</span><span class="built_in">console</span>.log(<span class="string">'then4'</span>))</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;<span class="built_in">console</span>.log(<span class="string">'setTimeout1'</span>)&#125;,<span class="number">0</span>)</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">res</span>=&gt;</span><span class="built_in">console</span>.log(<span class="string">'then2'</span>)).then(<span class="function"><span class="params">res</span>=&gt;</span></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;<span class="built_in">console</span>.log(<span class="string">'setTimeout2'</span>)&#125;,<span class="number">0</span>))</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;<span class="built_in">console</span>.log(<span class="string">'promise'</span>)&#125;)</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">res</span>=&gt;</span><span class="built_in">console</span>.log(<span class="string">'then3'</span>))</span><br></pre></td></tr></table></figure><p>实际运行一下，得到输出是</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">promise</span><br><span class="line">then1</span><br><span class="line">then2</span><br><span class="line">then3</span><br><span class="line">then4</span><br><span class="line">setTimeout1</span><br><span class="line">setTimeout2</span><br></pre></td></tr></table></figure><p>为什么会这样？？</p><p>这就涉及到宏任务和微任务的概念</p><h1 id="宏任务和微任务"><a href="#宏任务和微任务" class="headerlink" title="宏任务和微任务"></a>宏任务和微任务</h1><p>上文中提到单线程，任务队列，事件循环</p><p>之所以称之为 事件循环，是因为它经常按照类似如下的方式来被实现：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (queue.waitForMessage()) &#123;</span><br><span class="line">  queue.processNextMessage();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>一个线程中，事件循环是唯一的，但是任务队列可以拥有多个</p><p>任务队列又分为 macro-task（宏任务）与 micro-task（微任务），在最新标准中，它们被分别称为 task 和 jobs</p><p>用操作系统说法，就是进程和线程的区别</p><p>上例可以做如图表示</p><p><img src="https://pic.ringoer.com/event-loop-0.png" alt=""></p><p>因为 new Promise 中 settled 之前的函数都是同步进行的，所以先打印 promise</p><p>当这一轮主线程执行完毕的时候，变为如图情况</p><p><img src="https://pic.ringoer.com/event-loop-1.png" alt=""></p><p>此时，引擎发现，虽然当前主线程为空，但微任务队列不为空，所以当前宏任务还不算结束</p><p>于是引擎将微任务队列的任务都塞进主线程，这个过程就是 <strong>开启下一次事件循环</strong></p><p><img src="https://pic.ringoer.com/event-loop-2.png" alt=""></p><p>再次执行完毕后，变为如图情况</p><p><img src="https://pic.ringoer.com/event-loop-3.png" alt=""></p><p>此时微任务队列依然不为空，再次优先执行微任务队列中的任务</p><p>执行完后变为如图情况</p><p><img src="https://pic.ringoer.com/event-loop-4.png" alt=""></p><p>微任务队列终于空了！主线程开始取宏任务队列中的队首任务，变为如图情况</p><p><img src="https://pic.ringoer.com/event-loop-5.png" alt=""></p><p>执行完毕后，发现微任务队列还是空的，于是再取宏任务，再空，终于所有任务都执行完了！</p><p>这就是 JS 事件调度的过程，可见 setTimeout(fn,0) 并不是真正的 0 延迟执行，而是“尽可能快”</p><p>显然代码可以分为三种</p><ol><li>立即执行的代码</li><li>微任务</li><li>宏任务</li></ol><p>则事件循环的实现，大致有如下伪代码</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">    <span class="keyword">while</span>(!mainQueue.empty()) &#123;</span><br><span class="line">        solve(mainQueue.front());</span><br><span class="line">        mainQueue.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(microQueue.empty())&#123;</span><br><span class="line">        <span class="keyword">if</span>(!macroQueue.empty())&#123;</span><br><span class="line">            mainQueue.push(macroQueue.front());</span><br><span class="line">            macroQueue.pop();</span><br><span class="line">            render.run();</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(!microQueue.empty())&#123;</span><br><span class="line">            mainQueue.push(microQueue.front());</span><br><span class="line">            microQueue.pop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>文字描述如下</p><ul><li>处理主线程中所有任务</li><li>若微任务队列为空<ul><li>若宏任务队列不为空，则取宏任务队列的队首到主线程中，并在开启下一个事件循环前，进行页面渲染</li></ul></li><li>若微任务队列不为空，则将微任务队列中所有任务加入主线程中</li></ul><p>那么哪些是微任务，哪些是宏任务呢？</p><p>一般有如下认定与支持</p><table><thead><tr><th>宏任务</th><th>浏览器</th><th>Node</th></tr></thead><tbody><tr><td>I/O</td><td>1</td><td>1</td></tr><tr><td>setTimeout</td><td>1</td><td>1</td></tr><tr><td>setInterval</td><td>1</td><td>1</td></tr><tr><td>setImmediate</td><td>0</td><td>1</td></tr><tr><td>requestAnimationFrame</td><td>1</td><td>0</td></tr><tr><td>script 代码块</td><td>1</td><td>0</td></tr></tbody></table><table><thead><tr><th>微任务</th><th>浏览器</th><th>Node</th></tr></thead><tbody><tr><td>Promise.then/catch/finally</td><td>1</td><td>1</td></tr><tr><td>process.nextTick</td><td>0</td><td>1</td></tr><tr><td>MutationObserver</td><td>1</td><td>0</td></tr></tbody></table><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="https://blog.csdn.net/weixin_30871701/article/details/97270307" target="_blank" rel="noopener">JavaScript的事件队列(Event Queue)—宏任务和微任务</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop" target="_blank" rel="noopener">并发模型与事件循环</a></p><hr><p>谢谢阅读</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>原生 ajax 详解</title>
      <link href="/frontend/ajax/"/>
      <url>/frontend/ajax/</url>
      
        <content type="html"><![CDATA[<p>做过前后端分离的同学，肯定都知道 ajax 这个异步通信方法</p><a id="more"></a><hr><h1 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h1><p>首先肯定是要知道什么是 ajax，毕竟不能保证每个读这篇文章的人都是有前后端分离经验的人（</p><p>Ajax 即“Asynchronous Javascript And XML”（异步 JavaScript 和 XML），是指一种创建交互式、快速动态网页应用的网页开发技术，无需重新加载整个网页的情况下，能够更新部分网页的技术。</p><p>通过在后台与服务器进行少量数据交换，Ajax 可以使网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。</p><p>说这么复杂，其实就是一种前端主动向后端发送 HTTP 请求的技术</p><h1 id="原生写法"><a href="#原生写法" class="headerlink" title="原生写法"></a>原生写法</h1><p>通过 JS 库 XMLHttpRequest 实现</p><p>一般写法如下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">xhr.open(<span class="string">'GET'</span>,<span class="string">'https://www.baidu.com/'</span>)</span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(xhr.readystate === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">xhr.send()</span><br></pre></td></tr></table></figure><p>接下来逐条解释</p><h2 id="创建请求"><a href="#创建请求" class="headerlink" title="创建请求"></a>创建请求</h2><p>通过 new XMLHttpRequest() 可以创建一个请求</p><h2 id="设置请求方法和路径"><a href="#设置请求方法和路径" class="headerlink" title="设置请求方法和路径"></a>设置请求方法和路径</h2><p>通过 xhr.open 方法可以设置请求方法和请求路径</p><p>通常 open 方法一般接受两个参数</p><ol><li>method，表示 HTTP 动词，默认支持 ‘GET’ 或 ‘POST’，大小写没有影响，但一般是大写</li><li>url，表示请求的地址，本例中请求百度首页</li></ol><p>请求默认是异步的，但是当然还可以设置请求为同步，但是严重影响用户体验，故本文不介绍</p><h2 id="请求状态"><a href="#请求状态" class="headerlink" title="请求状态"></a>请求状态</h2><p>一般指 xhr.readystate 和 xhr.status</p><h3 id="readystate"><a href="#readystate" class="headerlink" title="readystate"></a>readystate</h3><p>xhr 一般有 5 个 readystate，含义分别如下</p><table><thead><tr><th>readystate</th><th>含义</th></tr></thead><tbody><tr><td>0</td><td>请求被创建</td></tr><tr><td>1</td><td>请求被 open</td></tr><tr><td>2</td><td>请求已经设置好回调，等待发送</td></tr><tr><td>3</td><td>请求已经被 send，等待响应</td></tr><tr><td>4</td><td>请求已经收到响应（不一定是成功）</td></tr></tbody></table><p>因为 readystate === 4 不一定代表成功，所以还引入了第二个属性</p><h3 id="status"><a href="#status" class="headerlink" title="status"></a>status</h3><p>表示请求返回的响应的 HTTP 状态码</p><p>一般 2 开头的表示成功，此处为简单起见直接取 200 来判断</p><h2 id="设置回调"><a href="#设置回调" class="headerlink" title="设置回调"></a>设置回调</h2><p>通过 readystatechange 事件来监听 readystate 的状态以回调</p><p>当 readystate 变为 4 时，会向回调函数中传入一个参数作为结果</p><p>如果成功，则是取回的值，如果失败，则多半没有内容，具体的可以查看 Chrome Network 中的 Response</p><p>所以，我们通过 xhr.onreadystatechange = 包含一个参数的函数，来获取响应的值，并在 readystate === 4 &amp;&amp; status === 200 ——响应成功时，打印取回的值</p><p>注意，设置回调函数要先于发送请求，否则请求异常</p><h2 id="发送请求"><a href="#发送请求" class="headerlink" title="发送请求"></a>发送请求</h2><p>当必要的设置都完成后，就可以发送请求了</p><p>可以通过 xhr.send() 方法来发送请求</p><p>send 方法接受一个可选参数，表示附在请求 body 中的内容，一般是 POST 请求才使用，GET 请求请直接使用拼接 URL</p><h2 id="其它功能"><a href="#其它功能" class="headerlink" title="其它功能"></a>其它功能</h2><p>当然，还有 abort 方法取消请求、setRequestHeader 方法设置请求头等，此处不介绍了，详询 mdn</p><h1 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h1><p>初级封装就是把上文的代码封装成一个 ajax 方法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">method,url,callback,data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">    xhr.open(method,url)</span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(xhr.readystate === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">            callback(res)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.send(data)</span><br><span class="line">&#125;</span><br><span class="line">ajax(<span class="string">'GET'</span>,<span class="string">'https://www.baidu.com/'</span>,<span class="built_in">console</span>.log)</span><br></pre></td></tr></table></figure><p>高级一点的就是用 Promise 封装</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">method,url,data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">        xhr.open(method,url)</span><br><span class="line">        xhr.onreadystatechange = <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(xhr.readystate === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">                resolve(res)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.send(data)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">ajax(<span class="string">'GET'</span>,<span class="string">'https://www.baidu.com/'</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> <span class="built_in">console</span>.log(res))</span><br></pre></td></tr></table></figure><p>再高级的我也不会了，就这样吧2333</p><h1 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h1><p>现在只有练习和面试的时候会手写原生 ajax 了，正式开发中都是使用基于 ajax 原理的库 axios</p><p>axios 的使用方法与上文中的 Promise 封装相似，详询 axios 中文网，或各个框架的本地化 axios 文档</p><hr><p>感谢阅读</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DOM 事件机制</title>
      <link href="/frontend/dom-event/"/>
      <url>/frontend/dom-event/</url>
      
        <content type="html"><![CDATA[<p>弱弱地冒一个泡</p><a id="more"></a><p>经常听到冒泡捕获，那到底是什么东西呢？</p><h1 id="事件模型"><a href="#事件模型" class="headerlink" title="事件模型"></a>事件模型</h1><p>首先就要介绍一下 W3C DOM 事件模型</p><p>事件总体上分为三个阶段</p><ol><li>捕获阶段，事件从父到子向下传递</li><li>目标阶段，事件传递到达发生事件的目标点</li><li>冒泡阶段，事件从子到父向上传递</li></ol><p>不论是什么事件，没有特殊设置的情况下，都会按顺序经历这三个阶段</p><p>除非该事件被取消冒泡，才会在取消冒泡之后停止传递</p><p>前两个阶段不能停止传递</p><p>通过 on 赋值可以为元素绑定监听器，此时监听器一定是在事件冒泡阶段发生，且后赋值的监听器会覆盖之前的监听器</p><p>例如 <code>button.onclick=()=&gt;{}</code></p><p>通过 addEventListener(eventName, listener, useCapture, priority, useWeakReference) 可以设置监听器是在事件的冒泡阶段还是捕获阶段发生，该方式可以为同一个元素的同一个事件设置多个监听</p><p>useCapture 默认值是 false，表示监听器在事件冒泡阶段发生，反之当为 true 时即表示在捕获阶段发生</p><p>priority 默认值是 0，表示所有同级的监听器按注册顺序进行。可以为个别监听器设置更高的优先级，优先级高的会在该阶段先执行，同优先级的依然按注册顺序进行</p><p>useWeakReference 默认值是 false，表示设置监听器为强引用，使得监听器不被垃圾回收，反之 true 则是允许回收</p><p>当要取消监听器、或要重新设定优先级时，可以使用 removeEventListener() 来取消监听器，之后再重新设定</p><p>每当事件触发一个监听器的时候，都会向监听器内传入两个默认参数</p><p>一个是 this，表示事件现在所处的元素</p><p>一个是 event，包含事件的完整信息</p><h1 id="target-与-currentTarget"><a href="#target-与-currentTarget" class="headerlink" title="target 与 currentTarget"></a>target 与 currentTarget</h1><p>通过在监听器中打印 event，可以发现两件事</p><ol><li>target != currentTarget</li><li>如果先保存 event，事件结束后再打印，则会发现 target 变成了 null</li></ol><p>对于第一点，target 是事件发生的最小元素，也就是唯一有目标阶段的元素</p><p>currentTarget 则是事件现在所处的位置，是传入监听器的 this</p><p>对于第二点，则涉及到事件消亡的知识，篇幅过大，此处不介绍了</p><h1 id="target-元素-事件先后"><a href="#target-元素-事件先后" class="headerlink" title="target 元素 事件先后"></a>target 元素 事件先后</h1><p>刚才说到 target 元素是唯一有目标阶段的元素，那么什么是目标阶段？</p><p>实际上，对于 target 元素来说，目标阶段就是捕获冒泡连续发生，不像事件传递路径上别的元素是分开发生的</p><ul><li>哦哦，那我懂了，所以对 target 元素来说，监听器也是按照设置好的捕获冒泡顺序执行的吧</li><li>不！</li></ul><p>此时监听器不再区分捕获和冒泡，统一按照设置顺序发生</p><h1 id="取消冒泡"><a href="#取消冒泡" class="headerlink" title="取消冒泡"></a>取消冒泡</h1><p>那有时候我想到此为止，不想打扰父级元素，怎么办呢？</p><p>可以在需要中断的元素的冒泡阶段的监听器中，执行</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.propagetion()</span><br></pre></td></tr></table></figure><p>此时就可以阻止事件继续冒泡</p><h1 id="默认动作"><a href="#默认动作" class="headerlink" title="默认动作"></a>默认动作</h1><p>既然冒泡可以阻止，那默认的事件能不能阻止呢？比如我现在有个 a 标签，想做单页面应用的 tab 页跳转，要是按照默认的，可就跳到新页面去了</p><p>答案是可以！</p><p>在事件中执行</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.preventDefault()</span><br></pre></td></tr></table></figure><p>就可以阻止默认动作的发生了！</p><h1 id="禁用滚动"><a href="#禁用滚动" class="headerlink" title="禁用滚动"></a>禁用滚动</h1><p>奇怪，说好的阻止默认动作，怎么我在滚动条上不能 prevent，你骗我！</p><p>等下等下，你真的找准是什么东西产生了滚动条了吗？</p><p>有时候你看着是你的元素产生了滚动条，但说不定是 body 产生的！</p><p>找准了之后，我们来禁用滚动条吧——毕竟滚动条其实只是 CSS 产生的东西</p><p>禁用滚动一般分两种：</p><ol><li>看不见滚动条</li><li>看得见滚动条</li></ol><p>对于第一种，其实只需要设置 overflow: hidden 就可以实现了</p><p>对于第二种，比较复杂一些</p><p>首先能看见滚动条，说明 overflow 至少是 auto，甚至是 scroll</p><p>这时候通过划拉滚动条，或者鼠标滚轮，甚至是触屏上的手指，都可以让页面滚动</p><p>这种时候就要分三部分禁止</p><ol><li>禁止滚动条，通过 <code>#div.scrollTop = 0</code>，即可让滚动条锁定在顶端</li><li>禁止鼠标滚轮，通过 <code>#div.onwheel=event=&gt;{event.preventDefault()}</code>，即可阻止滚轮</li><li>禁止触控，通过 <code>#div.ontouchstart=event=&gt;{event.preventDefault()}</code>，即可阻止触控</li></ol><p>既然能在看得见滚动条的情况下禁止滚动，那能不能在看不见滚动条的情况下允许滚动呢？</p><p>于是就又延伸出一个需求。。。</p><p>当然也很简单，通过一个尚未加入标准的 CSS 伪元素即可实现</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#div</span><span class="selector-pseudo">::-webkit-scrollBar</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>:none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>即可实现在看不见滚动条的情况下允许滚动</p><h1 id="自定义事件"><a href="#自定义事件" class="headerlink" title="自定义事件"></a>自定义事件</h1><p>那万一我玩得不开心，想自定义一个事件，行不行？</p><p>可以！</p><p>通过以下方法即可创建一个自定义事件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> event = <span class="keyword">new</span> CustomEvent(eventName, &#123; <span class="attr">detail</span>: config &#125;);</span><br></pre></td></tr></table></figure><p>其中第一个参数表示你的事件名称，第二个参数是一个包含 detail 属性的对象</p><p>关于事件的初始化配置，都写在 detail 中</p><p>例如</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> config=&#123;</span><br><span class="line">    bubbles: <span class="literal">false</span>,</span><br><span class="line">    cancelable: <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> event = <span class="keyword">new</span> CustomEvent(<span class="string">'test'</span>, &#123; <span class="attr">detail</span>: config &#125;);</span><br></pre></td></tr></table></figure><p>即可创建一个名为 test 的事件，并指示该事件不进行冒泡传递，且不可以被阻止默认动作</p><p>创建完成事件后，还要分发事件，才可以让元素上的监听器正常工作，不然你让浏览器怎么触发你设置的事件？2333</p><p>要分发事件，首先要选中元素，然后触发他身上的事件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = <span class="built_in">document</span>.querySelector(<span class="string">'#div'</span>)</span><br><span class="line">div.addEventListener(<span class="string">'test'</span>,<span class="built_in">console</span>.log(<span class="number">233</span>))</span><br><span class="line">div.dispatchEvent(<span class="string">'test'</span>)</span><br></pre></td></tr></table></figure><p>通过以上代码，就可以为 id 为 div 的元素绑定一个 test 事件的监听器，当事件触发时打印 233</p><p>然后向这个元素分发事件，触发对应的监听器</p><h1 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h1><p>但是有时候，要为很多相似元素各自绑定相同的监听器</p><p>比如一张 10x10 的表格，难道为每个 td 都绑定一个监听器吗？且不说要写 100 行代码，光是 100 个监听器，就卡爆了！</p><p>那么这时候，就需要我们的事件委托</p><p>事件委托就是把大量相似子项的相似逻辑的监听器，全部取消，然后利用事件冒泡传递的特性，把监听器绑定在父项上，使得监听器既能获得事件发生的确切位置，又大幅简化了代码，优化了性能</p><p>比如开头 10x10 表格的例子，就可以将监听器绑定在 table 标签上，借助冒泡传递，获取事件的 target，来处理对应子项的逻辑</p><p>显然，这样是很节省内存的，而且即便后续为表格添加项目，依然可以通过 target 得到事件发生的位置，是非常灵活的</p><p>所以，事件委托有以下三大优点</p><ol><li>节省内存，多个监听器变为 1 个监听器</li><li>动态监听，可以监听未来添加的项目</li><li>封装，大幅简化代码逻辑，易于调试</li></ol><hr><p>感谢阅读</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 浏览器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JQuery</title>
      <link href="/frontend/jquery/"/>
      <url>/frontend/jquery/</url>
      
        <content type="html"><![CDATA[<p>DOM API 好难用，我要用 JQ！</p><a id="more"></a><h1 id="什么是-JQuery"><a href="#什么是-JQuery" class="headerlink" title="什么是 JQuery"></a>什么是 JQuery</h1><p>众所周知这 DOM 原生 API 长得 1p，语义还七扭八歪的</p><p>于是就诞生了 JQuery ！</p><p>好吧好吧，简单说就是，这是一个封装了 DOM 操作的库，使用它比直接使用原生 DOM API 更方便，更好读</p><p>那么，为了形成对比，采用和 DOM 那篇一样的结构</p><h1 id="Retrieve"><a href="#Retrieve" class="headerlink" title="Retrieve"></a>Retrieve</h1><p>既然 CSS 选择器这么好用，JQ 怎么能不吸收一下呢</p><p>于是 JQ 采用 <code>$(selector)</code> 来选择元素，返回选择器匹配上的所有元素</p><h1 id="Create"><a href="#Create" class="headerlink" title="Create"></a>Create</h1><p>分为从已有创建和重新创建两种</p><p>对于从已有创建，只需要选中元素后，调用 clone 方法，就可以获得一个拷贝了原元素的新元素</p><p>对于重新创建，只需要直接调用 JQ 构造函数 $，然后传入新元素的 HTML 表示即可</p><h1 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h1><p>分为删除元素和删除内容</p><p>使用 remove 或 detach 方法即可删除元素，但前者不保留元素，后者保留，便于重新插入文档</p><p>使用 empty 方法即可清空元素文本</p><h1 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h1><p>分为</p><ol><li>对 JQ 对象的更新</li><li>对元素的更新</li><li>对元素属性的更新</li><li>对事件的更新</li></ol><h2 id="对-JQ-对象的更新"><a href="#对-JQ-对象的更新" class="headerlink" title="对 JQ 对象的更新"></a>对 JQ 对象的更新</h2><p>可以采用 JQ 专属过滤器来改变结果集</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'div'</span>).has(<span class="string">'p'</span>); <span class="comment">// 选择包含p元素的div元素</span></span><br><span class="line">$(<span class="string">'div'</span>).not(<span class="string">'.myClass'</span>); <span class="comment">//选择class不等于myClass的div元素</span></span><br><span class="line">$(<span class="string">'div'</span>).filter(<span class="string">'.myClass'</span>); <span class="comment">//选择class等于myClass的div元素</span></span><br><span class="line">$(<span class="string">'div'</span>).first(); <span class="comment">//选择第1个div元素</span></span><br><span class="line">$(<span class="string">'div'</span>).eq(<span class="number">5</span>); <span class="comment">//选择第6个div元素</span></span><br><span class="line">$(<span class="string">'div'</span>).next(<span class="string">'p'</span>); <span class="comment">//选择div元素后面的第一个p元素</span></span><br><span class="line">$(<span class="string">'div'</span>).parent(); <span class="comment">//选择div元素的父元素</span></span><br><span class="line">$(<span class="string">'div'</span>).closest(<span class="string">'form'</span>); <span class="comment">//选择离div最近的那个form父元素</span></span><br><span class="line">$(<span class="string">'div'</span>).children(); <span class="comment">//选择div的所有子元素</span></span><br><span class="line">$(<span class="string">'div'</span>).siblings(); <span class="comment">//选择div的同级元素</span></span><br><span class="line">$(<span class="string">'div'</span>).siblings().end(); <span class="comment">//返回上一次结果集，此处等效于选中 div</span></span><br></pre></td></tr></table></figure><h2 id="对元素的更新"><a href="#对元素的更新" class="headerlink" title="对元素的更新"></a>对元素的更新</h2><p>其实是指元素在 DOM 树上的位置更新</p><p>一共有 4 对方法</p><table><thead><tr><th>方法名1</th><th>方法名2</th><th>描述</th></tr></thead><tbody><tr><td>insertAfter</td><td>after</td><td>为现有元素插入一个相邻弟弟</td></tr><tr><td>insertBefore</td><td>before</td><td>为现有元素插入一个相邻哥哥</td></tr><tr><td>appendTo</td><td>append</td><td>为现有元素插入一个最小的儿子</td></tr><tr><td>prependTo</td><td>prepend</td><td>为现有元素插入一个最大的儿子</td></tr></tbody></table><p>看起来没什么差别，其实还是有的</p><p>比如第一对方法，调用例如下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'div'</span>).insertAfter($(<span class="string">'p'</span>));</span><br><span class="line">$(<span class="string">'p'</span>).after($(<span class="string">'div'</span>));</span><br></pre></td></tr></table></figure><p>显然，虽然都是将 div 元素插入到 p 元素的后面，但前者返回的是对 div 操作的 JQ 元素，后者则是对 p 操作的 JQ 元素</p><p>实际情况下根据需要选择</p><h2 id="对元素属性的更新"><a href="#对元素属性的更新" class="headerlink" title="对元素属性的更新"></a>对元素属性的更新</h2><p>JQ 使用同名方法来作为同一个目标的 getter/setter</p><p>对于 get，如果结果集包含多个元素，则返回第一个元素的值（text 方法例外</p><p>对于 set，不论结果集包含多少元素，对于每个元素都会适配这次 set</p><p>通常有如下 getter/setter 来实现对元素属性的更新</p><table><thead><tr><th>方法</th><th>结果集目标</th><th>描述</th></tr></thead><tbody><tr><td>html()</td><td>第一个元素</td><td>get html 内容</td></tr><tr><td>html(‘233’)</td><td>所有元素</td><td>set html 内容为 ‘233’</td></tr><tr><td>text()</td><td>所有元素</td><td>get text 内容</td></tr><tr><td>text(‘233’)</td><td>所有元素</td><td>set text 内容为 ‘233’</td></tr><tr><td>attr(‘class’)</td><td>第一个元素</td><td>get class</td></tr><tr><td>attr(‘class’,’red’)</td><td>所有元素</td><td>set class 为 red</td></tr><tr><td>width()</td><td>第一个元素</td><td>get width</td></tr><tr><td>width(‘100px’)</td><td>所有元素</td><td>set width 为 100px</td></tr><tr><td>height()</td><td>第一个元素</td><td>get height</td></tr><tr><td>height(‘100px’)</td><td>所有元素</td><td>set height 为 100px</td></tr><tr><td>val()</td><td>第一个元素</td><td>get 某个 input 元素的值</td></tr><tr><td>val(‘233’)</td><td>所有元素</td><td>set 某个 input 元素的值为 ‘233’</td></tr></tbody></table><h2 id="对事件的更新"><a href="#对事件的更新" class="headerlink" title="对事件的更新"></a>对事件的更新</h2><p>直接使用对应事件名作为方法名进行调用</p><p>几乎所有事件都支持</p><p>调用例如下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">'hello'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>该调用等效于 set，会更新 JQ 对象结果集中的所有元素，下略</p><p>可以使用 bind 方法来指定多个事件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).bind(</span><br><span class="line">    <span class="string">'click change'</span>, <span class="comment">//同时绑定click和change事件</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">'hello'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>上述绑定方法会重复被触发，但也可以使用 one 方法来设定只触发一次的事件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).one(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">'hello'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>不想要的事件，也可以用 unbind 方法来解除绑定</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).unbind(<span class="string">'click'</span>)</span><br></pre></td></tr></table></figure><p>当事件触发时，会默认向方法内传入一个参数 event，表示事件发生时的相关信息</p><p>在传入的函数中，如果该函数不是箭头函数，则还可以用 this 来访问触发了该事件的元素</p><p>事件触发除了页面上的操作，还可以用事件函数或 trigger 方法手动触发</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).click()</span><br><span class="line">$(<span class="string">'button'</span>).trigger(<span class="string">'click'</span>)</span><br></pre></td></tr></table></figure><h1 id="工具方法"><a href="#工具方法" class="headerlink" title="工具方法"></a>工具方法</h1><p>除了增删改查，JQ 还提供了一些绑定在 $ 上的方法，不需要选中元素即可调用</p><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>$.trim()</td><td>去除字符串两端的空格。</td></tr><tr><td>$.each()</td><td>遍历一个数组或对象。</td></tr><tr><td>$.inArray()</td><td>返回一个值在数组中的索引位置。如果该值不在数组中，则返回-1。</td></tr><tr><td>$.grep()</td><td>返回数组中符合某种标准的元素。</td></tr><tr><td>$.extend()</td><td>将多个对象，合并到第一个对象。</td></tr><tr><td>$.makeArray()</td><td>将对象转化为数组。</td></tr><tr><td>$.type()</td><td>判断对象的类别（函数对象、日期对象、数组对象、正则对象等等）。</td></tr><tr><td>$.isArray()</td><td>判断某个参数是否为数组。</td></tr><tr><td>$.isEmptyObject()</td><td>判断某个对象是否为空（不含有任何属性）。</td></tr><tr><td>$.isFunction()</td><td>判断某个参数是否为函数。</td></tr><tr><td>$.isPlainObject()</td><td>判断某个参数是否为用”{}”或”new</td></tr><tr><td>$.support()</td><td>判断浏览器是否支持某个特性。</td></tr></tbody></table><h1 id="特殊效果"><a href="#特殊效果" class="headerlink" title="特殊效果"></a>特殊效果</h1><p>常用的特殊效果方法如下</p><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>fadeIn()</td><td>淡入</td></tr><tr><td>fadeOut()</td><td>淡出</td></tr><tr><td>fadeTo()</td><td>调整透明度</td></tr><tr><td>hide()</td><td>隐藏元素</td></tr><tr><td>show()</td><td>显示元素</td></tr><tr><td>slideDown()</td><td>向下展开</td></tr><tr><td>slideUp()</td><td>向上卷起</td></tr><tr><td>slideToggle()</td><td>依次展开或卷起某个元素</td></tr><tr><td>toggle()</td><td>依次展示或隐藏某个元素</td></tr></tbody></table><p>每个方法都有两个参数默认值，分别是变化速度 400ms 和回调函数 undefined</p><p>变化速度有两种表示方法，数字表示毫秒，或 slow 等表示指定速度</p><p>回调函数可以指定特效结束时执行的方法</p><p>例如</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'h1'</span>).fadeIn(<span class="number">300</span>); <span class="comment">// 300毫秒内淡入</span></span><br><span class="line">$(<span class="string">'h1'</span>).fadeOut(<span class="string">'slow'</span>); <span class="comment">// 缓慢地淡出</span></span><br><span class="line">$(<span class="string">'p'</span>).fadeOut(<span class="number">300</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; $(<span class="keyword">this</span>).remove(); &#125;);</span><br></pre></td></tr></table></figure><p>更复杂的可以使用 animate 自定义</p><p>例如</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'div'</span>).animate(</span><br><span class="line">    &#123;</span><br><span class="line">        left : <span class="string">"+=50"</span>,</span><br><span class="line">        opacity : <span class="number">0.25</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="number">300</span>,</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; alert(<span class="string">'done!'</span>); &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>第一个参数填写基于 css 语法的对象，第二个参数表示动画持续时间，第三个参数表示回调函数</p><h1 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h1><p>一个自己封装的 JQ，但是功能肯定比真的 JQ 弱很多，2333</p><p><a href="https://github.com/Ringoer/Toy/blob/main/39/main.js" target="_blank" rel="noopener">https://github.com/Ringoer/Toy/blob/main/39/main.js</a></p><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="http://www.ruanyifeng.com/blog/2011/07/jquery_fundamentals.html" target="_blank" rel="noopener">JQuery设计思想</a></p><p><a href="https://www.jquery123.com/" target="_blank" rel="noopener">jQuery API 中文文档</a></p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DOM API</title>
      <link href="/frontend/dom-api/"/>
      <url>/frontend/dom-api/</url>
      
        <content type="html"><![CDATA[<p>只要是学前端的同学，肯定都听说过 DOM</p><a id="more"></a><h1 id="什么是-DOM"><a href="#什么是-DOM" class="headerlink" title="什么是 DOM"></a>什么是 DOM</h1><p>在 JS 中，常常使用 document.xxx 来对页面进行操作。那实际操作的是什么呢？</p><p>在开发者工具中运行</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div=<span class="built_in">document</span>.querySelector(<span class="string">'#container'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(div)</span><br></pre></td></tr></table></figure><p>就可以看到打印出了一个 id 为 container 的元素</p><p>这个元素就是 DOM 元素</p><p>然后去 Elements 中查看，可以发现这些元素呈现层次关系，这个关系正是树形结构</p><p>所以文档结构就是 DOM 树，全称 文档对象模型树（Document Object Model）</p><p>通过打印原型链，可以发现以下原型关系</p><p>Object -&gt; EventTarget -&gt; Node -&gt; Element -&gt; HTMLElement -&gt; HTMLDivElement</p><p>显然，每个 DOM 元素都有自己的属性，但属性原则上属于 DOM 元素的一部分，对属性的操作等效于对元素的操作，故而在 Update 中统一描述</p><h1 id="Retrieve"><a href="#Retrieve" class="headerlink" title="Retrieve"></a>Retrieve</h1><h2 id="查自己"><a href="#查自己" class="headerlink" title="查自己"></a>查自己</h2><p>首先要获取，才能做各种操作</p><p>对于普通的 DOM 元素，一般有如下 API</p><ol><li>document.getElementById(‘xxx’)，获取 id 为 xxx 的元素，包括 IE，全都支持</li><li>window.xxx（或直接使用 xxx），获取 id 为 xxx 的元素，除了 IE，全都支持</li><li>document.getElementsByTagName(‘div’)，获取所有标签名为 div 的元素，返回伪数组</li><li>document.getElementsByClassName(‘yyy’)，获取所有 CSS 类名为 yyy 的元素，返回伪数组</li><li>document.querySelector(selector)，获取第一个满足传入的 CSS 选择器的元素</li><li>document.querySelectorAll(selector)，获取所有满足传入的 CSS 选择器的元素，返回伪数组</li></ol><p>对于特殊的元素，一般有以下 API</p><ol><li>document.documentElement，获取 html 根元素</li><li>document.head，获取 head 元素</li><li>document.body，获取 body 元素</li><li>window，获取窗口（注意窗口不是元素</li><li>document.all，获取所有元素</li></ol><p>在使用 document.all 的时候需要注意，虽然现在所有浏览器都支持这个查询了，但因为历史遗留原因，虽然能获取到值，但转化为布尔值的时候，在非 IE 的浏览器上都返回 false，只有在 IE 上才返回 true</p><h2 id="查祖先"><a href="#查祖先" class="headerlink" title="查祖先"></a>查祖先</h2><p>显然除了根结点，每个结点有且仅有一个父结点</p><p>那么可以通过 <code>div.parentNode</code> 不断向上查找</p><h2 id="查子代"><a href="#查子代" class="headerlink" title="查子代"></a>查子代</h2><p>可以通过 <code>div.childNodes</code> 或 <code>div.children</code> 来查找</p><p>需要注意的是，<code>div.childNodes</code> 返回的是 NodeList，单位类型是 Node，是伪数组，直接 concat 空数组的话不能正常展开，需要用空数组 concat 一个 Array,from 才行</p><p><code>div.children</code> 返回的是 ElementCollection，单位类型均为 Element 的派生类型，与数组操作时注意点同上</p><p>并且，<code>div.childNode</code> 返回值包括文本结点等不直接显示的结点，而 <code>div.children</code> 没有这个问题</p><p>子代中对特定元素也有专有的方法</p><ol><li>查看第一个子结点，div.firstChild</li><li>查看最后一个子结点，div.lastChild</li></ol><h2 id="查兄弟"><a href="#查兄弟" class="headerlink" title="查兄弟"></a>查兄弟</h2><p>可以通过先查父结点，再查父结点的子结点来做到，但要排除自己才是兄弟结点</p><p>同样，兄弟也有专有方法</p><ol><li>查看相邻的上一个兄弟，div.previousSibling</li><li>查看相邻的下一个兄弟，div.nextSibling</li></ol><h1 id="Create"><a href="#Create" class="headerlink" title="Create"></a>Create</h1><p>通常使用</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.createElement([tagName])</span><br></pre></td></tr></table></figure><p>来创建一个指定标签元素</p><p>或</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.createTextNode([string])</span><br></pre></td></tr></table></figure><p>来创建一个包含指定文本的文本结点</p><p>但创建之后的元素或节点，均还在 JS 线程中，必须通过 API 添加到页面上，由渲染线程处理后，才能在页面上显示</p><p>通常通过</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[parentNode].appendChild([childNode])</span><br></pre></td></tr></table></figure><p>来将指定的结点添加到某个结点中</p><p>关于添加结点，有以下两种特殊情况</p><ol><li><p>同一结点被多次添加到不同结点的子结点列表中</p><p>此时该子结点会出现在最后一次被添加到的位置</p></li><li><p>意图向某结点添加文本</p><p>此时不可以直接 appendChild(string)，必须先将 string 转换成文本结点，或用 innerText、textContent 属性来添加文本</p><p><strong>innerText 是 IE 产物，textContent 是其它浏览器产物，但现在所有浏览器都同时支持两个</strong></p></li></ol><h1 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h1><p>一般有两种方法</p><ol><li><code>[parentNode].removeChild([childNode])</code></li><li><code>[childNode].remove()</code></li></ol><p>对于被从 DOM 树中移除的结点，只要还没丢失对它的引用，就还可以通过 appendChild 再次回到页面上</p><h1 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h1><p>如同前述，对元素的修改包含对属性的修改</p><p>一般分为四种属性</p><ol><li>HTML 标签属性</li><li>CSS 属性</li><li>data 属性</li><li>自定义属性</li></ol><p>不论是何种属性，都可以通过点符号进行 get/set</p><p>但是 JS 中不能使用连接符来访问，所以在使用连接符的地方，要改用驼峰命名法</p><h2 id="HTML-标签属性"><a href="#HTML-标签属性" class="headerlink" title="HTML 标签属性"></a>HTML 标签属性</h2><p>直接使用赋值语句改值即可，注意值必须是字符串</p><p>如 <code>img.width = &#39;200px&#39;</code></p><p>但是有的属性不太一样，比如 a 标签的 href 属性</p><p>如果通过 <code>a.href</code> 来获取，浏览器会自动补全 href 的根路径，最终获取到的字符串是 http/https 开头的</p><p>此时应该通过 <code>a.getAttribute(&#39;href&#39;)</code> 来获取，能保证获取到的字符串不会被浏览器动手脚</p><h2 id="CSS-属性"><a href="#CSS-属性" class="headerlink" title="CSS 属性"></a>CSS 属性</h2><p>有 class 和 style 两种</p><p>对于 class，使用 <code>[node].className=&#39;newClass&#39;</code> 来修改</p><p>或使用 <code>[node].classList.add(&#39;newClass&#39;)</code> 来添加适配的 class</p><p>对于 style，可以直接赋值 style 字符串</p><p>如 <code>div.style=&#39;width:100px; height: 200px&#39;</code></p><p>也可以针对性赋值，如 <code>div.style.width=&#39;100px&#39;</code></p><h2 id="data-属性"><a href="#data-属性" class="headerlink" title="data 属性"></a>data 属性</h2><p>常常可以见到形如 <code>data-*</code> 的属性</p><p>这些属性类似于 style，可以通过统一入口 dataset 来访问</p><p>如属性 <code>data-x-err</code>，可以通过 <code>div.dataset.xErr</code> 来访问</p><h2 id="自定义属性"><a href="#自定义属性" class="headerlink" title="自定义属性"></a>自定义属性</h2><p>修改方法与 HTML 属性相同，直接通过点符号访问即可</p><p>但一般不建议采用不是 data 的自定义属性</p><p>因为当目标结点现在在页面中时，对以上三种属性的修改都会直接同步到页面上，但对自定义属性的修改不能同步到页面上</p><h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><p>每个元素都会有各种事件，此处以 click 事件为例</p><p>要为 click 事件绑定处理函数，可以用如下两种方法</p><ol><li><p><code>div.onclick=()=&gt;{}</code>，此时 div 只能有一个方法，新方法会覆盖旧方法，在冒泡阶段执行</p></li><li><p><code>div.addEventListener(&#39;click&#39;,()=&gt;{},false)</code>，此时 div 有若干个方法，新方法与旧方法都会在 click 事件被触发</p><p>此处的第三个参数默认值 false，表示事件在冒泡阶段触发。如果改为 true 就是在捕获阶段触发</p><p>需要注意的是，IE 只有冒泡阶段，并且事件列表执行顺序是 FIFO，其它非 IE 浏览器则有捕获和冒泡，且执行顺序是 LIFO</p></li></ol><p>不论是如何添加事件，在事件被触发时，都有两个默认参数</p><p>一个是 this，指向事件触发所在的元素</p><p>一个是 event，包含该事件触发时的所有相关信息</p><h2 id="文本内容"><a href="#文本内容" class="headerlink" title="文本内容"></a>文本内容</h2><p>通过 innerText、textContent 属性来添加文本</p><p><strong>innerText 是 IE 产物，textContent 是其它浏览器产物，但现在所有浏览器都同时支持两个</strong></p><h2 id="父子结点关系"><a href="#父子结点关系" class="headerlink" title="父子结点关系"></a>父子结点关系</h2><p>可以通过结点操作或 innerHTML 注入来实现</p><p>例如 <code>div.innerHTML=&#39;&lt;span&gt;233&lt;/span&gt;&#39;</code> 就是向 div 中插入了一个内容为 233 的 span 标签</p><p>注意，此时会覆盖 div 中的所有内容（包括子元素）</p><p>如果想添加新儿子，可以使用 appendChild 方法，不再赘述</p><p>如果想换个新父结点，则只需要利用 appendChild 会出现在最新位置的特点，直接向新父结点插入当前结点即可</p><h1 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h1><p><a href="https://github.com/Ringoer/Toy/blob/main/37/main.js" target="_blank" rel="noopener">原生 dom 封装</a></p><h1 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h1><p>既然 DOM API 这么复杂，有没有更方便的方法呢？</p><p>答案是有，典型的例子就是 JQuery 库</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 浏览器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS循环打印与延迟执行</title>
      <link href="/frontend/javascript-setTimeout/"/>
      <url>/frontend/javascript-setTimeout/</url>
      
        <content type="html"><![CDATA[<p>众所周知 var 在循环里有坑</p><p>本文介绍基于经典例子——打印 0 到 5</p><a id="more"></a><p>关于打印 0 到 5 这个任务，该怎么办呢？很自然地想到使用循环打印</p><p>但如果是普通的循环打印，就不会有这篇文章了</p><p>我们要做的是——通过 setTimeout 的循环打印</p><p>首先是 c 风格的循环打印代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">0</span>; i&lt;<span class="number">6</span>; i++)&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i)</span><br><span class="line">  &#125;,<span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>run 了一看，ん？？怎么打了 6 个 6</p><p>原因是此时 i 变量相对于 for 来说处在全局，而不是封闭的词法环境</p><p>光是这个原因，都足以抹平 let 和 var 的差距了</p><p>再加上 setTimeout 的宏任务，会在下一个事件循环开启的时候才执行（关于宏任务，会在其它文章介绍，本篇略</p><p>于是执行就变成了</p><ol><li>声明 i=0</li><li>循环设置定时器，定时器中索引指向 i</li><li>循环完毕，i=6</li><li>当前事件循环清空，开启下一个事件循环</li><li>通过索引发现 i=6，于是所有定时器都打印了 6</li></ol><p>那怎么办呢？此时注意到，刚才我提到了一个关键词——封闭的词法环境</p><p>那采用闭包的思想，让 i 处于封闭的词法环境，不就可以了！</p><p>来试试</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i&lt;<span class="number">6</span>; i++)&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i)</span><br><span class="line">  &#125;,<span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在就可以正常打印 0 到 5 了！</p><p>为什么呢？因为此时 i 的作用域仅限于 for 之内，每个 setTimeout 获取 i 的索引的时候，获取到的都是不一样的值，所以现在可以正常打印</p><p>但是在这里，换成 var 就大不相同了</p><p>因为通过 var 声明的变量实际上会绑定到 window，所以此时获取的索引还是相同，还是要打印 6 个 6</p><p>那么，还有什么别的，能通过 setTimeout 打印 0 到 5 的办法呢？</p><p>容易想到，有两种改变</p><ol><li>通过在 setTimeout 中自增来实现</li><li>通过 generator 实现</li></ol><p>先说第一种，代码很简单，把控制自增的部分从 for 移动到 setTimeout 就可以了</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> n = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i&lt;<span class="number">6</span>; i++)&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(n++)</span><br><span class="line">  &#125;,<span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意到此时 let i 除了控制循环，已经和 setTimeout 没有关系了</p><p>配合后置 ++ 运算符的先取值再自增特性，很容易实现了在 setTimeout 中的自增</p><p>那么 generator 怎么实现呢？</p><p>我不想在这里介绍 generator 语法（（实在太长了</p><p>直接给出例子</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generateSequence</span>(<span class="params">start, end</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt;= end; i++) <span class="keyword">yield</span> i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> g=generateSequence(<span class="number">0</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;<span class="number">6</span>; i++)&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(g.next().value)</span><br><span class="line">  &#125;,<span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们可以声明一个生成器工厂，每当运行该工厂方法的时候，传入上下界，然后返回一个生成器</p><p>每当生成器调用 next 方法的时候，都会返回一个对象，该对象包含 value 字段和 done 字段，分别表示抛出的值和该生成器当前的状态</p><p>显然生成器的调用是不可逆的，所以也约等于刚才说的在 setTimeout 中自增</p><p>以上</p><p>你还有别的办法吗？可以通过本站的”联系方式”向我发邮件~~</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>py对拍器</title>
      <link href="/algorithm/python-counterpoint/"/>
      <url>/algorithm/python-counterpoint/</url>
      
        <content type="html"><![CDATA[<p>今天在验题的时候，与其他验题人输出不合，偶感，特此写一个对拍器</p><a id="more"></a><p>可以用于 c/cpp 对拍</p><p>请先去除代码中的 freopen，并编译成 exe</p><p>使用时只需要修改运行目录，和验题人标识符，即可</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.chdir(<span class="string">'E:\problems\div1\T1'</span>)</span><br><span class="line">arr=os.listdir()</span><br><span class="line">input_files=[file <span class="keyword">for</span> file <span class="keyword">in</span> arr <span class="keyword">if</span> file.endswith(<span class="string">'.in'</span>)]</span><br><span class="line">l=len(input_files)</span><br><span class="line"></span><br><span class="line">names=[<span class="string">'lzz'</span>,<span class="string">'ringoer'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names:</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(l):</span><br><span class="line">    os.system(name+<span class="string">'.exe &lt;'</span>+input_files[i]+<span class="string">' &gt;'</span>+str(i+<span class="number">1</span>)+<span class="string">'.'</span>+name+<span class="string">'.out'</span>)</span><br><span class="line"></span><br><span class="line">arr=os.listdir()</span><br><span class="line">output_files=[file <span class="keyword">for</span> file <span class="keyword">in</span> arr <span class="keyword">if</span> file.endswith(<span class="string">'.out'</span>)]</span><br><span class="line"></span><br><span class="line">ans=[[open(file,mode=<span class="string">'r'</span>,encoding=<span class="string">'utf-8'</span>).read() <span class="keyword">for</span> file <span class="keyword">in</span> output_files <span class="keyword">if</span> name <span class="keyword">in</span> file] <span class="keyword">for</span> name <span class="keyword">in</span> names]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(l):</span><br><span class="line">  flag=<span class="keyword">True</span></span><br><span class="line">  <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>,len(names)):</span><br><span class="line">    <span class="keyword">if</span> ans[<span class="number">0</span>][i] != ans[j][i]:</span><br><span class="line">      flag=<span class="keyword">False</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">if</span> flag:</span><br><span class="line">    print(flag)</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    print(i)</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>,len(names)):</span><br><span class="line">      print(names[j]+<span class="string">'='</span>+ans[j][i])</span><br></pre></td></tr></table></figure><p>高度解耦，非常美观</p>]]></content>
      
      
      <categories>
          
          <category> algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS对象用法</title>
      <link href="/frontend/javascript-object/"/>
      <url>/frontend/javascript-object/</url>
      
        <content type="html"><![CDATA[<p>JS 也有面向对象</p><a id="more"></a><p>又到了我第 114514 喜欢的 CRUD 环节</p><h1 id="Create"><a href="#Create" class="headerlink" title="Create"></a>Create</h1><p>创建属性一般有两种办法</p><ol><li>在对象声明时创建</li><li>在对象声明后插入</li></ol><h2 id="声明对象"><a href="#声明对象" class="headerlink" title="声明对象"></a>声明对象</h2><p>一般有两种</p><ol><li><p>直接创建</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj=&#123;</span><br><span class="line">    x:<span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>通过 Object 对象方法创建</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj=<span class="keyword">new</span> <span class="built_in">Object</span>(&#123;</span><br><span class="line">    x:<span class="number">1</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><p>为什么会有两种写法？因为第二种才是正规的</p><p>但是架不住第一种更方便，于是第一种也变成合法的了</p><p>obj 的键一定是字符串，所以可以写任意的键名，甚至包括 空字符串 和 emoji</p><p>需要注意的是，无论你怎么写 obj 的键，它在构造完成后都会变成字符串</p><p>可以通过 Object.keys(obj) 来查看</p><p>比如</p><ol><li><p>键是数字的情况</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj=&#123;</span><br><span class="line">    <span class="number">2</span>:<span class="string">'233'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时 obj 会拥有一个名为 ‘2’ 的键</p></li><li><p>有同名变量的情况</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">let</span> obj=&#123;</span><br><span class="line">    a:<span class="string">'233'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时 obj 会拥有一个名为 ‘a’ 的键</p></li></ol><p>但还有 2 种情况例外</p><ol><li><p>当 obj 是数字表达式的时候</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj=&#123;</span><br><span class="line">    <span class="number">1e2</span>: <span class="string">'233'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时 obj 会拥有一个名为 ‘100’ 的键</p></li><li><p>当 obj 使用方括号表达式的时候</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a=<span class="number">233</span>;</span><br><span class="line"><span class="keyword">let</span> obj=&#123;</span><br><span class="line">    [a]:<span class="string">'233'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时 obj 会拥有一个名为 ‘233’ 的键</p></li></ol><p>而且，obj 在自动构建后会包含一个 <code>__proto__</code> 属性指向其原型</p><p>那我不要默认的 Object 原型，想要别的原型怎么办？</p><p>可以使用 Object.create 来创建来自指定原型的新对象</p><p>示例如下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> common=&#123;</span><br><span class="line">    xxx:<span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> a=<span class="built_in">Object</span>.create(common,&#123;<span class="attr">yyy</span>:&#123;<span class="attr">value</span>:<span class="number">2</span>&#125;&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure><p>期望输出如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;yyy: 2&#125;</span><br><span class="line">yyy: 2</span><br><span class="line">__proto__:</span><br><span class="line">xxx: 1</span><br><span class="line">__proto__: Object</span><br></pre></td></tr></table></figure><p>此时 a 可以访问属性 xxx 和 yyy，其中 yyy 来自自身，xxx 来自原型</p><p>需要注意的是，在 create 的第二个参数中，要求写的是属性描述符，一般包括</p><ol><li>value，属性值，必填</li><li>writeable，默认 true，可以编辑，若为 false 则只读</li><li>enumerable，默认 true，可以被枚举，若为 false 则不能通过简单的键遍历找到</li><li>configureable，默认 true，可以被重新配置，若为 false 则永远在当前对象上保持当前状态</li></ol><p>等 4 个配置</p><h2 id="插入属性"><a href="#插入属性" class="headerlink" title="插入属性"></a>插入属性</h2><p>一般有两种逐条插入的写法</p><ol><li>obj.property = value</li><li>obj[property] = value</li></ol><p>都是合法的写法</p><p>但是对于第一种，点号后必须是完整键名，不加引号</p><p>对于第二种，方括号内可以是表达式或字符串，如果可以识别为字符串，则字符串优先</p><p>示例如下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj=&#123;</span><br><span class="line">    xxx: <span class="number">666</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj[<span class="string">'abc'</span>]=<span class="number">233</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> abc=<span class="string">'xxx'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj.abc); <span class="comment">// 233</span></span><br><span class="line"><span class="built_in">console</span>.log(obj[<span class="string">'abc'</span>]); <span class="comment">// 233</span></span><br><span class="line"><span class="built_in">console</span>.log(obj[abc]); <span class="comment">// 666</span></span><br></pre></td></tr></table></figure><p>可见点符号的识别和方括号的识别是不一样的</p><p>还有一种批量插入的写法 Object.assign</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj=&#123;</span><br><span class="line">    xxx: <span class="number">666</span>,</span><br><span class="line">    yyy: <span class="number">233</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.assign(obj,&#123;<span class="attr">xxx</span>:<span class="number">111</span>,<span class="attr">zzz</span>:<span class="number">114514</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br></pre></td></tr></table></figure><p>期望输出如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;xxx: 111, yyy: 233, zzz: 114514&#125;</span><br></pre></td></tr></table></figure><p>可见 assign 可以覆盖，可以新增，而且不会影响其他原有值</p><h1 id="Retrieve"><a href="#Retrieve" class="headerlink" title="Retrieve"></a>Retrieve</h1><p>显然可以分为按键查找和按值查找两种类型</p><h2 id="按键查找"><a href="#按键查找" class="headerlink" title="按键查找"></a>按键查找</h2><p>可以使用以下两种方法</p><ol><li>in</li><li>Object.hasOwnProperty</li></ol><p>in 通过查找原型链确定某个参数是否存在于指定对象上</p><p>Object.hasOwnProperty 只会查找对象本身，不会上升到原型链</p><p>也可以用以下的 Object 方法来查找键或值</p><ol><li>Object.keys 列出所有键</li><li>Object.values 列出所有值</li><li>Object.entries 列出所有键值对</li></ol><h2 id="按值查找"><a href="#按值查找" class="headerlink" title="按值查找"></a>按值查找</h2><p>通过上述的 entries 方法取得所有键值对，然后遍历即可</p><h1 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h1><p>可以使用</p><ol><li>点符号</li><li>方括号</li><li>Object.assign</li><li>Object.defineProperty</li></ol><p>来更新属性</p><p>需要注意的是，上述方法均不会直接修改到原型上</p><p>比如原型上有属性 xxx，当前对象 obj 上没有</p><p>则令 obj.xxx=’233’，会为当前对象绑定一个新属性 xxx，而不会修改原型上的</p><p>虽然可以通过 <code>__proto__.xxx</code> 来修改，但十分不推荐修改原型的属性</p><p>那如果直接修改原型呢？</p><p>虽然 JS 是允许直接通过 <code>__proto__ = xxx</code> 来修改对象的原型指向的，但性能十分之低下</p><p>如果一定要修改原型，最好在创建对象的时候使用 Object.create，在创建时就指定新的原型</p><h1 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h1><p>一般有删除值和删除键两种需求</p><p>对于删除值，只需要取对应的键，然后赋值 undefined 即可</p><p>对于删除键，只需要使用 delete 语句</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> obj.property;</span><br></pre></td></tr></table></figure><p>即可删除键</p><p>可以用 <code>property in obj</code> 查看 obj 中是否还含有指定键名</p><p>但待删除的键不可以是不可配置的（通过 Object.defineProperty 设置的不可配置）</p><p>需要注意的是，delete 语句用于删除属性时，在所有情况下都会返回 true 表示删除成功，即便 obj 中不存在目标键</p><p>除非将 delete 用于删除对象等非属性值，才会返回 false</p><p>谢谢阅读</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS语法-基于C</title>
      <link href="/frontend/javascript-base-grammar/"/>
      <url>/frontend/javascript-base-grammar/</url>
      
        <content type="html"><![CDATA[<p>本文描述 JavaScript 的基本语法，但和 c 一样的就跳过了</p><a id="more"></a><h1 id="表达式和语句"><a href="#表达式和语句" class="headerlink" title="表达式和语句"></a>表达式和语句</h1><p>与 c 基本相同，但是 c 对于分号是强要求，js 对于分号并不强要求，只要不影响断句，想怎么样都可以</p><p>并且，c 对于换行的语句基本不支持，但是 js 依然是只要不影响断句就可以</p><p>但是 return 不一样，js 的 return 不能换行，否则会返回 undefined</p><h1 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h1><p>c 的标识符只能接受数字字母下划线，且不能以数字开头</p><p>js 的标识符可以接受所有符号，包括希腊文、中文等，不过依然不能以数字开头</p><h1 id="if、else、switch、三目表达式"><a href="#if、else、switch、三目表达式" class="headerlink" title="if、else、switch、三目表达式"></a>if、else、switch、三目表达式</h1><p>与 c 完全相同</p><h1 id="while、break、continue"><a href="#while、break、continue" class="headerlink" title="while、break、continue"></a>while、break、continue</h1><p>与 c 完全相同</p><h1 id="for"><a href="#for" class="headerlink" title="for"></a>for</h1><p>c 只能接受 for(初始化; 循环条件; 迭代) 这种形式</p><p>js 除了上述形式，还可以接受 for(let 标识符 of 可迭代对象) 或 for(let 标识符 in 可迭代对象) 的形式</p><p>for … in 还可以用于枚举对象键</p><h1 id="label"><a href="#label" class="headerlink" title="label"></a>label</h1><p>类似于 c 的 goto 语句</p><p>区别是 c 只有 goto，只能前往 label 所在区域</p><p>但是 js 只有 break 和 continue，只能打破现在所在 label</p><p>为什么这里 continue 不是循环？因为 continue 的作用是进入下一次迭代，但是普通的 label，除非写在循环中，否则哪里来的下一次迭代呢</p><hr><p>以上</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo唯一ID遍历器</title>
      <link href="/others/hexo-uniform-id/"/>
      <url>/others/hexo-uniform-id/</url>
      
        <content type="html"><![CDATA[<p>用 hexo 写博客，为了 URL 好看，显然要手动为每一篇文章都指定 ID，怎么防止重复呢？</p><a id="more"></a><hr><p>可以用 python 代码实现</p><p>强语义的代码如下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 改变当前工作目录，并获取目录下的所有文件</span></span><br><span class="line">os.chdir(<span class="string">'D:\hexo\source\_posts'</span>)</span><br><span class="line">arr=os.listdir()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取每个文件的内容，存数组</span></span><br><span class="line">arr=[open(file,mode=<span class="string">'r'</span>,encoding=<span class="string">'utf-8'</span>).read() <span class="keyword">for</span> file <span class="keyword">in</span> arr]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取每个内容中的 ID，存数组</span></span><br><span class="line">arr=[text.split(<span class="string">'id: '</span>)[<span class="number">1</span>].split(<span class="string">'\n'</span>)[<span class="number">0</span>] <span class="keyword">for</span> text <span class="keyword">in</span> arr]</span><br><span class="line">arr.sort()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> arr:</span><br><span class="line">  print(i)</span><br></pre></td></tr></table></figure><p>通过如上代码，一眼就可以看出哪里 ID 重复了</p>]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS的历史</title>
      <link href="/frontend/javascript-history/"/>
      <url>/frontend/javascript-history/</url>
      
        <content type="html"><![CDATA[<p>简单讲讲前端利器 JavaScript 的历史</p><a id="more"></a><h1 id="诞生"><a href="#诞生" class="headerlink" title="诞生"></a>诞生</h1><p>JavaScript 诞生自美国人布兰登之手</p><p>布兰登于 1961 年出生，1995 年进入网景公司，受命为网景公司的浏览器开发了 JavaScript 功能</p><p>该功能当初只是为了蹭 Java 的热度，所以才命名为 JavaScript，类似雷锋和雷峰塔的关系（</p><p>布兰登当初只花了 10 天就设计出了 JavaScript 的雏形</p><h1 id="发展"><a href="#发展" class="headerlink" title="发展"></a>发展</h1><p>没想到后来大家发现 JavaScript 在浏览器上这么好用，于是每家浏览器都开发了自己浏览器上的 JavaScript 方言，其中包括微软 IE 浏览器</p><p>网景公司一看，这怎么行，我要合纵连横，打败微软先</p><p>于是 1996 年 11 月，网景向 ECMA 提交了 JavaScript 语言标准，但因为版权问题，改名为 ECMAScript</p><p>现在我们所说的 ECMAScript 是标准，JavaScript 是实现，类似于 C99 和 C语言的关系</p><h1 id="停滞"><a href="#停滞" class="headerlink" title="停滞"></a>停滞</h1><p>在和网景的竞争中，微软采取了一个很”机智”的行为：将 IE6 捆绑进 Windows XP 系统</p><p>这个行为虽然在之后被判定为垄断行为，但在当时确实帮助 IE 迅速抢占了大量的市场份额，直接导致网景公司无法继续运营</p><p>网景决定绝地求生奋力一搏，将自己的浏览器源代码开源了，这就是后来的 Firefox</p><p>但是即便开源，也还是竞争不过 IE，终于在 1998 年年底，网景被收购了</p><p>这之后 IE6 打遍天下无敌手，以至于微软都觉得 IE 不需要继续改进了，于是解散了 IE6 团队</p><p>在看到 IE6 团队解散后，Firefox 打算再试试，卷土重来，继续与 IE 竞争，但收效甚微</p><p>到 2004 年，IE6 占有全球市场的 80%</p><p>但是——IE6 不兼容 W3C 标准，特别是 CSS！！！！</p><p>2005 年，微软终于发现 IE6 还是太菜，BUG 巨多，标准不兼容，于是重新组建了 IE7 团队，但却不是 IE 原班人马，这导致 IE7 甚至打不过 IE6</p><p>特别是中国市场，几乎全国都是盗版 Windows XP，所以 IE6 在中国大行其道</p><p>直到 2008 年，Chrome 发布第一版为止，JavaScript 都因为浏览器大战，只产生了几项新技术，没有太大的发展</p><h1 id="重新起步"><a href="#重新起步" class="headerlink" title="重新起步"></a>重新起步</h1><p>2004 年，谷歌抓住机会，抢了一些从 Firefox 和 IE 流失的程序员</p><p>同年，谷歌发布了 Gmail 在线网页，向人们展示了 JavaScript 不止可以做小功能，还可以在网页上做到当时应用程序才能做到的邮件系统功能，让人们发现了 JavaScript 的无限可能性</p><p>显然，邮件系统的交互是用到了网页与服务器通信的技术的</p><p>于是在 2005 年，Jesse 总结了这项技术，并将其命名为 AJAX。这标志着前端这个领域正式诞生</p><p>2008 年，谷歌发布了 Chrome 第一版</p><p>Chrome 对标准支持良好，JavaScript 终于有能正常运行的地方了，这才又重新慢慢发展</p><p>之后的 2010 年，iPhone4 发布，世界进入智能手机时代</p><p>虽然微软也试图搭上这班车，但 Windows Phone 实在是不行，竞争中没有任何优势</p><p>于是智能手机市场就出现了一个情况——因为智能手机上没有 IE，所以不需要在智能手机上兼容 IE 了！</p><p>这是 IE 消亡的重大征兆，毕竟从现在回头看，跟不上智能手机市场的服务基本都被淘汰了</p><p>在中国国内，则有一个重大事件：2016 年，淘宝和天猫宣布不再支持 IE6、7、8</p><p>中国程序员也摆脱了 IE 的枷锁，让 JavaScript 再也没有后顾之忧地开始极速发展</p><h1 id="ECMAScript-标准"><a href="#ECMAScript-标准" class="headerlink" title="ECMAScript 标准"></a>ECMAScript 标准</h1><p>1997 年 6 月，第一版</p><p>1999 年 12 月，第三版。因为此时 IE6 还在更新，所以 IE6 也有实现该标准的部分要求，所以这一版成为了使用最广的版本</p><p>第四版则因为贪心不足蛇吞象，加入新功能太多，浏览器厂商纷纷表示不能实现，于是流产了</p><p>这下一搞，直到十年之后，浏览器大战结束的 2009 年 12 月，才发布了第五版</p><p>又拖到 2015 年 6 月，Chrome 占有全球过半市场，才发布了第六版</p><p>标准的制定与发布遵循以下流程：</p><ol><li>浏览器厂商尝试添加新功能，添加后用户反馈良好</li><li>浏览器厂商将该功能推荐给 ECMA，ECMA 询问其他厂商意见</li><li>其他厂商一致认为该功能是有用的，于是 ECMA将该功能加入标准</li></ol><p>从此 ES6 发布开始，JavaScript 发展进入快车道，每年都有一版新标准发布，以年份命名</p><p>但目前面试常考的只有 ES5 和 ES6，至于 ES2016、ES2017等标准，一般不会在面试中考察</p><h1 id="关键技术"><a href="#关键技术" class="headerlink" title="关键技术"></a>关键技术</h1><p>Chrome 使用的 JS 引擎叫 V8 引擎，是一个系列引擎的一种，其余引擎分别解析其它语言</p><p>2009 年，Ryan 基于 V8 创造了 Node.js；2010 年，Isaac 基于 Node.js 创造了 npm。这让 JavaScript 在浏览器之外也可以执行了！所以 Node.js 快速流行起来</p><p>还是 2010 年，TJ 基于 Node.js 发布了 Express 框架，从此 JavaScript 也可以用于后端开发了</p><p>之后前端的发展越来越快，产生了很多其其它它的框架，比如 requirejs，比如 webpack 打包，比如 React、Vue 等前端框架，总之技术发展日新月异，JS 生命力旺盛，蓬勃向上</p><p>相信未来也会有更多更多的，关键的新技术出现</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>JavaScript 其实是和 Java 同年出生的，如果没有十年浏览器大战，JavaScript 现在又会是何等光景呢……</p><p>不过也正是 JavaScript 现在正处在市场热点，我才有机会通过这项技术找到工作，2333</p><p>希望 JavaScript 越来越好！</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络</title>
      <link href="/knowledge/computer-network/"/>
      <url>/knowledge/computer-network/</url>
      
        <content type="html"><![CDATA[<p>本文简单介绍一些计算机网络相关的专业知识</p><a id="more"></a><p>众所周知，计算机网络最重要的概念是 OSI 七层模型</p><h1 id="OSI-七层模型"><a href="#OSI-七层模型" class="headerlink" title="OSI 七层模型"></a>OSI 七层模型</h1><p>自底向上，分为以下七层</p><ol><li>物理层，完成 bit 到载波之间的转换，处理物理介质接口</li><li>数据链路层，负责介质访问控制和逻辑链路控制</li><li>网络层，负责主机到主机之间的通信与路由寻址</li><li>传输层，负责进程间端到端通信和可靠传输</li><li>会话层，负责会话的建立、撤销与面向连接的口令认证等</li><li>表示层，负责信息的加密、解密、压缩、转换等</li><li>应用层，提供最通用的应用程序（电子邮件、web等），完成用户与软件的交互</li></ol><p>然后先介绍一下重要的协议们</p><ol><li>网络层，IP 协议</li><li>传输层，TCP 协议</li><li>应用层，HTTP 协议</li><li>介于网络层和传输层之间，SSL 协议</li></ol><h1 id="IP-协议"><a href="#IP-协议" class="headerlink" title="IP 协议"></a>IP 协议</h1><p>网络层负责路径确定与逻辑寻址</p><p>而路径，就是由 IP 地址提供的，通过点分十进制计数法确定 IPv4 地址</p><p>但是显然 IP 地址总数是有限的，怎么延长寿命呢？</p><p>1985 年起增加 “子网号字段”，IP 地址变为 网络号+子网号+主机号</p><p>其中，主机号全 0 代表网络，主机号全 1 代表广播</p><p>这样，网络数量就增加了，但还是不够用，于是又产生了 网络地址转换——NAT</p><p>根据网络的 ABC 类，分配不同的私有地址，私有地址是同一路由器内特有的</p><p>常见的民用 IP 地址是 C 类，私有地址就是 192.168.0.0/16， 16 指子网掩码</p><p>为了 IP 协议的正常运转，又产生了 差错报告机制——ICMP，我们知道的 ping 命令测试网络连接可达性，就是基于 ICMP 的</p><p>而且 ping 命令是应用层直接使用 网络层 ICMP 的，并没有经过传输层的 TCP 或 UDP</p><p>一个 ping 实例如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ping baidu.com</span><br><span class="line"></span><br><span class="line">正在 Ping baidu.com [220.181.38.148] 具有 32 字节的数据:</span><br><span class="line">来自 220.181.38.148 的回复: 字节=32 时间=49ms TTL=53</span><br><span class="line">来自 220.181.38.148 的回复: 字节=32 时间=46ms TTL=53</span><br><span class="line">来自 220.181.38.148 的回复: 字节=32 时间=47ms TTL=53</span><br><span class="line">来自 220.181.38.148 的回复: 字节=32 时间=47ms TTL=53</span><br><span class="line"></span><br><span class="line">220.181.38.148 的 Ping 统计信息:</span><br><span class="line">    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，</span><br><span class="line">往返行程的估计时间(以毫秒为单位):</span><br><span class="line">    最短 = 46ms，最长 = 49ms，平均 = 47ms</span><br></pre></td></tr></table></figure><h1 id="TCP-协议"><a href="#TCP-协议" class="headerlink" title="TCP 协议"></a>TCP 协议</h1><p>传输层有 TCP 协议和 UDP 协议，其中 TCP 协议负责端到端连接、可靠性和流量控制</p><p>TCP 的特点如下</p><ol><li>面向连接</li><li>点对点</li><li>可靠</li><li>全双工</li><li>字节流</li></ol><p>相对的 UDP 的特点如下</p><ol><li>无连接</li><li>尽力交付</li><li>面向报文</li><li>允许广播</li></ol><p>因为 TCP 有 UDP 所没有的最重要的机制 —— 三次握手、四次挥手，所以 TCP 传输会比 UDP 安全很多，也易于控制，但是也因此在连接上消耗了更多时间，传输速率不如 UDP 快</p><p>TCP 的主要机制如下，其特点全部依赖其机制</p><ul><li>应答机制、超时机制、重传机制、窗口机制</li><li>流量控制：滑动窗口机制</li><li>拥塞控制：慢开始、拥塞避免、快重传、快恢复、随机早期检测</li><li>连接的建立和解除：三次握手、四次挥手</li></ul><p>虽然实际的数据报交换还是网络层在负责，但传输层解决了网络层的主要问题：丢包、重复、乱序</p><p>为什么可以解决这些问题呢？因为网络通信本质上是两个进程间的通信，而不是主机之间的通信</p><p>通信中由 IP 地址唯一标识主机，由端口号唯一标识进程，所以可以通过 IP 地址+端口号的形式来进行进程间通信</p><p>而传输层又向上层隐藏了硬件拓扑、路由细节等，使得上层应用程序可以直接调用其接口，建立一条虚拟的端到端的通信信道</p><p>建立信道和解除的过程如下图</p><p><img src="https://pic.ringoer.com/三次握手.png" alt="三次握手"><img src="https://pic.ringoer.com/四次挥手.png" alt="四次挥手"></p><h1 id="HTTP-协议"><a href="#HTTP-协议" class="headerlink" title="HTTP 协议"></a>HTTP 协议</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>万维网 WWW（World Wide Web）建立的原因，是一个美好的愿景：万物互联</p><p>万维网是分布式超媒体系统，是超文本系统的扩充</p><p>在万维网客户程序与万维网服务器程序之间进行交互所使用的就是超文本传输协议 HTTP，这是一个应用层协议，基于 TCP 进行可靠传输</p><h2 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h2><p>万维网通过”链接”的方法能主动地按需获取信息，不同的信息通过 <strong>统一资源定位符 URL</strong> 来标识</p><p>URL 的格式如下</p><p><code>&lt;协议&gt;://&lt;主机&gt;:&lt;端口&gt;/&lt;路径&gt;</code></p><p>此处的协议可以是 http、ftp、file 等，但本文只介绍 http 协议相关内容</p><h2 id="协议版本"><a href="#协议版本" class="headerlink" title="协议版本"></a>协议版本</h2><p>HTTP 1.0 协议是无状态的，HTTP 本身也是无连接的，虽然使用了基于 TCP 的可靠传输，但是每次通过 TCP 传输完毕后，该 TCP 连接都会被关闭</p><p>作为改进，HTTP 1.1 协议使用持续连接，指在收到服务器响应后，连接仍会保持一段时间，同一个客户和该服务器之间可以继续使用这条连接进行通信</p><h2 id="域名系统"><a href="#域名系统" class="headerlink" title="域名系统"></a>域名系统</h2><p>URL 中的主机号可以是 IP 地址，或一个域名，或一个计算机地址标识符</p><p>域名系统 DNS（Domain Name System）提供了将人类可读符号映射到计算机地址的服务（计算机地址不止是 IP 地址）</p><p>域名与计算机地址之间的关系是多对一，即一个域名只能映射到一个计算机地址，但一个计算机地址可以被多个域名所映射</p><p>域名的结构为 <strong>层次树状结构</strong>，由标号序列组成，各部分之间用 点号 隔开</p><p>但是如何知道域名和计算机地址的映射关系？需要通过 DNS 服务器来进行解析</p><p>每个 DNS 服务器负责一个区，此时该 DNS 服务器称为 <strong>权限域名服务器</strong>，用来保存该区中所有主机的域名到 计算机地址 的映射</p><p>包括 权限域名服务器，DNS 服务器自顶向下共有以下类型</p><ol><li><p>根域名服务器</p><p>最重要的域名服务器。所有根域名服务器都知道所有顶级域名服务器的域名和 IP 地址</p><p>不论是哪一个本地域名服务器，只要这个本地域名服务器不能自己解析一个域名，就会首先求助根域名服务器</p></li><li><p>顶级域名服务器</p><p>负责管理在自己注册的所有二级域名</p><p>响应可能是域名解析结果，也可能是下一步应当询问的域名服务器地址</p></li><li><p>权限域名服务器</p><p>负责一个区的域名服务器</p><p>响应可能是域名解析结果，也可能是下一步应当询问的权限域名服务器地址</p></li><li><p>本地域名服务器，也称为默认域名服务器</p><p>一般是客户端主机上设置的首选 DNS 服务器，也称为 ISP DNS 服务器</p><p>当主机发出 DNS 查询请求时，该请求报文首先发送给本地域名服务器</p></li></ol><p>显然查询 DNS 的请求是要经过多级中转的。如何决定查询顺序呢？</p><p>有两个阶段</p><ol><li><p>递归查询：主机向本地域名服务器的查询</p><p>如果主机所询问的本地域名服务器不知道域名解析的结果，则本地域名服务器就以 DNS 客户的身份，向其他服务器继续发出查询请求报文</p></li><li><p>迭代查询：本地域名服务器向根域名服务器及其他域名服务器的查询</p><p>如果本地域名服务器所询问的根域名服务器不知道域名解析的结果，则告诉本地域名服务器下一个查询目标服务器的地址，由本地域名服务器继续提交请求</p></li></ol><p>示意图如下</p><p><img src="https://pic.ringoer.com/DNS查询.png" alt="DNS查询"></p><p>这是服务器上的 DNS 查询，但不是每次 DNS 查询都直接从本地域名服务器开始</p><p>DNS 查询流程按顺序一般如下</p><ol><li>浏览器缓存</li><li>操作系统缓存</li><li>路由器缓存</li><li>主机上的 hosts 文件</li><li>本地域名服务器…</li></ol><p>可以使用 <code>nslookup [addr]</code> 命令来解析目标域名</p><p>一个 nslookup 实例如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">nslookup baidu.com</span><br><span class="line"></span><br><span class="line">服务器:  UnKnown</span><br><span class="line">Address:  192.168.1.1</span><br><span class="line"></span><br><span class="line">非权威应答:</span><br><span class="line">名称:    baidu.com</span><br><span class="line">Addresses:  220.181.38.148</span><br><span class="line">          39.156.69.79</span><br></pre></td></tr></table></figure><h2 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h2><p>此处特指软件意义上的端口，有别于交换机上的硬件端口</p><p>端口号一般是一个 16 为无符号整数，范围在 0 - 65536</p><p>一般 0 - 1023 号端口是服务保留端口，自己的项目最好不要启动在这些端口上，除非你知道自己在干什么</p><p>常用端口一般有 20、21、22、80、443 等</p><h2 id="路径"><a href="#路径" class="headerlink" title="路径"></a>路径</h2><p>对于静态资源服务器，路径一般与服务器所在的磁盘目录一一对应</p><p>对于动态服务器，路径一般是个逻辑路径，用以标识资源</p><p>在动态服务器的路径，一般采用 RESTFUL API 设计，用 URI 标识资源，用 HTTP 动词描述动作</p><p>一般在路径的末尾都有一个斜杠，除非该路径指向一个具体的静态文件</p><h2 id="报文结构"><a href="#报文结构" class="headerlink" title="报文结构"></a>报文结构</h2><p>HTTP 有两类报文：请求报文（request）和响应报文（response）</p><p>由于 HTTP 是面向文本的，所以报文中每个字段都是 ASCII 码串，长度不确定</p><p>报文都分为开始行、首部行和实体主体，分别对应 Chrome 控制台中看到的 General、Headers 和 Payload</p><p>在请求报文中，开始行就是请求行</p><p>可以在本地命令行通过 <code>curl -v [url]</code> 查看报文信息</p><p>一个 curl 实例如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">curl -v baidu.com</span><br><span class="line"></span><br><span class="line">* Rebuilt URL to: baidu.com/</span><br><span class="line">*   Trying 220.181.38.148...</span><br><span class="line">* TCP_NODELAY <span class="built_in">set</span></span><br><span class="line">* Connected to baidu.com (220.181.38.148) port 80 (<span class="comment">#0)</span></span><br><span class="line">&gt; GET / HTTP/1.1</span><br><span class="line">&gt; Host: baidu.com</span><br><span class="line">&gt; User-Agent: curl/7.55.1</span><br><span class="line">&gt; Accept: */*</span><br><span class="line">&gt;</span><br><span class="line">&lt; HTTP/1.1 200 OK</span><br><span class="line">&lt; Date: Fri, 27 Nov 2020 04:02:06 GMT</span><br><span class="line">&lt; Server: Apache</span><br><span class="line">&lt; Last-Modified: Tue, 12 Jan 2010 13:48:00 GMT</span><br><span class="line">&lt; ETag: <span class="string">"51-47cf7e6ee8400"</span></span><br><span class="line">&lt; Accept-Ranges: bytes</span><br><span class="line">&lt; Content-Length: 81</span><br><span class="line">&lt; Cache-Control: max-age=86400</span><br><span class="line">&lt; Expires: Sat, 28 Nov 2020 04:02:06 GMT</span><br><span class="line">&lt; Connection: Keep-Alive</span><br><span class="line">&lt; Content-Type: text/html</span><br><span class="line">&lt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"refresh"</span> content=<span class="string">"0;url=http://www.baidu.com/"</span>&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">* Connection <span class="comment">#0 to host baidu.com left intact</span></span><br></pre></td></tr></table></figure><h2 id="HTTP-动词"><a href="#HTTP-动词" class="headerlink" title="HTTP 动词"></a>HTTP 动词</h2><p>显然请求方法是很重要的。通常有如下请求方法</p><table><thead><tr><th>方法</th><th>意义</th></tr></thead><tbody><tr><td>OPTION</td><td>向服务器请求一些构成请求的关键选项，例如允许的方法</td></tr><tr><td>HEAD</td><td>向服务器询问，首部行中哪些头部是 required</td></tr><tr><td>GET</td><td>查</td></tr><tr><td>POST</td><td>增</td></tr><tr><td>PUT</td><td>改</td></tr><tr><td>PATCH</td><td>部分改</td></tr><tr><td>DELETE</td><td>删</td></tr><tr><td>TRACE</td><td>用于环回测试</td></tr><tr><td>CONNECT</td><td>用于代理服务器</td></tr></tbody></table><h2 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h2><p>HTTP 状态码分为 5 大类</p><table><thead><tr><th>状态码</th><th>意义</th></tr></thead><tbody><tr><td>1xx</td><td>通知</td></tr><tr><td>2xx</td><td>成功</td></tr><tr><td>3xx</td><td>重定向</td></tr><tr><td>4xx</td><td>客户端出错</td></tr><tr><td>5xx</td><td>服务器出错</td></tr></tbody></table><p>常见的有 200、301、302、304、401、403、404、415、500、502 等</p><h1 id="SSL-协议"><a href="#SSL-协议" class="headerlink" title="SSL 协议"></a>SSL 协议</h1><p>SSL 只有一个重点，就是 RSA 加密，可以查看本文 <a href="https://ringoer.com/algorithm/rsa/" target="_blank" rel="noopener">图解非对称加密</a></p><p>接下来介绍一下物理层和数据链路层</p><p>待续</p>]]></content>
      
      
      <categories>
          
          <category> knowledge </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
            <tag> http(s) </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS动画</title>
      <link href="/frontend/css-animation/"/>
      <url>/frontend/css-animation/</url>
      
        <content type="html"><![CDATA[<p>CSS 也具备原生的动画实现机制，可以在不使用或少使用 JS 的情况下做到动画的效果</p><a id="more"></a><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>CSS 动画是基于对盒模型的变形、变色等 2D变换 实现的</p><p>也就是说，其核心是 transform 属性</p><p>一般有三种方案</p><ol><li>定时器</li><li>transition 过渡</li><li>animation 动画</li></ol><p>显然动画是逐帧播放的，每一帧都依赖于浏览器渲染。于是先介绍一下浏览器渲染</p><h1 id="浏览器渲染"><a href="#浏览器渲染" class="headerlink" title="浏览器渲染"></a>浏览器渲染</h1><p>关于浏览器渲染的详细优化，可以查阅 <a href="https://developers.google.com/web/fundamentals/performance/rendering" target="_blank" rel="noopener">渲染性能</a></p><p>首先介绍一个关键词：像素管道</p><h2 id="像素管道"><a href="#像素管道" class="headerlink" title="像素管道"></a>像素管道</h2><p>如图，这就是像素管道，表示渲染的全过程</p><p><img src="https://pic.ringoer.com/css-animation-render-5.jpg" alt=""></p><ul><li><strong>JavaScript</strong>。一般来说，我们会使用 JavaScript 来实现一些视觉变化的效果。比如用 jQuery 的 <code>animate</code> 函数做一个动画、对一个数据集进行排序或者往页面里添加一些 DOM 元素等。当然，除了 JavaScript，还有其他一些常用方法也可以实现视觉变化效果，比如：CSS Animations、Transitions 和 Web Animation API。</li><li><strong>样式计算</strong>。此过程是根据匹配选择器（例如 <code>.headline</code> 或 <code>.nav &gt; .nav__item</code>）计算出哪些元素应用哪些 CSS 规则的过程。从中知道规则之后，将应用规则并计算每个元素的最终样式。</li><li><strong>布局</strong>。在知道对一个元素应用哪些规则之后，浏览器即可开始计算它要占据的空间大小及其在屏幕的位置。网页的布局模式意味着一个元素可能影响其他元素，例如 <code>&lt;body&gt;</code> 元素的宽度一般会影响其子元素的宽度以及树中各处的节点，因此对于浏览器来说，布局过程是经常发生的。</li><li><strong>绘制</strong>。绘制是填充像素的过程。它涉及绘出文本、颜色、图像、边框和阴影，基本上包括元素的每个可视部分。绘制一般是在多个表面（通常称为层）上完成的。</li><li><strong>合成</strong>。由于页面的各部分可能被绘制到多层，由此它们需要按正确顺序绘制到屏幕上，以便正确渲染页面。对于与另一元素重叠的元素来说，这点特别重要，因为一个错误可能使一个元素错误地出现在另一个元素的上层。</li></ul><p>并非每次渲染都会触发全部的 5 个过程，大致分为如下 3 种</p><ol><li><p>JS / CSS &gt; 样式 &gt; 布局 &gt; 绘制 &gt; 合成</p><p><img src="https://pic.ringoer.com/css-animation-render-5.jpg" alt=""></p><p>当修改了元素的几何属性时，会触发重新布局，所以 5 个过程都会执行</p></li><li><p>JS / CSS &gt; 样式 &gt; 绘制 &gt; 合成</p><p><img src="https://pic.ringoer.com/css-animation-render-4.jpg" alt=""></p><p>如果只是修改了背景图片、文字颜色等仅依赖绘制的属性，即不会影响布局，则浏览器会跳过布局，但仍将执行绘制</p></li><li><p>JS / CSS &gt; 样式 &gt; 合成</p><p><img src="https://pic.ringoer.com/css-animation-render-3.jpg" alt=""></p><p>如果更改的属性是一个既不需要布局也不需要绘制的属性，则浏览器将直接跳到合成</p><p>第 3 种情况的开销最小，最适合于应用生命周期中的高压力点，例如动画或滚动</p></li></ol><h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><p>首次布局，称之为 布局（layout）</p><p>之后的修改布局，称之为 回流 或 重排（reflow）</p><p>重排，即元素的几何属性被修改，导致浏览器重新执行整个渲染流程</p><p>由上图情况 1 可得，重排必定引发重绘</p><h2 id="重绘"><a href="#重绘" class="headerlink" title="重绘"></a>重绘</h2><p>首次绘制，称之为 绘制（paint）</p><p>之后的修改表现，称之为 重绘（repaint）</p><p>重绘，即背景图片、文字颜色等仅依赖绘制的属性被修改，导致浏览器重新绘制所需的颜色等</p><p>由上图情况 1 和 2 可得，引发重绘的时候不一定发生重排</p><h2 id="合成"><a href="#合成" class="headerlink" title="合成"></a>合成</h2><p>已经算完了，只要同步到页面上就可以了，这就是合成，所以不能跳过</p><h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><p>那怎么知道什么属性会不会引发重排或重绘呢？可以查看 <a href="https://csstriggers.com/" target="_blank" rel="noopener">CSS Triggers</a></p><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>Chrome 提供了工具，来帮助开发者确定什么时候发生了重绘</p><p>打开工具的流程如下</p><ol><li><p>F12 打开开发者工具</p></li><li><p>在 HTML 和 CSS 界面，按 ESC 打开 console 界面</p></li><li><p>按 console 界面左上角的更多，打开 Rendering 面板</p></li><li><p>勾选 Paint flashing，即可观察到浏览器在每次发生重绘时，重绘的部分发绿</p><p>设置如图</p><p><img src="https://pic.ringoer.com/css-animation-rendering.png" alt=""></p><p>也可以查看 Chrome 的文档 <a href="https://developers.google.com/web/fundamentals/performance/rendering/simplify-paint-complexity-and-reduce-paint-areas#%E4%BD%BF%E7%94%A8_chrome_devtools_%E5%BF%AB%E9%80%9F%E7%A1%AE%E5%AE%9A%E7%BB%98%E5%88%B6%E7%93%B6%E9%A2%88" target="_blank" rel="noopener">使用 Chrome DevTools 快速确定绘制瓶颈</a></p></li></ol><h1 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h1><p>可以通过定时器，为某个盒子设置定时变换</p><p>一般有三种定时器</p><ol><li>setTimeout</li><li>setInterval</li><li>requestAnimationFrame</li></ol><p>其中 1 和 2 的用法相同，类似如下代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    div.style.cssText=<span class="string">'transform: translate(100px,200px)'</span>;</span><br><span class="line">&#125;,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure><p>setTimeout 和 setInterval 方法都会返回一个 long 整数，表示计时器 ID</p><p>可以使用 cancelTimeout(id) 或 cancelInterval(id) 来取消计时器</p><p>但是使用 setTimeout 的动画，不是统一管理动画帧，而是分别渲染的，所以会导致有时候这一帧还没渲染好，下一帧的请求又来了，会造成丢帧的问题</p><p>所以更建议使用 requestAnimationFrame 来管理动画</p><p>requestAnimationFrame 的方法原型是</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.requestAnimationFrame(callback)</span><br></pre></td></tr></table></figure><p>要求传入一个回调函数，并在执行时向回调函数内传入一个 long 整数，表示时间戳</p><p>requestAnimationFrame 默认的执行间隔约 16.67 ms，约每秒 60 帧</p><p>可以在回调函数内通过时间戳判断是否应该准备渲染下一帧</p><p>与 setTimeout 同样的是，requestAnimationFrame 返回值也是一个 long 整数，表示计时器 ID</p><p>可以使用 cancelAnimationFrame(id) 来取消计时器</p><p>范例可以参考 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestAnimationFrame" target="_blank" rel="noopener">MDN window.requestAnimationFrame</a> 或 <a href="https://developers.google.com/web/fundamentals/performance/rendering/optimize-javascript-execution#%E4%BD%BF%E7%94%A8_requestanimationframe_%E6%9D%A5%E5%AE%9E%E7%8E%B0%E8%A7%86%E8%A7%89%E5%8F%98%E5%8C%96" target="_blank" rel="noopener">使用 requestAnimationFrame 来实现视觉变化</a></p><h1 id="transition"><a href="#transition" class="headerlink" title="transition"></a>transition</h1><p>第二种办法是使用 CSS transition 属性，令元素在两个状态之间过渡</p><p>一般用于制作悬浮等特效，呈现动画效果，而不是真正意义上的动画</p><p>查看 transition 的相关效果，可以访问 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/transition" target="_blank" rel="noopener">MDN transition</a></p><p>transition 一般有如下 4 个参数</p><ol><li><p>property name（required），指示监视的属性名，当该属性在指定两个状态之间发生变化的时候触发过渡效果</p><p>可以指定该属性取值为 all，表示监视该 css 选择器选中元素的所有属性</p></li><li><p>duration（required），指示过渡动画的播出时间</p></li><li><p>delay，指示过渡效果在触发时，先延迟 delay 时长，再开始播放过渡效果</p></li><li><p>timing function，指示过渡效果的变化速率曲线，默认是 ease，可以指定为 linear（线性）</p></li></ol><p>如上参数并排写，只需要用空格隔开</p><p>默认第一个出现的时间指示的是 duration，第二个才是 delay</p><p>当有多个 property 需要监视时，可以用逗号隔开参数语句</p><h1 id="animation"><a href="#animation" class="headerlink" title="animation"></a>animation</h1><p>第三种办法是使用 CSS animation 属性，令元素在若干个状态之间连续变化</p><p>与 transition 的区别是，transition 不能在没有触发条件的情况下播放，但 animation 不仅可以做到 transition 能做到的，还可以自动无限播放</p><p>查看 animation 的相关效果，可以访问 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation" target="_blank" rel="noopener">MDN animation</a></p><p>animation 一般有如下 8 个参数</p><ol><li>keyframe name（required），指示使用的动画帧定义</li><li>duration（required），指示动画的播出时间</li><li>delay，指示动画效果在触发时，先延迟 delay 时长，再开始播放动画效果</li><li>timing function，指示动画效果的变化速率曲线，默认是 ease，可以指定为 linear（线性）</li><li>iteration count，指示动画播出的次数，默认是 1，可以修改为 infinite</li><li>direction，指示动画播出的方向，默认是 normal，可以修改为 reverse 反向播放，或 alternate 表示来回播放</li><li>fill mode，指示动画播放结束时保留的帧，默认是 none，不保留任何帧，可以设置为 forwards 保留最后一帧，或 backwards 保留第一帧，或 both 在两个方向上扩展动画</li><li>play state，指示一个动画所处的状态，默认是 running，可以通过 JS 设置为 paused 来暂停动画，重新修改为 running 则会在暂停的位置继续播放</li></ol><p>显然，animation 属性规定了动画在播放时的参数，但还需要另外指定关键帧</p><p>在 transition 中是根据不同的动作触发，在 animation 中则是用 @keyframes 关键字定义</p><p>@keyframes 一般有如下两种写法</p><ol><li><p>from-to写法</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> slidein &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(0%); </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(100%);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>让 animation 在起始和末尾的两个帧之间变化</p></li><li><p>百分比写法</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> identifier &#123;</span><br><span class="line">  0% &#123; <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">left</span>: <span class="number">0</span>; &#125;</span><br><span class="line">  30% &#123; <span class="attribute">top</span>: <span class="number">50px</span>; &#125;</span><br><span class="line">  50% &#123; <span class="attribute">top</span>: <span class="number">30px</span>; <span class="attribute">left</span>: <span class="number">20px</span>; &#125;</span><br><span class="line">  50% &#123; <span class="attribute">top</span>: <span class="number">10px</span>; &#125;</span><br><span class="line">  68%, 72% &#123; <span class="attribute">left</span>: <span class="number">50px</span>; &#125;</span><br><span class="line">  100% &#123; <span class="attribute">top</span>: <span class="number">100px</span>; <span class="attribute">left</span>: <span class="number">100%</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>让动画在生命周期的不同节点呈现不同的效果</p><p>相同节点重复定义，会以最后一次定义为准，如第 4 和第 5 行，只有第 5 行会生效</p><p>相同效果可以用逗号隔开，如第 6 行</p></li></ol><p>以上，就是 CSS 动画相关的效果</p><p>关于优化等问题，需要配合 JS，此处就不描述了</p><p>谢谢阅读</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS布局</title>
      <link href="/frontend/css-layout/"/>
      <url>/frontend/css-layout/</url>
      
        <content type="html"><![CDATA[<p>现代网站都需要各种布局以保证页面展示效果，本文就说说布局</p><a id="more"></a><h1 id="布局类型"><a href="#布局类型" class="headerlink" title="布局类型"></a>布局类型</h1><h2 id="视觉类型"><a href="#视觉类型" class="headerlink" title="视觉类型"></a>视觉类型</h2><p>不同布局看起来的效果不一样</p><p>主要有 3 种</p><ol><li>两栏布局，很少单独使用了，一般用在给三栏布局的中间部分做两栏布局</li><li>三栏布局（多栏布局同三栏思路），如淘宝首页，两侧留空，中间保有内容</li><li>平均布局，如淘宝首页下方的 猜你喜欢，平均排列各种商品</li></ol><h2 id="技术类型"><a href="#技术类型" class="headerlink" title="技术类型"></a>技术类型</h2><p>可以选用不同的方案实现布局</p><p>主要有 4 种</p><ol><li>纯文档流布局</li><li>float 浮动布局</li><li>flex 弹性盒子布局</li><li>grid 网格布局</li></ol><p>本文以技术类型为轴，分别尝试实现 3 种视觉类型</p><p>本文中的两栏布局采用如下设计图</p><p><img src="https://pic.ringoer.com/css-layout-0.png" alt=""></p><p>如图，画得不太准，认为是方形就好了，同时为了展示效果，在代码中会放大 10 倍</p><p>三栏布局采用 <a href="https://www.taobao.com/" target="_blank" rel="noopener">淘宝首页</a> 作为示例</p><p>平均布局采用 <a href="https://www.bilibili.com/" target="_blank" rel="noopener">bilibili</a> 番剧区作为示例</p><h1 id="纯文档流"><a href="#纯文档流" class="headerlink" title="纯文档流"></a>纯文档流</h1><p>纯文档流布局，利用了文档流本身的特点——表现为块级的元素逐行排列，表现为内联的元素同行自左向右排列</p><h2 id="两栏布局"><a href="#两栏布局" class="headerlink" title="两栏布局"></a>两栏布局</h2><p>由图片可得，大致有如下结构的 HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"large"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"small"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"small"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用如下 CSS，即可完成两栏布局</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125; <span class="comment">/* reset */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">&#125; <span class="comment">/* 去除两列之间的空白 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span>&gt;<span class="selector-tag">div</span>,</span><br><span class="line"><span class="selector-class">.main</span>&gt;<span class="selector-tag">div</span>&gt;<span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">&#125; <span class="comment">/* 令 class=main 下的子 div 和孙 div 都获得边框，便于观察 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span>,</span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block; <span class="comment">/* 使得左右两列并排 */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 之后在左右盒子中分别逐行排列即可 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.large</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.middle</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.small</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果如图</p><p><img src="https://pic.ringoer.com/css-layout-1.png" alt=""></p><h2 id="三栏布局"><a href="#三栏布局" class="headerlink" title="三栏布局"></a>三栏布局</h2><p>显然只需要在 body 中放置 3 个块</p><p>于是可以推出如下 HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用如下 CSS，即可完成三栏布局</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125; <span class="comment">/* reset */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">&#125; <span class="comment">/* 去除底部空白 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>&gt;* &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125; <span class="comment">/* 使得三个块并排 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60vw</span>;</span><br><span class="line">&#125; <span class="comment">/* 使得 main 获得大小和边框，便于观察 */</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">/* 分别设定左右宽度 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20vw</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20vw</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果如图</p><p><img src="https://pic.ringoer.com/css-layout-2.png" alt=""></p><p><img src="https://pic.ringoer.com/css-layout-3.png" alt=""></p><p>可见随着视口变小，中间部分也会自适应</p><h2 id="平均布局"><a href="#平均布局" class="headerlink" title="平均布局"></a>平均布局</h2><p>平均布局一般都设定了每个单位所占大小，所以一般分为占满全行和占不满两种</p><p>而占不满的话，在多行场合下末行又会很难看，所以一般都是占满全行</p><p>设每个块大小为 width = height = 200px，每行 4 个块，放在刚才的三栏布局的 main 元素中</p><p>那么显然，为了维持每行 4 个块，应该取消响应式</p><p>鉴于之前说过的 margin 的同行不合并特性，一般只会设置单方向（通常为 right）的 margin</p><p>设每两个块之间隔开的距离为 x，显然 4 <em> 200px + 3 </em> x = main.width - main.border.width * 2</p><p>设 x = 30px，则 main.width = 892px</p><p>可以推出如下 HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"column"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"column"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"column"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用以下 CSS，即可实现占满全行的效果</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* reset */</span></span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 去除底部空白 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使得三个块并排 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>&gt;* &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使得 main 获得大小和边框，便于观察 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">892px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 分别设定左右宽度 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>((100vw - 892px) / <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>((100vw - 892px) / <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.entity</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果如图</p><p><img src="https://pic.ringoer.com/css-layout-4.png" alt=""></p><p>发现惨了！怎么换行了！</p><p>从开发者工具可以看到，是因为每行最后一个 div 的右外边距超出容器了，所以被换行，这时候，我们需要添加如下 CSS</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* reset */</span></span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 去除底部空白 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使得三个块并排 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>&gt;* &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使得 main 获得大小和边框，便于观察 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">892px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 分别设定左右宽度 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>((100vw - 892px) / <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>((100vw - 892px) / <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.entity</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选择第 4 个 entity div 并取消其右外边距 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.column</span>&gt;<span class="selector-class">.entity</span><span class="selector-pseudo">:nth-child(4)</span> &#123;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>或选用对容器进行调整的 CSS，更高级，更受面试官喜爱</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* reset */</span></span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 去除底部空白 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使得三个块并排 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>&gt;* &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使得 main 获得大小和边框，便于观察 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">892px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 分别设定左右宽度 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>((100vw - 892px) / <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>((100vw - 892px) / <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.entity</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 令行末的右外边距折返 30px */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.column</span> &#123;</span><br><span class="line">    <span class="attribute">margin-right</span>: -<span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果如图</p><p><img src="https://pic.ringoer.com/css-layout-5.png" alt=""></p><p>但是现在纯文档流布局已经没人用了，除非你的网站需要在 IE 6 以下运行……</p><h1 id="float"><a href="#float" class="headerlink" title="float"></a>float</h1><p>通过 caniuse，我们知道对于 IE，float 可以运行在 IE 6 7 8 9 10 11 上，除非 6 以下才需要使用纯文档流布局</p><p>而 flex 在 IE 6 7 8 9 上都不能使用，10 和 11 的兼容性也不是完全兼容</p><p>所以，假如你还需要兼容 IE，最好使用 float 布局</p><h2 id="两栏布局-1"><a href="#两栏布局-1" class="headerlink" title="两栏布局"></a>两栏布局</h2><p>由图片可得，大致有如下结构的 HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main clearfix"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"large"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"small"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"small"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用如下 CSS，即可完成两栏布局</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* reset */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 去除两列之间的空白 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span>&gt;<span class="selector-tag">div</span>,</span><br><span class="line"><span class="selector-class">.main</span>&gt;<span class="selector-tag">div</span>&gt;<span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 令 class=main 下的子 div 和孙 div 都获得边框，便于观察 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span>,</span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 令 left 和 right 都向左浮动 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 之后在左右盒子中分别逐行排列即可 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.large</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.middle</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.small</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 用于清除浮动，否则会发现父元素的高度变成了 0 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果图与纯文档流相同</p><p><img src="https://pic.ringoer.com/css-layout-1.png" alt=""></p><p>从 CSS 可见，如果同层级的两个元素都是向左浮动的话，则排列顺序按照其在文档中的出现顺序</p><p>当然也可以令右边盒子向右浮动，此时右边盒子会出现在父元素的最右边，具体位置取决于父元素宽度</p><p>在本例中，如果父元素宽度为 800px，则与向左浮动表现相同</p><h2 id="三栏布局-1"><a href="#三栏布局-1" class="headerlink" title="三栏布局"></a>三栏布局</h2><p>显然只需要在 body 中放置 3 个块</p><p>于是可以推出如下 HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用如下 CSS，即可完成三栏布局</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* reset */</span></span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使得 main 获得大小和边框，便于观察 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60vw</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid white;</span><br><span class="line">    <span class="comment">/* 若不设定边框，则会观察到左右空白的宽度都变为 0，但可以设置白色边框保持左边空白 */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20vw</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="comment">/* 右边不需要设置边框，因为排列是从左向右的，除非 main 的 float = right */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20vw</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 用于清除浮动，否则会发现父元素的高度变成了 0 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果图与纯文档流相同</p><p><img src="https://pic.ringoer.com/css-layout-2.png" alt=""></p><h2 id="平均布局-1"><a href="#平均布局-1" class="headerlink" title="平均布局"></a>平均布局</h2><p>float 实现平均布局的代码和效果，与纯文档流几乎一致，除了 <code>clearfix</code>，就只是把</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">display</span>: <span class="selector-tag">inline-block</span>;</span><br></pre></td></tr></table></figure><p>换成了</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">float</span>: <span class="selector-tag">left</span>;</span><br></pre></td></tr></table></figure><p>而已</p><p>关于右外边距溢出容器的处理，也与纯文档流一致</p><p>故此处不再给出示例</p><h1 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h1><p>通过 caniuse 可以发现，除了 IE 之外的所有浏览器最新版本均支持 flex，但 grid 布局尚未受到全面支持</p><p>所以当你不需要兼容 IE，但又不是只需要兼容最新的浏览器时，可以选择 flex 布局方案</p><p>附一个 flex 布局小游戏</p><p><a href="https://flexboxfroggy.com/#zh-cn" target="_blank" rel="noopener">FLEXBOX FROGGY</a></p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p><a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html?utm_source=tuicool(%E8%AF%AD%E6%B3%95%E7%AF%87" target="_blank" rel="noopener">Flex 布局教程：语法篇</a>)</p><p>flex 有两个主要概念：容器（container）和项目（item）</p><p>一个容器中包含两条轴：主轴和交叉轴，交叉轴恒垂直于主轴。默认主轴是水平方向</p><p>一个容器中往往包含多个项目，项目沿主轴排列</p><h3 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h3><p>容器上可以设置 6 个属性</p><ul><li>flex-direction</li><li>flex-wrap</li><li>flex-flow</li><li>justify-content</li><li>align-items</li><li>align-content</li></ul><p>属性含义不解释了，本文不是教语法的，是教布局的，可以点击阮一峰博客学习语法</p><p>下同，不讲语法</p><h3 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h3><p>项目上可以设置 6 个属性</p><ul><li>order</li><li>flex-grow</li><li>flex-shrink</li><li>flex-basis</li><li>flex</li><li>align-self</li></ul><h2 id="两栏布局-2"><a href="#两栏布局-2" class="headerlink" title="两栏布局"></a>两栏布局</h2><p>显然扭转主轴方向到竖直方向，更有利于排版</p><p>所以由图片可得，大致有如下结构的 HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"large"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"small"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"small"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用如下 CSS，即可完成两栏布局</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* reset */</span></span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 令 class=main 下的子 div 和孙 div 都获得边框，便于观察 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span>&gt;<span class="selector-tag">div</span>,</span><br><span class="line"><span class="selector-class">.main</span>&gt;<span class="selector-tag">div</span>&gt;<span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 令主盒子成为弹性盒子容器，使得左右盒子沿默认主轴（水平方向）排列 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span>,</span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="comment">/* 令左右盒子都成为弹性盒子容器 */</span></span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="comment">/* 更改主轴方向 */</span></span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">800px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 之后在左右盒子中分别设置大小即可 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.large</span> &#123;</span><br><span class="line">    <span class="attribute">flex-grow</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.middle</span> &#123;</span><br><span class="line">    <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.small</span> &#123;</span><br><span class="line">    <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果图与纯文档流相同</p><p><img src="https://pic.ringoer.com/css-layout-1.png" alt=""></p><h2 id="三栏布局-2"><a href="#三栏布局-2" class="headerlink" title="三栏布局"></a>三栏布局</h2><p>显然只需要在 body 中放置 3 个块</p><p>于是可以推出如下 HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用如下 CSS，即可完成三栏布局</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* reset */</span></span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使得 body 成为弹性盒子容器，让三个区域都沿默认主轴（水平方向）排列 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使得 main 获得大小和边框，便于观察 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">flex-grow</span>: <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果图与纯文档流相同</p><p><img src="https://pic.ringoer.com/css-layout-2.png" alt=""></p><p>代码明显比 float 简洁许多，所以是比 float 更好用的布局方案</p><h2 id="平均布局-2"><a href="#平均布局-2" class="headerlink" title="平均布局"></a>平均布局</h2><p>设每个块大小为 width = height = 200px，每行 4 个块，放在刚才的三栏布局的 main 元素中</p><p>可以推出如下 HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"column"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"column"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"column"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用以下 CSS，即可实现占满全行的效果</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* reset */</span></span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使得 body 成为弹性盒子容器，让三个区域都沿默认主轴（水平方向）排列 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使得 main 获得大小和边框，便于观察 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">flex-grow</span>: <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.column</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">15vw</span>;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.entity</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果如图</p><p><img src="https://pic.ringoer.com/css-layout-6.png" alt=""></p><p>发现，坏了，怎么最后一行隔开这么远</p><p>于是我们便不能使用 <code>justify-content</code> 来简单控制间距，必须使用 <code>margin-right</code> 来控制</p><p>计算结果沿用纯文档流布局的计算结果</p><p>于是 CSS 变更为如下</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* reset */</span></span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 去除底部空白 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使得三个块并排 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>&gt;* &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使得 main 获得大小和边框，便于观察 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">892px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 分别设定左右宽度 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>((100vw - 892px) / <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>((100vw - 892px) / <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 令行末的右外边距折返 30px */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.column</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">margin-right</span>: -<span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.entity</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果如图</p><p><img src="https://pic.ringoer.com/css-layout-7.png" alt=""></p><p>好了，使用负 margin，成功修复！</p><p>当然 nth-child 也可以，不过不建议</p><h1 id="grid"><a href="#grid" class="headerlink" title="grid"></a>grid</h1><p>通过 caniuse 可以发现，grid 布局尚未受到全面支持</p><p>所以当你只需要兼容最新的，甚至是未来的浏览器时，可以选择 grid 布局方案</p><p>附一个 grid 布局小游戏</p><p><a href="https://cssgridgarden.com/#zh-cn" target="_blank" rel="noopener">GRID GARDEN</a></p><h2 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h2><p><a href="http://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html" target="_blank" rel="noopener">CSS Grid 网格布局教程</a></p><p>容器和项目的概念同 flex，但是 grid 没有主轴和交叉轴</p><p>如果说 flex 的精力集中在每个容器的主轴上，是一维操作，那 grid 布局就是二维操作</p><h3 id="容器-1"><a href="#容器-1" class="headerlink" title="容器"></a>容器</h3><p>容器上可以设置 7 种属性</p><ul><li><p>grid-template-columns/rows/areas</p></li><li><p>column/row-gap</p></li><li><p>gap</p></li><li><p>grid-auto-flow</p></li><li><p>justify/align/place-items</p></li><li><p>justify/align/place-content</p></li><li><p>grid-auto-columns/rows</p></li></ul><h3 id="项目-1"><a href="#项目-1" class="headerlink" title="项目"></a>项目</h3><p>项目上可以设置 3 种属性</p><ul><li>grid-column/row-start/end</li><li>grid-column/row/area</li><li>justify/align/place-self</li></ul><h2 id="两栏布局-3"><a href="#两栏布局-3" class="headerlink" title="两栏布局"></a>两栏布局</h2><p>由图片可得，大致有如下结构的 HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"large"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"small1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"small2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用如下 CSS，即可完成两栏布局</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* reset */</span></span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 令 class=main 下的子 div 和孙 div 都获得边框，便于观察 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span>&gt;<span class="selector-tag">div</span>,</span><br><span class="line"><span class="selector-class">.main</span>&gt;<span class="selector-tag">div</span>&gt;<span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 令主盒子成为 grid 容器 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">400px</span> <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">grid-template-rows</span>: <span class="built_in">repeat</span>(9, 100px);</span><br><span class="line">    <span class="attribute">grid-template-areas</span>: <span class="string">'large middle1'</span></span><br><span class="line">        <span class="string">'large middle1'</span></span><br><span class="line">        <span class="string">'large middle1'</span></span><br><span class="line">        <span class="string">'large middle2'</span></span><br><span class="line">        <span class="string">'large middle2'</span></span><br><span class="line">        <span class="string">'small1 middle2'</span></span><br><span class="line">        <span class="string">'small1 middle3'</span></span><br><span class="line">        <span class="string">'small2 middle3'</span></span><br><span class="line">        <span class="string">'small2 middle3'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.large</span> &#123;</span><br><span class="line">    <span class="attribute">grid-area</span>: large;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.small1</span> &#123;</span><br><span class="line">    <span class="attribute">grid-area</span>: small1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.small2</span> &#123;</span><br><span class="line">    <span class="attribute">grid-area</span>: small2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.middle1</span> &#123;</span><br><span class="line">    <span class="attribute">grid-area</span>: middle1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.middle2</span> &#123;</span><br><span class="line">    <span class="attribute">grid-area</span>: middle2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.middle3</span> &#123;</span><br><span class="line">    <span class="attribute">grid-area</span>: middle3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果图与纯文档流相同</p><p><img src="https://pic.ringoer.com/css-layout-1.png" alt=""></p><p>语义化非常好，一看就知道布局长什么样</p><h2 id="三栏布局-3"><a href="#三栏布局-3" class="headerlink" title="三栏布局"></a>三栏布局</h2><p>显然只需要在 body 中放置 3 个块</p><p>于是可以推出如下 HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用如下 CSS，即可完成三栏布局</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* reset */</span></span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 令 div 都获得边框，便于观察 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 令主盒子成为 grid 容器 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">3</span>fr <span class="number">1</span>fr;</span><br><span class="line">    <span class="attribute">grid-template-rows</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">grid-template-areas</span>: <span class="string">'left center right'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">grid-area</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.center</span> &#123;</span><br><span class="line">    <span class="attribute">grid-area</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">grid-area</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果如下</p><p><img src="https://pic.ringoer.com/css-layout-8.png" alt=""></p><p>这令人惊叹的高度语义化，比 flex 高到不知道哪去了</p><h2 id="平均布局-3"><a href="#平均布局-3" class="headerlink" title="平均布局"></a>平均布局</h2><p>设每个块大小为 width = height = 200px，每行 4 个块，放在刚才的三栏布局的 main 元素中</p><p>可以推出如下 HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entity"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用以下 CSS，即可实现占满全行的效果</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* reset */</span></span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 令 div 都获得边框，便于观察 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 令主盒子成为 grid 容器 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">3</span>fr <span class="number">1</span>fr;</span><br><span class="line">    <span class="attribute">grid-template-rows</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">grid-template-areas</span>: <span class="string">'left center right'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">grid-area</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.center</span> &#123;</span><br><span class="line">    <span class="attribute">grid-area</span>: center;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(4, 1fr);</span><br><span class="line">    <span class="attribute">grid-template-rows</span>: <span class="built_in">repeat</span>(auto-fill, 200px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">grid-area</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果如图</p><p><img src="https://pic.ringoer.com/css-layout-9.png" alt=""></p><p>完美的自动占格子，不再有负 margin 的问题</p><p>即便需要间隔，也可以通过 gap 来实现</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* reset */</span></span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 令 div 都获得边框，便于观察 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 令主盒子成为 grid 容器 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">3</span>fr <span class="number">1</span>fr;</span><br><span class="line">    <span class="attribute">grid-template-rows</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">grid-template-areas</span>: <span class="string">'left center right'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">grid-area</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.center</span> &#123;</span><br><span class="line">    <span class="attribute">grid-area</span>: center;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(4, 1fr);</span><br><span class="line">    <span class="attribute">grid-template-rows</span>: <span class="built_in">repeat</span>(auto-fill, 200px);</span><br><span class="line">    <span class="attribute">column-gap</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">row-gap</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">grid-area</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果如图</p><p><img src="https://pic.ringoer.com/css-layout-10.png" alt=""></p><p>天不生我 grid 布局，万古如长夜！！！</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浏览器请求机制</title>
      <link href="/frontend/browser-request-mechanism/"/>
      <url>/frontend/browser-request-mechanism/</url>
      
        <content type="html"><![CDATA[<p>众所周知，前端的内容一般都是通过 HTTP 相关协议获取，并在浏览器上呈现的</p><a id="more"></a><p>要想深刻了解浏览器的请求机制，首先要有一定的 <a href="https://ringoer.com/knowledge/computer-network/" target="_blank" rel="noopener">计算机网络基础</a></p><h1 id="浏览器的请求流程"><a href="#浏览器的请求流程" class="headerlink" title="浏览器的请求流程"></a>浏览器的请求流程</h1><p>显然，我们要先了解一下，当我们访问一个网页时，浏览器都做了什么</p><p>浏览器执行了以下动作</p><ol><li>URL 解析，判断用户输入的是什么，自动组装请求</li><li>查看本地缓存，是否有已经缓存的该地址的资源，若未过期则直接取用，跳到处理 HTML 文档</li><li>DNS 查询，获得服务器地址</li><li>与服务器建立 TCP 连接，如果是 HTTPS 协议，还会有密钥交换</li><li>向服务器发送 HTTP 或 HTTPS 请求</li><li>服务器如果回复了一个永久重定向（301）或临时重定向（302），则浏览器需要向新的地址重新发送请求</li><li>服务器处理请求并响应，此时浏览器收到的响应状态码可能是 200 或 304</li><li>浏览器开始处理 HTML 文档，根据 HTML 文档生成 DOM 树和 CSSOM 树</li><li>合并两棵树，得到渲染树</li><li>根据渲染树，开始执行渲染五步骤</li></ol><p>总的来说，涉及以下知识点</p><ol><li>缓存机制</li><li>DNS 查询</li><li>TCP 连接</li><li>HTTP 与 HTTPS</li><li>页面渲染</li></ol><h1 id="缓存机制"><a href="#缓存机制" class="headerlink" title="缓存机制"></a>缓存机制</h1><p>显然网络请求是非常消耗时间的</p><p>有没有办法能减少网络请求呢？答案就是缓存</p><h2 id="缓存位置"><a href="#缓存位置" class="headerlink" title="缓存位置"></a>缓存位置</h2><p>首先要了解一下缓存保存在哪里，浏览器又是如何索引缓存的</p><p>按照访问顺序，缓存一般有如下 4 个存储位置</p><ol><li>Service Worker</li><li>Memory Cache</li><li>Disk Cache</li><li>Push Cache</li></ol><h3 id="Service-Worker"><a href="#Service-Worker" class="headerlink" title="Service Worker"></a>Service Worker</h3><p>Service Worker 是运行在浏览器背后的独立线程，一般可以用来实现缓存功能<br>使用 Service Worker 的话，传输协议必须为 HTTPS，因为 Service Worker 中涉及到请求拦截，所以必须使用 HTTPS 协议来保障安全<br>Service Worker 的缓存与浏览器其他内建的缓存机制不同，它可以让我们自由控制缓存哪些文件、如何匹配缓存、如何读取缓存，并且缓存是持续性的</p><h3 id="Memory-Cache"><a href="#Memory-Cache" class="headerlink" title="Memory Cache"></a>Memory Cache</h3><p>也就是内存缓存，包含一些小文件</p><p>但一旦关掉当前标签页，该标签页对应的内存缓存就被释放了</p><h3 id="Disk-Cache"><a href="#Disk-Cache" class="headerlink" title="Disk Cache"></a>Disk Cache</h3><p>硬盘缓存，显然比内存缓存要慢，但存储空间要大，且只有资源过期了才会释放资源</p><p>一般大文件会放到 Disk Cache 中，小文件放到 Memory Cache 中</p><p>但如果当前系统内存占用高，则会优先存进 Disk Cache</p><h3 id="Push-Cache"><a href="#Push-Cache" class="headerlink" title="Push Cache"></a>Push Cache</h3><p>是 HTTP 2 中的 <strong>服务端推送</strong> 产生的缓存，只在 session 中存在，且缓存时间也很短（在 Chrome 中约 5 分钟）</p><p>关于其优点，详见 HTTP 2 的特点描述</p><h2 id="缓存过程"><a href="#缓存过程" class="headerlink" title="缓存过程"></a>缓存过程</h2><p>浏览器会根据以下流程，确定缓存的处理方法</p><p>URL 解析后，是否含有目标地址的缓存？</p><ul><li><p>否</p><ul><li>向服务器发送请求</li><li>返回请求结果和缓存标识，将结果存入缓存</li></ul></li><li><p>是</p><p> 缓存是否过期？</p><p> 根据 Expires ( HTTP 1.0 ) 或 Cache-Control ( HTTP 1.1 ) 判断</p><ul><li>是（协商缓存机制）<ul><li>在头部添加字段 If-Modified-Since ( HTTP 1.0 ) 或 If-None-Match ( HTTP 1.1 ) ，然后向服务器发送请求</li><li>服务器根据字段值判断资源是否有更新，并响应给浏览器</li><li>资源是否更新？<ul><li>是，则连带 HTML 文档一同返回给浏览器，同时状态码置为 200，浏览器将请求结果存入缓存</li><li>否，返回状态码 304，读取并返回缓存</li></ul></li></ul></li><li>否（强缓存机制）<ul><li>读取并返回缓存</li></ul></li></ul></li></ul><p>缓存机制图示如下</p><p><img src="https://pic.ringoer.com/缓存机制.png" alt="缓存机制"></p><h2 id="强缓存"><a href="#强缓存" class="headerlink" title="强缓存"></a>强缓存</h2><p>缓存未过期，则不会向服务器发送请求，直接读取并返回缓存</p><p>该操作会在控制台产生一个假请求，返回状态码 200，并显示 from memory cache 或 from disk cache</p><p>由上图可见，有两个参数可以决定强缓存</p><ol><li>Expires</li><li>Cache-Control</li></ol><h3 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h3><p>是 HTTP 1 的产物</p><p>由服务端指定具体多久之后过期，关键字段名为 max-age，实际的 Expires = max-age + 服务器收到请求的时间</p><p>显然，Expires 是否过期，取决于与本地时间的对比结果，所以如果设置本地时间为超过 Expires 的值，则会直接造成 Expires 过期</p><h3 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h3><p>是 HTTP 1.1 的产物</p><p>一般有以下字段</p><table><thead><tr><th>字段名</th><th>参考值</th><th>作用</th></tr></thead><tbody><tr><td>public</td><td>无</td><td>客户端和代理服务器均可以缓存该资源</td></tr><tr><td>private</td><td>无</td><td>只有客户端可以缓存该资源</td></tr><tr><td>max-age</td><td>30</td><td>缓存 30 秒后过期</td></tr><tr><td>s-maxage</td><td>30</td><td>覆盖 max-age，但只在代理服务器中生效</td></tr><tr><td>no-store</td><td>无</td><td>不缓存</td></tr><tr><td>no-cache</td><td>无</td><td>资源被缓存，但立即过期，下次请求会发起协商缓存认证</td></tr><tr><td>max-stale</td><td>30</td><td>30 秒内即使过期也使用该缓存</td></tr><tr><td>min-fresh</td><td>30</td><td>希望在 30 秒内获取最新的响应</td></tr></tbody></table><p>推荐的配置思路图如下</p><p><img src="https://pic.ringoer.com/Cache-Control推荐设置.png" alt=""></p><p>在使用 Cache-Control 的时候，有两种常见情况，其描述和对策如下</p><table><thead><tr><th>情况</th><th>对策</th><th>描述</th></tr></thead><tbody><tr><td>资源频繁更新</td><td>Cache-Control: no-cache</td><td>永不缓存，确保时效性</td></tr><tr><td>资源不常更新</td><td>Cache-Control: max-age=31536000</td><td>缓存一年</td></tr></tbody></table><h3 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h3><p>由上文可知，Cache-Control 是更新版本的参数，也具有更强大的功能，所以当 Cache-Control 和 Expires 同时存在时，Cache-Control 优先级要高于 Expires</p><p>现在的 Expires，只是为了兼容不支持 HTTP 1.1 的环境罢了</p><h2 id="协商缓存"><a href="#协商缓存" class="headerlink" title="协商缓存"></a>协商缓存</h2><p>当强缓存查找不到未过期的合适缓存，但存在已过期的合适缓存时，浏览器会采用协商缓存策略</p><p>一般有两种情况</p><ol><li>协商缓存有效，服务器返回 304 Not Modified</li><li>协商缓存失效，服务器返回 200 和新的资源</li></ol><p>那么如何提交协商缓存请求呢？可以通过设置两组参数实现</p><h3 id="Last-Modified-和-If-Modified-Since"><a href="#Last-Modified-和-If-Modified-Since" class="headerlink" title="Last-Modified 和 If-Modified-Since"></a>Last-Modified 和 If-Modified-Since</h3><p>是 HTTP 1 提出的缓存控制参数</p><p>浏览器在第一次访问资源时，服务器可以在响应中加入请求头 Last-Modified，值是这个资源在服务器上的最后修改时间</p><p>浏览器下次强缓存命中失败，要请求这个资源时，发现这个已过期资源带有 Last-Modified 标识，则会在请求中带上 If-Modified-Since 的 header</p><p>服务器收到 If-Modified-Since 后，与服务器上的资源对比，如果 If-Modified-Since 的时间小于服务器上该资源的最后更新时间，则说明资源有更新，服务器返回 200 和新的资源文件，否则仅返回 304</p><p>但如果客户在本地打开缓存文件，即使没有修改，也依然会造成 Last-Modified 更新，此时会导致缓存失效</p><p>并且，Last-Modified 的精确度是秒，所以如果在小于秒的时间内修改了文件，Last-Modified 并不会更新，导致命中的文件不正确</p><p>所以，HTTP 1.1 提出了更加精确的验证参数，Etag 和 If-None-Match</p><h3 id="Etag-和-If-None-Match"><a href="#Etag-和-If-None-Match" class="headerlink" title="Etag 和 If-None-Match"></a>Etag 和 If-None-Match</h3><p>浏览器在第一次访问资源时，服务器可以在响应中加入请求头 Etag，值是这个资源在服务器上的唯一标识。只要文件发生变化，Etag 就会重新生成</p><p>如同 Last-Modified，浏览器在使用 Etag 进行协商缓存时，也会在请求中加入特殊的 header，此时这个 header 为 If-None-Match</p><p>如果 If-None-Match 与服务器上的文件标识符相同，则返回 304，否则返回 200 和新的资源文件</p><h3 id="对比-1"><a href="#对比-1" class="headerlink" title="对比"></a>对比</h3><p>显然 Etag 要比 Last-Modified 更精确，但精确的代价就是生成标识符的算法的复杂性增大</p><p>但大部分情况下，Etag 造成的性能损耗都可以忽略不计，所以当 Etag 和 Last-Modified 同时存在时，Etag 的优先级较高</p><h3 id="无缓存策略"><a href="#无缓存策略" class="headerlink" title="无缓存策略"></a>无缓存策略</h3><p>如果服务器什么缓存都没设置，难道就不缓存了吗？显然不是</p><p>此时浏览器会取响应报文中的 Date 来减去 Last-Modified，取得一个时间差值，然后取这个差值的 10% 作为缓存时间</p><h1 id="DNS-查询"><a href="#DNS-查询" class="headerlink" title="DNS 查询"></a>DNS 查询</h1><p>DNS 查询流程按顺序一般如下</p><ol><li>浏览器缓存</li><li>操作系统缓存</li><li>路由器缓存</li><li>主机上的 hosts 文件</li><li>本地域名服务器等域名服务器</li></ol><h1 id="TCP-连接"><a href="#TCP-连接" class="headerlink" title="TCP 连接"></a>TCP 连接</h1><p>流程中说到，浏览器与服务器之间会建立 TCP 连接来传输数据，那么显然具有至少一个 TCP 连接</p><p>那么自然产生了以下问题</p><ol><li>一个 TCP 连接能用多久？什么时候断开？</li><li>一个 TCP 连接可以承担几个 HTTP 请求的任务？</li><li>一个 TCP 连接能不能同时发送数个 HTTP 请求？</li><li>浏览器最多能对同一服务器建立几个 TCP 连接？</li></ol><h2 id="一个-TCP-连接能用多久"><a href="#一个-TCP-连接能用多久" class="headerlink" title="一个 TCP 连接能用多久"></a>一个 TCP 连接能用多久</h2><p>在 HTTP 1 中，服务器会在响应了一个 HTTP 请求后，立刻断开这个 TCP 连接</p><p>但如果要对该服务器连续发起多个请求，重复建立连接显然开销过大</p><p>于是开始有某些服务器，提出了不在 HTTP 标准中的头部字段 Connection，并通过设置 Connection: keep-alive 来保持当前请求使用的 TCP 连接不断开</p><p>因为 SSL 也是基于 TCP 的，所以此时 SSL 连接也不会断开，不需要重新交换密钥和验证</p><p>既然 Connection: keep-alive 这么好用，于是 HTTP 1.1 就将其加入了标准之中，并且默认保持 TCP 连接，除非手动在请求头中指定 Connection: close</p><h2 id="一个-TCP-连接可以承担几个-HTTP-请求的任务"><a href="#一个-TCP-连接可以承担几个-HTTP-请求的任务" class="headerlink" title="一个 TCP 连接可以承担几个 HTTP 请求的任务"></a>一个 TCP 连接可以承担几个 HTTP 请求的任务</h2><p>从上一个问题，显然可以看出，如果一个 TCP 连接不断开，是可以用来发送多个 HTTP 请求的，直到断开为止</p><h2 id="一个-TCP-连接能不能同时发送数个-HTTP-请求"><a href="#一个-TCP-连接能不能同时发送数个-HTTP-请求" class="headerlink" title="一个 TCP 连接能不能同时发送数个 HTTP 请求"></a>一个 TCP 连接能不能同时发送数个 HTTP 请求</h2><p>在 HTTP 1.1 中，一个 TCP 连接同时只能处理一个请求，不同请求不能同时使用同一个 TCP 连接</p><p>虽然标准中设计了一个参数 Pipelining 来试图解决这个问题，但是了解网络工作原理的人都知道，客户端按某个顺序发送的请求，服务器并不能按顺序接收（同一个请求的 IP 报文可以，详见 IP 数据报）</p><p>那就造成客户端发送请求后，接收到的响应不能和请求按发送时的顺序一一对应，那请求就完全错乱了</p><p>所以在 HTTP 1.x 的场合，浏览器没有合适的并发方案，只能通过保持连接或同时并行多个连接来提高效率</p><p>但是 HTTP 2 中引入了多路复用的概念，在应用层采取如同网络层的 IP 数据报一样的分段标号模式，此时同一个 TCP 连接就可以正常并发多个 HTTP 请求了</p><h2 id="浏览器最多能对同一服务器建立几个-TCP-连接"><a href="#浏览器最多能对同一服务器建立几个-TCP-连接" class="headerlink" title="浏览器最多能对同一服务器建立几个 TCP 连接"></a>浏览器最多能对同一服务器建立几个 TCP 连接</h2><p>依据浏览器不同，这个限制是不同的</p><p>对于 Chrome，最多允许对同一个 host 建立 6 个 TCP 连接</p><h1 id="HTTP-与-HTTPS"><a href="#HTTP-与-HTTPS" class="headerlink" title="HTTP 与 HTTPS"></a>HTTP 与 HTTPS</h1><p>HTTP 1.0 和 HTTP 1.1 在上文已经有提到一些了，除了缓存机制和 TCP 以外也没有什么太大的差别，所以着重讨论 HTTP 2.0 和 HTTPS</p><h2 id="HTTP-2-0"><a href="#HTTP-2-0" class="headerlink" title="HTTP 2.0"></a>HTTP 2.0</h2><p>HTTP 2.0 有如下特点</p><ol><li>二进制分帧</li><li>首部压缩</li><li>多路复用</li><li>服务端推送</li></ol><h3 id="二进制分帧"><a href="#二进制分帧" class="headerlink" title="二进制分帧"></a>二进制分帧</h3><p>我们知道数据链路层有以太网帧，网络层有 IP 报文分割，此处的二进制分帧设计思路正是基于前两者的特点而得来的</p><p>使用了二进制分帧后，每个 HTTP 报文都使用二进制格式传输数据，每个报文都由一个或多个帧组成</p><p>相比 HTTP 1.x 的文本格式传输，HTTP 2.0 的二进制格式解析效率更高</p><p>为了正常使用帧，HTTP 2.0 同时使用了流的概念</p><p>流是一个虚拟通道，可以承载双向消息，每个流都有一个唯一 ID</p><p>简单理解，流就是同一组请求和响应的组号</p><h3 id="首部压缩"><a href="#首部压缩" class="headerlink" title="首部压缩"></a>首部压缩</h3><p>显然每个请求之间都使用了大量的头部字段，且这些字段的值在浏览器和服务器之前是一致的</p><p>HTTP 2.0 则采用了”首部表”来缓存已经发送过的头部字段键值对，使得浏览器和服务器对于与缓存相同的字段，不需要重复在请求中发送，显著减小了请求报文的大小</p><p>该首部表在 HTTP 2.0 连接断开前始终存在，由使用双方共同更新</p><p>当产生未记录的键值对时，要么更新首部表中的记录值，要么追加到首部表的末端</p><h3 id="多路复用"><a href="#多路复用" class="headerlink" title="多路复用"></a>多路复用</h3><p>在 HTTP 2.0 中，相同域名下的所有通信都使用同一个连接完成，该连接可以并发任意数量的请求和响应，克服了 HTTP 1.x 中同一个连接不能并发请求的问题，消除了 TCP 连接多次建立以及浏览器同时维护多个 TCP 连接的开销</p><p>之所以可以做到这一点，是因为二进制分帧后，同一个流的每个帧都含有首部流标识，可以乱序发送，双方都可以根据首部流标识得到正确的消息</p><p>该设计思路的具体描述可以参考 IP 数据报的分割</p><h3 id="服务端推送"><a href="#服务端推送" class="headerlink" title="服务端推送"></a>服务端推送</h3><p>是 HTTP 2.0 最重要的特性</p><p>在 HTTP 1.x 中，如果浏览器没有发出请求，服务器是不能向浏览器发送数据的</p><p>但在 HTTP 2.0 中，服务器可以打开 PUSH 模式，当浏览器请求了一个资源后，服务器可以推送相关资源给浏览器</p><p>例如，有如下 HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"example.png"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果在 HTTP 1.x 中，浏览器需要发起 3 个请求，才可以得到整个页面的完整数据</p><p>但在 HTTP 2.0 中，如果服务器打开 了 PUSH 模式，浏览器只需要发送 1 个请求，申请取得 HTML 文档，服务器就会先返回 HTML 文档，然后根据 HTML 文档中的资源指向，向浏览器推送 css 文件和 png 文件，这样浏览器在后续要使用的时候，就发现已经收到了资源，不需要再发请求了</p><p>这样，只要 1 个请求，就完成了以前 3 个请求才能完成的事情，效率显然大大提高</p><p>既然服务器可以主动推送，客户端自然也可以选择是否接受</p><p>如果服务端推送的资源已经被浏览器缓存过，浏览器可以通过发送RST_STREAM帧来拒收</p><p>主动推送也遵守同源策略，服务器不会随便推送第三方资源给客户端。</p><h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><p>HTTPS 基于 SSL 协议，采用 RSA 算法，使得通信双方不需要直接发送私钥，就可以达成合意开始加密通信</p><p>具体流程如下</p><ol><li>浏览器向服务器发起 HTTPS 连接请求</li><li>服务器向浏览器发送公钥和根据自己的私钥与公钥联合加密的密文</li><li>浏览器收到公钥和密文，随机产生一个私钥，向服务器发送根据自己的私钥与公钥联合加密的密文</li><li>双方都根据公钥、自己的私钥和对方发送的密文进行计算，得到共同的密钥，通信建立</li><li>在之后的通信中，都使用这个计算出来的密钥进行加密通信</li></ol><p>算法原理概述可以参看 <a href="https://ringoer.com/algorithm/rsa/" target="_blank" rel="noopener">图解非对称加密</a></p><h1 id="页面渲染"><a href="#页面渲染" class="headerlink" title="页面渲染"></a>页面渲染</h1><p>首先是浏览器渲染 5 步图</p><p><img src="https://pic.ringoer.com/css-animation-render-5.jpg" alt=""></p><p>根据上图，可知浏览器渲染流程如下</p><h2 id="首次渲染"><a href="#首次渲染" class="headerlink" title="首次渲染"></a>首次渲染</h2><ol><li>解析 JS 脚本。该动作会导致阻塞，所以一般放在 HTML 文档最后</li><li>构建 DOM 树和 CSSOM 树</li><li>合并为渲染树，进行布局</li><li>布局完成后，根据渲染树进行绘制</li><li>绘制完成后交由 GPU 进行合成</li></ol><h2 id="后续渲染"><a href="#后续渲染" class="headerlink" title="后续渲染"></a>后续渲染</h2><ol><li>解析 JS 脚本</li><li>计算布局和样式更改</li><li>将布局和样式更改同步到渲染树上</li><li>根据渲染树重排、重绘</li><li>重绘完成后交由 GPU 进行合成</li></ol><h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><p>浏览器渲染有如下几个特性</p><h3 id="容错机制"><a href="#容错机制" class="headerlink" title="容错机制"></a>容错机制</h3><p>我们在编码中从来没有见过浏览器报 HTML 和 CSS 的错，因为现代浏览器对 CSS 有强大的容错能力，会自动修复那些可以修复的 HTML 和 CSS 的语法错误，对于不能修复的则直接跳过不加解析</p><h3 id="页面生命周期"><a href="#页面生命周期" class="headerlink" title="页面生命周期"></a>页面生命周期</h3><p>HTML 页面生命周期中有以下事件</p><ol><li>DOMContentLoaded</li><li>load</li><li>beforeunload</li><li>unload</li></ol><p>触发时间点如下</p><table><thead><tr><th>事件</th><th>触发时点</th></tr></thead><tbody><tr><td>DOMContentLoaded</td><td>当 DOM 树构建完毕</td></tr><tr><td>load</td><td>当所有资源已经加载完毕</td></tr><tr><td>beforeunload</td><td>当用户正在离开页面，此时数据尚未清除</td></tr><tr><td>unload</td><td>当用户已经离开页面</td></tr></tbody></table><p>通常我们可以利用 beforeunload 事件来弹出一个对话框，用以询问用户是否确定离开</p><p>需要注意的是，当 DOMContentLoaded 事件发生时，async 和 defer 脚本可能尚未执行，其余文件也很有可能正在下载中，不要轻易访问它们</p><p>除了上述事件，我们也可以用 document.readyState 来获取页面当前的状态，并通过 readystatechange 事件来监听页面生命周期的变化</p><p>document.readyState 通常有 3 个值</p><ol><li>loading，页面正在加载中</li><li>interactive，页面解析完毕，触发时点与 DOMContentLoaded 相同，但执行时比 DOMContentLoaded 要早</li><li>complete，页面上所有资源都已经加载完毕，触发时点与 load 相同，但执行时比 load 要早</li></ol><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="https://www.cnblogs.com/jin-zhe/p/11586327.html" target="_blank" rel="noopener">在浏览器输入URL回车之后发生了什么？（超详细版）</a></p><p><a href="https://www.jianshu.com/p/54cc04190252" target="_blank" rel="noopener">深入理解浏览器的缓存机制</a></p><p><a href="https://www.jianshu.com/p/aaba68b87416" target="_blank" rel="noopener">面试官问我：一个 TCP 连接可以发多少个 HTTP 请求？我竟然回答不上来…</a></p><p><a href="https://zhuanlan.zhihu.com/p/26559480" target="_blank" rel="noopener">一文读懂 HTTP/2 特性</a></p><p><a href="https://www.cnblogs.com/confach/p/10141273.html" target="_blank" rel="noopener">深入浅出：HTTP/2</a></p><p><a href="https://segmentfault.com/a/1190000011468675" target="_blank" rel="noopener">页面生命周期：DOMContentLoaded, load, beforeunload, unload</a></p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 浏览器 </tag>
            
            <tag> http(s) </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS盒子要点简述</title>
      <link href="/frontend/css-box-summary/"/>
      <url>/frontend/css-box-summary/</url>
      
        <content type="html"><![CDATA[<p>CSS 的知识点太多了，本文只讲一些重要的、和盒子有关的知识点</p><a id="more"></a><h1 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h1><p>首先当然先介绍 CSS 最重要的概念：盒子模型</p><p>我们在网站上可以看到各种各样的元素，在页面上显示为一个方形的”盒子”</p><p><img src="https://pic.ringoer.com/css-summary-1.png" alt=""></p><p>用开发者工具一看，每个元素都带着各自的彩色边</p><p><img src="https://pic.ringoer.com/css-summary-2.png" alt=""></p><p>这个盒子，就是盒子模型</p><h2 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h2><p>从上图彩色部分可以看出，每个盒子都有 4 块彩色区域，分别是</p><ol><li>margin，外边距，表示盒子外部空出的空间</li><li>border，边框，表示盒子的界限</li><li>padding，内边距，表示盒子内部空出的空间，也即边框和内容的距离</li><li>content，内容</li></ol><h2 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h2><p>知道了盒子模型的组成，就可以介绍一下盒子的类型</p><p>盒子模型有两种类型</p><ol><li>content-box（默认）</li><li>border-box</li></ol><p>我们知道，可以通过控制 width 和 height 属性来控制盒子的大小，那顾名思义</p><ol><li>在 content-box 中设置 width 就是设置内容区域的宽度，高度同理</li><li>在 border-box 中设置 width 就是设置内容+内边距+边框的宽度，高度同理。此处尺寸包含边框的尺寸大小</li></ol><p>所以在 content-box 中，width = content.width，总宽度自动计算</p><p>在 border-box 中，width = content.width + padding.width + border.width，内容宽度自动计算</p><p>那么怎么设置呢？可以通过</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">box-sizing</span>: <span class="selector-tag">border-box</span>;</span><br></pre></td></tr></table></figure><p>来切换成 border-box</p><h1 id="文档流"><a href="#文档流" class="headerlink" title="文档流"></a>文档流</h1><p>然后介绍一下 CSS 基本概念——文档流</p><p>观察开发者工具里的 HTML 文档，可以观察到类似如下情况</p><p><img src="https://pic.ringoer.com/css-summary-3.png" alt=""></p><p><img src="https://pic.ringoer.com/css-summary-4.png" alt=""></p><p>可见元素一般是从上到下、独占一行的，只有文字之类的内部元素才占同一行</p><p>而图片占的位置，又会影响后面标签页的位置</p><p>一般一个元素独占一行，且前面的布局会影响后面的布局，这样的就是文档流</p><p>要使元素脱离文档流，可以修改其 position 属性，或为其 float 属性赋值</p><p>那么哪些元素会独占一行呢？</p><h1 id="display"><a href="#display" class="headerlink" title="display"></a>display</h1><p>HTML 中有 div，表现为占据一行，也有 span，表现为在同一行显示。为什么会有这种区别呢？</p><p>答案就在 CSS 的 display 属性身上</p><p>display 一般有三种取值</p><ol><li>block</li><li>inline</li><li>inline-block</li></ol><p>默认值要看是什么标签，不同标签默认值不同</p><p>表现分别如下</p><table><thead><tr><th>display 取值</th><th>特性</th></tr></thead><tbody><tr><td>block</td><td>独占一行，高度自适应，可以设置宽高</td></tr><tr><td>inline</td><td>多个共用一行，高度自适应，宽度尽可能短，行末溢出则切断，不可设置宽高</td></tr><tr><td>inline-block</td><td>多个共用一行，高度自适应，宽度尽可能短，行末溢出不切断，其余同 block</td></tr></tbody></table><p>那么既然可以设置宽高，如果 block 中文本长度超出设定范围，怎么办呢</p><h1 id="overflow"><a href="#overflow" class="headerlink" title="overflow"></a>overflow</h1><p>可以使用 overflow 属性定义内容溢出的情况下父元素如何表现</p><p>overflow 一般有 5 种取值</p><ol><li>visible（默认）</li><li>hidden</li><li>scroll</li><li>auto</li><li>inherit</li></ol><p>表现分别如下</p><table><thead><tr><th>overflow 取值</th><th>特性</th></tr></thead><tbody><tr><td>visible</td><td>溢出部分恒可见</td></tr><tr><td>hidden</td><td>溢出部分恒不可见</td></tr><tr><td>scroll</td><td>不论是否溢出，均提供滚动条，当溢出时可以通过滚动条查看溢出内容</td></tr><tr><td>auto</td><td>仅当溢出时，会在溢出方向提供滚动条，可以通过滚动条查看溢出内容</td></tr><tr><td>inherit</td><td>继承父元素的 overflow 设置值</td></tr></tbody></table><p>显然 scroll 比较蠢，需要滚动条的时候用 auto 比较好</p><p>还可以通过 overflow-x 和 overflow-y 来分别设置 x 方向的溢出和 y 方向的溢出如何处理</p><p>注意，当设置了滚动条时，如果内容超出设定范围，虽然会提供滚动条以查看溢出内容，但其余内容只会显示在第一视角，不会自动填充到溢出范围</p><p>讲完盒子整体，来重点讲讲盒子里具体的内容</p><h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><p>一般用来放置文字，故而此处主要讲文字</p><p>文字常用属性如下</p><table><thead><tr><th>属性</th><th>用途</th></tr></thead><tbody><tr><td>font-family</td><td>设置字体</td></tr><tr><td>font-size</td><td>设置文字大小，可选单位 px、em、rem、%、vw、vh</td></tr><tr><td>color</td><td>设置文字颜色，可用单词、rgba、hsla、#十六进制色号</td></tr><tr><td>letter-spacing</td><td>字符间距</td></tr><tr><td>line-height</td><td>行高</td></tr><tr><td>text-align</td><td>常取值 center，文本居中</td></tr><tr><td>vertical-align</td><td>与同行元素对齐，指定对齐的基线<br>取决于当前字体下 x 的高度</td></tr><tr><td>white-space</td><td>指示空格和换行符的处理方式<br>常取值 nowrap，表示即使遇到空格和换行符，也不换行</td></tr></tbody></table><h1 id="padding"><a href="#padding" class="headerlink" title="padding"></a>padding</h1><p>是一个距离度量，表示自身 border 到自身内容区域之间的距离</p><p>可能的值：</p><ol><li>length（固定的px、pt、em等值</li><li>%（使用百分比边距，相对于最近的有设置宽度的父元素的宽度</li></ol><h1 id="border"><a href="#border" class="headerlink" title="border"></a>border</h1><p>常用属性如下</p><table><thead><tr><th>属性</th><th>用途</th></tr></thead><tbody><tr><td>border-style</td><td>必填，设置边框类型，常用 solid，共有 8 种</td></tr><tr><td>border-width</td><td>设置边框宽度，常用单位 px</td></tr><tr><td>border-color</td><td>设置边框颜色，可用单词、rgba、hsla、#十六进制色号</td></tr><tr><td>border-radius</td><td>设置边框弧度，可以填 4 个值，表示 4 个对角方向分别的弧度<br>常用单位 %、px</td></tr><tr><td>box-shadow</td><td>设置边框阴影，可以设置 x、y 方向的阴影距离，模糊情况与色号</td></tr><tr><td>border-image</td><td>设置用来填充 border 的图片</td></tr></tbody></table><h1 id="margin"><a href="#margin" class="headerlink" title="margin"></a>margin</h1><h2 id="margin-表现"><a href="#margin-表现" class="headerlink" title="margin 表现"></a>margin 表现</h2><p>是一个距离度量，用以清除周围元素区域</p><p>没有背景颜色，完全透明</p><p>可能的值：</p><ol><li>auto（依赖于浏览器</li><li>length（固定的px、pt、em等值</li><li>%（使用百分比边距，相对于最近的有设置宽度的父元素的宽度</li></ol><p>外边距的直观表现就是与相邻元素的距离会拉开，比如有如下 HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"first"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"second"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>且有如下 CSS</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以观察到如图景象</p><p><img src="https://pic.ringoer.com/css-summary-5.png" alt=""></p><p>现在我们对第一个盒子加入 margin-left</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.first</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://pic.ringoer.com/css-summary-6.png" alt=""></p><p>就可以观察到第一个盒子向左，也就是 body 的左边框离开了 10 px，也就是向右移动了 10 px，连带着影响到第二个盒子也向右移动了 10 px（文档流）</p><p>如果对第二个盒子也加上 <code>margin-left: 10px;</code> ，那第二个盒子也会变得向第一个盒子离开了 10 px</p><p><img src="https://pic.ringoer.com/css-summary-7.png" alt=""></p><p>显然，margin 是决定相隔距离的</p><p>但是，margin 是会重叠的！！！！！！</p><h2 id="margin-重叠"><a href="#margin-重叠" class="headerlink" title="margin 重叠"></a>margin 重叠</h2><p>margin 重叠有一个前提：重叠的两个元素的 display 属性必须都是 block，不可以是 inline-block 或 inline</p><p>当满足前提时，会发生在如下情况下：</p><ol><li><p>不同行，但相邻的兄弟元素，上面元素的下外边距会和下面元素的上外边距重叠</p><p><img src="https://pic.ringoer.com/css-summary-8.png" alt=""></p></li><li><p>父元素中第一个子元素的上外边距会和父元素的上外边距重叠</p><p><img src="https://pic.ringoer.com/css-summary-9.png" alt=""></p><p><img src="https://pic.ringoer.com/css-summary-10.png" alt=""></p></li><li><p>父元素中最后一个子元素的下外边距会和父元素的下外边距重叠</p><p><img src="https://pic.ringoer.com/css-summary-11.png" alt=""></p><p><img src="https://pic.ringoer.com/css-summary-10.png" alt=""></p></li></ol><p>当满足以上条件，且 margin 被设置了值（而且不是 auto）时，margin 会发生重叠，重叠时：</p><ol><li>两个 margin 都是正数，保留较大值</li><li>一正一负，作差</li><li>两个均为负值，保留绝对值较大的值</li></ol><p>如果想要取消父子重叠，可以令父元素具有以下特征</p><ol><li>令父元素成为 <a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context" target="_blank" rel="noopener">BFC 块级格式化上下文</a></li><li>父元素设置 border 或 padding</li><li>父元素和第一个或最后一个子元素之间用 inline 或 inline-block元素隔开</li></ol><p>很神奇吧，记得亲自尝试一下</p><p>什么，你问我为什么会这样？CSS 没有为什么（</p><h2 id="负-margin"><a href="#负-margin" class="headerlink" title="负 margin"></a>负 margin</h2><p>外边距还有一招神奇的招式，叫做负外边距，主要用来实现居中布局和平均布局，会在 <a href="https://ringoer.com/frontend/css-layout" target="_blank" rel="noopener">CSS 布局</a> 一文中介绍</p><p>我们知道可以用 background 属性为盒子设置背景色，那么看到这里可能有人会问，背景色会不会覆盖边框或者内容呢？</p><h1 id="盒子分层"><a href="#盒子分层" class="headerlink" title="盒子分层"></a>盒子分层</h1><p>一个盒子的分层自顶向下大致如下</p><ol><li>inline 和 inline-blcok 子元素</li><li>float 元素</li><li>block 子元素</li><li>border</li><li>background</li></ol><p>如何验证呢？通过调整对 border 的着色的透明度，就可以验证</p><p>那如何超越这个分层呢？可以使用 z-index 属性</p><h1 id="z-index"><a href="#z-index" class="headerlink" title="z-index"></a>z-index</h1><p>对于一个已经定位的盒子（即其 <code>position</code> 属性值不是 <code>static</code>，这里要注意的是 CSS 把元素看作盒子），<code>z-index</code> 属性指定：</p><ol><li>盒子在当前堆叠上下文中的堆叠层级。</li><li>盒子是否创建一个本地堆叠上下文。</li></ol><p>默认的 z-index 是 auto，符合上述分层模型</p><p>当 z-index 相同时，按照元素在文档流中的出现顺序决定元素的遮挡关系，后出现的遮挡先出现的</p><p>虽然 auto 的解析值是 0，但是直接令 z-index = 0 和令 z-index = auto，是不一样的</p><p>当你为某元素设置了一个不是 auto 的 z-index，世界就改变了</p><p>刚才在分层模型中说到</p><ol><li>内联子元素是在最高层</li><li>这里又提到默认的 z-index 是 auto</li></ol><p>那就可以推断出，最高层的内联子元素，在解析后 z-index = 0，那么它就会比 z-index 大于 0 的元素要低！！就会被这样的元素覆盖了！！</p><p>同理可以推断，z-index 小于 0 的元素，会被 background 覆盖，因为 background 的解析值也是 0</p><p>于是可以大致得出结论，z-index 数值大的会遮挡数值小的元素</p><p>但这也不是绝对的，两个元素是否满足 z-index 决定的遮挡关系，还要看其所在环境，这个环境叫做 层叠上下文</p><h1 id="层叠上下文"><a href="#层叠上下文" class="headerlink" title="层叠上下文"></a>层叠上下文</h1><p>层叠上下文是一个小世界，必须要同等级的小世界之间，才可以互相比较 z-index</p><p>设有如下的 HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"z-index: 1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"z-index: 3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"z-index: 2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>按说，z-index = 3 的 div 应当遮挡住 z-index = 2 的 div，但实际上并不是，因为 z-index = 3 的 div 与 z-index = 2 的 div 并不同级，他只能与 z-index = 1 的 div 中的其它元素进行比较</p><p>而因为 z-index = 1 的 div 恒低于 z-index = 2 的 div，所以 z-index = 3 的 div 也恒低于 z-index = 2 的 div</p><p>如果都没有父元素设置 z-index，那么他们共同的层叠上下文是 html 根元素</p><p>如何创建层叠上下文？请查询 <a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Understanding_z_index/The_stacking_context" target="_blank" rel="noopener">层叠上下文</a></p><p>知道了一个盒子自己内部的事情，现在来了解一下文档流中盒子是怎么布局的</p><h1 id="position"><a href="#position" class="headerlink" title="position"></a>position</h1><p>顾名思义，影响盒子的位置</p><p>一般有 5 个取值</p><ol><li>static（默认，属于文档流</li><li>relative（属于文档流</li><li>absolute（脱离文档流</li><li>fixed（脱离文档流</li><li>sticky（看情况</li></ol><p>static 作为默认值，就不多介绍了，介绍一下其它的</p><h2 id="relative"><a href="#relative" class="headerlink" title="relative"></a>relative</h2><p>在文档流中所占的位置是默认位置，常作为 absolute 元素的父元素的属性</p><p>可以使用 left、right、top、bottom 等 4 个属性来调整自己相对于原本位置的偏移距离</p><h2 id="absolute"><a href="#absolute" class="headerlink" title="absolute"></a>absolute</h2><p>相对于最近的已定位父元素（不能是 static）进行定位</p><p>可以使用 left、right、top、bottom 等 4 个属性来调整自己相对于最近的已定位父元素的偏移距离</p><h2 id="fixed"><a href="#fixed" class="headerlink" title="fixed"></a>fixed</h2><p>在视口上绝对定位，不随窗口滚动而移动</p><p>可以使用 left、right、top、bottom 等 4 个属性来调整自己相对于视口的偏移距离</p><h2 id="sticky"><a href="#sticky" class="headerlink" title="sticky"></a>sticky</h2><p>粘性定位，超出视口前表现为 relative，超出后表现为 fixed</p><p>在变为 fixed 时，会粘在还是 relative 时最后的位置</p><p>如上，CSS 与盒子有关的常用部分就是这样了，谢谢观看</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML重要标签</title>
      <link href="/frontend/html-tags/"/>
      <url>/frontend/html-tags/</url>
      
        <content type="html"><![CDATA[<p>本文介绍一些前端常用且重要的标签</p><a id="more"></a><p>首先给出索引</p><ol><li><a href="#table">table</a></li><li><a href="#form">form</a></li><li><a href="#a">a</a></li><li><a href="#img">img</a></li><li><a href="#video">video</a></li><li><a href="#audio">audio</a></li><li><a href="#canvas">canvas</a></li><li><a href="#svg">svg</a></li></ol><h1 id="table"><a href="#table" class="headerlink" title="table"></a>table</h1><p>table，表格标签，用于制表，包含以下子标签</p><table><thead><tr><th>标签</th><th>含义</th></tr></thead><tbody><tr><td>thead</td><td>表头</td></tr><tr><td>tbody</td><td>表体</td></tr><tr><td>tfoot</td><td>表脚</td></tr><tr><td>tr</td><td>行</td></tr><tr><td>th</td><td>表头子项</td></tr><tr><td>td</td><td>表体子项</td></tr></tbody></table><p>表格示例代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>时间<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>事件<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>7点<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>起床<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>8点<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>早饭<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>12点<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>午饭<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>13点<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>午休起床<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>17点<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>晚饭<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>23点<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>休息<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tfoot</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>总共24小时<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>总共6件事情<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><p>但是，此时你会发现表格十分之难看，间距很大，对齐也不正常</p><p>我们可以用三个常用的表格属性来调整</p><table><thead><tr><th>属性</th><th>含义</th><th>默认值</th><th>建议值</th></tr></thead><tbody><tr><td>table-layout</td><td>表格布局</td><td>auto（自动分配</td><td>fixed（如果有指定宽度则等分</td></tr><tr><td>border-collapse</td><td>边框隔离</td><td>separated（分隔</td><td>collapsed（合并</td></tr><tr><td>border-spacing</td><td>边框间距</td><td>0</td><td>0</td></tr></tbody></table><h1 id="form"><a href="#form" class="headerlink" title="form"></a>form</h1><p>form，表单标签，常用于提交请求</p><p>主要功能全部体现在其属性上，故此处先讲属性</p><table><thead><tr><th>属性</th><th>含义</th></tr></thead><tbody><tr><td>action</td><td>提交表单的地址，可以是相对路径或绝对路径，留空则为当前页面。提交后当前页面会刷新</td></tr><tr><td>method</td><td>可选 GET 或 POST，默认 GET，详见 HTTP 动词</td></tr><tr><td>target</td><td>常用 _blank，表示在新标签页打开，默认值为 _self，表示在当前页面打开。若有 iframe 嵌套，则还可以使用 _parent 或 _top 来控制打开位置</td></tr><tr><td>autocompete</td><td>可选 on 或 false，当值为 on 时会依据用户历史提供下拉填充选项，默认值取决于浏览器</td></tr></tbody></table><p>当表单提交时，触发其 onsubmit 事件，并将所有数据组织为 <code>[name]=[value]</code> 形式的 formdata，发送到 action 指定的地址</p><p>可以通过 js 拦截该 onsubmit 事件，提供一些诸如先验的操作</p><p>可用以下子标签作为 form 的子元素</p><table><thead><tr><th>标签</th><th>含义</th></tr></thead><tbody><tr><td>input[type=”text”]</td><td>单行文本框</td></tr><tr><td>input[type=”password”]</td><td>单行文本框，但不可直接看见</td></tr><tr><td>textarea</td><td>多行文本框</td></tr><tr><td>input[type=”submit”]</td><td>提交按钮，触发所在表单的 submit 事件</td></tr><tr><td>button</td><td>按钮，触发所在表单的 submit 事件</td></tr><tr><td>input[type=”radio”]</td><td>单选框</td></tr><tr><td>input[type=”checkbox”]</td><td>复选框</td></tr><tr><td>input[type=”file”]</td><td>用于选择文件</td></tr><tr><td>input[type=”email”]</td><td>用于输入邮箱</td></tr><tr><td>input[type=”tel”]</td><td>用于输入电话</td></tr><tr><td>input[type=”hidden”]</td><td>一个隐藏的输入框，用于为 js 脚本保存数据</td></tr><tr><td>select</td><td>下拉选框</td></tr><tr><td>option</td><td>下拉选框子项</td></tr><tr><td>label</td><td>为输入框添加描述</td></tr></tbody></table><h2 id="专有属性"><a href="#专有属性" class="headerlink" title="专有属性"></a>专有属性</h2><p>此处专有属性并非指字段名专有，而是指意义专有</p><table><thead><tr><th>标签</th><th>属性</th><th>是否取值</th><th>含义</th></tr></thead><tbody><tr><td>[all]</td><td>required</td><td>否</td><td>任意允许用户输入的标签，都可以使用该属性来强制要求用户输入，否则无法提交表单</td></tr><tr><td>[all]</td><td>autofocus</td><td>否</td><td>自动聚焦到该元素</td></tr><tr><td>[all]</td><td>disabled</td><td>否</td><td>令用户不能编辑该元素</td></tr><tr><td>input[type=”text”]、textarea</td><td>placeholder</td><td>是</td><td>指定当文本框为空时，显示的提示文本</td></tr><tr><td>input[type=”text”]、textarea</td><td>maxlength</td><td>是</td><td>指定文本框可以接受的最大文本长度</td></tr><tr><td>textarea</td><td>style&gt;resize</td><td>是</td><td>默认情况下可以拖动改变文本框大小，当该属性指定为 none 时不可改变大小</td></tr><tr><td>input[type=”radio”]</td><td>name</td><td>是</td><td>指定若干个 input 为同一组</td></tr><tr><td>input[type=”radio”]</td><td>checked</td><td>否</td><td>指定同一组 input 中的默认选择</td></tr><tr><td>input[type=”checkbox”]</td><td>name</td><td>是</td><td>指定若干个 input 为同一组</td></tr><tr><td>input[type=”checkbox”]</td><td>checked</td><td>否</td><td>指定同一组 input 中的默认选择</td></tr><tr><td>input[type=”file”]</td><td>multiple</td><td>否</td><td>令该文件输入框可以选择多个文件</td></tr><tr><td>button</td><td>type</td><td>是</td><td>在表单中若不指定，则为 submit，指定为其它值则不会触发提交</td></tr><tr><td>option</td><td>value</td><td>是</td><td>选项的实际值，该值区别于用户能看到的值，由 js 处理</td></tr></tbody></table><p>显然，input 元素的表现非常复杂，且主要负责输入，那么有以下 3 个主要事件来控制 input 的输入</p><table><thead><tr><th>事件</th><th>适合元素</th><th>触发时机</th></tr></thead><tbody><tr><td>onchange</td><td>input[type=”text”]、textarea</td><td>文本改变</td></tr><tr><td>onfocus</td><td>input[type=”text”]、textarea</td><td>获得焦点</td></tr><tr><td>onblur</td><td>input[type=”text”]、textarea</td><td>失去焦点</td></tr></tbody></table><p>在项目中一般不使用 form 直接提交数据，而使用 js 拦截提交事件，然后用 ajax 提交，故现在 form 标签更多仅作为一个表示而已</p><h1 id="a"><a href="#a" class="headerlink" title="a"></a>a</h1><p>a，超链接标签，常用于跳转页面，没有专属的子标签</p><p>重要属性如下</p><table><thead><tr><th>属性</th><th>是否取值</th><th>含义</th></tr></thead><tbody><tr><td>href</td><td>是</td><td>指定超链接的地址，一般是<br>1. 网络上的路径，使用 http 或 https 协议，或不指定协议<br>2. 本站相对路径<br>3. 伪协议路径，一般是 javascript、mailto、tel 三种伪协议之一<br>4. 页内锚点，通过 #[id] 指定</td></tr><tr><td>target</td><td>是</td><td>常用 _blank，表示在新标签页打开，默认值为 _self，表示在当前页面打开。若有 iframe 嵌套，则还可以使用 _parent 或 _top 来控制打开位置，或直接指定为 iframe 的 name</td></tr><tr><td>download</td><td>否</td><td>此时 a 标签的动作不再是打开新页面，而是下载新页面</td></tr><tr><td>rel</td><td>是</td><td>当使用 target=”_blank” 时，要加上 rel=”noopener” 以防止钓鱼攻击</td></tr></tbody></table><p>也可以设置一个用于触发 JavaScript 方法，其余什么也不做的 a 标签</p><p>此处使用 javascript 伪协议，代码如下</p><p><code>&lt;a href=&quot;javascript:;&quot;&gt;点击我什么也没发生&lt;/a&gt;</code></p><h1 id="img"><a href="#img" class="headerlink" title="img"></a>img</h1><p>img，图片标签，用于通过 GET 请求来引入图片，没有专属的子标签</p><p>重要属性如下</p><table><thead><tr><th>属性</th><th>含义</th></tr></thead><tbody><tr><td>src</td><td>指定图片来源，可以是网络地址或相对路径，可以通过 js 改变指向</td></tr><tr><td>alt</td><td>指定当图片无法加载时的提示内容</td></tr><tr><td>width</td><td>指定图片的宽度，此时高度会根据比例调整</td></tr><tr><td>height</td><td>指定图片的高度，此时宽度会根据比例调整</td></tr><tr><td>style&gt;max-width</td><td>指定图片的最大宽度，当设为 100% 时，最大不会超过视口大小</td></tr></tbody></table><p>重要事件如下</p><table><thead><tr><th>事件</th><th>触发时机</th><th>用法</th></tr></thead><tbody><tr><td>onload</td><td>图片加载成功</td><td>统计图片访问量</td></tr><tr><td>onerror</td><td>图片加载失败</td><td>补救失败图片</td></tr></tbody></table><p>使用 img 标签，要遵循以下规则</p><ol><li>img 的大小应该不超过 300 kb，否则严重影响加载速度</li><li>永远不要在不合比例的情况下同时指定 height 和 width，否则图片将严重变形</li><li>最好只使用 width 来修改图片尺寸</li></ol><h1 id="video"><a href="#video" class="headerlink" title="video"></a>video</h1><p>video，视频标签，用于引入视频</p><p>有以下重要属性</p><table><thead><tr><th>属性</th><th>是否取值</th><th>含义</th></tr></thead><tbody><tr><td>src</td><td>是</td><td>指定视频来源</td></tr><tr><td>controls</td><td>否</td><td>提供一些用户操作</td></tr><tr><td>preload</td><td>是</td><td>指示视频是否应该被缓存</td></tr></tbody></table><p>其余部分请查看 mdn</p><h1 id="audio"><a href="#audio" class="headerlink" title="audio"></a>audio</h1><p>audio，音频标签，用于引入音频</p><p>重要属性与 video 相同</p><h1 id="canvas"><a href="#canvas" class="headerlink" title="canvas"></a>canvas</h1><p>canvas，为用户提供一张画布</p><p>具体的比较难以说明，建议查看以下画图板范例，或 mdn</p><p><a href="https://github.com/Ringoer/Toy/blob/main/22/canvas.html" target="_blank" rel="noopener">https://github.com/Ringoer/Toy/blob/main/22/canvas.html</a></p><h1 id="svg"><a href="#svg" class="headerlink" title="svg"></a>svg</h1><p>svg，矢量图形，一般要用的时候直接去网上找一个 svg 库，然后引用他们的 svg 即可</p><p>常用 svg 库如下</p><p><a href="https://www.iconfont.cn/" target="_blank" rel="noopener">Iconfont-阿里巴巴矢量图标库</a></p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML入门</title>
      <link href="/frontend/html-introduction/"/>
      <url>/frontend/html-introduction/</url>
      
        <content type="html"><![CDATA[<p>HTML入门</p><a id="more"></a><p>阅读本文，建议使用的编辑器为 VSCODE</p><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>HTML的英文全称是 Hyper Text Markup Language，即超文本标记语言</p><p>HTML是由Web的发明者 Tim Berners-Lee于1990年创立的一种标记语言</p><h1 id="板子"><a href="#板子" class="headerlink" title="板子"></a>板子</h1><p>首先来看看HTML板子长什么样子</p><p>打开 VSCODE，新建一个 html 文件，在其中打入一个英文的感叹号 <code>!</code>，会弹出一个选框，选择一个感叹号的选项。如果选了三个感叹号的选项，只会给出文档头</p><p>自动打板后效果如下</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>但是此时还不够完善，让我们先去改了默认的板子</p><h2 id="修改默认打板"><a href="#修改默认打板" class="headerlink" title="修改默认打板"></a>修改默认打板</h2><p>上面不够完善的部分，是 meta 标签中的 content 部分</p><p>先不要管起了什么作用，改完了再说</p><p>修改步骤如下</p><ol><li>打开 VSCODE 所在目录，进入 <code>./resources/app/extensions/emmet/dist/node</code> 目录</li><li>打开 <code>emmetNodeMain.js</code> 文件，搜索 <code>meta:vp</code></li><li>如无意外，会有两个设置项，两个引用项。确定两个设置项</li><li>设置项形如 <code>&quot;meta:vp&quot;:&quot;meta[name=viewport content=&#39;width=${1:device-width}, initial-scale=${2:1.0}&#39;]&quot;</code></li><li>改为 <code>&quot;meta:vp&quot;:&quot;meta[name=viewport content=&#39;width=${1:device-width}, initial-scale=${2:1.0}, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no&#39;]&quot;</code></li></ol><p>改完后重新打板，效果如下</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="底板解释"><a href="#底板解释" class="headerlink" title="底板解释"></a>底板解释</h2><ol><li><p>第一行是文档声明，声明该文档为 html 文档</p><p>注意感叹号是英文感叹号，DOCTYPE 大写，html 小写</p></li><li><p>第二行是根元素，含有 lang 属性，用于指定文档语言</p></li><li><p>第三行是文档头，包含了表示元数据的 meta 标签和表示页面标题的 title 标签</p></li><li><p>文档头之后是文档体，用于书写页面正文</p></li><li><p>meta:vp 是什么？</p><p>是 meta 的默认配置，具体含义如下</p></li></ol><table><thead><tr><th>属性</th><th>取值</th><th>含义</th></tr></thead><tbody><tr><td>charset</td><td>UTF-8</td><td>指定页面使用 UTF-8 编码</td></tr><tr><td>name</td><td>viewport</td><td>指定根据视口大小的设置</td></tr><tr><td>content&gt;width</td><td>device-width</td><td>视口大小等于设备大小</td></tr><tr><td>content&gt;initial-scale</td><td>1.0</td><td>初始大小与视口同大</td></tr><tr><td>content&gt;minimum-scale</td><td>1.0</td><td>最小缩小比例与视口同大</td></tr><tr><td>content&gt;maximum-scale</td><td>1.0</td><td>最大放大比例与视口同大</td></tr><tr><td>content&gt;user-scalable</td><td>no</td><td>禁止用户手动放大页面</td></tr></tbody></table><h1 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h1><h2 id="基本标签"><a href="#基本标签" class="headerlink" title="基本标签"></a>基本标签</h2><table><thead><tr><th>标签</th><th>含义</th></tr></thead><tbody><tr><td>html</td><td>根元素</td></tr><tr><td>head</td><td>文档头</td></tr><tr><td>body</td><td>文档体</td></tr><tr><td>title</td><td>页面标题</td></tr><tr><td>meta</td><td>元数据</td></tr><tr><td>link</td><td>链接外部资源</td></tr><tr><td>style</td><td>内部样式</td></tr><tr><td>script</td><td>内部脚本或链接到外部脚本</td></tr></tbody></table><h2 id="文章标签"><a href="#文章标签" class="headerlink" title="文章标签"></a>文章标签</h2><p>最早，HTML是用来在网上展示文章信息的，所以有了如下文章标签</p><table><thead><tr><th>标签</th><th>含义</th></tr></thead><tbody><tr><td>article</td><td>文章</td></tr><tr><td>section</td><td>章节</td></tr><tr><td>h[1…6]</td><td>标题</td></tr><tr><td>p</td><td>段落</td></tr><tr><td>header</td><td>头部</td></tr><tr><td>footer</td><td>脚部</td></tr><tr><td>main</td><td>主要内容</td></tr><tr><td>aside</td><td>分支内容</td></tr><tr><td>div</td><td>块</td></tr></tbody></table><h2 id="内容标签"><a href="#内容标签" class="headerlink" title="内容标签"></a>内容标签</h2><p>有了文章结构，自然还要写文章内容，于是又有了内容标签</p><p>但是有的标签相当重要，需要单独说明，故而会在下个章节给出</p><table><thead><tr><th>标签</th><th>含义</th></tr></thead><tbody><tr><td>ol</td><td>有序列表</td></tr><tr><td>ul</td><td>无序列表</td></tr><tr><td>li</td><td>列表项</td></tr><tr><td>dl</td><td>描述列表</td></tr><tr><td>dt</td><td>描述标题</td></tr><tr><td>dd</td><td>描述项</td></tr><tr><td>pre</td><td>预览</td></tr><tr><td>code</td><td>代码</td></tr><tr><td>q</td><td>引用（此项为内联元素</td></tr><tr><td>blockquote</td><td>引用（此项为块级元素</td></tr><tr><td>em</td><td>斜体（语气上强调</td></tr><tr><td>strong</td><td>粗体（实际上重要</td></tr><tr><td>hr</td><td>分隔线</td></tr><tr><td>br</td><td>换行符</td></tr></tbody></table><h2 id="重要标签"><a href="#重要标签" class="headerlink" title="重要标签"></a><span id="important">重要标签</span></h2><p>此处仅给出这些标签，具体的部分请点击超链接查看</p><table><thead><tr><th>标签</th><th>含义</th></tr></thead><tbody><tr><td><a href="https://ringoer.com/frontend/html-tags#table" target="_blank" rel="noopener">table</a></td><td>表格</td></tr><tr><td><a href="https://ringoer.com/frontend/html-tags#form" target="_blank" rel="noopener">form</a></td><td>表单</td></tr><tr><td><a href="https://ringoer.com/frontend/html-tags#a" target="_blank" rel="noopener">a</a></td><td>超链接</td></tr><tr><td><a href="https://ringoer.com/frontend/html-tags#img" target="_blank" rel="noopener">img</a></td><td>图片</td></tr><tr><td><a href="https://ringoer.com/frontend/html-tags#video" target="_blank" rel="noopener">video</a></td><td>视频</td></tr><tr><td><a href="https://ringoer.com/frontend/html-tags#audio" target="_blank" rel="noopener">audio</a></td><td>音频</td></tr><tr><td><a href="https://ringoer.com/frontend/html-tags#canvas" target="_blank" rel="noopener">canvas</a></td><td>画图</td></tr><tr><td><a href="https://ringoer.com/frontend/html-tags#svg" target="_blank" rel="noopener">svg</a></td><td>矢量图</td></tr></tbody></table><h2 id="其余标签"><a href="#其余标签" class="headerlink" title="其余标签"></a>其余标签</h2><p>其余标签并不是很重要，有兴趣的话可以 <a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/HTML/HTML5/HTML5_element_list" target="_blank" rel="noopener">点我查看</a></p><h1 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h1><p>刚才说到根元素有 lang 属性，用于指明文档语言</p><p>显然不同的标签有共通属性，也有专有属性</p><h2 id="全局属性"><a href="#全局属性" class="headerlink" title="全局属性"></a>全局属性</h2><table><thead><tr><th>属性名</th><th>是否取值</th><th>含义</th></tr></thead><tbody><tr><td>class</td><td>是</td><td>css 类</td></tr><tr><td>hidden</td><td>否</td><td>visible=hidden，此时有渲染，但无事件</td></tr><tr><td>id</td><td>是</td><td>声明全局唯一 id，但需要程序员手动控制</td></tr><tr><td>style</td><td>是</td><td>内联样式</td></tr><tr><td>tabindex</td><td>是</td><td>指定 tab 的顺序，使用正整数，越小越优先；=0则最后；=-1则不会被 tab 访问</td></tr><tr><td>title</td><td>是</td><td>指定所在元素的说明，在鼠标放置在该元素上时会显示浮窗</td></tr><tr><td>contenteditable</td><td>是</td><td>指定所在元素是否（true/false）可以被用户编辑</td></tr></tbody></table><h2 id="专有属性"><a href="#专有属性" class="headerlink" title="专有属性"></a>专有属性</h2><p>请前往 <a href="#important">重要标签</a> 查看，或查阅 MDN</p><p>谢谢阅读</p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图解非对称加密</title>
      <link href="/algorithm/rsa/"/>
      <url>/algorithm/rsa/</url>
      
        <content type="html"><![CDATA[<p>学习 HTTPS 必备的 RSA 算法的基础</p><a id="more"></a><h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><p>所谓非对称加密，就是服务器和客户端，在不直接互通私钥的情况下，通过公钥和互相发送的密文，推出本次连接使用的密钥</p><p>非对称加密涉及的数学原理非常多，想了解的可以看 <a href="https://blog.csdn.net/wjiabin/article/details/85228078" target="_blank" rel="noopener">非对称加密算法–RSA加密原理</a></p><p>本文不解释数学原理，只讲解加密的具体流程</p><h1 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h1><p>首先看下图，下图对流程作出了简单描述</p><p><img src="https://pic.ringoer.com/RSA%E5%9B%BE%E8%A7%A3.png" alt="RSA图解"></p><p>接下来开始具体描述</p><ol><li>设服务器有一组公钥 [k1,k2] 和一个取余公式 <code>p=&gt;k1**p%k2</code>，其中 k1、k2、p 均要求是质数</li><li>服务器收到了客户端的连接请求，将公钥发给客户端</li><li>服务器产生一个<strong>随机质数</strong> p，代入公钥求得密文 m1，发送给客户端</li><li>客户端也产生一个<strong>随机质数</strong> q，代入公钥求得密文 m2，发送给服务器</li><li>服务器和客户端各自使用自己收到的密文，取代公钥中的 k1，求得结果就是共同的密钥</li><li>往后的通信中，双方均使用该密钥，进行对称加密通信</li></ol><p>显然 k2 要尽可能大，才能尽可能减小碰撞</p><p>现在代入值计算一下是否正确</p><ol><li>设 k1=13，k2=31，p=23，q=19</li><li><code>m1 = 13**23%31 =24</code>，<code>m2 = 13**19%31 = 21</code></li><li><code>21**23%31 = 17</code>，<code>24**19%31 = 17</code></li><li>验证完毕</li></ol><p>感兴趣的朋友可以自行验证一下，面试的时候能答出上述流程就行了</p><p>至于数学原理，我不知道你能不能看懂，反正我看不懂，2333</p>]]></content>
      
      
      <categories>
          
          <category> algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> http(s) </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git远程操作</title>
      <link href="/programing/remoteGit/"/>
      <url>/programing/remoteGit/</url>
      
        <content type="html"><![CDATA[<p>有了本地操作，肯定还得保存到云端</p><a id="more"></a><hr><h1 id="配置连接"><a href="#配置连接" class="headerlink" title="配置连接"></a>配置连接</h1><p>默认 <a href="https://ringoer.com/programing/localGit/" target="_blank" rel="noopener">本地操作</a> 中的配置已经完成了</p><p>以下命令全部都在 bash 中执行</p><h2 id="ssh-原理"><a href="#ssh-原理" class="headerlink" title="ssh 原理"></a>ssh 原理</h2><p>ssh 是基于非对称加密的 RSA 算法，<a href="https://ringoer.com/algorithm/rsa/" target="_blank" rel="noopener">算法流程请点我</a></p><p>通过 ssh 加密，使得本地和远程可以安全地通信</p><h2 id="生成-ssh-密钥"><a href="#生成-ssh-密钥" class="headerlink" title="生成 ssh 密钥"></a>生成 ssh 密钥</h2><p>执行命令 <code>ssh-keygen -t rsa -C ringoer@qq.com</code></p><p>此时会生成ssh密钥。命令中邮件地址替换为自己的</p><h2 id="查看密钥"><a href="#查看密钥" class="headerlink" title="查看密钥"></a>查看密钥</h2><p>执行命令 <code>cat ~/.ssh/id_rsa.pub</code></p><p>此时会在控制台显示一串密钥，复制下来</p><h2 id="设置密钥"><a href="#设置密钥" class="headerlink" title="设置密钥"></a>设置密钥</h2><p>打开 github，打开 settings，选择 SSH and GPG keys，选择 New SSH key</p><p>title 随便写，key 的文本则填写刚才复制出来的密钥，然后 add key</p><p>一台电脑只需要一个密钥</p><h2 id="测试配对"><a href="#测试配对" class="headerlink" title="测试配对"></a>测试配对</h2><p>执行命令 <code>ssh -T git@github.com</code></p><p>如遇询问 yes or no，请输入 yes 并继续</p><h2 id="设置目标仓库"><a href="#设置目标仓库" class="headerlink" title="设置目标仓库"></a>设置目标仓库</h2><p>在 github 上新建一个 repository，然后复制其 ssh 地址</p><p>ssh 地址一般形如 <a href="mailto:`git@github.com" target="_blank" rel="noopener">`git@github.com</a>:Ringoer/xxx.git`</p><p>注意不要复制到 HTTPS 地址</p><p>然后在本地执行命令 <code>git remote add origin git@github.com:Ringoer/xxx.git</code></p><p>执行后会在本地仓库创建一个名为 origin 的仓库，指向目标远程仓库</p><p>理论上可以随意命名这个仓库，不叫 origin 也可以，但是业界潜规则就是第一个仓库要叫 origin。如果以后新建了其它仓库，可以自己尝试叫别的名字</p><p>如果忘记自己配置了哪些远程仓库，可以通过命令 <code>git remote -v</code> 来查看在当前本地仓库配置的所有远程仓库及其别名</p><p>创建完成后，就可以直接通过 origin 操作远程仓库了</p><p>然后就又是我们熟悉的 CRUD 了</p><p>但是在 Git 远程操作中，略有些变化，大致如下表</p><table><thead><tr><th>动作</th><th>描述</th><th>特点</th></tr></thead><tbody><tr><td>push</td><td>推送本地仓库代码到远程仓库</td><td>会在远程仓库强制创建分支</td></tr><tr><td>pull</td><td>从远程仓库拉取指定分支的代码到本地</td><td>要求本地已有对应分支</td></tr><tr><td>clone</td><td>从远程仓库克隆指定分支的代码到本地</td><td>最好在空目录下克隆，否则会覆盖已有内容</td></tr></tbody></table><h1 id="push"><a href="#push" class="headerlink" title="push"></a>push</h1><p>通过命令 <code>git push</code> 可以上传本地仓库的代码到远程仓库</p><p>该命令有如下变体</p><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td>git push -u origin master</td><td>推送本地仓库的 master 分支到远程仓库的 master 分支，并将该远程仓库设置为上传流（upstream）</td></tr><tr><td>git push</td><td>推送本地仓库所有修改到被设置为 upstream 的远程仓库</td></tr><tr><td>git push origin master</td><td>推送本地仓库的 master 分支到远程仓库的 master 分支</td></tr><tr><td>git push origin master:child</td><td>推送本地仓库的 master 分支到远程仓库的 child 分支，格式是 本地:远程</td></tr></tbody></table><h1 id="clone"><a href="#clone" class="headerlink" title="clone"></a>clone</h1><p>通过命令 <code>git clone</code> 可以拉取远程仓库代码到本地仓库</p><p>该命令有如下变体</p><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td>git clone [git]</td><td>拉取指定 git 地址对应的仓库的所有分支代码，到新目录中，新目录与远程 repository 的名字相同</td></tr><tr><td>git clone [git] .</td><td>拉取指定 git 地址对应的仓库的所有分支代码，到当前目录中</td></tr><tr><td>git clone [git] [folderName]</td><td>拉取指定 git 地址对应的仓库的所有分支代码，到指定名字目录中，若该目录不存在会被新建，否则已有内容会被覆盖</td></tr></tbody></table><p>注意，执行 clone 之后不会自动进入新文件夹，需要手动进入</p><h1 id="pull"><a href="#pull" class="headerlink" title="pull"></a>pull</h1><p>通过命令 <code>git pull</code> 可以拉取远程仓库代码到本地仓库已有分支</p><p>该命令可能会产生冲突</p><p>该命令有如下变体</p><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td>git pull</td><td>拉取 upstream 仓库的，与当前所在分支相同的分支的所有内容到本地</td></tr><tr><td>git pull origin master:child</td><td>拉取 origin 仓库的，master 分支的代码到本地 child 分支</td></tr></tbody></table><p>在该命令中如果想回避冲突，可以使用 <code>git stash</code> 和 <code>git stash pop</code> 组合命令</p><h1 id="stash"><a href="#stash" class="headerlink" title="stash"></a>stash</h1><h2 id="压栈"><a href="#压栈" class="headerlink" title="压栈"></a>压栈</h2><p>通过命令 <code>git stash</code> 可以将本地仓库已经标记但还未 commit 的文件隐藏进缓存栈中</p><p>此时执行 <code>git pull</code> 不会与缓存栈中文件作对比</p><p>可以多次执行命令 <code>git stash</code> 来不断压栈</p><h2 id="弹出"><a href="#弹出" class="headerlink" title="弹出"></a>弹出</h2><p>当 pull 完成后可以通过命令 <code>git stash pop</code> 来弹出栈顶内容</p><p>可以根据需要来弹出，但因为栈的特性，必然是只能按顺序弹出</p><p>该操作可能会引起冲突</p><h2 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h2><p>可以通过命令 <code>git stash list</code> 来查看当前缓存栈中保存的内容</p><h2 id="清空"><a href="#清空" class="headerlink" title="清空"></a>清空</h2><p>可以通过命令 <code>git stash clear</code> 来清空缓存栈中所需内容</p><p>注意，该操作不可复原</p><h1 id="其它"><a href="#其它" class="headerlink" title="其它"></a><span id="other">其它</span></h1><h2 id="缩写"><a href="#缩写" class="headerlink" title="缩写"></a>缩写</h2><p>可以通过 <code>code ~/.bashrc</code> 命令，通过 vscode 打开 bash 配置文件</p><p>然后通过 alias 指令，指定缩写</p><p>如 <code>alias ga=&quot;git add&quot;</code> 来令缩写命令 ga 等效于 git add 命令</p><p>不止 git 命令，其它 bash 命令也可以通过这种方法设置缩写</p><h2 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h2><p>可以通过 <code>git rebase</code> 命令来为 git log 指定排版</p><p>假设现在有三个版本，版本号如图</p><table><thead><tr><th>版本</th><th>版本号</th></tr></thead><tbody><tr><td>1</td><td>bikh345</td></tr><tr><td>2</td><td>12jop3i</td></tr><tr><td>3（最新）</td><td>u09dsf3</td></tr></tbody></table><p>现在想合并已有版本1和2，使得日志缩短，可以通过命令 <code>git rebase -i u09dsf3</code> 来告诉 git，我想对 u09dsf3 之前的版本进行修改</p><p>此时 git 会弹出默认编辑器，向你请求修改，同时会给出帮助，按帮助修改即可</p><p>修改完毕后，保存，关闭这个文件，git 就会开始处理你的修改</p><p>在处理完成之前，如果你反悔了，可以通过命令 <code>git rebase --abort</code> 来取消这次 rebase</p><p>如果又反悔了（什么人啊这是），可以通过命令 <code>git rebase --continue</code> 来继续这次 rebase</p><p>rebase 也有可能出错，看看日志解决即可</p><p>大概就这些</p><p>感谢饥人谷对 <a href="#other">其它</a> 部分的帮助</p>]]></content>
      
      
      <categories>
          
          <category> programing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git本地操作</title>
      <link href="/programing/localGit/"/>
      <url>/programing/localGit/</url>
      
        <content type="html"><![CDATA[<p>关于提交到 github 之前，在本地仓库的操作</p><a id="more"></a><hr><p>在使用 Git 之前，要先配置一下本地的 Git Bash</p><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>一般来说，有如下6行配置，是建议运行的</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name [yourName]</span><br><span class="line">git config --global user.email [yourEmail]</span><br><span class="line">git config --global push.default simple</span><br><span class="line">git config --global core.quotepath <span class="literal">false</span></span><br><span class="line">git config --global core.editor <span class="string">"code --wait"</span></span><br><span class="line">git config --global core.autocrlf input</span><br></pre></td></tr></table></figure><h2 id="user"><a href="#user" class="headerlink" title="user"></a>user</h2><p>这两行是必须执行的，用于告诉 Git 你的个人信息</p><p>例如</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name Ringoer</span><br><span class="line">git config --global user.email ringoer@qq.com</span><br></pre></td></tr></table></figure><h2 id="push-default"><a href="#push-default" class="headerlink" title="push.default"></a>push.default</h2><p>这个参数有两个可取的值，具体如下</p><table><thead><tr><th>参数值</th><th>版本</th><th>行为</th></tr></thead><tbody><tr><td>matching</td><td>1.x 版本默认</td><td>上传本地所有分支</td></tr><tr><td>simple</td><td>2.x 版本默认</td><td>上传本地当前分支</td></tr></tbody></table><p>建议手动执行一下该命令，以免出现意外的上传</p><h2 id="core-quotepath"><a href="#core-quotepath" class="headerlink" title="core.quotepath"></a>core.quotepath</h2><p>用于配置是否开启路径转义，默认值是 true，表示中文路径名或文件名要自动转义为形如 <code>\xx\xx</code> 的类似 unicode 的形式</p><h2 id="core-editor"><a href="#core-editor" class="headerlink" title="core.editor"></a>core.editor</h2><p>用于指定当 Git 希望打开一个文本编辑器时，执行的命令行。默认值是 vi，表示启动 vim</p><h2 id="core-autocrlf"><a href="#core-autocrlf" class="headerlink" title="core.autocrlf"></a>core.autocrlf</h2><p>首先了解一下 CRLF、CR、LF 分别是什么</p><table><thead><tr><th>参数值</th><th>对应转义字符</th></tr></thead><tbody><tr><td>CRLF</td><td>\r\n</td></tr><tr><td>CR</td><td>\r</td></tr><tr><td>LF</td><td>\n</td></tr></tbody></table><p><code>core.autocrlf</code> 用于指定行结束符 LF 和 CRLF 之间的转换，具体如下</p><table><thead><tr><th>参数值</th><th>提交（commit）行为</th><th>签出（checkout）行为</th></tr></thead><tbody><tr><td>true（默认）</td><td>CRLF 转换为 LF</td><td>LF 转换为 CRLF</td></tr><tr><td>input</td><td>CRLF 转换为 LF</td><td>不转换</td></tr><tr><td>false</td><td>不转换</td><td>不转换</td></tr></tbody></table><p>鉴于 Windows 下的行结束符通常是 CRLF，Mac 和 Linux 下通常是 LF，所以最好是选择 input 参数值，以免产生跨平台协作问题</p><p>说到 Git 本地操作，那必然也是对某目标的 CRUD。是什么目标呢？是分支</p><h1 id="分支（Branch）"><a href="#分支（Branch）" class="headerlink" title="分支（Branch）"></a>分支（Branch）</h1><p>首先要了解什么是分支</p><p>每当我们想保存代码的时候，往往有很多文件，组成一个项目。这个项目此时此刻的所有状态，合称为一个<strong>版本</strong>，而这个项目的所有版本，都处于同一个<strong>分支</strong>之中</p><h1 id="Create"><a href="#Create" class="headerlink" title="Create"></a>Create</h1><p>一般有两种新增</p><ul><li>初始化本地仓库时，新增默认的分支</li><li>已有分支的情况下，新增新的分支</li></ul><h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><p>首先通过 <code>cd</code> 命令进入项目所在目录，然后使用 <code>git init</code> 来完成本地仓库的初始化</p><p>初始化完成之后，会在该目录中产生一个 <code>.git</code> 文件夹，这个就是本地仓库</p><p>默认分支是 <code>master</code>，但由于 zzzq 等原因，现在默认分支改名叫 <code>main</code></p><p>初始化完成后，<code>.git</code> 目录下会有一个名为 <code>.gitignore</code> 的文本文档，里面用类正则表达式写法，指明了在提交操作中应该忽略哪些文件</p><h2 id="新增"><a href="#新增" class="headerlink" title="新增"></a>新增</h2><p>现在我们已经有一个 <code>master</code> 分支了，想要新增一个分支</p><p>可以使用 <code>git branch [branchName]</code> 命令来新增分支</p><p>假设新分支名为 <code>child</code>，那么命令就是 <code>git branch child</code>，此时就新建了一个名为 <code>child</code> 的新分支</p><p>注意该操作仅创建了分支，不会自动移动到新分支</p><h1 id="Retrieve"><a href="#Retrieve" class="headerlink" title="Retrieve"></a>Retrieve</h1><h2 id="查看所有分支情况"><a href="#查看所有分支情况" class="headerlink" title="查看所有分支情况"></a>查看所有分支情况</h2><p>可以使用 <code>git branch</code> 查看本地仓库中的所有分支名称</p><h2 id="查看当前分支情况"><a href="#查看当前分支情况" class="headerlink" title="查看当前分支情况"></a>查看当前分支情况</h2><h3 id="状态"><a href="#状态" class="headerlink" title="状态"></a>状态</h3><p>可以通过 <code>git status</code> 命令查看当前分支的状态</p><p>通常会显示以下种内容</p><ol><li>还未执行 <a href="#add">标记</a> 的文件列表</li><li>已经执行 <a href="#add">标记</a> ，还未执行 <a href="#commit">提交</a>  的文件列表</li><li>存在 <a href="#conflict">冲突</a> 的文件列表</li></ol><p>可以通过 <code>-sb</code> 选项简化显示的内容（只显示文件列表）</p><h3 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h3><p>日志有两种，log 和 reflog，关于其差别请阅读 <a href="#reset">重置</a> 部分内容</p><p>每条日志都记录了一次提交，包括这次提交的版本号、理由等</p><p>可以通过 <code>git log</code> 命令查看当前分支的局部日志（不包括重置操作）</p><p>可以通过 <code>git reflog</code> 命令查看当前分支的所有日志（包括重置操作）</p><h1 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h1><p>要让增删有意义，那么自然是要进行符合我心意的修改了</p><p>此处的修改分支，是指修改本地仓库内保存的分支内容</p><h2 id="提交"><a href="#提交" class="headerlink" title="提交"></a><span id="commit">提交</span></h2><p>初始化的分支，或是新建的分支，里面都是没有内容的。如何让它充实呢？</p><p>可以通过 <code>git commit</code> 命令让它充实。</p><p>但是仅仅是 <code>git commit</code> 来上传新版本的话，以后无法查询版本更新信息，所以我们需要 -m 和 -v 参数</p><h3 id="m"><a href="#m" class="headerlink" title="-m"></a>-m</h3><p><code>git commit -m [string]</code> 表示将 -m 选项后的字符串作为本次提交的理由（备注），使得后续可以查看该版本提交时的相关信息</p><p>但是 -m 因为是在命令行中直接给出，人在潜意识影响下会倾向于写短理由，不利于以后查询，所以有了 -v 选项</p><h3 id="v"><a href="#v" class="headerlink" title="-v"></a>-v</h3><p><code>git commit -v</code> 可以打开 Git 默认的文本编辑器（默认是 vim）来等待用户写入提交理由，直到用户在新打开的文件中写完理由并保存后才会继续提交</p><p>因为是在新文件中书写理由，视野比较开阔，会更容易写出更易阅读的理由，所以推荐手动上传时，使用 -v 选项，自动上传时才选择 -m 选项</p><p>但是 Git 怎么知道你要上传哪些内容呢？万一你只修改了部分文件，只想上传这一部分，怎么办呢</p><h2 id="标记"><a href="#标记" class="headerlink" title="标记"></a><span id="add">标记</span></h2><p>可以通过 <code>git add [filename]</code> 命令来标记要提交的文件</p><p>可以用 <code>git add .</code> 来标记目录下的所有文件（注意点号）</p><p>此处的标记，指的是“将要同步到本地仓库当前分支的更新”，一般有三种情况</p><table><thead><tr><th>文件状态</th><th>释义</th><th>commit 后的行为</th></tr></thead><tbody><tr><td>New</td><td>新建</td><td>向本地仓库当前分支中 <strong>添加</strong> 该文件</td></tr><tr><td>Modified</td><td>更新</td><td><strong>修改</strong> 本地仓库当前分支中的对应文件</td></tr><tr><td>Deleted</td><td>删除</td><td>从本地仓库当前分支中 <strong>删除</strong> 该文件</td></tr></tbody></table><p>可见，虽然命令中采用的是 <code>add</code> 短语，但实际上表达的意思是“添加标记”，而不是单纯的“新增”</p><p>只有当文件被标记后，才可以在下一次 commit 操作中被提交到本地仓库</p><p>怎么办，代码写着写着，发现以前的某个版本更优秀，我想回去————</p><h2 id="重置"><a href="#重置" class="headerlink" title="重置"></a><span id="reset">重置</span></h2><p>可以通过 <code>git reset --hard [version]</code> 来切换版本</p><p>版本号可以打完整，也可以打前缀，一般选择7位前缀</p><p>查看版本号，可以通过 <code>git log</code> 或 <code>git reflog</code> 来查看，或前往 github 网站，通过可视化界面查看</p><p>假设现在是版本4，想切换到版本2，那么切换后，log 里只会保留如下内容（简单说法）</p><ol><li>commit 版本1</li><li>commit 版本2</li></ol><p>而 reflog 里会保留所有内容</p><ol><li>commit 版本1</li><li>commit 版本2</li><li>commit 版本3</li><li>commit 版本4</li><li>reset 版本2</li></ol><p>注意一旦切换版本，将会丢失当前所有修改，请确保备份</p><p>如果不想重置所有修改，也可以选择回滚部分事务</p><h2 id="回滚"><a href="#回滚" class="headerlink" title="回滚"></a>回滚</h2><p>可以通过 <code>git revert [version]</code> 来回滚当前分支上的某次提交事务</p><p>可能产生 <a href="#conflict">冲突</a></p><h1 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h1><p>可以通过 <code>git branch -d [branchName]</code> 来删除指定分支</p><p>注意删除后该分支所以内容都会从本地消失，请确保已经备份</p><p>有很多操作会产生冲突，怎么办呢？</p><h1 id="冲突"><a href="#冲突" class="headerlink" title="冲突"></a><span id="conflict">冲突</span></h1><p>当发生冲突的时候，首先要找到冲突</p><p>前述的 <code>git status</code> 命令，就可以找到现在有冲突的文件</p><p>然后我们需要手动解决冲突</p><p>假设有文件 1.txt，里面的原内容是 <code>今天是2020年11月16日</code>，新内容是 <code>今天是1970年1月1日</code></p><p>当要将新内容同步到 1.txt 时，就会发生冲突</p><p>此时 1.txt 内容变更为类似如下模样</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD(当前更改)</span><br><span class="line">今天是2020年11月16日</span><br><span class="line">=======</span><br><span class="line">今天是1970年1月1日</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; child(传入的更改)</span><br></pre></td></tr></table></figure><p>可见冲突的格式是以 <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code> 开头，以 <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code> 结尾，以 <code>=======</code> 分隔</p><p>所以当我们打开一个可能有冲突的文件时，可以搜索 <code>=======</code> 来快速定位冲突在文件中的位置</p><p>此时我们怎么处理这个冲突呢？</p><p>可以选择性保留我们想要的字段，假设保留新内容，那么可以对 1.txt 作出如下操作</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; master(当前更改) 【删除该行】</span><br><span class="line">今天是2020年11月16日     【删除该行】</span><br><span class="line">=======                  【删除该行】</span><br><span class="line">今天是1970年1月1日</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; child(传入的更改)【删除该行】</span><br></pre></td></tr></table></figure><p>只保留我们需要的部分，其余部分删除</p><p>那刚才创建的新分支又有什么用呢？</p><h1 id="多分支"><a href="#多分支" class="headerlink" title="多分支"></a>多分支</h1><h2 id="检出"><a href="#检出" class="headerlink" title="检出"></a>检出</h2><p>可以通过 <code>git checkout [branchName]</code> 命令来改变 Git 当前所在的分支</p><p>该操作称之为 <strong>检出</strong></p><p>当执行该命令时，会将指定分支的最后一次提交的内容同步到当前目录下</p><p>该操作可能会产生冲突</p><p>若同步前的文件内容与将要同步下来的内容无冲突，则保留同步前的文件；若冲突，则需要先解决冲突，解决冲突后<strong>不需要</strong>再次检出</p><h2 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h2><p>可以通过 <code>git merge [branchName]</code> 命令来将目标分支的内容合并到当前分支下</p><p>该操作在完成后，会自动向本地仓库中提交合并的结果，且理由自动设定为 <code>Merge branch [branchName]</code>，表示此次提交是因为合并而产生的</p><p>该操作可能会产生冲突</p><p>当产生冲突时，需要按顺序完成以下步骤以完成合并流程</p><ol><li>解决冲突</li><li><code>git add [冲突的文件]</code></li><li><code>git commit</code>（不需要填写理由）</li></ol><p>如上，即是 Git 本地操作中最常用的部分内容</p><p>谢谢阅读</p>]]></content>
      
      
      <categories>
          
          <category> programing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用命令行合集</title>
      <link href="/programing/command-line/"/>
      <url>/programing/command-line/</url>
      
        <content type="html"><![CDATA[<p>20201113命令行总结</p><a id="more"></a><hr><p>首先我们要打开命令行，应该使用 <code>git bash</code> 而不是 Windows cmd，因为命令行实际上就是 bash 脚本语言</p><p>关于安装命令行，可以参考 <a href="https://ringoer.com/others/MyWebsiteGuide/" target="_blank" rel="noopener">本站建站指导</a></p><p>命令行的默认目录一般是形如 <code>C:\Users\Ringoer</code> ，这里被称之为用户目录，可以缩写为英文波浪线 <code>~</code></p><p>然后我们可能要先切换目录到达目标目录</p><h1 id="切换目录"><a href="#切换目录" class="headerlink" title="切换目录"></a>切换目录</h1><p>要切换到根目录（盘符的上级目录）的话，非常容易，只需要 <code>cd /</code> 就行了，此处 <code>/</code> 表示系统根目录</p><p>切换盘符的话，也挺简单的，直接在命令行输入盘符+冒号即可。例如 <code>D:</code> 可以切换到 D 盘</p><p>切换目录使用命令 <code>cd</code> ，是 <code>change directory</code> 的缩写。使用方法一般有两种</p><ul><li>绝对目录</li><li>相对目录</li></ul><h2 id="绝对目录"><a href="#绝对目录" class="headerlink" title="绝对目录"></a>绝对目录</h2><p>一般指从盘符开始的目录描述，比如 <code>C:\Users\Ringoer</code> 就是一个标准的绝对目录</p><p>需要注意，上面说到用户目录缩写是 <code>~</code> ，所以 <code>~</code> 也是一个绝对目录</p><h2 id="相对目录"><a href="#相对目录" class="headerlink" title="相对目录"></a>相对目录</h2><p>相对目录的写法一般根据当前目录决定。</p><p>首先我们可以在命令行上看到自己当前所在的目录，也可以使用命令 <code>pwd</code> 来显示当前目录</p><p>然后，我们可以选择前往上一级目录，此时可以使用命令 <code>cd ..</code> ，注意一定是两个点表示上级目录，如果是一个点则表示当前目录</p><p>不知道要去哪个目录怎么办？没关系，可以使用命令 <code>ls</code> （注意是字母 L 的小写）来查看当前目录下的所有子目录或文件，然后 <code>cd 子目录名称</code> 或 <code>cd ./子目录名称</code> 即可进入目标子目录</p><p>说到命令行，那最大的用处，肯定是对文件 CRUD 啦</p><h1 id="Create-新增"><a href="#Create-新增" class="headerlink" title="Create-新增"></a>Create-新增</h1><p>创建一个新文件，一般有两种类型</p><ul><li>从零创建</li><li>从已有创建</li></ul><h2 id="从零创建"><a href="#从零创建" class="headerlink" title="从零创建"></a>从零创建</h2><p>一般使用 <code>touch [...filename]</code> 来创建文件</p><p>其中 <code>...</code> 是 spread 语法，表示不定长参数列表，下同</p><p>若目标文件不存在，则在当前目录创建这个文件</p><p>若目标文件已经存在，则更新最后更新时间</p><h2 id="从已有创建"><a href="#从已有创建" class="headerlink" title="从已有创建"></a>从已有创建</h2><p>一般使用 <code>cp [filename1] [filename2]</code> 来复制文件</p><p>将 文件1 的内容全数复制到 文件2 中</p><h2 id="文件夹"><a href="#文件夹" class="headerlink" title="文件夹"></a>文件夹</h2><p>文件夹也有如上两种情况，分别采用</p><ul><li><code>mkdir [...directoryName]</code></li><li><code>cp -r [directoryName1] [directoryName2]</code></li></ul><p>来创建文件夹</p><p>其中参数 -r 表示 递归地复制，概念与 js 中的深度拷贝相同</p><h1 id="Retrieve-查询"><a href="#Retrieve-查询" class="headerlink" title="Retrieve-查询"></a>Retrieve-查询</h1><p>一般有 4 种查询语句</p><table><thead><tr><th>语句</th><th>描述</th></tr></thead><tbody><tr><td>cat […filename]</td><td>全量查看文件</td></tr><tr><td>head -n [line] […filename]</td><td>查看文件前 n 行</td></tr><tr><td>tail -n [line] […filename]</td><td>查看文件后 n 行</td></tr><tr><td>less [filename]</td><td>分页查看文件</td></tr></tbody></table><h1 id="Update-修改"><a href="#Update-修改" class="headerlink" title="Update-修改"></a>Update-修改</h1><p>显然修改文件和文件夹是不一样的</p><h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2><p>查询中前三种语句，都是有确定的返回内容的，此时可以通过 <code>&gt; [filename]</code> 将返回内容导入到新的文件中。该命令会覆盖目标文件原有内容</p><p>例如，<code>cat 1.txt 2.txt &gt; 3.txt</code> ，将 1.txt 和 2.txt 的内容都全量导出，然后拼接在一起，之后保存到 3.txt 中</p><p>也可以通过 <code>&gt;&gt; [filename]</code> 将返回内容导入到新的文件中。该命令会将新内容拼接到目标文件原有内容末尾</p><p>例如，<code>cat 1.txt 2.txt &gt;&gt; 3.txt</code> ，将 1.txt 和 2.txt 的内容都全量导出，然后拼接在一起，之后拼接到 3.txt 的末尾</p><p>刚才说到”确定的返回内容”，就不得不说说回显命令 <code>echo [body]</code> ，用于将参数体的内容原封不动回显到标准输出中。显然，echo 命令也可以通过 <code>&gt; [filename]</code> 和 <code>&gt;&gt; [filename]</code> 重定向到文件中</p><p>echo 还可以输出 bash 脚本代码，实际上就是输出字符串，需要双引号</p><p>例如 <code>echo &quot;hello world&quot;</code> ，英文引号，懂得都懂</p><h2 id="文件夹-1"><a href="#文件夹-1" class="headerlink" title="文件夹"></a>文件夹</h2><p>修改文件夹是什么意思呢？对比修改文件是指修改其中保存的内容，那修改文件夹显然就是修改文件夹中保存的文件列表</p><p>我们可以通过 <code>mv [...filename] [directoryName]</code> 命令来将文件移动到目标文件夹中</p><p>其中文件可以指定不少于 1 的任意多个，但目标文件夹只能有一个</p><p>mv，实际上是 <code>move</code> 的缩写。</p><h2 id="重命名"><a href="#重命名" class="headerlink" title="重命名"></a>重命名</h2><p>说到这里，肯定会有同学想问，如何重命名呢？这就需要我们刚刚说的 <code>mv</code> 命令了</p><p><code>mv [file1] [file2]</code> 可以实现将文件1重命名为文件2</p><p><code>mv [directory1] [directory2]</code> 可以实现将文件夹1重命名为文件夹2</p><p>如果文件2已经存在会怎么样呢？</p><p>那么文件1会改名为文件2，而文件2会被删除</p><h1 id="Delete-删除"><a href="#Delete-删除" class="headerlink" title="Delete-删除"></a>Delete-删除</h1><p>删除一个文件，一般使用 <code>rm [filename]</code> 来删除，其中 <code>rm</code> 是 <code>remove</code> 的缩写</p><p>如果删除目标是一个文件夹，一般使用 <code>rm -r [directoryName]</code> 来删除，其中参数 -r 同上</p><p>有时候要删除某个文件或文件夹的时候，会触发警告，此时可以通过 <code>-f</code> 来强制删除文件或 <code>-rf</code> 来强制删除文件夹，这也是 <code>rm -rf /</code> 删库跑路的来源。但此举非常不推荐，否则很容易就把重要文件删了导致系统崩溃</p><p>但是测试 CRUD 的时候，总是要重复运行很多代码，好烦啊，有没有方便的办法呢？</p><h1 id="脚手架"><a href="#脚手架" class="headerlink" title="脚手架"></a>脚手架</h1><p>显然我们在上面测试的时候，经常会重复运行代码，输入内容等等。比如下方代码就是一个可能的情况</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"Waiting..."</span> &gt; 1.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"hello world"</span> &gt;&gt; 1.txt</span><br><span class="line"></span><br><span class="line">cp 1.txt 2.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"success"</span> &gt;&gt; 2.txt</span><br><span class="line"></span><br><span class="line">cat 1.txt 2.txt &gt; 3.txt</span><br><span class="line"></span><br><span class="line">mkdir <span class="built_in">test</span></span><br><span class="line">mv 1.txt 2.txt 3.txt <span class="built_in">test</span></span><br><span class="line"><span class="built_in">cd</span> <span class="built_in">test</span></span><br><span class="line">tail -n 4 3.txt &gt; 4.txt</span><br><span class="line"></span><br><span class="line">less 4.txt</span><br></pre></td></tr></table></figure><p>但是我们总不能每一次测试都手打一遍？所以我们要将它保存为一个单独的 bash 代码文件，称之为 bash 脚本，它一旦运行起来，就可以帮助我们运行设定好的代码。</p><p>假设我们把它保存为 <code>node.exe</code>，或者干脆不要 exe，直接叫做 <code>node</code> </p><p>实际上，对于系统来说，文件后缀是不是 exe 并不是很重要，只要是机器能读懂的语言，都是可执行文件</p><p>如果你不是 windows 系统，需要先执行 <code>chmod +x [filename]</code> 命令，来赋予文件执行的权能</p><p>然后一般有三种方法运行你的可执行文件。假设此处运行当前目录下的 <code>node</code>，它是一个删除了 exe 后缀的原 exe 文件</p><ol><li><code>./node</code>，其中单个 <code>.</code> 表示当前目录</li><li><code>sh node</code>，其中 <code>sh</code> 表示将其当作 bash 脚本启动</li><li><code>node</code></li></ol><p>第一种和第二种没有什么区别，主要是第三种</p><h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><p>前面我们讲过可以通过 <code>ls</code> 查看当前目录下的文件列表，那系统怎么知道 ls 是什么命令呢？答案就在系统环境变量 PATH 中</p><p>因为 PATH 中登记了 ls 所在的目录，所以系统能找到 ls 的指向</p><p>那么答案就很明确了，我们可以把我们现在的运行目录也登记到 PATH 中，就可以通过 <code>node</code> 直接运行我们的可执行文件了</p><h2 id="命名冲突"><a href="#命名冲突" class="headerlink" title="命名冲突"></a>命名冲突</h2><p>但是大家电脑上都已经安装了 nodejs 了吧？这时如果直接在命令行中执行 <code>node</code> 命令，往往会启动了 nodejs 的 node.exe 。那怎么让我们的 node 文件更优先呢？</p><p>答案还是在 PATH 身上</p><p>刚才设置 PATH 的时候，可以注意到，PATH 列表右侧有”上移””下移”按钮，可以推测目录在 PATH 中的注册顺序是影响调用决策的重要条件。那么我们把我们的工作目录上移到比 nodejs 目录更上方的位置</p><p>此时如果你不是 windows 环境，应该可以看到命令行正常输出了你的 node 文件的内容了。但如果是 windows 环境……还有一个坑点，那就是 windows 环境在决策时 exe 后缀的文件优先级更高。那么把你的 node 文件改名为 node.exe，ok，大功告成！</p><p>好了，关于命令行，我暂且只有这些想说的，谢谢你看到这里，快回去自己动手试验一下吧！</p>]]></content>
      
      
      <categories>
          
          <category> programing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 命令行 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>配置HTTPS方案</title>
      <link href="/https/https/"/>
      <url>/https/https/</url>
      
        <content type="html"><![CDATA[<p>HTTPS配置方案</p><a id="more"></a><p>本文基于腾讯云的域名配置，以及七牛云CDN和自建CDN两种情况</p><h1 id="申请SSL证书"><a href="#申请SSL证书" class="headerlink" title="申请SSL证书"></a>申请SSL证书</h1><ol><li><p>打开腾讯云，找到SSL证书</p><p><img src="https://pic.ringoer.com/https-1.png" alt="SSL"></p></li><li><p>选择申请免费证书</p><p><img src="https://pic.ringoer.com/https-2.png" alt="申请免费证书"></p></li><li><p>填写要配置https的域名，最好是已经配置云解析的域名</p><p><img src="https://pic.ringoer.com/https-3.png" alt="填写信息"></p></li><li><p>等待10分钟左右，之后下载</p><p><img src="https://pic.ringoer.com/https-4.png" alt="下载"></p></li><li><p>下载完成，解压后，得到如图目录</p><p><img src="https://pic.ringoer.com/https-5.png" alt="下载"></p><p>其中Apache内容</p><p><img src="https://pic.ringoer.com/https-apache.png" alt="下载"></p><p>Nginx内容</p><p><img src="https://pic.ringoer.com/https-nginx.png" alt="下载"></p></li></ol><h1 id="七牛云CDN"><a href="#七牛云CDN" class="headerlink" title="七牛云CDN"></a>七牛云CDN</h1><ol><li>打开七牛云SSL证书服务</li></ol><p><img src="https://pic.ringoer.com/https-7.png" alt=""></p><ol start="2"><li><p>上传已有证书</p><p><img src="https://pic.ringoer.com/https-8.png" alt="下载"></p></li><li><p>打开下载好的证书的Apache文件夹，找到同名但后缀不同的两个文件，然后贴入文本框中</p><p><img src="https://pic.ringoer.com/https-9.png" alt="下载"></p></li><li><p>上传完毕后可在我的证书中看到，点击部署CDN</p><p><img src="https://pic.ringoer.com/https-10.png" alt="下载"></p></li><li><p>如果你的证书名称和域名一样，那么点击部署即可一键升级HTTPS，然后等待半小时，收到邮件即是升级成功</p><p><img src="https://pic.ringoer.com/https-11.png" alt="下载"></p></li></ol><h1 id="自建CDN"><a href="#自建CDN" class="headerlink" title="自建CDN"></a>自建CDN</h1><ol><li><p>打开Nginx文件夹，将crt和key都上传到服务器的nginx文件夹中</p><p><img src="https://pic.ringoer.com/https-6.png" alt="下载"></p></li><li><p>编辑default.conf文件为如下模样</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">443</span> ssl; <span class="comment"># HTTPS的端口号就是443</span></span><br><span class="line">    <span class="attribute">server_name</span>  ali.ringoer.com; <span class="comment"># 你的域名，要与证书一致</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#charset koi8-r;</span></span><br><span class="line">    <span class="attribute">access_log</span>  /var/log/nginx/host.access.log  main;</span><br><span class="line">    <span class="attribute">error_log</span>  /var/log/nginx/error.log  <span class="literal">error</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span>  1_ali.ringoer.com_bundle.crt; <span class="comment"># 你的crt，与你上传的同名</span></span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> 2_ali.ringoer.com.key; <span class="comment"># 你的key，与你上传的同名</span></span><br><span class="line">    <span class="attribute">ssl_session_timeout</span> <span class="number">5m</span>;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">    <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>; <span class="comment"># 这几条不变</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line">        <span class="attribute">try_files</span>   <span class="variable">$uri</span>  <span class="variable">$uri</span>/  /index.html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">    <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">        <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>配置Dockerfile为如图，注意default.conf配置文件和证书不在同一个文件夹</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx</span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> nginx/default.conf /etc/nginx/conf.d/default.conf</span></span><br><span class="line"><span class="bash">COPY nginx/2_ali.ringoer.com.key /etc/nginx/2_ali.ringoer.com.key</span></span><br><span class="line"><span class="bash">COPY nginx/1_ali.ringoer.com_bundle.crt /etc/nginx/1_ali.ringoer.com_bundle.crt</span></span><br></pre></td></tr></table></figure></li><li><p>docker build创建镜像，然后用如下命令挂载目录再运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name static -p 443:443 -v /root/static/dist:/usr/share/nginx/html static</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> https </category>
          
      </categories>
      
      
        <tags>
            
            <tag> http(s) </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu下配置Mysql的办法</title>
      <link href="/programing/ubuntu-mysql/"/>
      <url>/programing/ubuntu-mysql/</url>
      
        <content type="html"><![CDATA[<p>不小心还原云主机又忘记备份sql，只好亲自重配一遍了</p><a id="more"></a><hr><h1 id="卸载-mysql"><a href="#卸载-mysql" class="headerlink" title="卸载 mysql"></a>卸载 mysql</h1><p>要想顺利下载，首先要卸载旧版本。</p><ol><li><p>删除 mysql 的数据文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm /var/lib/mysql/ -R</span><br></pre></td></tr></table></figure></li><li><p>删除 mysql 的配置文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm /etc/mysql/ -R</span><br></pre></td></tr></table></figure></li><li><p>自动卸载 mysql（包括server和client）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get autoremove mysql* --purge</span><br><span class="line"></span><br><span class="line">sudo apt-get remove apparmor</span><br></pre></td></tr></table></figure></li><li><p>检查 mysql 的依赖项</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg --list|grep mysql</span><br></pre></td></tr></table></figure></li><li><p>当 4 存在返回值时，使用 <code>sudo apt-get remove xxx</code> 依次卸载</p></li></ol><h1 id="安装-mysql"><a href="#安装-mysql" class="headerlink" title="安装 mysql"></a>安装 mysql</h1><ol><li><p>刷新 apt 存储库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure></li><li><p>安装 mysql</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mysql-server</span><br></pre></td></tr></table></figure></li><li><p>初始化 mysql</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql_secure_installation</span><br></pre></td></tr></table></figure></li><li><p>一大堆配置，如下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">1</span></span><br><span class="line">VALIDATE PASSWORD PLUGIN can be used to test passwords...</span><br><span class="line">Press y|Y for Yes, any other key for No: N</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">2</span></span><br><span class="line">Please set the password for root here...</span><br><span class="line">New password: (输入密码)</span><br><span class="line">Re-enter new password: (重复输入)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">3</span></span><br><span class="line">By default, a MySQL installation has an anonymous user,</span><br><span class="line">allowing anyone to log into MySQL without having to have</span><br><span class="line">a user account created for them...</span><br><span class="line">Remove anonymous users? (Press y|Y for Yes, any other key for No) : N</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">4</span></span><br><span class="line">Normally, root should only be allowed to connect from</span><br><span class="line">'localhost'. This ensures that someone cannot guess at</span><br><span class="line">the root password from the network...</span><br><span class="line">Disallow root login remotely? (Press y|Y for Yes, any other key for No) : Y </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">5</span></span><br><span class="line">By default, MySQL comes with a database named 'test' that</span><br><span class="line">anyone can access...</span><br><span class="line">Remove test database and access to it? (Press y|Y for Yes, any other key for No) : N </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">6</span></span><br><span class="line">Reloading the privilege tables will ensure that all changes</span><br><span class="line">made so far will take effect immediately.</span><br><span class="line">Reload privilege tables now? (Press y|Y for Yes, any other key for No) : Y</span><br></pre></td></tr></table></figure><p>建议选择 N+密码+NYNY</p></li><li><p>检查服务状态</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status mysql.service</span><br></pre></td></tr></table></figure><p>如果显示绿色 active(running) 则成功</p></li></ol><h1 id="配置-mysql"><a href="#配置-mysql" class="headerlink" title="配置 mysql"></a>配置 mysql</h1><ol><li><p>前往服务器目录 <code>/etc/mysql/mysql.conf.d</code>，注释掉关于 <code>bind-address</code> 的配置</p></li><li><p>使用命令 <code>sudo mysql -u root -p</code> 进入 root 用户的用户界面</p></li><li><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> mysql;</span><br></pre></td></tr></table></figure><p>选中 database mysql</p></li><li><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> host=<span class="string">'%'</span> <span class="keyword">where</span> <span class="keyword">user</span>=<span class="string">'root'</span>;</span><br></pre></td></tr></table></figure><p>修改 root 的访问权限为 %，表示允许 root 用户的来自任意 ip 的访问</p></li><li><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> <span class="string">'root'</span>@<span class="string">'%'</span> <span class="keyword">identified</span> <span class="keyword">with</span> mysql_native_password <span class="keyword">by</span> <span class="string">'pwd'</span>;</span><br></pre></td></tr></table></figure><p>对于 root 用户，不论任何来源的访问，均要求使用密码登录，密码为末尾字符串中设置的密码</p><p>此处不能使用 password() 函数来构造密码，最新版 mysql 不支持</p><p>此处不能使用 grant all privileges 来授予权限，最新版 mysql 不支持</p></li><li><p>4 和 5 的顺序不能颠倒</p></li></ol><p>好了，此时可以使用 navicat 远程登录 mysql 了</p><h1 id="常见错误"><a href="#常见错误" class="headerlink" title="常见错误"></a>常见错误</h1><ol><li><p>远程连接服务器报错 2003，连接不上服务器 3306 端口</p><ul><li><p>查看服务器安全策略是否开放这个端口</p></li><li><p>查看上一节的 1</p></li></ul></li><li><p>远程连接服务器报错 1130</p><ul><li>查看上一节的 4</li></ul></li><li><p>远程连接服务器报错 1698</p><ul><li>查看上一节的 5</li></ul></li><li><p>远程连接服务器报错 1045</p><ul><li>不可以直接 update root 用户的密码，否则你直接设置的密码会被解密，然后发现和你输入的密码不一致</li></ul></li></ol><h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p><a href="https://www.cnblogs.com/mjhblog/p/10499772.html" target="_blank" rel="noopener">Ubuntu16.04彻底卸载MySQL</a></p><p><a href="https://blog.csdn.net/weixx3/article/details/80782479" target="_blank" rel="noopener">Ubuntu18.04 安装MySQL</a></p>]]></content>
      
      
      <categories>
          
          <category> programing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> mysql </tag>
            
            <tag> server </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Node.js 学习提纲</title>
      <link href="/frontend/nodejs/"/>
      <url>/frontend/nodejs/</url>
      
        <content type="html"><![CDATA[<p>留给自己参考的Node.js学习提纲</p><a id="more"></a><p>目录：  </p><ol><li>HelloWorld</li><li>回调函数</li><li>事件循环</li><li>EventEmitter</li><li>模块系统</li><li>web 模块</li><li>express 框架</li><li>Restful API</li><li>MySQL</li><li>Buffer/Stream</li><li>全局对象</li><li>fs模块</li><li>util模块</li><li>其余常用模块</li></ol><h1 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h1><h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><p>新建一个 server.js 文件，输入以下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">request, response</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 发送 HTTP 头部 </span></span><br><span class="line">    <span class="comment">// HTTP 状态值: 200 : OK</span></span><br><span class="line">    <span class="comment">// 内容类型: text/plain</span></span><br><span class="line">    response.writeHead(<span class="number">200</span>, &#123;<span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span>&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 发送响应数据 "Hello World"</span></span><br><span class="line">    response.end(<span class="string">'Hello World\n'</span>);</span><br><span class="line">&#125;).listen(<span class="number">8888</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 终端打印如下信息</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Server running at http://127.0.0.1:8888/'</span>);</span><br></pre></td></tr></table></figure><p>然后在命令行使用 node 命令执行以上代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node server.js</span><br></pre></td></tr></table></figure><p>之后访问本地的 8888 端口，就可以看到我们的 HelloWorld 消息了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8888/</span><br></pre></td></tr></table></figure><h2 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h2><p>从上面的代码中，我们可以看到，首先代码 require 了一个名为 http 的模块，用来提供 http 服务</p><p>之后使用 http.createServer 方法，传入了一个 function 作为回调方法，用来处理监听到的请求，之后在 8888 端口启动服务，监听该端口的请求。</p><p>在回调方法中可以看到，我们在响应中定义了响应头，其中响应的 http 状态码是200，内容类型是 text/plain，之后在响应中使用 end 方法写入数据并返回</p><h1 id="回调函数"><a href="#回调函数" class="headerlink" title="回调函数"></a>回调函数</h1><p>Node.js 异步编程的直接体现就是回调。</p><p>异步编程依托于回调来实现，但不能说使用了回调后程序就异步化了。</p><p>回调函数在完成任务后就会被调用，Node 使用了大量的回调函数，Node 所有 API 都支持回调函数。</p><p>在之前学过的 ES6 Promise 中，大家一定深有体会。</p><p>回调函数一般作为函数的最后一个参数出现。</p><h2 id="阻塞代码（同步）"><a href="#阻塞代码（同步）" class="headerlink" title="阻塞代码（同步）"></a>阻塞代码（同步）</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> data = fs.readFileSync(<span class="string">'input.txt'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(data.toString());</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"程序执行结束!"</span>);</span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ node main.js</span><br><span class="line">本站地址：ringoer.com</span><br><span class="line"></span><br><span class="line">程序执行结束!</span><br></pre></td></tr></table></figure><p>可见程序是强顺序执行的，不到读取完毕文件，不会继续执行。</p><h2 id="非阻塞代码（异步）"><a href="#非阻塞代码（异步）" class="headerlink" title="非阻塞代码（异步）"></a>非阻塞代码（异步）</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'input.txt'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">    <span class="built_in">console</span>.log(data.toString());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"程序执行结束!"</span>);</span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ node main.js</span><br><span class="line">程序执行结束!</span><br><span class="line">本站地址：ringoer.com</span><br></pre></td></tr></table></figure><p>可见程序是先执行完当前任务，再在读取文件完成的时候打印文件内容的。</p><p>以上两个实例我们了解了阻塞与非阻塞调用的不同。</p><p>第一个实例在文件读取完后才执行程序， 第二个实例我们不需要等待文件读取完，这样就可以在读取文件时同时执行接下来的代码，大大提高了程序的性能。</p><p>因此，阻塞是按顺序执行的，而非阻塞是不需要按顺序的，所以如果需要处理回调函数的参数，我们就需要写在回调函数内。</p><p>为什么会先执行当前任务呢？我们将在下节介绍。</p><h1 id="事件循环"><a href="#事件循环" class="headerlink" title="事件循环"></a>事件循环</h1><p>众所周知，JavaScript 是单线程的，Node.js 也是单进程单线程应用程序，那么他是怎么提高运行效率的呢？</p><p>答案就是 V8 引擎提供的异步执行回调接口，通过这些接口可以处理大量的并发，所以效率相比普通的单线程大大提高。</p><h2 id="事件驱动程序"><a href="#事件驱动程序" class="headerlink" title="事件驱动程序"></a>事件驱动程序</h2><p>Node.js 使用事件驱动模型，每当 web server 接收到一个新的请求，触发了对应的事件，就会将请求放入事件队列中，然后继续按队列顺序处理。</p><p>这个模型非常高效可扩展性非常强，因为 web server 一直接受请求而不等待任何读写操作。（这也称之为非阻塞式IO或者事件驱动IO）</p><p>事件发生流程一般如下：</p><ol><li>将回调函数绑定到事件上</li><li>触发某个事件</li><li>将回调函数放入事件队列中</li><li>按队列顺序执行</li></ol><p>我们可以通过内置模块 events 来模拟这个事件的流程。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入 events 模块</span></span><br><span class="line"><span class="keyword">var</span> events = <span class="built_in">require</span>(<span class="string">'events'</span>);</span><br><span class="line"><span class="comment">// 创建 eventEmitter 对象</span></span><br><span class="line"><span class="keyword">var</span> eventEmitter = <span class="keyword">new</span> events.EventEmitter();</span><br></pre></td></tr></table></figure><p>以下程序绑定事件处理程序：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 绑定事件及事件的处理程序</span></span><br><span class="line">eventEmitter.on(<span class="string">'eventName'</span>, eventHandler);</span><br></pre></td></tr></table></figure><p>我们可以通过程序触发事件：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 触发事件</span></span><br><span class="line">eventEmitter.emit(<span class="string">'eventName'</span>);</span><br></pre></td></tr></table></figure><p>关于 events 模块，将在下一节详细介绍。</p><h1 id="EventEmitter"><a href="#EventEmitter" class="headerlink" title="EventEmitter"></a>EventEmitter</h1><p>Node.js 所有的异步 I/O 操作在完成时都会发送一个事件到事件队列。</p><p>Node.js 里面的许多对象都会分发事件：一个 net.Server 对象会在每次有新连接时触发一个事件， 一个 fs.readStream 对象会在文件被打开的时候触发一个事件。 所有这些产生事件的对象都是 events.EventEmitter 的实例。</p><h2 id="EventEmitter类"><a href="#EventEmitter类" class="headerlink" title="EventEmitter类"></a>EventEmitter类</h2><p>Node.js 内置模块中含有一个名为 events 的模块，该模块向外 exports 了一个 events 对象，该对象包含一个名为 EventEmitter 的类。我们可以通过 require 命令来引入它。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入 events 模块</span></span><br><span class="line"><span class="keyword">var</span> events = <span class="built_in">require</span>(<span class="string">'events'</span>);</span><br><span class="line"><span class="comment">// 创建 eventEmitter 对象</span></span><br><span class="line"><span class="keyword">var</span> eventEmitter = <span class="keyword">new</span> events.EventEmitter();</span><br></pre></td></tr></table></figure><p>接下来我们来解析一下上篇提到的代码。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入 events 模块</span></span><br><span class="line"><span class="keyword">var</span> events = <span class="built_in">require</span>(<span class="string">'events'</span>);</span><br><span class="line"><span class="comment">// 创建 eventEmitter 对象</span></span><br><span class="line"><span class="keyword">var</span> eventEmitter = <span class="keyword">new</span> events.EventEmitter();</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 创建事件处理程序</span></span><br><span class="line"><span class="keyword">var</span> connectHandler = <span class="function"><span class="keyword">function</span> <span class="title">connected</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'连接成功。'</span>);</span><br><span class="line">  </span><br><span class="line">   <span class="comment">// 触发 data_received 事件 </span></span><br><span class="line">   eventEmitter.emit(<span class="string">'data_received'</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 绑定 connection 事件处理程序</span></span><br><span class="line">eventEmitter.on(<span class="string">'connection'</span>, connectHandler);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 使用匿名函数绑定 data_received 事件</span></span><br><span class="line">eventEmitter.on(<span class="string">'data_received'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'数据接收成功。'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置定时器在触发事件前</span></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span><span class="built_in">console</span>.log(<span class="string">'定时器执行成功。'</span>),<span class="number">0</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 触发 connection 事件 </span></span><br><span class="line">eventEmitter.emit(<span class="string">'connection'</span>);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"程序执行完毕。"</span>);</span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ node main.js</span><br><span class="line">连接成功。</span><br><span class="line">数据接收成功。</span><br><span class="line">程序执行完毕。</span><br><span class="line">定时器执行成功。</span><br></pre></td></tr></table></figure><p>在上述代码中，我们创建了一个事件发生器，并通过 on 命令指定了两个事件及其回调，然后通过 emit 命令触发指定事件。</p><p>我们观察到，尽管先访问到了 setTimeout，但是其结果却在最后被打印，说明 eventEmitter 的执行逻辑与 setTimeout 并不相同。通过阅读源码，可知 eventEmitter 的执行方式类似于方法调用，此处暂略。</p><h2 id="on-和-emit"><a href="#on-和-emit" class="headerlink" title="on 和 emit"></a>on 和 emit</h2><p>上文代码中我们用到了 on 和 emit 两个命令。现在来看看他们的方法原型。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">on(event,listener)</span><br><span class="line">event 要求为一个字符串，listener 要求为一个回调函数，表示在事件 event 的回调函数列表尾部插入 listener</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">emit(event,[data])</span><br><span class="line">event 要求为一个字符串，[data] 为可选项，表示触发事件 event，将按顺序执行 event 回调函数列表中的每个回调函数，并向每个函数中都传入 data</span><br></pre></td></tr></table></figure><p>这是 EventEmitter 两个最为重要的方法。</p><p>其余方法如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">addListener(event, listener)</span><br><span class="line">为指定事件添加一个监听器到监听器数组的尾部。与on命令相同。</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">once(event, listener)</span><br><span class="line">为指定事件注册一个单次监听器，即 监听器最多只会触发一次，触发后立刻解除该监听器。</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">removeListener(event, listener)</span><br><span class="line">移除指定事件的某个监听器，监听器必须是该事件已经注册过的监听器。</span><br><span class="line"></span><br><span class="line">它接受两个参数，第一个是事件名称，第二个是回调函数名称。</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">removeAllListeners([event])</span><br><span class="line">移除所有事件的所有监听器， 如果指定事件，则移除指定事件的所有监听器。</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setMaxListeners(n)</span><br><span class="line">默认情况下， EventEmitters 如果你添加的监听器超过 <span class="number">10</span> 个就会输出警告信息。 setMaxListeners 函数用于提高监听器的默认限制的数量。</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">listeners(event)</span><br><span class="line">返回指定事件的监听器数组。</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">listenerCount(event)</span><br><span class="line">返回指定事件的监听器数量。</span><br></pre></td></tr></table></figure><p>以上是 EventEmitter 的方法，可以设置自定义事件。</p><p>EventEmitter 还有内置的事件。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">newListener</span><br><span class="line">该事件在添加新监听器时被触发。</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">removeListener</span><br><span class="line">该事件在删除一个监听器时被触发。</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">error</span><br><span class="line">该事件在发生错误时被触发。若没有为该事件绑定监听器，则程序会直接出错退出。</span><br></pre></td></tr></table></figure><h2 id="同步调用"><a href="#同步调用" class="headerlink" title="同步调用"></a>同步调用</h2><p>上文说到，eventEmitter 的执行逻辑与 setTimeout 并不相同。那么具体是如何执行的呢？我们需要阅读 eventEmitter 的源码，或者自己手写一个。此处选择手写一个作为示例。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EventEmitter</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="comment">// 事件对象，存放订阅的名字和事件  如:  &#123; click: [ handle1, handle2 ]  &#125;</span></span><br><span class="line">    <span class="keyword">this</span>.events = &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 订阅事件的方法</span></span><br><span class="line">  on(eventName, callback) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.events[eventName]) &#123;</span><br><span class="line">      <span class="keyword">this</span>.events[eventName] = [callback]</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.events[eventName].push(callback)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 触发事件的方法</span></span><br><span class="line">  emit(eventName, ...rest) &#123;</span><br><span class="line">    <span class="keyword">this</span>.events[eventName] &amp;&amp;</span><br><span class="line">      <span class="keyword">this</span>.events[eventName].forEach(<span class="function"><span class="params">f</span> =&gt;</span> f.apply(<span class="keyword">this</span>, rest))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 移除订阅事件</span></span><br><span class="line">  remove(eventName, callback) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.events[eventName]) &#123;</span><br><span class="line">      <span class="keyword">this</span>.events[eventName] = <span class="keyword">this</span>.events[eventName].filter(<span class="function"><span class="params">f</span> =&gt;</span> f != callback)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 只执行一次订阅的事件，然后移除</span></span><br><span class="line">  once(eventName, callback) &#123;</span><br><span class="line">    <span class="comment">// 绑定的时fn, 执行的时候会触发fn函数</span></span><br><span class="line">    <span class="keyword">const</span> fn = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      callback() <span class="comment">// fn函数中调用原有的callback</span></span><br><span class="line">      <span class="keyword">this</span>.remove(eventName, fn) <span class="comment">// 删除fn, 再次执行的时候之后执行一次</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.on(eventName, fn)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可见，eventEmitter 是以类似方法调用的方式传递触发信号的，然后又以数组顺序为基础来进行顺序执行，所以整体上是同步执行的，不是 setTimeout 一样的异步执行。</p><p>比起一般的方法调用， eventEmitter 胜在一个入口可以调用多个（同一数组内）的方法。</p><h1 id="模块系统"><a href="#模块系统" class="headerlink" title="模块系统"></a>模块系统</h1><p>模块是Node.js 应用程序的基本组成部分，文件和模块是一一对应的。换言之，一个 Node.js 文件就是一个模块，这个文件可能是JavaScript 代码、JSON 或者编译过的C/C++ 扩展。在模块系统的帮助下，Node.js的文件可以相互调用。</p><p>模块系统有两个重要动作：导入（require）和导出（exports）。</p><h2 id="require"><a href="#require" class="headerlink" title="require"></a>require</h2><p>我们可以通过 require 命令来引入一个模块，例如：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> hello = <span class="built_in">require</span>(<span class="string">'./hello'</span>);</span><br><span class="line">hello.world();</span><br></pre></td></tr></table></figure><p>在 require 之后，可以对这个模块做出哪些操作，则取决于这个模块 exports 了什么东西。</p><h2 id="exports"><a href="#exports" class="headerlink" title="exports"></a>exports</h2><p>对于任何一个模块，都可以通过操作内置对象 exports 来导出内容。</p><p>例如导出一个 function world，可以通过两种方案来实现。</p><ol><li><code>exports.world = function (){}</code> </li><li><code>module.exports = function (){}</code></li></ol><p>第一种方案，在 require 之后，主模块引入了一个来自从模块的对象，该对象包含一个名为 world 的方法。</p><p>第二种方案，在 require 之后，主模块只引入了一个方法，该方法的名字取决于主模块中所起的变量名。</p><p>一般不建议两种方案同时使用，因为阅读 require 源码可以发现，在 require 一个模块的时候，会先执行 exports.xxx 的赋值，最后才执行 module.exports 的赋值，这使得之前所做的赋值被完全覆盖了，只有最后的赋值才有效。</p><h2 id="模块分类"><a href="#模块分类" class="headerlink" title="模块分类"></a>模块分类</h2><p>之前的章节中，我们使用了 http 模块，event 模块等。事实上，JavaScript 有 4 种模块，分为原生模块和 3 种文件模块，通过在 require 命令中指定的字符串不同而导入。</p><ul><li>http、fs、path等，原生模块。</li><li>./mod或../mod，相对路径的文件模块。</li><li>/pathtomodule/mod，绝对路径的文件模块。</li><li>mod，非原生模块的文件模块。</li></ul><p>由于有多种模块，所以导入模块也有对应的优先级，如图。</p><p><img src="https://www.runoob.com/wp-content/uploads/2014/03/nodejs-require.jpg" alt="模块加载优先级"></p><h1 id="web-模块"><a href="#web-模块" class="headerlink" title="web 模块"></a>web 模块</h1><p>使用 Node.js 创建 web 客户端需要引入 http 模块。</p><p>我们可以用 Node.js 搭建一个 web 服务器与一个客户端。</p><p>服务器代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">// 创建服务器</span></span><br><span class="line">http.createServer( <span class="function"><span class="keyword">function</span> (<span class="params">request, response</span>) </span>&#123;  </span><br><span class="line">   <span class="comment">// 解析请求，包括文件名</span></span><br><span class="line">   <span class="keyword">var</span> pathname = url.parse(request.url).pathname;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// 输出请求的文件名</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">"Request for "</span> + pathname + <span class="string">" received."</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// 从文件系统中读取请求的文件内容</span></span><br><span class="line">   fs.readFile(pathname.substr(<span class="number">1</span>), <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">         <span class="built_in">console</span>.log(err);</span><br><span class="line">         <span class="comment">// HTTP 状态码: 404 : NOT FOUND</span></span><br><span class="line">         <span class="comment">// Content Type: text/html</span></span><br><span class="line">         response.writeHead(<span class="number">404</span>, &#123;<span class="string">'Content-Type'</span>: <span class="string">'text/html'</span>&#125;);</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;             </span><br><span class="line">         <span class="comment">// HTTP 状态码: 200 : OK</span></span><br><span class="line">         <span class="comment">// Content Type: text/html</span></span><br><span class="line">         response.writeHead(<span class="number">200</span>, &#123;<span class="string">'Content-Type'</span>: <span class="string">'text/html'</span>&#125;);    </span><br><span class="line">         </span><br><span class="line">         <span class="comment">// 响应文件内容</span></span><br><span class="line">         response.write(data.toString());        </span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//  发送响应数据</span></span><br><span class="line">      response.end();</span><br><span class="line">   &#125;);   </span><br><span class="line">&#125;).listen(<span class="number">8080</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 控制台会输出以下信息</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Server running at http://127.0.0.1:8080/'</span>);</span><br></pre></td></tr></table></figure><p>需要在服务器文件目录下创建一个 index.html 文件来配合。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我的第一个标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>我的第一个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>客户端代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 用于请求的选项</span></span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">   host: <span class="string">'localhost'</span>,</span><br><span class="line">   port: <span class="string">'8080'</span>,</span><br><span class="line">   path: <span class="string">'/index.html'</span>  </span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 处理响应的回调函数</span></span><br><span class="line"><span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">   <span class="comment">// 不断更新数据</span></span><br><span class="line">   <span class="keyword">var</span> body = <span class="string">''</span>;</span><br><span class="line">   response.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">      body += data;</span><br><span class="line">   &#125;);</span><br><span class="line">   </span><br><span class="line">   response.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 数据接收完成</span></span><br><span class="line">      <span class="built_in">console</span>.log(body);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 向服务端发送请求</span></span><br><span class="line"><span class="keyword">var</span> req = http.request(options, callback);</span><br><span class="line">req.end();</span><br></pre></td></tr></table></figure><h1 id="Express-框架"><a href="#Express-框架" class="headerlink" title="Express 框架"></a>Express 框架</h1><p>Express 是一个基于 Node.js 的 web 应用框架。</p><p>Express 框架的核心特性如下：</p><ul><li>可以设置中间件来响应 HTTP 请求。</li><li>定义了路由表用于执行不同的 HTTP 请求动作。</li><li>可以通过向模板传递参数来动态渲染 HTML 页面。</li></ul><p>express 可以通过 require(‘express’) 引入，暴露的是一个方法。使用例如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置响应</span></span><br><span class="line">app.get(<span class="string">'/'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.sendFile(__dirname + <span class="string">'/index.html'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置静态资源目录</span></span><br><span class="line">app.use(<span class="string">'/static'</span>, express.static(<span class="string">'static'</span>));</span><br><span class="line"><span class="comment">// 设置 404 处理</span></span><br><span class="line">app.use(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.status(<span class="number">404</span>);</span><br><span class="line">  res.send(<span class="string">'你访问的页面不存在'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8888</span>, () =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> host = server.address().address;</span><br><span class="line">  <span class="keyword">var</span> port = server.address().port;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"启动于 http://%s:%s"</span>, host, port);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>从上述代码中，可以看到 app 有两个关键方法：get 和 listen</p><ol><li>get(url, func(request, response))，表示使用 http get 请求访问，第一个参数是访问的路径（可以是一个正则表达式，或是 Rest 风格的 url 字符串，详见下章），第二个参数是这个事件发生时的回调。其中回调含有 2 个参数：request 和 response，分别表示这个 http 请求的请求包体和响应包体。</li><li>listen(port, func)，返回一个 app 实例，监听来自端口 port 的所有请求，并在服务成功启动后调用指定的回调函数。</li></ol><p>在 request 对象和 response 对象上，各自还有自己的对象方法。</p><p><strong>Request 对象</strong> - request 对象表示 HTTP 请求，包含了请求查询字符串，参数，内容，HTTP 头部等属性。常见属性有：</p><ol><li>req.app：当callback为外部文件时，用req.app访问express的实例</li><li>req.baseUrl：获取路由当前安装的URL路径</li><li>req.body / req.cookies：获得「请求主体」/ Cookies</li><li>req.fresh / req.stale：判断请求是否还「新鲜」</li><li>req.hostname / req.ip：获取主机名和IP地址</li><li>req.originalUrl：获取原始请求URL</li><li>req.params：获取路由的parameters</li><li>req.path：获取请求路径</li><li>req.protocol：获取协议类型</li><li>req.query：获取URL的查询参数串</li><li>req.route：获取当前匹配的路由</li><li>req.subdomains：获取子域名</li><li>req.accepts()：检查可接受的请求的文档类型</li><li>req.acceptsCharsets / req.acceptsEncodings / req.acceptsLanguages：返回指定字符集的第一个可接受字符编码</li><li>req.get()：获取指定的HTTP请求头</li><li>req.is()：判断请求头Content-Type的MIME类型</li></ol><p><strong>Response 对象</strong> - response 对象表示 HTTP 响应，即在接收到请求时向客户端发送的 HTTP 响应数据。常见属性有：</p><ol><li>res.app：同req.app一样</li><li>res.append()：追加指定HTTP头</li><li>res.set()在res.append()后将重置之前设置的头</li><li>res.cookie(name，value [，option])：设置Cookie</li><li>opition: domain / expires / httpOnly / maxAge / path / secure / signed</li><li>res.clearCookie()：清除Cookie</li><li>res.download()：传送指定路径的文件</li><li>res.get()：返回指定的HTTP头</li><li>res.json()：传送JSON响应</li><li>res.jsonp()：传送JSONP响应</li><li>res.location()：只设置响应的Location HTTP头，不设置状态码或者close response</li><li>res.redirect()：设置响应的Location HTTP头，并且设置状态码302</li><li>res.render(view,[locals],callback)：渲染一个view，同时向callback传递渲染后的字符串，如果在渲染过程中有错误发生next(err)将会被自动调用。callback将会被传入一个可能发生的错误以及渲染后的页面，这样就不会自动输出了。</li><li>res.send()：传送HTTP响应</li><li>res.sendFile(path [，options] [，fn])：传送指定路径的文件 -会自动根据文件extension设定Content-Type</li><li>res.set()：设置HTTP头，传入object可以一次设置多个头</li><li>res.status()：设置HTTP状态码</li><li>res.type()：设置Content-Type的MIME类型</li></ol><h2 id="静态文件"><a href="#静态文件" class="headerlink" title="静态文件"></a>静态文件</h2><p>可以使用形如 <code>app.use(&#39;/public&#39;, express.static(&#39;public&#39;));</code> 的代码来设置静态文件路径。</p><p>该代码使用了 use 方法，该方法需要两个参数。</p><ol><li>url，表示 http 请求需要访问的路径</li><li>express.static(localpath)，其中 localpath 表示存放静态文件的文件夹的本地路径</li></ol><p>比如此时我在 public 文件夹下存放了一张图片，名为 hello.png，则我访问 <a href="http://localhost:port/public/hello.png" target="_blank" rel="noopener">http://localhost:port/public/hello.png</a> 时，页面上就会返回这张图片。</p><h1 id="Restful-API"><a href="#Restful-API" class="headerlink" title="Restful API"></a>Restful API</h1><p>Restful API 是用 http 动词描述动作，用 URL 定位资源的 API 设计风格。在 Express 框架中，我们可以使用 Restful 默认的 4 个动词来定义 app 监听。</p><ol><li>app.get(url, func(request, response))</li><li>app.post(url, func(request, response))</li><li>app.put(url, func(request, response))</li><li>app.delete(url, func(request, response))</li></ol><p>其中，绑定 url 时，要绑定指定的 id，可以使用形如 <code>/user/:id</code> 的 url，来访问路径上的动态参数。该写法在前端类似于 vue 的 router 绑定，在后端类似于 spring 的 @PathVariable</p><h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><p>Node.js 既然可以写后端，自然也可以连接 MySQL。容易想到，我们可以通过 require(‘mysql’) 来引入 mysql模块，不过需要先 npm install mysql</p><h2 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mysql  = <span class="built_in">require</span>(<span class="string">'mysql'</span>);  </span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> connection = mysql.createConnection(&#123;     </span><br><span class="line">  host     : <span class="string">'localhost'</span>,       </span><br><span class="line">  user     : <span class="string">'root'</span>,              </span><br><span class="line">  password : <span class="string">'123456'</span>,       </span><br><span class="line">  port: <span class="string">'3306'</span>,                   </span><br><span class="line">  database: <span class="string">'test'</span> </span><br><span class="line">&#125;); </span><br><span class="line"> </span><br><span class="line">connection.connect();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span>  addSql = <span class="string">'INSERT INTO websites(Id,name,url,alexa,country) VALUES(0,?,?,?,?)'</span>;</span><br><span class="line"><span class="keyword">var</span>  addSqlParams = [<span class="string">'菜鸟工具'</span>, <span class="string">'https://c.runoob.com'</span>,<span class="string">'23453'</span>, <span class="string">'CN'</span>];</span><br><span class="line"><span class="comment">//增</span></span><br><span class="line">connection.query(addSql,addSqlParams,<span class="function"><span class="keyword">function</span> (<span class="params">err, result</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">'[INSERT ERROR] - '</span>,err.message);</span><br><span class="line">         <span class="keyword">return</span>;</span><br><span class="line">        &#125;        </span><br><span class="line"> </span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">'--------------------------INSERT----------------------------'</span>);</span><br><span class="line">       <span class="comment">//console.log('INSERT ID:',result.insertId);        </span></span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">'INSERT ID:'</span>,result);        </span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">'-----------------------------------------------------------------\n\n'</span>);  </span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">connection.end();</span><br></pre></td></tr></table></figure><p>通过向 createConnection 传入一个对象作为参数，来配置连接的必要参数。</p><p>之后可以通过 query 方法，来提交 sql 请求。query 方法包含 3 个参数。</p><p><code>query(sqlString, sqlParams, func(err, result))</code></p><p>在 sqlString 中，可以留若干个？作为占位符，？会按顺序匹配 sqlParams 中的参数。</p><p>sql 请求成功返回后，使用 func 作为回调函数。该回调函数含有 2 个参数，第一个是报错信息，第二个是 sql 执行结果。若没有出错，则 err 为空。</p><p>sql 请求的返回值与 spring mapper 类似，select、insert 返回具体数据，update、delete 返回的 result 对象中只包含一个 affectedRows 字段，表示影响的行数。</p><h1 id="Buffer-Stream"><a href="#Buffer-Stream" class="headerlink" title="Buffer/Stream"></a>Buffer/Stream</h1><h2 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h2><p>JavaScript 语言自身只有字符串数据类型，没有二进制数据类型。</p><p>但在处理像 TCP 流或文件流时，必须使用到二进制数据。因此在 Node.js 中，定义了一个 Buffer 类，该类用来创建一个专门存放二进制数据的缓存区。</p><p>Buffer 在使用时需要指定字符编码。支持的编码如下：</p><ol><li><strong>ascii</strong> - 仅支持 7 位 ASCII 数据。如果设置去掉高位的话，这种编码是非常快的。</li><li><strong>utf8</strong> - 多字节编码的 Unicode 字符。许多网页和其他文档格式都使用 UTF-8 。</li><li><strong>utf16le</strong> - 2 或 4 个字节，小字节序编码的 Unicode 字符。支持代理对（U+10000 至 U+10FFFF）。</li><li><strong>ucs2</strong> - <strong>utf16le</strong> 的别名。</li><li><strong>base64</strong> - Base64 编码。</li><li><strong>latin1</strong> - 一种把 <strong>Buffer</strong> 编码成一字节编码的字符串的方式。</li><li><strong>binary</strong> - <strong>latin1</strong> 的别名。</li><li><strong>hex</strong> - 将每个字节编码为两个十六进制字符。</li></ol><p>Buffer 具有类似数组的特性。重要的 API 如下。</p><h3 id="创建-Buffer"><a href="#创建-Buffer" class="headerlink" title="创建 Buffer"></a>创建 Buffer</h3><ol><li><p>Buffer.alloc(size[, fill[, encoding]])</p><p>返回一个指定大小的 Buffer 实例，如果没有设置 fill，则默认填满 0</p></li><li><p>Buffer.allocUnsafe(size)</p><p>返回一个指定大小的 Buffer 实例，但是它不会被初始化，所以它可能包含敏感的数据</p></li><li><p>Buffer.allocUnsafeSlow(size)</p></li><li><p>Buffer.from(array)</p><p>返回一个被 array 的值初始化的新的 Buffer 实例（传入的 array 的元素只能是数字，不然就会自动被 0 覆盖）</p></li><li><p>Buffer.from(arrayBuffer[, byteOffset[, length]])</p><p>返回一个新建的与给定的 ArrayBuffer 共享同一内存的 Buffer。</p></li><li><p>Buffer.from(buffer)</p><p>复制传入的 Buffer 实例的数据，并返回一个新的 Buffer 实例</p></li><li><p>Buffer.from(string[, encoding])</p><p>返回一个被 string 的值初始化的新的 Buffer 实例</p></li></ol><h3 id="写入-Buffer"><a href="#写入-Buffer" class="headerlink" title="写入 Buffer"></a>写入 Buffer</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">buf.write(string[, offset[, length]][, encoding])</span><br></pre></td></tr></table></figure><h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><p>参数描述如下：</p><ul><li><strong>string</strong> - 写入缓冲区的字符串。</li><li><strong>offset</strong> - 缓冲区开始写入的索引值，默认为 0 。</li><li><strong>length</strong> - 写入的字节数，默认为 buffer.length</li><li><strong>encoding</strong> - 使用的编码。默认为 ‘utf8’ 。</li></ul><p>根据 encoding 的字符编码写入 string 到 buf 中的 offset 位置。 length 参数是写入的字节数。 如果 buf 没有足够的空间保存整个字符串，则只会写入 string 的一部分。 只部分解码的字符不会被写入。</p><h4 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h4><p>返回实际写入的大小。如果 buffer 空间不足， 则只会写入部分字符串。</p><h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">buf = Buffer.alloc(<span class="number">256</span>);</span><br><span class="line">len = buf.write(<span class="string">"www.runoob.com"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"写入字节数 : "</span>+  len);</span><br></pre></td></tr></table></figure><p>执行以上代码，输出结果为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$node main.js</span><br><span class="line">写入字节数 : 14</span><br></pre></td></tr></table></figure><p>其余与数组方法基本相同，详见 <a href="https://www.runoob.com/nodejs/nodejs-buffer.html" target="_blank" rel="noopener">Node.js Buffer(缓冲区) | 菜鸟教程</a></p><h2 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h2><p>Stream 是一个抽象接口，Node 中有很多对象实现了这个接口。例如，对http 服务器发起请求的request 对象就是一个 Stream，还有stdout（标准输出）。</p><p>Node.js，Stream 有四种流类型：</p><ul><li><strong>Readable</strong> - 可读操作。</li><li><strong>Writable</strong> - 可写操作。</li><li><strong>Duplex</strong> - 可读可写操作.</li><li><strong>Transform</strong> - 操作被写入数据，然后读出结果。</li></ul><p>所有的 Stream 对象都是 EventEmitter 的实例。常用的事件有：</p><ul><li><strong>data</strong> - 当有数据可读时触发。</li><li><strong>end</strong> - 没有更多的数据可读时触发。</li><li><strong>error</strong> - 在接收和写入过程中发生错误时触发。</li><li><strong>finish</strong> - 所有数据已被写入到底层系统时触发。</li></ul><p>主要有三种流：</p><ul><li><strong>写入流</strong></li><li><strong>管道流</strong></li><li><strong>链式流</strong></li></ul><p>详见 <a href="https://www.runoob.com/nodejs/nodejs-stream.html" target="_blank" rel="noopener">Node.js Stream(流) | 菜鸟教程</a></p><h1 id="11-14-章-待写"><a href="#11-14-章-待写" class="headerlink" title="11-14 章 待写"></a>11-14 章 待写</h1><p>待续……</p><h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p><a href="https://www.runoob.com/nodejs/nodejs-tutorial.html" target="_blank" rel="noopener">https://www.runoob.com/nodejs/nodejs-tutorial.html</a></p><p><a href="https://blog.csdn.net/qq_39953537/article/details/102685328" target="_blank" rel="noopener">https://blog.csdn.net/qq_39953537/article/details/102685328</a></p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu下使用Docker部署的办法</title>
      <link href="/docker/docker/"/>
      <url>/docker/docker/</url>
      
        <content type="html"><![CDATA[<p>这年头不是全栈工程师，连中间件实验都做不了了</p><a id="more"></a><hr><h1 id="基本知识"><a href="#基本知识" class="headerlink" title="基本知识"></a>基本知识</h1><table><thead><tr><th>docker 名词</th><th>java 名词</th></tr></thead><tbody><tr><td>镜像</td><td>类</td></tr><tr><td>容器</td><td>对象</td></tr><tr><td>由镜像构建容器</td><td>new 一个某类的实例</td></tr><tr><td>docker build</td><td>设计一个class</td></tr><tr><td>docker run</td><td>new</td></tr><tr><td>列出镜像列表</td><td>查看所有类</td></tr><tr><td>列出所有容器</td><td>查看所有已经实例化的对象</td></tr><tr><td>停止容器</td><td>使得这个对象停止功能</td></tr><tr><td>删除容器</td><td>使得这个对象被释放（delete）</td></tr></tbody></table><h1 id="ubuntu-安装-docker"><a href="#ubuntu-安装-docker" class="headerlink" title="ubuntu 安装 docker"></a>ubuntu 安装 docker</h1><p>参考链接：<a href="https://www.runoob.com/docker/ubuntu-docker-install.html" target="_blank" rel="noopener">https://www.runoob.com/docker/ubuntu-docker-install.html</a></p><h2 id="预备"><a href="#预备" class="headerlink" title="预备"></a>预备</h2><p>先通过<code>docker version</code>查看本机上是否已经安装 docker，若是，则执行下述命令，卸载旧版本 docker</p><p><code>sudo apt-get remove docker docker-engine docker.io containerd runc</code></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="首次安装时，需要设置仓库"><a href="#首次安装时，需要设置仓库" class="headerlink" title="首次安装时，需要设置仓库"></a>首次安装时，需要设置仓库</h3><table><thead><tr><th>指令</th><th>用途</th></tr></thead><tbody><tr><td>sudo apt-get update</td><td>更新 apt 包索引</td></tr><tr><td>sudo apt-get install apt-transport-https ca-certificates curl gnupg-agent software-properties-common</td><td>安装 apt 依赖包，用于通过 HTTPS 来获取仓库</td></tr><tr><td>curl -fsSL <a href="https://download.docker.com/linux/ubuntu/gpg" target="_blank" rel="noopener">https://download.docker.com/linux/ubuntu/gpg</a> &#124; sudo apt-key add -</td><td>添加 Docker 的官方 GPG 密钥</td></tr><tr><td>sudo add-apt-repository “deb [arch=amd64] <a href="https://download.docker.com/linux/ubuntu" target="_blank" rel="noopener">https://download.docker.com/linux/ubuntu</a> $(lsb_release -cs) stable”</td><td>设置稳定版仓库</td></tr></tbody></table><h3 id="安装-Docker-Engine-Community"><a href="#安装-Docker-Engine-Community" class="headerlink" title="安装 Docker Engine-Community"></a>安装 Docker Engine-Community</h3><table><thead><tr><th>指令</th><th>用途</th></tr></thead><tbody><tr><td>sudo apt-get update</td><td>更新 apt 包索引</td></tr><tr><td>sudo apt-get install docker-ce docker-ce-cli containerd.io</td><td>安装最新版本的 Docker Engine-Community 和 containerd</td></tr><tr><td>docker version</td><td>检查 docker 版本，验证是否安装成功</td></tr></tbody></table><h1 id="ubuntu-使用-docker-部署jar"><a href="#ubuntu-使用-docker-部署jar" class="headerlink" title="ubuntu 使用 docker 部署jar"></a>ubuntu 使用 docker 部署jar</h1><p>参考链接：<a href="https://blog.csdn.net/weixin_42054155/article/details/90815393" target="_blank" rel="noopener">https://blog.csdn.net/weixin_42054155/article/details/90815393</a></p><h2 id="构建-docker-镜像"><a href="#构建-docker-镜像" class="headerlink" title="构建 docker 镜像"></a>构建 docker 镜像</h2><ol><li><p>构造文件<code>Dockerfile</code>，这是一个无后缀文件</p><p>该文件内容如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM java:8</span><br><span class="line">MAINTAINER Ringoer</span><br><span class="line">ADD demo-0.0.1-SNAPSHOT.jar demo.jar</span><br><span class="line">EXPOSE 8080</span><br><span class="line">ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;demo.jar&quot;]</span><br></pre></td></tr></table></figure><p>FROM 表示拉取一个 java 版本为 1.8 的 docker image（docker镜像）</p><p>MAINTAINER 表示作者声明，后接作者名字</p><p>ADD 向镜像中加入文件，第一个参数是要加入的文件名，第二个参数是文件的重命名，表示它在 docker 镜像中的名字</p><p>EXPOSE 表示该镜像对外暴露的端口号（与 java 项目的端口号要相同）</p><p>ENTRYPOINT 表示运行该镜像时执行的命令行参数，示例中给出的配置等效于执行命令<code>java -jar demo.jar</code></p></li><li><p>向服务器上传 jar 包和 Dockerfile 文件，这两个文件要在同一个目录下</p></li><li><p>连接服务器终端，cd 进入该目录</p></li><li><p>执行命令 <code>docker build -t demo .</code> 构建镜像，其中 demo 是镜像名称。记得别漏了最后的一个点</p></li></ol><h2 id="操作镜像"><a href="#操作镜像" class="headerlink" title="操作镜像"></a>操作镜像</h2><ol><li><p>运行容器</p><p><code>docker run -d --name demo1 -p 8080:8080 demo</code></p><p>docker run 部分是不可变的</p><p>-d 指示了 docker 容器后台运行</p><p>–name 部分指示了新运行的容器实例的名称</p><p>-p 部分指示了两个端口号，用冒号隔开。其中前一个端口号表示暴露在公网的 ip，后一个表示容器暴露的 ip</p><p>最后一个参数是镜像名称，此处表示使用名为 demo 的镜像构建容器，容器名为 demo1</p></li><li><p>其余命令</p></li></ol><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td>docker pull [name]</td><td>根据名称获取镜像</td></tr><tr><td>docker images</td><td>查看所有镜像</td></tr><tr><td>docker rmi [name]</td><td>根据名称删除某个镜像</td></tr><tr><td>docker rmi $(docker images -q)</td><td>删除所有镜像</td></tr><tr><td>docker ps -a</td><td>查看所有容器</td></tr><tr><td>docker ps -aq</td><td>列出所有容器ID</td></tr><tr><td>docker stop [name]</td><td>根据名称停止某个容器</td></tr><tr><td>docker stop $(docker ps -aq)</td><td>停止所有容器</td></tr><tr><td>docker rm [name]</td><td>根据名称删除某个容器</td></tr><tr><td>docker rm $(docker ps -aq)</td><td>删除所有容器</td></tr></tbody></table><h1 id="docker-部署基于-nginx-的前端项目"><a href="#docker-部署基于-nginx-的前端项目" class="headerlink" title="docker 部署基于 nginx 的前端项目"></a>docker 部署基于 nginx 的前端项目</h1><p>参考链接：</p><p><a href="http://dockone.io/article/8834" target="_blank" rel="noopener">http://dockone.io/article/8834</a></p><p><a href="https://www.cnblogs.com/littleorange7/p/12838101.html" target="_blank" rel="noopener">https://www.cnblogs.com/littleorange7/p/12838101.html</a></p><ol><li><p>在服务器上使用命令 <code>docker pull nginx</code> 下载 nginx</p></li><li><p>在服务器上为 vue 项目新建一个文件夹（假设命名为 vue）</p></li><li><p>在本地使用命令 <code>npm run build</code> 打包 vue 项目，打包完成后会在项目目录下产生一个 dist 文件夹。将该文件夹上传到服务器</p><p>不如说，几乎所有前端用的打包框架都是产生 dist 文件夹</p></li><li><p>在本地编写 Dockerfile 文件</p><p>文件内容如下，照抄即可</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FROM nginx</span><br><span class="line">COPY dist/ /usr/share/nginx/html/</span><br><span class="line">COPY nginx/default.conf /etc/nginx/conf.d/default.conf</span><br></pre></td></tr></table></figure><p>编写完毕后上传到服务器的 vue 文件夹</p></li><li><p>新建一个名为 nginx 的文件夹，在这个文件夹里新建一个名为 default.conf 的文件</p><p>文件内容如下</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       2222;</span><br><span class="line">    server_name  ali.ringoer.com;</span><br><span class="line"></span><br><span class="line">    #charset koi8-r;</span><br><span class="line">    access_log  /var/log/nginx/host.access.log  main;</span><br><span class="line">    error_log  /var/log/nginx/error.log  error;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">        #index  index.html index.htm;</span><br><span class="line">        try_files   $uri  $uri/  /index.html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location /api/ &#123;</span><br><span class="line">        proxy_pass   http://ali.ringoer.com:9527/;</span><br><span class="line">        proxy_redirect  off;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">    # redirect server error pages to the static page /50x.html</span><br><span class="line">    #</span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需要注意的字段如下</p><table><thead><tr><th>字段名</th><th>用途</th></tr></thead><tbody><tr><td>listen</td><td>配置 nginx 的监听端口，要求与 vue 配置的端口号一致</td></tr><tr><td>server_name</td><td>前端访问的主机名，要求填写公网地址（域名或 ip）</td></tr><tr><td>index</td><td>指示项目主页。此处注释掉是作为对比，原因见下一条</td></tr><tr><td>try_files</td><td>使用 index 进行配置时，会导致在非项目主入口刷新时，报 404 错误。所以使用 try_files 进行配置，使得刷新可以触发设定好的拦截，跳转至登录界面。照抄即可，注意是 uri，不是 url</td></tr><tr><td>location /api/ {}</td><td>配置跨域请求，这里的 /api/ 与 vue 项目内部配置的 proxyTable 里所填前缀一致</td></tr><tr><td>proxy_pass</td><td>转发地址，与 vue 项目内部配置的 proxyTable 下的 target 所填内容一致。必须完整填写（包含 http 和斜杠），不然会报错</td></tr><tr><td>proxy_redirect</td><td>是否重定向，off 就行了</td></tr><tr><td>别的东西</td><td>都可以照抄</td></tr></tbody></table><p>   将 nginx 文件夹上传到服务器 vue 文件夹</p><ol start="6"><li>现在服务器 vue 文件夹中有2个文件夹和1个文件</li></ol><table><thead><tr><th>文件名</th><th>描述</th></tr></thead><tbody><tr><td>dist</td><td>vue 项目静态资源文件夹</td></tr><tr><td>nginx</td><td>nginx 配置文件夹</td></tr><tr><td>Dockerfile</td><td>docker 配置文件（不是文件夹）</td></tr></tbody></table><p>   其中 nginx 文件夹中还包含 default.conf 文件</p><p>   接下来过程与部署 jar 包一致</p><ol start="7"><li><p>部署命令顺序</p><p>通过 cd 命令进入服务器上 vue 文件夹后，按顺序执行下述命令</p><ol><li><p><code>docker build -t [name] .</code>，其中 [name] 是你所希望的镜像名称</p><p>末尾的一个点别漏了</p></li><li><p><code>docker run -d --name [name1] -p [port1]:[port2] [name2]</code>，其中</p></li></ol></li></ol><table><thead><tr><th>字段名</th><th>描述</th></tr></thead><tbody><tr><td>[name1]</td><td>你所希望的容器名称</td></tr><tr><td>[port1]</td><td>容器暴露在公网的端口号</td></tr><tr><td>[port2]</td><td>nginx 监听的端口号，也是 vue 项目配置的端口号</td></tr><tr><td>[name2]</td><td>1中命令设置的镜像名称</td></tr></tbody></table><p>现在，通过浏览器访问 [server_name]:[port1] 即可看到你的 vue 项目</p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> ubuntu </tag>
            
            <tag> linux </tag>
            
            <tag> docker </tag>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu服务器上的 Jar 包部署办法</title>
      <link href="/programing/deploy-on-ubuntu/"/>
      <url>/programing/deploy-on-ubuntu/</url>
      
        <content type="html"><![CDATA[<p>今天紧急学习了一下部署jar包的方法，特此存档<br><a id="more"></a></p><p>部署的流程主要分为2步。  </p><ol><li>向服务器上传jar包</li><li>使用服务器终端启动jar包</li></ol><p>以下基于Windows10环境  </p><h1 id="向服务器上传jar包"><a href="#向服务器上传jar包" class="headerlink" title="向服务器上传jar包"></a>向服务器上传jar包</h1><ol><li>下载安装WinSCP<br> <a href="http://download.ringoer.com/WinSCP-5.17.6-Setup.exe" target="_blank" rel="noopener">点我下载</a></li><li>打开WinSCP，连接到服务器<br> 连接设置如下图，默认SFTP协议和22端口即可<br> 主机名填写服务器的ip地址<br> <img src="http://pic.ringoer.com/ubuntu部署.png" alt="ubuntu部署"></li><li>登录之后，如同在本机上一般，直接拖动本机jar包到服务器目录即可<br> 注意，最好给每个jar包单独一个存放目录</li></ol><h1 id="使用服务器终端启动jar包"><a href="#使用服务器终端启动jar包" class="headerlink" title="使用服务器终端启动jar包"></a>使用服务器终端启动jar包</h1><ol><li>随意找个位置，通过右键菜单启动Git Bash Here</li><li>输入命令<code>ssh root@ip</code><br> 其中ssh是命令名，root是服务器用户名，ip是服务器地址<br> 如ip为127.0.0.1，用户名为root，则连接命令为<code>ssh root@127.0.0.1</code></li><li>输入用户名对应的密码，成功进入服务器终端</li><li>首先使用ls查看当前所在目录下的所有文件名，找到自己存放jar包的目录的父目录<br> 然后不断cd进入下级目录，直到进入自己存放jar包的目录</li><li>输入命令<code>nohup java -jar filename.jar &amp;</code>即可启动jar包<br> 其中filename更改为你的jar包名称</li></ol><h1 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h1><ol><li>服务器所使用的java版本（一般是1.8）要与打包jar包时使用的版本一致</li><li>应时刻注意服务器资源使用情况，避免服务器宕机<br> 使用<code>free</code>命令可以查看内存使用情况<br> 使用<code>df -hl</code>命令可以查看磁盘使用情况</li></ol>]]></content>
      
      
      <categories>
          
          <category> programing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django建站初探</title>
      <link href="/programing/django/"/>
      <url>/programing/django/</url>
      
        <content type="html"><![CDATA[<p>在使用 python 做爬虫或机器学习的时候，有时候需要浏览所得到的阶段性成果，这时候就需要一个前端。</p><a id="more"></a><hr><p>本文所使用的示例代码：<a href="http://download.ringoer.com/django-sample.rar" target="_blank" rel="noopener">点我下载</a></p><p>环境：</p><ul><li>Windows10</li><li>VSCODE</li><li>python 3.7</li></ul><p>-为什么选择 django ？</p><p>-没有为什么，我高兴</p><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><h2 id="安装-django"><a href="#安装-django" class="headerlink" title="安装 django"></a>安装 django</h2><p>在命令行中使用以下语句安装 django</p><p><code>pip install django</code></p><p>或使用国内镜像</p><p><code>pip install -i https://pypi.douban.com/simple django</code></p><p>安装后可以在命令行中启动 python 以查看 django 是否安装成功</p><p><img src="http://pic.ringoer.com/django-1-查看django版本号.png" alt="1-查看django版本号"></p><h2 id="创建一个-django-新项目"><a href="#创建一个-django-新项目" class="headerlink" title="创建一个 django 新项目"></a>创建一个 django 新项目</h2><ol><li><p>启动命令行，进入你想放置该项目的目录</p></li><li><p>使用以下语句创建工程</p><p><code>django-admin startproject [projectname]</code></p><p>其中 <code>[projectname]</code> 可以按需要修改为自己的项目名</p><p><img src="http://pic.ringoer.com/django-2-创建新项目.png" alt="2-创建新项目"></p></li><li><p>创建完成后，在命令行中进入该项目，输入以下语句启动测试页面</p><p><code>python manage.py runserver</code></p><p>如果启动成功，则可以访问以下网址查看测试页面</p><p><a href="http://localhost:8000" target="_blank" rel="noopener">http://localhost:8000</a></p><p>测试页面如图</p><p><img src="http://pic.ringoer.com/django-3-测试页面.png" alt="3-测试页面"></p></li><li><p>django 目录结构</p><p><img src="http://pic.ringoer.com/django-4-django目录结构.png" alt="4-django目录结构"></p><p>如上图，一个默认的 django 项目包含如下文件树：</p><p>——sample</p><p>————sample（项目控制组件，用于控制项目的公有配置）</p><p>——————<strong>pycache</strong>（提供默认配置文件，不需要更改）</p><p>————————<strong>init</strong>.cpython-37.pyc</p><p>————————settings.cpython-37.pyc</p><p>————————urls.cpython-37.pyc</p><p>————————wsgi.cpython-37.pyc</p><p>——————<strong>init</strong>.py（提供默认配置文件，不需要更改）</p><p>——————asgi.py（提供默认配置文件，不需要更改）</p><p>——————settings.py（项目主配置文件）</p><p>——————urls.py（项目访问路径配置文件）</p><p>——————wsgi.py（提供默认配置文件，不需要更改）</p><p>————db.sqlite3（项目自带简易数据库，不需要更改，在第一次启动项目后才会生成）</p><p>————manage.py（项目主启动类，不需要更改）</p></li></ol><p>   可见，我们只有3种办法修改我们的项目：</p><ol><li>修改settings.py</li><li>修改urls.py</li><li><p>添加新的目录</p><p>让我们先来认识一下项目控制组件下的2个配置文件</p></li></ol><h3 id="settings-py"><a href="#settings-py" class="headerlink" title="settings.py"></a>settings.py</h3><p>项目主配置文件，提供一些基本配置。</p><p>常用配置如下：</p><ol><li><p>BASE_DIR</p><p>指示项目的绝对位置</p><p>是项目所在的位置，不是项目控制组件所在的位置</p><p>会自动识别，不需修改</p></li><li><p>INSTALLED_APPS</p><p>创建了新的组件后，要在此处注册</p></li><li><p>ROOT_URLCONF</p><p>指示项目访问路径配置文件的位置</p><p>一般不需修改</p></li><li><p>TEMPLATES -&gt; DIRS</p><p>指示项目中引用的所有模板文件的绝对位置</p><p><span style="color:red">请在项目中适用如下配置</span></p><p>通常为了方便使用，都会在项目目录下新建文件夹 template，并对 TEMPLATES  属性作如下修改</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">TEMPLATES = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">'BACKEND'</span>: <span class="string">'django.template.backends.django.DjangoTemplates'</span>,</span><br><span class="line">        <span class="string">'DIRS'</span>: [os.path.join(BASE_DIR, <span class="string">'templates'</span>).replace(<span class="string">'\\'</span>, <span class="string">'/'</span>)], <span class="comment"># 唯一修改的语句</span></span><br><span class="line">        <span class="string">'APP_DIRS'</span>: <span class="keyword">True</span>,</span><br><span class="line">        <span class="string">'OPTIONS'</span>: &#123;</span><br><span class="line">            <span class="string">'context_processors'</span>: [</span><br><span class="line">                <span class="string">'django.template.context_processors.debug'</span>,</span><br><span class="line">                <span class="string">'django.template.context_processors.request'</span>,</span><br><span class="line">                <span class="string">'django.contrib.auth.context_processors.auth'</span>,</span><br><span class="line">                <span class="string">'django.contrib.messages.context_processors.messages'</span>,</span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li></ol><ol start="5"><li><p>STATIC_URL</p><p>指示项目中引用的所有静态文件的相对路径名</p><p>该属性可以含有如下子属性</p><ol><li><p>STATIC_ROOT</p><p>指示项目中引用的所有静态文件的绝对位置</p></li><li><p>STATICFILES_DIRS</p><p>指示静态文件目录下的其它目录的绝对位置</p></li></ol><p><span style="color:red">请在项目中适用如下配置</span></p><p>通常为了方便使用，都会在项目目录下新建文件夹 static，且 static 文件夹包含3个子文件夹，分别为 css、images、js</p><p>并对 STATIC_URL 属性作如下修改</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">STATIC_URL = <span class="string">'/static/'</span></span><br><span class="line">STATIC_ROOT = os.path.join(BASE_DIR, <span class="string">'static'</span>).replace(<span class="string">'\\'</span>, <span class="string">'/'</span>)</span><br><span class="line">STATICFILES_DIRS = (</span><br><span class="line">    (<span class="string">'css'</span>, os.path.join(STATIC_ROOT, <span class="string">'css'</span>).replace(<span class="string">'\\'</span>, <span class="string">'/'</span>)),</span><br><span class="line">    (<span class="string">'images'</span>, os.path.join(STATIC_ROOT, <span class="string">'images'</span>).replace(<span class="string">'\\'</span>, <span class="string">'/'</span>)),</span><br><span class="line">    (<span class="string">'js'</span>, os.path.join(STATIC_ROOT, <span class="string">'js'</span>).replace(<span class="string">'\\'</span>, <span class="string">'/'</span>)),</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li></ol><h3 id="urls-py"><a href="#urls-py" class="headerlink" title="urls.py"></a>urls.py</h3><p>项目访问路径配置文件，用于控制访问路径。</p><p>一般只需修改 urlpatterns 属性。默认含有一条语句</p><p><code>path(&#39;admin/&#39;, admin.site.urls),</code></p><p>例如当添加一个名为 mytest 的新组件，且希望路径 /test 指向它时，可以向 urlpatterns 属性下添加如下语句</p><p><code>url(&#39;test/&#39;, include(&#39;mytest.urls&#39;)),</code></p><h1 id="创建子组件"><a href="#创建子组件" class="headerlink" title="创建子组件"></a>创建子组件</h1><p>在命令行中进入项目目录，执行以下语句</p><p><code>python manage.py startapp [appname]</code></p><p>其中 appname 即为你想新建的组件名</p><p>组件名不可以重名</p><p><img src="http://pic.ringoer.com/django-5-创建hello子组件.png" alt="5-创建hello子组件"></p><p>子组件 hello 的目录结构如下</p><p><img src="http://pic.ringoer.com/django-6-hello子组件的目录结构.png" alt="6-hello子组件的目录结构"></p><p>其中两个 <strong>init</strong>.py 文件是默认的配置文件，无需修改</p><h2 id="apps-py"><a href="#apps-py" class="headerlink" title="apps.py"></a>apps.py</h2><p>指示本组件的名称，保持默认即可</p><h2 id="tests-py"><a href="#tests-py" class="headerlink" title="tests.py"></a>tests.py</h2><p>为本组件创建测试</p><p>本教程不对此深入讨论</p><h2 id="models-py"><a href="#models-py" class="headerlink" title="models.py"></a>models.py</h2><p>在本文件中，程序员应该描述本组件包含的实体类的声明</p><p>横向对比来说，类似于 java 开发中的 domain 层</p><p>此处我们创建一个保存我们自己数据的 myData 类</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myData</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">  username = models.TextField()</span><br><span class="line">  description = models.TextField()</span><br><span class="line">  age = models.IntegerField()</span><br></pre></td></tr></table></figure><h2 id="admin-py"><a href="#admin-py" class="headerlink" title="admin.py"></a>admin.py</h2><p>默认情况下包含如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"></span><br><span class="line"><span class="comment"># Register your models here.</span></span><br></pre></td></tr></table></figure><p>需要根据子组件的 models 来添加代码</p><p>比如，我们在上文中，在 hello 子组件中创建了 myData 类，那就需要修改本文件代码为如下模样</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> hello.models <span class="keyword">import</span> myData</span><br><span class="line"></span><br><span class="line"><span class="comment"># Register your models here.</span></span><br><span class="line"></span><br><span class="line">admin.site.register(myData)</span><br></pre></td></tr></table></figure><h2 id="views-py"><a href="#views-py" class="headerlink" title="views.py"></a>views.py</h2><p>用于组织本组件视图的文件，程序员应在其中写入对模板渲染时所需数据的预处理操作</p><p>本例中，我们将定义一个名为 helloworld 的方法来进行预处理</p><h2 id="应添加在子组件中的非默认文件"><a href="#应添加在子组件中的非默认文件" class="headerlink" title="应添加在子组件中的非默认文件"></a>应添加在子组件中的非默认文件</h2><h3 id="data-csv"><a href="#data-csv" class="headerlink" title="data.csv"></a>data.csv</h3><p>用于保存本组件所需数据的原始数据表。可以没有本项目</p><h3 id="dataimport-py"><a href="#dataimport-py" class="headerlink" title="dataimport.py"></a>dataimport.py</h3><p>用于指示如何向项目主目录下的 db.sqlite3 数据库中注入 data.csv</p><p>当不存在 data.csv 时，也不需有本文件</p><p>现在，为了方便示例，让我们创建 data.csv，并向其中插入如下数据</p><table><thead><tr><th>username</th><th>description</th><th>age</th></tr></thead><tbody><tr><td>ringoer</td><td>从忘恩之地吹来的风</td><td>21</td></tr><tr><td>myname</td><td>测试用说说</td><td>100</td></tr></tbody></table><p>并创建 dataimport.py，输入如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在自己脚本中使用django model</span></span><br><span class="line"><span class="keyword">import</span> sys,os</span><br><span class="line"></span><br><span class="line">sys.path.append(os.path.abspath(os.path.dirname(os.path.dirname(__file__))))</span><br><span class="line">os.environ[<span class="string">'DJANGO_SETTINGS_MODULE'</span>] = <span class="string">'sample.settings'</span>  <span class="comment"># 配置系统变量</span></span><br><span class="line"><span class="keyword">import</span> django</span><br><span class="line">django.setup()</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> hello.models <span class="keyword">import</span> myData <span class="comment"># 引入数据类型，与本组件的models中声明的类型相同</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从csv读取数据并存入models创建的表里</span></span><br><span class="line"><span class="comment"># 此处路径是相对于项目主目录的</span></span><br><span class="line">data_path = <span class="string">'hello/data.csv'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(data_path, encoding = <span class="string">'UTF-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">   reader = csv.reader(f)</span><br><span class="line">   <span class="keyword">for</span> i, row <span class="keyword">in</span> enumerate(reader):</span><br><span class="line">      mydata = myData()</span><br><span class="line">      <span class="keyword">if</span> i&gt;<span class="number">0</span>:</span><br><span class="line">        mydata.username = row[<span class="number">0</span>]</span><br><span class="line">        mydata.description = row[<span class="number">1</span>]</span><br><span class="line">        mydata.age = int(row[<span class="number">2</span>])</span><br><span class="line">        mydata.save()</span><br></pre></td></tr></table></figure><p>为了正常指向该组件，需要配置</p><ol><li>该组件的 urls.py </li><li>项目控制组件中的 urls.py</li><li>项目控制组件中的 settings.py</li></ol><h3 id="hello-urls-py"><a href="#hello-urls-py" class="headerlink" title="hello/urls.py"></a>hello/urls.py</h3><p>用于指示本组件中的路由</p><p>但默认的代码使用的是 path 方法来指示路由，并不能正常工作，故本例中使用 url 方法来指示路由</p><p>本例中可以在该文件中写入如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url, include</span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.contrib.staticfiles.urls <span class="keyword">import</span> staticfiles_urlpatterns</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r'^hello/'</span>, include(<span class="string">'hello.urls'</span>)),</span><br><span class="line">    url(<span class="string">r'^admin/'</span>, admin.site.urls),</span><br><span class="line">]</span><br><span class="line">urlpatterns += staticfiles_urlpatterns()</span><br></pre></td></tr></table></figure><h3 id="sample-urls-py"><a href="#sample-urls-py" class="headerlink" title="sample/urls.py"></a>sample/urls.py</h3><p>如果我们希望通过 hello 路径来访问 hello 组件，可以向该文件中插入如下语句</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hello</span><br><span class="line">path(<span class="string">'hello/'</span>, hello.urls),</span><br></pre></td></tr></table></figure><p>则该文件变为</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> hello</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'hello/'</span>, hello.urls),</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>然后在项目控制组件的 settings.py 的 INSTALLED_APPS 属性中注册该组件，就可以正常路由了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">'django.contrib.admin'</span>,</span><br><span class="line">    <span class="string">'django.contrib.auth'</span>,</span><br><span class="line">    <span class="string">'django.contrib.contenttypes'</span>,</span><br><span class="line">    <span class="string">'django.contrib.sessions'</span>,</span><br><span class="line">    <span class="string">'django.contrib.messages'</span>,</span><br><span class="line">    <span class="string">'django.contrib.staticfiles'</span>,</span><br><span class="line">    <span class="string">'hello'</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h1 id="创建页面文件并渲染"><a href="#创建页面文件并渲染" class="headerlink" title="创建页面文件并渲染"></a>创建页面文件并渲染</h1><p>只有路由没有页面，一样什么都显示不了，所以我们需要对组件内的 views.py 进行修改，使得其能渲染页面，并另外提供一个用于渲染的 html 模板</p><h2 id="views-py-1"><a href="#views-py-1" class="headerlink" title="views.py"></a>views.py</h2><p>默认情况下有如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br></pre></td></tr></table></figure><p>本文中提供如下代码作为例子</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> hello.models <span class="keyword">import</span> myData</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">helloworld</span><span class="params">(request)</span>:</span></span><br><span class="line">  myData_list = myData.objects.all()</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 分页算法</span></span><br><span class="line">  perpage = <span class="number">10</span></span><br><span class="line">  maxPage = int((len(myData_list) - <span class="number">1</span>) / perpage + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">  page = request.GET.get(<span class="string">'page'</span>)</span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">    page = int(page)</span><br><span class="line">  <span class="keyword">except</span>:</span><br><span class="line">    page = <span class="number">1</span></span><br><span class="line">  <span class="keyword">if</span> page &gt; maxPage:</span><br><span class="line">    page = maxPage</span><br><span class="line">  <span class="keyword">elif</span> page &lt;= <span class="number">0</span>:</span><br><span class="line">    page = <span class="number">1</span></span><br><span class="line">  </span><br><span class="line">  minIndex = (page - <span class="number">1</span>) * perpage</span><br><span class="line">  maxIndex = page * perpage</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> maxIndex &gt; len(myData_list):</span><br><span class="line">    maxIndex = len(myData_list)</span><br><span class="line"></span><br><span class="line">  myData_list = myData_list[minIndex : maxIndex]</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 提供给前端的内容</span></span><br><span class="line">  context = &#123;</span><br><span class="line">    <span class="string">'myData_list'</span>: myData_list, <span class="comment"># 渲染表格用的列表</span></span><br><span class="line">    <span class="string">'page'</span>: page, <span class="comment"># 页号</span></span><br><span class="line">    <span class="string">'message'</span>: <span class="string">'helloworld!'</span>, <span class="comment"># 传给前端的消息</span></span><br><span class="line">&#125;</span><br><span class="line">  <span class="keyword">return</span> render(request, <span class="string">'hello.html'</span>, context) <span class="comment"># 第二参数是目标html文件名称，该html须在templates文件夹下</span></span><br></pre></td></tr></table></figure><h2 id="hello-html"><a href="#hello-html" class="headerlink" title="hello.html"></a>hello.html</h2><p>需要注意的模板语法有两条</p><ol><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; 变量名 &#125;&#125;</span><br></pre></td></tr></table></figure><p>可以实现对变量取值</p></li><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% for %&#125;</span><br><span class="line"></span><br><span class="line">（此处填写html语句）</span><br><span class="line"></span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure><p>可以实现循环渲染</p></li></ol><p>本例中的 html 代码如下</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">language</span>=<span class="string">"zh-cn"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"/static/css/style.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; message &#125;&#125;&amp;emsp;第&#123;&#123; page &#125;&#125;页<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>username<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>description<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>age<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        &#123;% for i in myData_list %&#125; </span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; i.username &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; i.description &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; i.age &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="迁移数据"><a href="#迁移数据" class="headerlink" title="迁移数据"></a>迁移数据</h1><p>到这里，试图 runserver 的时候，却发现应用跑不起来了。这是为什么呢？</p><p>因为之前给 hello 组件准备的数据还没导入！</p><p>让我们导入数据吧</p><ol><li><p>执行语句 <code>python manage.py makemigrations</code> 创建迁移文件</p><p><img src="http://pic.ringoer.com/django-7-创建迁移文件.png" alt="7-创建迁移文件"></p></li><li><p>执行语句 <code>python manage.py migrate</code> 完成迁移文件的导入</p><p><img src="http://pic.ringoer.com/django-8-完成迁移文件的导入.png" alt="8-完成迁移文件的导入"></p></li><li><p>执行语句 <code>python hello/dataimport.py</code> 完成数据导入</p><p><img src="http://pic.ringoer.com/django-9-完成数据导入.png" alt="9-完成数据导入"></p><p>需要注意的是，当数据量很大时，由于 python 语言性质，会导致导入速度非常慢，请耐心等待</p></li></ol><h1 id="验收成果"><a href="#验收成果" class="headerlink" title="验收成果"></a>验收成果</h1><p>经过这么长的教程，终于可以验收成果了！</p><p><img src="http://pic.ringoer.com/django-10-验收成果.png" alt="10-验收成果"></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>django 建站的步骤大致如下：</p><ol><li>初始化项目，配置静态资源</li><li>构建若干子组件</li><li>为子组件构建实体类、数据、页面与页面渲染、路由</li><li>在配置文件中注册组件</li><li>迁移数据，导入数据</li></ol>]]></content>
      
      
      <categories>
          
          <category> programing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mapper层配置</title>
      <link href="/J2EE/mapper/"/>
      <url>/J2EE/mapper/</url>
      
        <content type="html"><![CDATA[<p>和数据库直接联系的，重要的mapper层的配置。<br><a id="more"></a></p><h1 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mybatis --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- druid 数据库连接池 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- jdbc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mysql --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 正常一定会有的 maven plugin --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mybatis --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configurationFile</span>&gt;</span>mybatis-generator/generatorConfig.xml<span class="tag">&lt;/<span class="name">configurationFile</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">overwrite</span>&gt;</span>true<span class="tag">&lt;/<span class="name">overwrite</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">verbose</span>&gt;</span>true<span class="tag">&lt;/<span class="name">verbose</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="application-yaml"><a href="#application-yaml" class="headerlink" title="application.yaml"></a>application.yaml</h1><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  application:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">USER-SERVICE</span></span><br><span class="line"><span class="attr">  profiles:</span></span><br><span class="line">    <span class="comment"># 为了便于管理，将具体的 datasource 配置放在另一个文件中</span></span><br><span class="line">    <span class="comment"># 下方 active 属性名，设为dev，则spring会自动寻找和 application.yaml同一目录下的 application-dev.yaml</span></span><br><span class="line">    <span class="comment"># 也就是说，设为x，则会自动寻找application-x.yaml</span></span><br><span class="line">    <span class="comment"># 效果等同于将目标文件内的 datasource 配置直接写在当前文件中</span></span><br><span class="line"><span class="attr">    active:</span> <span class="string">dev</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="comment"># domain对象的包</span></span><br><span class="line"><span class="attr">  type-aliases-package:</span> <span class="string">xmu.oomall.user.domain</span></span><br><span class="line">  <span class="comment"># mapper.xml所在的位置</span></span><br><span class="line">  <span class="comment"># 本项目的mapper放在 /resource/xmu.oomall.mapper 目录下</span></span><br><span class="line">  <span class="comment"># 如果配置时索引不到mapper，可能是前置名称有问题</span></span><br><span class="line">  <span class="comment"># 如该项目，mapper.xml所在的文件夹可以试试 /xmu.oomall.mapper 或者 /xmu/oomall/mapper</span></span><br><span class="line"><span class="attr">  mapper-locations:</span> <span class="attr">classpath:xmu.oomall.mapper/*.xml</span></span><br><span class="line"><span class="attr">  configuration:</span></span><br><span class="line">    <span class="comment"># 自动将SQL中查出来的带下划线的字段，转换为驼峰标志，再去匹配类中的属性</span></span><br><span class="line"><span class="attr">    mapUnderscoreToCamelCase:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h1 id="application-dev-yaml"><a href="#application-dev-yaml" class="headerlink" title="application-dev.yaml"></a>application-dev.yaml</h1><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  datasource:</span></span><br><span class="line"><span class="attr">    driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="comment"># 目标数据库地址</span></span><br><span class="line">    <span class="comment"># jdbc开头，接数据库类型，接ip地址，接数据库名</span></span><br><span class="line"><span class="attr">    url:</span> <span class="attr">jdbc:mysql://106.14.83.157:3306/oomall</span></span><br><span class="line">    <span class="comment"># 登录数据库</span></span><br><span class="line"><span class="attr">    username:</span> <span class="string">ooadUser</span></span><br><span class="line"><span class="attr">    password:</span> <span class="string">ooad</span></span><br><span class="line"><span class="attr">    type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="attr">    druid:</span></span><br><span class="line">      <span class="comment"># 初始化时建立物理连接的个数</span></span><br><span class="line"><span class="attr">      initial-size:</span> <span class="number">3</span></span><br><span class="line">      <span class="comment"># 最小连接池数量</span></span><br><span class="line"><span class="attr">      min-idle:</span> <span class="number">3</span></span><br><span class="line">      <span class="comment"># 最大连接池数量</span></span><br><span class="line"><span class="attr">      max-active:</span> <span class="number">10</span></span><br><span class="line">      <span class="comment"># 获取连接时最大等待时间</span></span><br><span class="line"><span class="attr">      max-wait:</span> <span class="number">60000</span></span><br><span class="line"><span class="attr">      filter:</span></span><br><span class="line"><span class="attr">        stat:</span></span><br><span class="line">          <span class="comment"># 是否开启慢sql查询监控</span></span><br><span class="line"><span class="attr">          log-slow-sql:</span> <span class="literal">true</span></span><br><span class="line">          <span class="comment"># 慢SQL执行时间</span></span><br><span class="line"><span class="attr">          slow-sql-millis:</span> <span class="number">100</span></span><br><span class="line"><span class="attr">      validation-query:</span> <span class="string">select</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p>到这里，配置基本完成了，接下来开始写mapper</p><h1 id="UserMapper-java"><a href="#UserMapper-java" class="headerlink" title="UserMapper.java"></a>UserMapper.java</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xmu.oomall.user.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> xmu.oomall.user.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Ringoer</span></span><br><span class="line"><span class="comment"> * 必须是接口类型</span></span><br><span class="line"><span class="comment"> * 必须有 <span class="doctag">@Mapper</span> 注解</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id返回用户信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 用户id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 用户对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">User <span class="title">findUserById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id返回用户信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name 用户名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 用户对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">User <span class="title">findUserByName</span><span class="params">(String name)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注册一个用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user 用户信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 行数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改一个用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user 用户对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 修改影响的行数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">editUser</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回用户列表</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 用户列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findUsers</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="UserMapper-xml"><a href="#UserMapper-xml" class="headerlink" title="UserMapper.xml"></a>UserMapper.xml</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespace中填写对应的mapper接口位置及名称--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"xmu.oomall.user.mapper.UserMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--sql语句之select--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- id 填写在接口中对应的方法名 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- parameterType 填写传入参数的类型，类型名称与java类型相同 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- resultType 填写返回参数的名称，类型名称与java类型相同，返回时会自动组装 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 对于数据库保留字段，如 name ，不能直接查询，要使用 `` 包裹住才行（不是单引号） --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 对于传入参数，使用 #&#123;变量名&#125; 方式来取值，其中变量名与java中相同 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserById"</span> <span class="attr">parameterType</span>=<span class="string">"Integer"</span> <span class="attr">resultType</span>=<span class="string">"User"</span>&gt;</span></span><br><span class="line">            select id,</span><br><span class="line">                   password,</span><br><span class="line">                    `name`,</span><br><span class="line">                    gender,</span><br><span class="line">                    birthday,</span><br><span class="line">                    mobile,</span><br><span class="line">                    nickname,</span><br><span class="line">                    rebate,</span><br><span class="line">                    avatar,</span><br><span class="line">                    role_id,</span><br><span class="line">                    last_login_time,</span><br><span class="line">                    last_login_ip,</span><br><span class="line">                    user_level,</span><br><span class="line">                    wx_open_id,</span><br><span class="line">                    session_key,</span><br><span class="line">                    gmt_create,</span><br><span class="line">                    gmt_modified,</span><br><span class="line">                    is_deleted as beDeleted</span><br><span class="line">                    from `oomall_user` where id = #&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--sql语句之select--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- resultType 填写返回参数的名称，类型名称与java类型相同，返回时会自动组装 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 对于返回类型是List的情况，resultType中只需要填List中的单体的类型即可 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 如该方法返回值是 List&lt;User&gt; ，但 resultType 只需要填写 User --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUsers"</span> <span class="attr">resultType</span>=<span class="string">"User"</span>&gt;</span></span><br><span class="line">        select  id,</span><br><span class="line">                password,</span><br><span class="line">                `name`,</span><br><span class="line">                gender,</span><br><span class="line">                birthday,</span><br><span class="line">                mobile,</span><br><span class="line">                nickname,</span><br><span class="line">                rebate,</span><br><span class="line">                avatar,</span><br><span class="line">                role_id,</span><br><span class="line">                last_login_time,</span><br><span class="line">                last_login_ip,</span><br><span class="line">                user_level,</span><br><span class="line">                wx_open_id,</span><br><span class="line">                session_key,</span><br><span class="line">                gmt_create,</span><br><span class="line">                gmt_modified,</span><br><span class="line">                is_deleted as beDeleted</span><br><span class="line">        from `oomall_user`;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--sql语句之select--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserByName"</span> <span class="attr">parameterType</span>=<span class="string">"String"</span> <span class="attr">resultType</span>=<span class="string">"User"</span>&gt;</span></span><br><span class="line">            select id,</span><br><span class="line">                   password,</span><br><span class="line">                    `name`,</span><br><span class="line">                    gender,</span><br><span class="line">                    birthday,</span><br><span class="line">                    mobile,</span><br><span class="line">                    nickname,</span><br><span class="line">                    rebate,</span><br><span class="line">                    avatar,</span><br><span class="line">                    role_id,</span><br><span class="line">                    last_login_time,</span><br><span class="line">                    last_login_ip,</span><br><span class="line">                    user_level,</span><br><span class="line">                    wx_open_id,</span><br><span class="line">                    session_key,</span><br><span class="line">                    gmt_create,</span><br><span class="line">                    gmt_modified,</span><br><span class="line">                    is_deleted as beDeleted</span><br><span class="line">            from `oomall_user` where `name` = #&#123;name&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--sql语句之insert--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- id 填写在接口中对应的方法名 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- parameterType 填写传入参数的类型，类型名称与java类型相同 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- useGeneratedKeys 表示在数据库中插入时是否使用自增主键。需要与 keyProperty 配合使用 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 无 resultType ，因为sql中insert方法一定返回此次更新影响的行数，即resultType一定是Integer --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- keyProperty 表示在数据库中的主键是哪个字段，字段名称与java中的相同。需要与 useGeneratedKeys 配合使用 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 如果使用了 useGeneratedKeys 和 keyProperty ，则插入成功后jdbc会自动将生成的主键装配进传入的变量中，可以在java中直接获取 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 对于传入参数，使用 #&#123;变量名&#125; 方式来取值，其中变量名与java中相同 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 如果传入参数类型是一个包含多个字段的类，则依然使用 #&#123;变量名&#125; 方式来取值，此时变量名直接与类中字段名相同，不需要再次声明类名 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"addUser"</span> <span class="attr">parameterType</span>=<span class="string">"User"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">        insert into `oomall_user`(</span><br><span class="line">            password,</span><br><span class="line">            `name`,</span><br><span class="line">            gender,</span><br><span class="line">            birthday,</span><br><span class="line">            mobile,</span><br><span class="line">            nickname,</span><br><span class="line">            rebate,</span><br><span class="line">            avatar,</span><br><span class="line">            role_id,</span><br><span class="line">            last_login_time,</span><br><span class="line">            last_login_ip,</span><br><span class="line">            user_level,</span><br><span class="line">            wx_open_id,</span><br><span class="line">            session_key,</span><br><span class="line">            gmt_create,</span><br><span class="line">            gmt_modified,</span><br><span class="line">            is_deleted)</span><br><span class="line">        values (</span><br><span class="line">            #&#123;password&#125;,</span><br><span class="line">            #&#123;name&#125;,</span><br><span class="line">            #&#123;gender&#125;,</span><br><span class="line">            #&#123;birthday&#125;,</span><br><span class="line">            #&#123;mobile&#125;,</span><br><span class="line">            #&#123;nickname&#125;,</span><br><span class="line">            #&#123;rebate&#125;,</span><br><span class="line">            #&#123;avatar&#125;,</span><br><span class="line">            #&#123;roleId&#125;,</span><br><span class="line">            #&#123;lastLoginTime&#125;,</span><br><span class="line">            #&#123;lastLoginIp&#125;,</span><br><span class="line">            #&#123;userLevel&#125;,</span><br><span class="line">            #&#123;wxOpenId&#125;,</span><br><span class="line">            #&#123;sessionKey&#125;,</span><br><span class="line">            #&#123;gmtCreate&#125;,</span><br><span class="line">            #&#123;gmtModified&#125;,</span><br><span class="line">            #&#123;beDeleted&#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--sql语句之update--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- id 填写在接口中对应的方法名 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- parameterType 填写传入参数的类型，类型名称与java类型相同 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 无 resultType ，因为sql中update方法一定返回此次更新影响的行数，即resultType一定是Integer --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 本文章未提及delete操作，实际上delete操作的返回值也是行数 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"editUser"</span> <span class="attr">parameterType</span>=<span class="string">"User"</span> &gt;</span></span><br><span class="line">        update `oomall_user`</span><br><span class="line">        set password=#&#123;password&#125;,</span><br><span class="line">            `name`=#&#123;name&#125;,</span><br><span class="line">            gender=#&#123;gender&#125;,</span><br><span class="line">            birthday=#&#123;birthday&#125;,</span><br><span class="line">            mobile=#&#123;mobile&#125;,</span><br><span class="line">            nickname=#&#123;nickname&#125;,</span><br><span class="line">            rebate=#&#123;rebate&#125;,</span><br><span class="line">            avatar=#&#123;avatar&#125;,</span><br><span class="line">            role_id=#&#123;roleId&#125;,</span><br><span class="line">            last_login_time=#&#123;lastLoginTime&#125;,</span><br><span class="line">            last_login_ip=#&#123;lastLoginIp&#125;,</span><br><span class="line">            user_level=#&#123;userLevel&#125;,</span><br><span class="line">            wx_open_id=#&#123;wxOpenId&#125;,</span><br><span class="line">            session_key=#&#123;sessionKey&#125;,</span><br><span class="line">            gmt_create=#&#123;gmtCreate&#125;,</span><br><span class="line">            gmt_modified=#&#123;gmtModified&#125;,</span><br><span class="line">            is_deleted=#&#123;beDeleted&#125;</span><br><span class="line">        where id=#&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="使用mapper"><a href="#使用mapper" class="headerlink" title="使用mapper"></a>使用mapper</h1><p>到这里，mapper的声明工作已经全部完成了，接下来需要在dao层调用mapper。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xmu.oomall.user.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"><span class="keyword">import</span> xmu.oomall.user.domain.User;</span><br><span class="line"><span class="keyword">import</span> xmu.oomall.user.mapper.UserMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Ringoer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id返回用户信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 用户id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 用户对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">findUserById</span><span class="params">(Integer id)</span></span>&#123;<span class="keyword">return</span> userMapper.findUserById(id);&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id返回用户信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name 用户名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 用户对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">findUserByName</span><span class="params">(String name)</span></span>&#123;<span class="keyword">return</span> userMapper.findUserByName(name);&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注册一个用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user 用户信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 行数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span></span>&#123;<span class="keyword">return</span> userMapper.addUser(user);&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改一个用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user 用户对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 行数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">editUser</span><span class="params">(User user)</span></span>&#123;<span class="keyword">return</span> userMapper.editUser(user);&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回用户列表</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 用户列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findUsers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.findUsers();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用代码如上。</p><p>实际上只需要两行代码，就可以无缝使用mapper：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserMapper userMapper;</span><br></pre></td></tr></table></figure><p>以上即为通过jdbc的java与数据库连接方式。</p>]]></content>
      
      
      <categories>
          
          <category> J2EE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> J2EE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Swagger 配置</title>
      <link href="/J2EE/spring-swagger/"/>
      <url>/J2EE/spring-swagger/</url>
      
        <content type="html"><![CDATA[<p>Swagger好文明！！</p><p>我再也不拿什么破python破postman调试了！！</p><a id="more"></a><p>第一步，引入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>当前版本2.9.2，以后看到这篇文章的同学记得更新版本</p><p>第二步，配置SwaggerConfig类</p><ol><li>新建一个package，叫config，便于管理</li><li>新建一个Java Class，叫SwaggerConfig</li><li>配置如下代码</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xmu.oomall.user.config;<span class="comment">//包名，可以修改</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.ApiInfoBuilder;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.PathSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.RequestHandlerSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.service.ApiInfo;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spi.DocumentationType;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spring.web.plugins.Docket;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Parameter;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Ringoer</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@notice</span> 下面两个注解一定不要漏了</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger</span>2</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//这个方法不可以修改</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">createRestApi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                .apiInfo(apiInfo())</span><br><span class="line">                .select()</span><br><span class="line">                .apis(RequestHandlerSelectors.withClassAnnotation(RestController.class))</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build()</span><br><span class="line">                .apiInfo(apiInfo());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//这个方法中所有的字符串都可以修改</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ApiInfo <span class="title">apiInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ApiInfoBuilder()</span><br><span class="line">                .title(<span class="string">"UserInfoService RESTful API"</span>)</span><br><span class="line">                .description(<span class="string">"3-1 oomall UserInfoService"</span>)</span><br><span class="line">                .termsOfServiceUrl(<span class="string">""</span>)</span><br><span class="line">                .version(<span class="string">"1.0"</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第三步，在主启动类上加入注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xmu.oomall.user;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.eureka.EnableEurekaClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.EnableFeignClients;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Ringoer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableSwagger</span>2</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run(UserApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>好了，直接运行，访问 <code>http://{ip}:{port}/swagger-ui.html</code> 即可看到好文明</p><p>可能出现的bug：</p><ol><li><p>无法启动，报</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compatible version of org.springframework.plugin.core.PluginRegistry</span><br></pre></td></tr></table></figure><p>如果出现这种情况，那就是因为依赖冲突，看看有没有下面这个依赖，有的话删掉即可</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-rest<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>要不然，可以建个空项目，慢慢调节找哪个依赖冲突也可以</p><p>但反正绝对不是spring版本偏高，因为我现在运行的是2.2.2.RELEASE，也可以正常swagger</p></li><li><p>无法启动，报</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NoSuchMethodError</span><br></pre></td></tr></table></figure><p>如果出现这种情况，那就是因为guava版本不对，需要手动指定guava版本</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.guava<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>guava<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>20.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>可以启动，报一个弹窗：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Unable to infer base url. This is common when using dynamic servlet registration or when the API is behind an API Gateway. The base url is the root of where all the swagger resources are served. For e.g. if the api is available at http://example.org/api/v2/api-docs then the base url is http://example.org/api/. Please enter the location manually:</span><br></pre></td></tr></table></figure><p>如果出现这种情况，那就是因为配了spring security或者用的不是 <code>@EnableSwagger2</code> 注解</p><p>前者的话去掉security相关依赖，或者手动配置security config都可以</p><p>后者的话请回到文章开头重新配置</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> J2EE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> J2EE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20191230中间件相关</title>
      <link href="/programing/middleware-20191230/"/>
      <url>/programing/middleware-20191230/</url>
      
        <content type="html"><![CDATA[<p>以下暂时还是一些链接</p><a id="more"></a><hr><p><a href="https://www.jianshu.com/p/eb571e4065ec" target="_blank" rel="noopener">MQ消息最终一致性解决方案</a></p><p><a href="https://www.baidu.com/s?ie=UTF-8&amp;wd=mq%20%E4%B8%80%E8%87%B4%E6%80%A7" target="_blank" rel="noopener">mq 一致性</a></p><p><a href="https://www.baidu.com/s?ie=UTF-8&amp;wd=%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%20%E4%B8%AD%E9%97%B4%E4%BB%B6" target="_blank" rel="noopener">消息队列 中间件</a></p><p><a href="https://www.cnblogs.com/wuzm/p/11105176.html" target="_blank" rel="noopener">常见的消息队列中间件介绍</a></p><p><a href="https://www.baidu.com/s?ie=UTF-8&amp;wd=%E7%BA%BF%E7%A8%8B%E6%B1%A0%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97" target="_blank" rel="noopener">线程池 消息队列</a></p><p><a href="https://blog.csdn.net/Ares_xb/article/details/89946466" target="_blank" rel="noopener">线程池和消息队列的一些理解</a></p><p><a href="https://www.jianshu.com/p/2accc2840a1b" target="_blank" rel="noopener">如何给老婆解释什么是RPC</a></p><p><a href="https://www.jianshu.com/p/9cca72f9e93c" target="_blank" rel="noopener">BFF——服务于前端的后端</a></p><p><a href="https://www.cnblogs.com/liujinyu/p/11612728.html" target="_blank" rel="noopener">基于NodeJS进行前后端分离</a></p><p><a href="https://www.jb51.net/article/150697.htm" target="_blank" rel="noopener">详解从NodeJS搭建中间层再谈前后端分离</a></p><p><a href="https://www.zhihu.com/question/279322623/answer/406073443" target="_blank" rel="noopener">纯前端开发眼里nodejs到底是什么？</a></p>]]></content>
      
      
      <categories>
          
          <category> programing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> J2EE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>oomall 商城系统 完工总结</title>
      <link href="/J2EE/oomall/"/>
      <url>/J2EE/oomall/</url>
      
        <content type="html"><![CDATA[<p>2019-2020学年第一学期 oomall后端开发项目总结</p><a id="more"></a><h1 id="项目简介"><a href="#项目简介" class="headerlink" title="项目简介"></a>项目简介</h1><h1 id="全局设计"><a href="#全局设计" class="headerlink" title="全局设计"></a>全局设计</h1><h2 id="用户需求分析"><a href="#用户需求分析" class="headerlink" title="用户需求分析"></a>用户需求分析</h2><h2 id="领域模型分析"><a href="#领域模型分析" class="headerlink" title="领域模型分析"></a>领域模型分析</h2><h2 id="对象模型分析"><a href="#对象模型分析" class="headerlink" title="对象模型分析"></a>对象模型分析</h2><h2 id="Controller层API设计"><a href="#Controller层API设计" class="headerlink" title="Controller层API设计"></a>Controller层API设计</h2><h2 id="系统模块划分"><a href="#系统模块划分" class="headerlink" title="系统模块划分"></a>系统模块划分</h2><h1 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h1><h2 id="相关技术"><a href="#相关技术" class="headerlink" title="相关技术"></a>相关技术</h2><h3 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js</h3><h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><h3 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h3><h3 id="JAVA"><a href="#JAVA" class="headerlink" title="JAVA"></a>JAVA</h3><h4 id="IDEA"><a href="#IDEA" class="headerlink" title="IDEA"></a>IDEA</h4><h4 id="代码规范"><a href="#代码规范" class="headerlink" title="代码规范"></a>代码规范</h4><p>阿里巴巴 JAVA 开发规约</p><h4 id="Spring-Boot"><a href="#Spring-Boot" class="headerlink" title="Spring Boot"></a>Spring Boot</h4><h4 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h4><h4 id="Maven中多项目管理方法"><a href="#Maven中多项目管理方法" class="headerlink" title="Maven中多项目管理方法"></a>Maven中多项目管理方法</h4><h4 id="Servlet并发机制"><a href="#Servlet并发机制" class="headerlink" title="Servlet并发机制"></a>Servlet并发机制</h4><h4 id="缓存和消息队列"><a href="#缓存和消息队列" class="headerlink" title="缓存和消息队列"></a>缓存和消息队列</h4><h3 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h3><h4 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h4><h4 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h4><h4 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h4><h3 id="微服务"><a href="#微服务" class="headerlink" title="微服务"></a>微服务</h3><h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><h4 id="Docker容器"><a href="#Docker容器" class="headerlink" title="Docker容器"></a>Docker容器</h4><h4 id="Linux部署语句"><a href="#Linux部署语句" class="headerlink" title="Linux部署语句"></a>Linux部署语句</h4><h3 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h3><h4 id="Zuul网关"><a href="#Zuul网关" class="headerlink" title="Zuul网关"></a>Zuul网关</h4><h4 id="Eureka注册中心"><a href="#Eureka注册中心" class="headerlink" title="Eureka注册中心"></a>Eureka注册中心</h4><h4 id="Ribbon"><a href="#Ribbon" class="headerlink" title="Ribbon"></a>Ribbon</h4><h4 id="Nginx服务器"><a href="#Nginx服务器" class="headerlink" title="Nginx服务器"></a>Nginx服务器</h4><h1 id="详细设计"><a href="#详细设计" class="headerlink" title="详细设计"></a>详细设计</h1><h2 id="商品服务"><a href="#商品服务" class="headerlink" title="商品服务"></a>商品服务</h2><h2 id="订单服务"><a href="#订单服务" class="headerlink" title="订单服务"></a>订单服务</h2><h2 id="用户服务"><a href="#用户服务" class="headerlink" title="用户服务"></a>用户服务</h2><h2 id="运费服务"><a href="#运费服务" class="headerlink" title="运费服务"></a>运费服务</h2><h2 id="分享服务"><a href="#分享服务" class="headerlink" title="分享服务"></a>分享服务</h2><h1 id="个人感想"><a href="#个人感想" class="headerlink" title="个人感想"></a>个人感想</h1><h1 id="项目源代码下载"><a href="#项目源代码下载" class="headerlink" title="项目源代码下载"></a>项目源代码下载</h1><p><a href="http://download.ringoer.com/oomall-user.zip" target="_blank" rel="noopener">user</a></p><h1 id="项目依赖"><a href="#项目依赖" class="headerlink" title="项目依赖"></a>项目依赖</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>xmu.oomall<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>user<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>user<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">description</span>&gt;</span>3-1 oomall user Service<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">java.version</span>&gt;</span>11<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--normal--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web-services<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--sql--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--redis--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis-reactive<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--json--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--configuration--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--junit--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--eureka-client--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--feign--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--logger--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--swagger--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>Finchley.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configurationFile</span>&gt;</span>mybatis-generator/generatorConfig.xml<span class="tag">&lt;/<span class="name">configurationFile</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">overwrite</span>&gt;</span>true<span class="tag">&lt;/<span class="name">overwrite</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">verbose</span>&gt;</span>true<span class="tag">&lt;/<span class="name">verbose</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> J2EE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> J2EE </tag>
            
            <tag> OOAD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Zuul IDEA配置</title>
      <link href="/J2EE/zuul/"/>
      <url>/J2EE/zuul/</url>
      
        <content type="html"><![CDATA[<p>关于注解@EnableZuulProxy的坑<br><a id="more"></a><br>需要以下依赖：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-zuul<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-zuul<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>其中<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>是重要的一环，因为查看spring官网及spring中央仓库可以发现，spring boot2.1.x及以后对应的cloud版本已经不推荐使用上述jar包，所以需要手动指明版本号</p>]]></content>
      
      
      <categories>
          
          <category> J2EE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> J2EE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20191128 oomall提交订单部分代码解读</title>
      <link href="/J2EE/oomall/"/>
      <url>/J2EE/oomall/</url>
      
        <content type="html"><![CDATA[<p>20191128读邱明老师代码后的解读<br><a id="more"></a></p><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本文章的代码基础：<a href="http://download.ringoer.com/SpringDemo-master.rar" target="_blank" rel="noopener">点我下载</a></p><p>本文章按照自底向上的顺序描述提交订单部分的代码逻辑</p><h1 id="util"><a href="#util" class="headerlink" title="util"></a>util</h1><p>工具类</p><h2 id="Common"><a href="#Common" class="headerlink" title="Common"></a><span id="util-Common">Common</span></h2><ul><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getRandomNum</span><span class="params">(<span class="keyword">int</span> length)</span></span></span><br></pre></td></tr></table></figure><p>传入想要的数字长度，生成唯一随机数</p></li></ul><h2 id="Config"><a href="#Config" class="headerlink" title="Config"></a><span id="util-Config">Config</span></h2><ul><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">getMaxPayTime</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure><p>获得最长付款时间</p><p>实际上就是对于订单付款期限的全局设定</p></li></ul><h2 id="JacksonUtil"><a href="#JacksonUtil" class="headerlink" title="JacksonUtil"></a><span id="util-JacksonUtil">JacksonUtil</span></h2><ul><li>传入json字符串和file，在json字符串中，用field作为key，返回value</li><li>传入json字符串，返回json对象</li><li>传入json字符串，返回map</li><li>传入对象，返回json字符串</li></ul><h2 id="ResponseUtil"><a href="#ResponseUtil" class="headerlink" title="ResponseUtil"></a><span id="util-ResponseUtil">ResponseUtil</span></h2><p>描述了对于一个操作的响应</p><p>每个响应都是一个Map&lt;String, Object&gt;，包括3个字段：</p><ol><li>errno : 错误码</li><li>errmsg : 错误消息</li><li>data : 响应数据</li></ol><p>该工具类存在的主要原因，是为了统一返回格式</p><h1 id="domain"><a href="#domain" class="headerlink" title="domain"></a>domain</h1><p>负责描述所有类</p><p>所有实体类都包含通用的1-5，以下在每个实体类内均只描述其特性</p><ol><li>包含表示一个类的若干字段</li><li>有非功能方法toString()</li><li>有重载方法equals，用于判定两个对象是否是同一对象</li><li>有重载方法hashCode，返回对该对象的id的哈希结果</li><li>各字段均包含public权限的get和set方法</li></ol><h2 id="cart"><a href="#cart" class="headerlink" title="cart"></a>cart</h2><h3 id="CartItem"><a href="#CartItem" class="headerlink" title="CartItem"></a><span id="domain-cart-CartItem">CartItem</span></h3><p>此处与商品的关系表现在，一个CartItem内保存的是Product的id</p><h2 id="coupon"><a href="#coupon" class="headerlink" title="coupon"></a>coupon</h2><h3 id="AbstractCouponStrategy"><a href="#AbstractCouponStrategy" class="headerlink" title="AbstractCouponStrategy"></a><span id="domain-coupon-AbstractCouponStrategy">AbstractCouponStrategy</span></h3><p>一个抽象类，描述了计算一个订单优惠后的价格计算方法</p><p>只具体写了cacuDiscount方法,用于计算适用折扣后的OrderItem列表：</p><ol><li><p>传入OrderItems和couponSn（优惠券序号）</p></li><li><p>判断优惠门槛</p></li><li><p>若满足门槛，计算优惠后的价格</p><ol><li><p>将优惠减免金额平均分配到各商品</p></li><li><p>若理论总价与实际总价不符</p><ul><li><p>寻找数量为1的Item，将差价补偿在该Item上</p></li><li><p>无数量为1的Item</p><ol><li>将第一个Item拆开，变成两个Item，其中一个数量为n-1，另一个为1</li><li>将差价补偿在数量为1的Item上</li></ol></li></ul></li></ol></li><li><p>返回该列表</p></li></ol><p>要求子类实现：</p><ol><li>boolean isEnough方法，判断是否已经满足优惠门槛</li><li>BigDecimal getDealPrice方法，计算折扣后价格</li><li>BigDecimal getError方法，获得理论总价与实际总价的误差</li></ol><h3 id="CashOffStrategy"><a href="#CashOffStrategy" class="headerlink" title="CashOffStrategy"></a><span id="domain-coupon-CashOffStrategy">CashOffStrategy</span></h3><p>策略为满X减Y</p><p>继承了AbstractCouponStrategy类，实现了其中要求的方法，成为实体类，负责计算优惠后的OrderItem列表</p><h3 id="PercentageStrategy"><a href="#PercentageStrategy" class="headerlink" title="PercentageStrategy"></a><span id="domain-coupon-PercentageStrategy">PercentageStrategy</span></h3><p>策略为满X减Y%</p><p>继承了AbstractCouponStrategy类，实现了其中要求的方法，成为实体类，负责计算优惠后的OrderItem列表</p><h3 id="Coupon"><a href="#Coupon" class="headerlink" title="Coupon"></a><span id="domain-coupon-Coupon">Coupon</span></h3><p>包含类内enum类型子类Status。该子类包含2个参数</p><ol><li>String name，表示当前优惠券所处状态</li><li>Integer value，表示该状态的状态码</li></ol><p>同时，有方法：</p><ol><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cacuCouponPrice</span><span class="params">(Order order)</span></span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  借助[CouponRule](#domain-coupon-CouponRule)来计算CouponPrice</span><br><span class="line">  </span><br><span class="line">2. ```java</span><br><span class="line">  public boolean isReadyToUse()</span><br></pre></td></tr></table></figure><p>判断该优惠券当前是否可用</p></li></ol><h3 id="CouponRulePo"><a href="#CouponRulePo" class="headerlink" title="CouponRulePo"></a><span id="domain-coupon-CouponRulePo">CouponRulePo</span></h3><p>描述了作为一个优惠券所需的全部静态信息</p><p>但由于优惠券适用的方法较多，所以方法拆开到另一个类中实现</p><h3 id="CouponRule"><a href="#CouponRule" class="headerlink" title="CouponRule"></a><span id="domain-coupon-CouponRule">CouponRule</span></h3><p>在类中声明一个realObj来与CouponRulePo建立联系</p><p>实现了能用于优惠券的各种方法:</p><ol><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> List&lt;OrderItem&gt; <span class="title">getValidItems</span><span class="params">(List&lt;OrderItem&gt; items)</span></span></span><br></pre></td></tr></table></figure><p>传入订单的子订单列表，返回可以适用所选当前CouponRule的子订单列表</p></li><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> AbstractCouponStrategy <span class="title">getStrategy</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure><p>获得当前CouponRule所属的折扣策略</p></li><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStrategy</span><span class="params">(AbstractCouponStrategy strategy)</span></span></span><br></pre></td></tr></table></figure><p>传入新的折扣策略方案，将当前CouponRule所属折扣测了更新</p></li><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isUsedOnGoods</span><span class="params">(Integer goodsId)</span></span></span><br></pre></td></tr></table></figure><p>传入商品id，判断该商品是否能够使用当前CouponRule</p></li><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">getGoodsIds</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure><p>获得当前CouponRule所适用的商品id列表</p></li><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGoodsIds</span><span class="params">(List&lt;Integer&gt; goodsIds)</span></span></span><br></pre></td></tr></table></figure><p>传入商品id列表，更新当前CouponRule所适用的商品id列表</p></li><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cacuCouponPrice</span><span class="params">(Order order, String couponSn)</span></span></span><br></pre></td></tr></table></figure><p>传入订单和使用的优惠券序号，借助<a href="#domain-coupon-CashOffStrategy">CashOffStrategy</a>，更新订单Items为适用了优惠券策略后的订单Items</p></li></ol><h2 id="goods"><a href="#goods" class="headerlink" title="goods"></a>goods</h2><h3 id="AbstractPaymentStrategy"><a href="#AbstractPaymentStrategy" class="headerlink" title="AbstractPaymentStrategy"></a><span id="domain-goods-AbstractPaymentStrategy">AbstractPaymentStrategy</span></h3><p>仅定义了 活动付款策略 的接口</p><h3 id="Goods"><a href="#Goods" class="headerlink" title="Goods"></a><span id="domain-goods-Goods">Goods</span></h3><p>含有字段products，以此与Product建立联系</p><h3 id="Product"><a href="#Product" class="headerlink" title="Product"></a><span id="domain-goods-Product">Product</span></h3><p>无特性</p><h3 id="PromotionPo"><a href="#PromotionPo" class="headerlink" title="PromotionPo"></a><span id="domain-goods-PromotionPo">PromotionPo</span></h3><p>描述一个商品的优惠活动策略</p><p>无方法</p><h3 id="Promotion"><a href="#Promotion" class="headerlink" title="Promotion"></a><span id="domain-goods-Promotion">Promotion</span></h3><p>实现了PromotionPo需要的方法</p><p>对于PromotionPo和Promotion，看代码完成度，认为应该是未实现</p><p>参考Coupon内的策略写法，应该还有</p><ol><li>填充完整的抽象付款策略类</li><li>未给出的策略类，继承了抽象付款策略类</li></ol><h2 id="order"><a href="#order" class="headerlink" title="order"></a>order</h2><h3 id="Order"><a href="#Order" class="headerlink" title="Order"></a><span id="domain-order-Order">Order</span></h3><p>包含类内enum类型子类Status。该子类包含2个参数</p><ol><li>String name，表示当前订单所处状态</li><li>Integer value，表示该状态的状态码</li></ol><p>含有4种方法：</p><ol><li><p>构造函数</p><p>有2种方案</p><ol><li>不传参数</li><li>传入user和address</li></ol></li><li><p>计算价格</p><ol><li><p>先执行</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cacuDealPrice</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure><p>借助<a href="#domain-coupon-Coupon">Coupon</a>算出使用的优惠券情况</p></li><li><p>再执行</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">cacuTotal</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure><p>算出订单总价</p></li></ol></li><li><p>反向绑定。</p><p>在OrderItem中绑定Order的id</p></li><li><p>借助<a href="#domain-Payment">Payment</a>计算付款方式</p></li></ol><h3 id="OrderItem"><a href="#OrderItem" class="headerlink" title="OrderItem"></a><span id="domain-order-OrderItem">OrderItem</span></h3><p>继承自Cloneable类，这意味着该类实例可以被克隆</p><p>冗余存储productName</p><p>含有2种方法：</p><ol><li>构造函数<ol><li>不传参数</li><li>传入cartItem</li></ol></li><li>重载的clone方法，指示了如何克隆该类的实例</li></ol><h2 id="user"><a href="#user" class="headerlink" title="user"></a>user</h2><h3 id="Address"><a href="#Address" class="headerlink" title="Address"></a><span id="domain-user-Address">Address</span></h3><p>无特性</p><h3 id="User"><a href="#User" class="headerlink" title="User"></a><span id="domain-user-User">User</span></h3><p>无特性</p><h2 id="GrouponOnRule"><a href="#GrouponOnRule" class="headerlink" title="GrouponOnRule"></a><span id="domain-GrouponOnRule">GrouponOnRule</span></h2><p>无特性</p><h2 id="GrouponOnStrategy"><a href="#GrouponOnStrategy" class="headerlink" title="GrouponOnStrategy"></a><span id="domain-GrouponOnStrategy">GrouponOnStrategy</span></h2><p>无特性（该模块代码未完成）</p><h2 id="Payment"><a href="#Payment" class="headerlink" title="Payment"></a><span id="domain-Payment">Payment</span></h2><p>包含类内enum类型子类Status。该子类包含2个参数</p><ol><li>String name，表示当前payment所处状态</li><li>Integer value，表示该状态的状态码</li></ol><p>含有一个不传参数的构造函数</p><h1 id="mapper"><a href="#mapper" class="headerlink" title="mapper"></a>mapper</h1><p>负责直接和数据库交互</p><p>以下各个Mapper均由java文件和xml文件构成，其中：</p><ol><li>java文件定义为接口，提供若干方法</li><li>xml文件用xml语言描述了java文件中的方法的sql实现</li></ol><p>每个类都要加上 <code>@Mapper</code> 注解</p><h2 id="CartItemMapper"><a href="#CartItemMapper" class="headerlink" title="CartItemMapper"></a><span id="mapper-CartItemMapper">CartItemMapper</span></h2><p>提供了2个方法</p><ol><li>传入购物车对象id，以id获得购物车明细</li><li>传入购物车对象列表，删除购物车中指定的项目</li></ol><h2 id="CouponMapper"><a href="#CouponMapper" class="headerlink" title="CouponMapper"></a><span id="mapper-CouponMapper">CouponMapper</span></h2><p>提供了2个方法</p><ol><li>传入优惠券对象id，以id获得一张优惠券的明细</li><li>传入优惠券对象id，以id获得该优惠券所属规则的明细</li></ol><h2 id="GoodsMapper"><a href="#GoodsMapper" class="headerlink" title="GoodsMapper"></a><span id="mapper-GoodsMapper">GoodsMapper</span></h2><p>提供了2个方法</p><ol><li>传入product对象id，以id获得product明细</li><li>传入商品对象id，以id获得商品明细</li></ol><h2 id="OrderMapper"><a href="#OrderMapper" class="headerlink" title="OrderMapper"></a><span id="mapper-OrderMapper">OrderMapper</span></h2><p>提供了3个方法</p><ol><li>传入订单id，以id获得订单明细</li><li>传入订单对象，新增一个订单</li><li>传入子订单列表，新增订单中的所有明细</li></ol><h1 id="dao"><a href="#dao" class="headerlink" title="dao"></a>dao</h1><p>负责数据的交流</p><p>对service层表现为数据来源，对mapper层表现为数据调用者</p><p>每个类都要加上 <code>@Repository</code> 注解</p><p>以下均只描述提供的方法</p><h2 id="CartItemDao"><a href="#CartItemDao" class="headerlink" title="CartItemDao"></a><span id="dao-CartItemDao">CartItemDao</span></h2><p>借助<a href="#mapper-CartItemMapper">CartItemMapper</a>读取数据</p><ul><li>用id返回购物车明细</li></ul><h2 id="CouponDao"><a href="#CouponDao" class="headerlink" title="CouponDao"></a><span id="dao-CouponDao">CouponDao</span></h2><p>借助<a href="#mapper-CouponMapper">CouponMapper</a>读取数据</p><ul><li>用id返回优惠券明细</li></ul><h2 id="GoodsDao"><a href="#GoodsDao" class="headerlink" title="GoodsDao"></a><span id="dao-GoodsDao">GoodsDao</span></h2><p>借助<a href="#mapper-GoodsMapper">GoodsMapper</a>读取数据</p><ul><li>用id返回product明细</li></ul><h2 id="OrderDao"><a href="#OrderDao" class="headerlink" title="OrderDao"></a><span id="dao-OrderDao">OrderDao</span></h2><p>借助<a href="#mapper-OrderMapper">OrderMapper</a>读取数据</p><ul><li>用id返回order明细</li></ul><h1 id="service"><a href="#service" class="headerlink" title="service"></a>service</h1><p>负责业务的具体实现，需要数据的时候均访问dao层</p><p>每个Service都是先提供一个接口，然后写具体的实现（impl）</p><p>每个类都要加上 <code>@Service</code> 注解</p><p>以下省略对接口的描述，直接描述实现</p><h2 id="CartItemServiceImpl"><a href="#CartItemServiceImpl" class="headerlink" title="CartItemServiceImpl"></a><span id="service-CartItemServiceImpl">CartItemServiceImpl</span></h2><ul><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> CartItem <span class="title">findCartItemById</span><span class="params">(Integer id)</span></span></span><br></pre></td></tr></table></figure><p>根据cartItem id，借助<a href="#dao-CartItemDao">CartItemDao</a>，返回该cartItem的明细</p></li><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clearCartItem</span><span class="params">(List&lt;CartItem&gt; cartItems)</span></span></span><br></pre></td></tr></table></figure><p>根据传入的cartItem列表，借助<a href="#mapper-CartItemMapper">CartItemMapper</a>，清除原购物车中的cartItems</p></li></ul><h2 id="CouponServiceImpl"><a href="#CouponServiceImpl" class="headerlink" title="CouponServiceImpl"></a><span id="service-CouponServiceImpl">CouponServiceImpl</span></h2><ul><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Coupon <span class="title">findCouponById</span><span class="params">(Integer id)</span></span></span><br></pre></td></tr></table></figure><p>根据coupon id，借助<a href="#dao-CouponDao">CouponDao</a>，返回该coupon明细</p></li></ul><h2 id="GoodsServiceImpl"><a href="#GoodsServiceImpl" class="headerlink" title="GoodsServiceImpl"></a><span id="service-GoodsServiceImpl">GoodsServiceImpl</span></h2><ul><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Product <span class="title">findProductById</span><span class="params">(Integer id)</span></span></span><br></pre></td></tr></table></figure><p>根据product id，借助<a href="#dao-GoodsDao">GoodsDao</a>，返回该product明细</p></li></ul><h2 id="OrderServiceImpl"><a href="#OrderServiceImpl" class="headerlink" title="OrderServiceImpl"></a><span id="service-OrderServiceImpl">OrderServiceImpl</span></h2><ul><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Order <span class="title">submit</span><span class="params">(Order order, List&lt;CartItem&gt; cartItems)</span></span></span><br></pre></td></tr></table></figure><ol><li>传入空订单和cartItems</li><li>组装订单</li><li>借助<a href="#service-CartItemServiceImpl">CartItemServiceImpl</a>，清除原购物车中在该订单内选中的商品</li><li>使用<a href="#domain-order-Order">Order</a>的cacuDealPrice方法计算优惠价</li><li>使用<a href="#domain-order-Order">Order</a>的cacuPayment方法计算订单总价</li><li>返回组装完成的订单</li></ol></li></ul><h1 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h1><p>负责描述用例</p><h2 id="OrderSubmitVO"><a href="#OrderSubmitVO" class="headerlink" title="OrderSubmitVO"></a><span id="controller-OrderSubmitVO">OrderSubmitVO</span></h2><ol><li><p>该VO类内有4个字段</p><ol><li>cartItems，是Integer类型的List，保存订单内所选中的商品的id</li><li>address，是Address类型，保存订单内选中的地址id</li><li>couponId，是Integer类型，保存订单内选中的优惠券id<ul><li>这也意味着一个订单只能使用一张优惠券</li></ul></li><li>message，是String类型，保存别的消息信息，起到一个备用的作用</li></ol><p>同时，有一个非功能方法：toString()</p></li><li><p>4个字段各自有public权限的get和set方法，用于给Controller使用</p></li><li><p>该VO只用于承接前端提交的订单信息，无其它功能</p></li></ol><h2 id="OrderController"><a href="#OrderController" class="headerlink" title="OrderController"></a><span id="controller-OrderController">OrderController</span></h2><ol><li><p>声明Controller为RestController，设置RMap</p></li><li><p>定义需要使用的服务类的实体，自动装配（Controller内公用）</p><ol><li>OrderService</li><li>CartService</li><li>CouponService</li></ol></li><li><p>进入具体行为（Post）及实现方法submit</p><ol><li><p>submit方法在此处定义为Object类型，表示要返回一个对象。可以看到在该方法结尾有一个return ResponseUtil.ok(retOrder)语句，说明返回到前端的对象就是ResponseUtil.ok(retOrder)的返回值</p><p><a href="#util-ResponseUtil">ResponseUtil类</a></p></li><li><p>回到submit方法，参数列表有1个参数，带有@RequestBody注解，表明参数来自前端传值；同时参数声明为<a href="#controller-OrderSubmitVo">OrderSubmitVo类型</a>，表明前端传值到达后端后先拼装为一个OrderSubmitVo的实例</p></li><li><p>进入方法，可以看到在方法刚开始和即将结束之处都有logger.debug语句，生成调试日志。此处与主要功能无关</p></li><li><p>获得生成一个订单的各种主要信息，包括：</p><ol><li>user</li><li>address</li><li>coupon</li><li>cartitems</li></ol><p>其中coupon需要判空，cartItems则因为前端只传回了cartItems的id，所以需要<a href="#service-CartItemServiceImpl">CartItemServiceImpl</a>来获得每个cartitem的具体信息</p></li><li><p>新建一个空订单，保存除了商品之外的信息（第58行）</p><ol><li>新建一个用商品装填好的订单。此处使用<a href="#service-OrderServiceImpl">OrderServiceImpl</a>的submit方法装填，传入参数为空订单和cartitem列表</li><li>构造返回对象，返回到前端，订单提交结束</li></ol></li></ol></li><li><p>Controller完毕</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> J2EE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> J2EE </tag>
            
            <tag> OOAD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20190926 随录</title>
      <link href="/diary/20190926/"/>
      <url>/diary/20190926/</url>
      
        <content type="html"><![CDATA[<p>记一次由一句注释引发的三小时惨案……</p><a id="more"></a><hr><p>今天想着玩玩spring boot，遂搭了个hello spring的demo</p><p>然后想试试dao和thymeleaf，于是什么都玩玩</p><p>然后发现了这篇文章：</p><p><a href="https://www.jianshu.com/p/efdd7c92640c" target="_blank" rel="noopener">https://www.jianshu.com/p/efdd7c92640c</a></p><p>其中有段代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Autowired</span></span><br><span class="line">        <span class="keyword">private</span> UserService userService;</span><br><span class="line">        <span class="meta">@RequestMapping</span>(<span class="string">"/index"</span>)</span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">(ModelMap modelMap)</span> </span>&#123;</span><br><span class="line">                 modelMap.addAttribute(<span class="string">"host"</span>,<span class="string">"www.baidu.com"</span>);</span><br><span class="line">                 <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>照抄之后，我暂时没有UserService类，所以先把<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> UserService userService;</span><br></pre></td></tr></table></figure></p><p>给注释掉了</p><p>然后惨案就发生了……</p><p>在build的时候，IDEA不停报错，说</p><p><code>Consider defining a bean of type &#39;org.springframework.ui.ModelMap&#39; in your configuration.</code></p><p>为了de这个bug，不停地来往于baidu和google，发现根本没有人遇到和我一样的情况。这是什么意思？？？</p><p>于是一口闷气在我胸口淤积……</p><p>甚至对照了以前的项目也没发现什么问题，External Libraries甚至都是一模一样的……</p><p>差点血都吐出来了，心情差得很</p><p>经过3个小时的思考与辨析，终于发现——————————</p><p>我因为注释掉了那句定义，导致@Autowired影响到了下面的方法！！！！</p><p>因为@Autowired的影响，所以IDEA才会一直问我要Model的bean的definition！！！</p><p>删掉@Autowired和注释后终于正常build了，然后发现返回的是字符串index……</p><p>思考了一下，@RestController是不能返回页面的，想返回页面只能是@Controller，修改之后正常了……</p><p>然而我今天也无心搞下去了，明天再说吧……</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>课程表存档</title>
      <link href="/others/schedule-of-classes/"/>
      <url>/others/schedule-of-classes/</url>
      
        <content type="html"><![CDATA[<p>用来给自己的课程表存档。  </p><p>目前仅大学课程表。  </p><a id="more"></a><hr><p>2020-2021-schedule-1</p><p><img src="http://pic.ringoer.com/2020-2021-schedule-1.png" alt="2019-2020-schedule-1"></p><p>2019-2020-schedule-3</p><p><img src="http://pic.ringoer.com/2019-2020-schedule-3.png" alt="2019-2020-schedule-1"></p><p>2019-2020-schedule-2</p><p><img src="http://pic.ringoer.com/2019-2020-schedule-2.png" alt="2019-2020-schedule-1"></p><p>2019-2020-schedule-1</p><p><img src="http://pic.ringoer.com/2019-2020-schedule-1.png" alt="2019-2020-schedule-1"></p><p>2018-2019-schedule-3</p><p><img src="http://pic.ringoer.com/2018-2019-schedule-3.png" alt="2018-2019-schedule-3"></p><p>2018-2019-schedule-2</p><p><img src="http://pic.ringoer.com/2018-2019-schedule-2.png" alt="2018-2019-schedule-2"></p><p>2018-2019-schedule-1</p><p><img src="http://pic.ringoer.com/2018-2019-schedule-1.png" alt="2018-2019-schedule-1"></p><p>2017-2018-schedule-3</p><p><img src="http://pic.ringoer.com/2017-2018-schedule-3.png" alt="2017-2018-schedule-3"></p><p>2017-2018-schedule-2</p><p><img src="http://pic.ringoer.com/2017-2018-schedule-2.png" alt="2017-2018-schedule-2"></p><p>2017-2018-schedule-1</p><p><img src="http://pic.ringoer.com/2017-2018-schedule-1.png" alt="2017-2018-schedule-1"></p>]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Keras试用 二元线性回归</title>
      <link href="/machineLearning/keras-2/"/>
      <url>/machineLearning/keras-2/</url>
      
        <content type="html"><![CDATA[<p>尝试了二元线性回归。</p><a id="more"></a><hr><p>只有代码和注释。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> keras</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Dense</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#期望平面z=-6x+y+8</span></span><br><span class="line">trX = np.random.uniform(<span class="number">-100</span>, <span class="number">100</span>, size=<span class="number">1001</span>)</span><br><span class="line">trY = np.random.uniform(<span class="number">-100</span>, <span class="number">100</span>, size=<span class="number">1001</span>)</span><br><span class="line">trZ = <span class="number">8</span> - <span class="number">6</span> * trX + trY + np.random.randn(*trX.shape) * <span class="number">0.2</span></span><br><span class="line">trXY = np.array(list(zip(trX,trY)))</span><br><span class="line"></span><br><span class="line">model = Sequential()</span><br><span class="line"><span class="comment">#模型实现输入[x,y]，输出对应的z，属于2个输入决定一个输出，所以</span></span><br><span class="line"><span class="comment">#第一层Dense的input_dim=2</span></span><br><span class="line"><span class="comment">#最后一层Dense的output_dim=1</span></span><br><span class="line">model.add(Dense(input_dim=<span class="number">2</span>, output_dim=<span class="number">200</span>, init=<span class="string">'uniform'</span>, activation=<span class="string">'linear'</span>))</span><br><span class="line">model.add(Dense(input_dim=<span class="number">200</span>, output_dim=<span class="number">1</span>, init=<span class="string">'uniform'</span>, activation=<span class="string">'linear'</span>))</span><br><span class="line"></span><br><span class="line">model.compile(optimizer=<span class="string">'adam'</span>, loss=<span class="string">'mse'</span>)</span><br><span class="line"></span><br><span class="line">model.fit(trXY, trZ, nb_epoch=<span class="number">200</span>, verbose=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">testX = [<span class="number">3</span>,<span class="number">4</span>,<span class="number">0</span>]</span><br><span class="line">testY = [<span class="number">1</span>,<span class="number">0</span>,<span class="number">4</span>]</span><br><span class="line">testXY = np.array(list(zip(testX,testY)))</span><br><span class="line">res = model.predict(testXY)</span><br><span class="line">print(testXY)</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure><p>关于zip()方法</p><p>设有</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">4</span>,<span class="number">7</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=[<span class="number">2</span>,<span class="number">5</span>,<span class="number">8</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c=[<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>]</span><br></pre></td></tr></table></figure><p>则有以下结果：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d=zip(a,b,c)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d</span><br><span class="line">&lt;zip object at <span class="number">0x0000019C55381848</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(d)</span><br><span class="line">[(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>), (<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d=[list(i) <span class="keyword">for</span> i <span class="keyword">in</span> zip(a,b,c)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d</span><br><span class="line">[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]</span><br></pre></td></tr></table></figure></p><p>可见zip()方法的参数列表是可变参数列表，可以传入n个参数</p>]]></content>
      
      
      <categories>
          
          <category> machineLearning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Keras </tag>
            
            <tag> 机器学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Keras试用 线性回归</title>
      <link href="/machineLearning/keras-1/"/>
      <url>/machineLearning/keras-1/</url>
      
        <content type="html"><![CDATA[<p>第一次入门TensorFlow，然后先搞搞Keras。</p><a id="more"></a><hr><p>装环境：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install tensorflow</span><br></pre></td></tr></table></figure><p>没有合适版本的话，检查一下自己的pip是不是最新版的，python是32位还是64位。  </p><p>入门代码：线性回归<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> keras</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Dense</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#生成训练集</span></span><br><span class="line"><span class="comment">#trX和trY表示训练用的1000个点二维坐标的x和y，类型是nparray</span></span><br><span class="line"><span class="comment">#trX中，有1000组数据，每组数据只有1个元素，所以下文中Dense的input_dim=1</span></span><br><span class="line">trX = np.random.uniform(<span class="number">-100</span>, <span class="number">100</span>, size=<span class="number">1000</span>) <span class="comment">#生成1000个在-100~100之间的随机数，返回一个nparray</span></span><br><span class="line">trY = <span class="number">5</span> * trX + <span class="number">6</span> + np.random.randn(*trX.shape) * <span class="number">0.2</span> <span class="comment">#期望y=5x+6，并加入一点点随机波动</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#实例化model为层次模型</span></span><br><span class="line">model = Sequential()</span><br><span class="line"></span><br><span class="line"><span class="comment">#为模型添加layer</span></span><br><span class="line"><span class="comment">#本示例是RNN，所以使用Dense作为layer</span></span><br><span class="line"><span class="comment">#前一个Dense的output_dim必须和后一个的input_dim相同</span></span><br><span class="line"><span class="comment">#第一个Dense的input_dim必须等于训练集输入的每组元素数</span></span><br><span class="line"><span class="comment">#最后一个的output_dim必须等于训练集输出输出的每组元素数</span></span><br><span class="line">model.add(Dense(input_dim=<span class="number">1</span>, output_dim=<span class="number">200</span>, init=<span class="string">'uniform'</span>, activation=<span class="string">'linear'</span>))</span><br><span class="line">model.add(Dense(input_dim=<span class="number">200</span>, output_dim=<span class="number">1</span>, init=<span class="string">'uniform'</span>, activation=<span class="string">'linear'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#编译模型，准备训练</span></span><br><span class="line"><span class="comment">#optimizer是优化器，一般选adam</span></span><br><span class="line"><span class="comment">#loss是损失函数，一般使用mse（均方误差）即可</span></span><br><span class="line"><span class="comment">#loss越小，说明训练效果越好，但要小心过拟合</span></span><br><span class="line">model.compile(optimizer=<span class="string">'adam'</span>, loss=<span class="string">'mse'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#训练</span></span><br><span class="line"><span class="comment">#trX处填写训练集输入，trY处填写训练集输出</span></span><br><span class="line"><span class="comment">#nb_epoch是迭代次数，verbose=1表示在控制台输出每次epoch的信息</span></span><br><span class="line">model.fit(trX, trY, nb_epoch=<span class="number">200</span>, verbose=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#np.array()要求传入一个list，返回一个nparray</span></span><br><span class="line"><span class="comment">#arr.tolist()要求arr是一个nparray，返回一个list</span></span><br><span class="line"><span class="comment">#model.predict要求传入一个nparray</span></span><br><span class="line">l = np.array([<span class="number">3</span>,<span class="number">1</span>,<span class="number">-5</span>,<span class="number">-23</span>,<span class="number">-42</span>,<span class="number">52</span>]) <span class="comment">#测试集</span></span><br><span class="line">res = model.predict(l) <span class="comment">#结果</span></span><br><span class="line">print(l)</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> machineLearning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Keras </tag>
            
            <tag> 机器学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20190715 Python学习随录</title>
      <link href="/python/python-20190715/"/>
      <url>/python/python-20190715/</url>
      
        <content type="html"><![CDATA[<p>学习随录系列</p><a id="more"></a><hr><p>功能：实现对一个由若干行组成、每行均为[0.xxx, 0.xxx, …]格式的json文件的裁剪</p><p>README</p><ol><li><p>在同一目录下新建一个input.txt，其中存放需要转换的文件名。</p><p>！仅文件名，无后缀名，无路径</p></li><li><p>在该目录下放置同名的json文件</p></li><li><p>在该目录启动cmd，运行该py文件</p></li><li><p>本代码只注重效率，未考虑文件读取失败的问题，故请确保有合法输入文件</p></li></ol><p>代码：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"></span><br><span class="line">numbers = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>] <span class="comment">#只保留numbers[i]的整数倍行</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'input.txt'</span>, <span class="string">'rb'</span>) <span class="keyword">as</span> input_file: <span class="comment">#读取文件名</span></span><br><span class="line"></span><br><span class="line">files = input_file.read().decode(<span class="string">'utf-8'</span>).split(<span class="string">'\r'</span>) <span class="comment">#读取.解码.分割</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> filename <span class="keyword">in</span> files: <span class="comment">#遍历</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> filename == <span class="string">'\n'</span> <span class="keyword">or</span> filename == <span class="string">'\r'</span>:</span><br><span class="line"><span class="keyword">break</span> <span class="comment">#防止空行异常跳出</span></span><br><span class="line"><span class="keyword">if</span> filename[<span class="number">0</span>] == <span class="string">'\n'</span>:</span><br><span class="line">filename = filename[<span class="number">1</span>:] <span class="comment">#防止前导换行符</span></span><br><span class="line"><span class="keyword">if</span> filename[len(filename)<span class="number">-1</span>] == <span class="string">'\n'</span>:</span><br><span class="line">filename = filename[:len(filename)<span class="number">-1</span>] <span class="comment">#防止后置换行符</span></span><br><span class="line"></span><br><span class="line">infile = filename + <span class="string">'.'</span> + <span class="string">'json'</span> <span class="comment">#构造输入文件名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> numbers: <span class="comment">#遍历切割依据</span></span><br><span class="line"></span><br><span class="line">outfile = filename + <span class="string">'-'</span> + str(n) + <span class="string">'.'</span> + <span class="string">'json'</span> <span class="comment">#构造输出文件名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(infile, <span class="string">'rb'</span>) <span class="keyword">as</span> fr: <span class="comment">#打开输入文件</span></span><br><span class="line">file_str = fr.read().decode(<span class="string">'utf-8'</span>).split(<span class="string">'['</span>) <span class="comment">#读取.解码.分割</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(outfile, <span class="string">'wb'</span>) <span class="keyword">as</span> fw: <span class="comment">#打开输出文件</span></span><br><span class="line">ans = file_str[<span class="number">0</span>] + <span class="string">'['</span> <span class="comment">#预置</span></span><br><span class="line">i = n + <span class="number">1</span> <span class="comment">#取数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> i &lt; len(file_str): <span class="comment">#取所需行</span></span><br><span class="line">ans += <span class="string">'['</span> + file_str[i] <span class="comment">#构造输出文件</span></span><br><span class="line">i += n</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ans[len(ans)<span class="number">-1</span>] != <span class="string">'&#125;'</span>: <span class="comment">#防止异常结束</span></span><br><span class="line">i = len(ans) - <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> ans[i] != <span class="string">','</span>:</span><br><span class="line">i -= <span class="number">1</span></span><br><span class="line">ans = ans[:i] + <span class="string">']&#125;'</span></span><br><span class="line"></span><br><span class="line">fw.write(ans.encode(<span class="string">'utf-8'</span>)) <span class="comment">#写文件</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>千鈴めい视频合集</title>
      <link href="/vtuber/chisuzumei/"/>
      <url>/vtuber/chisuzumei/</url>
      
        <content type="html"><![CDATA[<p>千鈴めい视频合集</p><p>仅下载链接</p><a id="more"></a><hr><p><a href="http://video.ringoer.com/[千铃鸣]打招呼.flv" target="_blank" rel="noopener">#00 打招呼</a></p><p><a href="http://video.ringoer.com/[千铃鸣]千铃要初次直播了哦-20190403 - 千鈴が初放送するってよ。.flv" target="_blank" rel="noopener">【千铃鸣】千铃要初次直播了哦</a></p><p><a href="http://video.ringoer.com/[千铃鸣]0416初配信节选 夜明けと蛍-夜明けと蛍 修正版[1080P].flv" target="_blank" rel="noopener">【千铃鸣】0416初配信节选 夜明けと蛍</a></p><p><a href="http://video.ringoer.com/[千铃鸣][熟肉]来决定问候语吧！-_02 挨拶を考えます！_x264[高清版].flv" target="_blank" rel="noopener">【千铃鸣】【熟肉】来决定问候语吧！</a></p><p><a href="http://video.ringoer.com/[神回_熟肉][千铃鸣]试着召唤古守了（事故联动回+迫害帕里妈妈-换源千铃联动_x264[高清版].flv" target="_blank" rel="noopener">【神回/熟肉】【千铃鸣】试着召唤古守了（事故联动回+迫害帕里妈妈</a></p><p><a href="http://video.ringoer.com/千铃鸣直播生肉合集-[？4？月？26？日]ギターと仲良くなりたい！！[高清版].flv" target="_blank" rel="noopener">千铃鸣直播生肉合集</a></p><p><a href="http://video.ringoer.com/[千铃鸣]休息是大事哦-mei歌_x264[高清版].flv" target="_blank" rel="noopener">【千铃鸣】休息是大事哦</a></p><p><a href="http://video.ringoer.com/[神回_熟肉]我家千铃是极道大小姐-极道千玲v2[高清版].flv" target="_blank" rel="noopener">【神回/熟肉】我家千铃是极道大小姐</a></p><p><a href="http://video.ringoer.com/[千铃鸣]音酱解剖-吉他歌回3_x264[高清版].flv" target="_blank" rel="noopener">【千铃鸣】音酱解剖</a></p><p><a href="http://video.ringoer.com/[千铃鸣][新OP ED注意]イェイ！イェイ！イェイ！-yeah!yeah！yeah![高清版].flv" target="_blank" rel="noopener">【千铃鸣】【新OP ED注意】イェイ！イェイ！イェイ！</a></p><p><a href="http://video.ringoer.com/[手书_千铃鸣]祝·收益化—千铃鸣来了哦！-第四版[1080P].flv" target="_blank" rel="noopener">【手书/千铃鸣】祝·收益化—千铃鸣来了哦！</a></p><p><a href="http://video.ringoer.com/[千铃鸣]和有栖mana酱双龙联动-双龙联动[高清版].flv" target="_blank" rel="noopener">【千铃鸣】和有栖mana酱双龙联动</a></p><p><a href="http://video.ringoer.com/[千铃鸣]收益化庆祝回-祝！収益化記念ライブ！.flv" target="_blank" rel="noopener">【千铃鸣】收益化庆祝回</a></p><p><a href="http://video.ringoer.com/[千铃鸣]介绍下我家的执事-我が家の執事を紹介[高清版].flv" target="_blank" rel="noopener">【千铃鸣】介绍下我家的执事</a></p><p><a href="http://video.ringoer.com/[千铃鸣]猫又少女的奥数魔刃-猫又少女のASMR[高清版].flv" target="_blank" rel="noopener">【千铃鸣】猫又少女的奥数魔刃</a></p><p><a href="http://video.ringoer.com/[千铃鸣]在寻找古守的家时发现meruto酱-mc&quot;在寻找古守的家时发现meruto酱&quot;[高清版].flv" target="_blank" rel="noopener">【千铃鸣】在寻找古守的家时发现meruto酱</a></p><p><a href="http://video.ringoer.com/[千铃鸣]和吉他打好关系吧！-ギターと仲良くなりたい！！_x264[高清版].flv" target="_blank" rel="noopener">【千铃鸣】和吉他打好关系吧！</a></p><p><a href="http://video.ringoer.com/[千铃鸣]QWOPPart 1-qwop游戏回剪辑_x264[高清版].flv" target="_blank" rel="noopener">【千铃鸣】QWOP Part 1</a></p><p><a href="http://video.ringoer.com/[CCさくら]CLEAR _ 千鈴めい[歌ってみた]-sm35329808_x264[高清版].flv" target="_blank" rel="noopener">【CCさくら】CLEAR_千鈴めい【歌ってみた】</a></p><p><a href="http://video.ringoer.com/[千铃鸣]最终配信-最後になってしまいましたが-a143RDtjuvc_x264[高清版].mp4" target="_blank" rel="noopener">【千铃鸣】最终配信</a></p>]]></content>
      
      
      <categories>
          
          <category> vtuber </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vtuber </tag>
            
            <tag> 千铃鸣 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用 WinPCAP 监听并解析 FTP 口令</title>
      <link href="/experiment/WinPCAP-FTP/"/>
      <url>/experiment/WinPCAP-FTP/</url>
      
        <content type="html"><![CDATA[<p>计算机网络实验4</p><a id="more"></a><h1 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h1><p>用 WinPCAP 监听并分析 FTP 协议并记录 IP、用户名、密码和登陆是否成功。</p><h1 id="实验环境"><a href="#实验环境" class="headerlink" title="实验环境"></a>实验环境</h1><p>Windows10</p><p>C#</p><h1 id="实验结果"><a href="#实验结果" class="headerlink" title="实验结果"></a>实验结果</h1><h2 id="wireshark部分"><a href="#wireshark部分" class="headerlink" title="wireshark部分"></a>wireshark部分</h2><h3 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h3><ol><li>本机向ftp服务器申请连接，flag=SYN</li></ol><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-connect-1.png" alt="connect-1"></p><ol start="2"><li>ftp服务器回复本机，flag=SYN，ACK</li></ol><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-connect-2.png" alt="connect-2"></p><ol start="3"><li>本机收到，向ftp服务器答复，flag=ACK</li></ol><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-connect-3.png" alt="connect-3"></p><ol start="4"><li>ftp服务器收到，向本机发送数据，flag=PSH，ACK</li></ol><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-connect-4.png" alt="connect-4"></p><h3 id="断开"><a href="#断开" class="headerlink" title="断开"></a>断开</h3><ol><li>本机向ftp服务器申请断开，flag=FIN，ACK</li></ol><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-disconnect-1.png" alt="disconnect-1"></p><ol start="2"><li>ftp服务器收到申请，向本机返信，flag=ACK</li></ol><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-disconnect-2.png" alt="disconnect-2"></p><ol start="3"><li>ftp服务器已经断开与本机的连接，向本机发信，flag=FIN，ACK</li></ol><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-disconnect-3.png" alt="disconnect-3"></p><ol start="4"><li>本机收到，断开与ftp服务器连接，向ftp服务器返信，flag=ACK</li></ol><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-disconnect-4.png" alt="disconnect-4"></p><h2 id="监听部分"><a href="#监听部分" class="headerlink" title="监听部分"></a>监听部分</h2><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-监听部分.png" alt="监听部分"></p><h1 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h1><p>大部分与实验三相同。以下解释不同的部分。</p><ol><li><p>全局变量</p><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-1.png" alt="1"></p><p>用FTPmode来表示现在处于解析ftp口令的哪个阶段。取值范围为{“”,”NOW”,”END”}</p><p>用MyDiary数组来保存一整次解析中，生成日志所需的数据。</p><p>用MyXML来保存一整次解析中，生成XML文档所需的数据</p></li><li><p>收包动作</p><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-2.png" alt="2"></p><p>当一整次FTP口令解析完成时，生成日志和XML</p></li><li><p>在get_frame函数中</p><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-3.png" alt="3"></p><p>录入生成日志所需的信息，然后读取用户信息</p></li><li><p>按照COMMAND获取口令</p><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-4.png" alt="4"></p></li><li><p>保存</p><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-5-1.png" alt="5-1"></p><p>停止侦听时询问保存</p><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-5-2.png" alt="5-2"></p><p><img src="http://pic.ringoer.com/用 WinPCAP 监听并解析 FTP 口令-5-3.png" alt="5-3"></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> experiment </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日本語動詞変化式</title>
      <link href="/japanese/doushihenkashiki/"/>
      <url>/japanese/doushihenkashiki/</url>
      
        <content type="html"><![CDATA[<p>本文为动词变形备查表格。  </p><a id="more"></a><p>在本文，以及本博客的整个日语教程中，都有以下全局设定：  </p><ol><li><p>五段活用动词的动词原形是去掉ます的部分  </p><p>示例：思（おも）います中，认为 思い 是动词原形</p></li><li><p>一段活用动词的动词原形是去掉ます的部分  </p><p>示例：食（た）べます中，认为 食べ 是动词原形</p></li><li><p>サ変動詞的动词原形是去掉します的部分  </p><p>示例：散歩（さんぽ）します中，认为 散步 是动词原形</p></li><li><p>对于カ変動詞，因为 来 这个汉字有不同发音，故另做处理</p></li></ol><p>注意，此处认为的动词原形，和动词连用形略有区别。</p><h1 id="五段活用动词"><a href="#五段活用动词" class="headerlink" title="五段活用动词"></a>五段活用动词</h1><p>对于あ行来说，对应あ段的变形，本来应该变为あ，但其实不是，应该变为わ。  </p><p>以下用到的单词：</p><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">意思</th></tr></thead><tbody><tr><td style="text-align:center">買（か）います</td><td style="text-align:center">购买  </td></tr><tr><td style="text-align:center">書（か）きます</td><td style="text-align:center">写  </td></tr><tr><td style="text-align:center">脱（ぬ）ぎます</td><td style="text-align:center">脱  </td></tr><tr><td style="text-align:center">立（た）ちます</td><td style="text-align:center">站立  </td></tr><tr><td style="text-align:center">話（はな）します</td><td style="text-align:center">说话  </td></tr><tr><td style="text-align:center">呼（よ）びます</td><td style="text-align:center">称为、呼喊  </td></tr><tr><td style="text-align:center">死（し）にます</td><td style="text-align:center">死亡  </td></tr><tr><td style="text-align:center">読（よ）みます</td><td style="text-align:center">读  </td></tr><tr><td style="text-align:center">売（う）ります</td><td style="text-align:center">卖</td></tr></tbody></table><h2 id="变形方式"><a href="#变形方式" class="headerlink" title="变形方式"></a>变形方式</h2><ol><li><p>敬体形  </p><p>就是ます形。</p></li><li><p>连用形  </p><p>与动词原形相同。</p></li><li><p>简体形  </p><p>将动词原形结尾的假名，变更为其对应う段。  </p><p>示例：死にます，原形部分结尾的假名是に，对应う段是ぬ，所以死にます的简体形是死ぬ。</p></li><li><p>可能形  </p><p>将动词原形结尾的假名，变更为其对应え段，再加ます/る。  </p><p>新词变形与一段活用动词相同。  </p><p>示例：死にます，原形部分结尾的假名是に，对应え段是ね，所以死にます的可能形是死ねます/死ねる。</p></li><li><p>使役态<br>将动词原形结尾的假名，变更为其对应あ段，再加せ，再加ます/る。  </p><p>新词变形与一段活用动词相同。  </p><p>示例：死にます，原形部分结尾的假名是に，对应あ段是な，所以死にます的使役态是死なせます/死なせる。</p></li><li><p>被动态  </p><p>将动词原形结尾的假名，变更为其对应あ段，再加れ，再加ます/る。  </p><p>新词变形与一段活用动词相同。  </p><p>示例：死にます，原形部分结尾的假名是に，对应あ段是な，所以死にます的使役态是死なれます/死なれる。</p></li><li><p>使役被动态  </p><p>将动词原形结尾的假名，变更为其对应あ段，再加され，再加ます/る。  </p><p>新词变形与一段活用动词相同。  </p><p>示例：死にます，原形部分结尾的假名是に，对应あ段是な，所以死にます的使役态是死なされます/死なされる。</p></li><li><p>假定形  </p><p>将动词原形结尾的假名，变更为其对应え段，再加ば。  </p><p>示例：死にます，原形部分结尾的假名是に，对应え段是ね，所以死にます的假定形是死ねば。</p></li><li><p>命令形  </p><p>将动词原形结尾的假名，变更为其对应え段。  </p><p>示例：死にます，原形部分结尾的假名是に，对应え段是ね，所以死にます的假定形是死ね。</p></li><li><p>意志形  </p><p>   将动词原形结尾的假名，变更为其对应お段，再加う。  </p><p>   示例：死にます，原形部分结尾的假名是に，对应お段是の，所以死にます的假定形是死のう。</p></li><li><p>ない形</p><p>   将动词原形结尾的假名，变更为其对应あ段，再加ない。  </p><p>   新词变形与イ形容词相同。  </p><p>   示例：死にます，原形部分结尾的假名是に，对应あ段是な，所以死にます的ない形是死なない。</p></li><li><p>动词て形  </p><p>   根据动词原形结尾假名不同，分为以下5种情况：  </p><pre><code>1. き结尾，将き变为いて2. ぎ结尾，将ぎ变为いで3. ち、り、い结尾，结尾假名变为って4. び、み、に结尾，结尾假名变为んで5. し结尾，结尾假名变为して  </code></pre><p>   *特别的，行く的て形是行って</p></li><li><p>动词た形</p><p>   将て形中的て变为た、で变为だ即可</p></li></ol><h2 id="变形表格"><a href="#变形表格" class="headerlink" title="变形表格"></a>变形表格</h2><p>除第一列为敬体形参照，假定形、命令形、意志形、ない形、て形、た形均采用其原样，其它列均采用简体形表示。  </p><p>*五段活用动词在变为可能形、使役态、被动态、使役被动态时，可适用一段活用动词的敬体形、简体形变形方式。</p><table><thead><tr><th style="text-align:center">敬体形</th><th style="text-align:center">書きます</th><th style="text-align:center">脱ぎます</th><th style="text-align:center">立ちます</th><th style="text-align:center">売ります</th><th style="text-align:center">買います</th><th style="text-align:center">呼びます</th><th style="text-align:center">読みます</th><th style="text-align:center">死にます</th><th style="text-align:center">話します</th></tr></thead><tbody><tr><td style="text-align:center">连用形</td><td style="text-align:center">書き</td><td style="text-align:center">脱ぎ</td><td style="text-align:center">立ち</td><td style="text-align:center">売り</td><td style="text-align:center">買い</td><td style="text-align:center">呼び</td><td style="text-align:center">読み</td><td style="text-align:center">死に</td><td style="text-align:center">話し</td></tr><tr><td style="text-align:center">简体形</td><td style="text-align:center">書く</td><td style="text-align:center">脱ぐ</td><td style="text-align:center">立つ</td><td style="text-align:center">売る</td><td style="text-align:center">買う</td><td style="text-align:center">呼ぶ</td><td style="text-align:center">読む</td><td style="text-align:center">死ぬ</td><td style="text-align:center">話す</td></tr><tr><td style="text-align:center">可能形</td><td style="text-align:center">書ける</td><td style="text-align:center">脱げる</td><td style="text-align:center">立てる</td><td style="text-align:center">売れる</td><td style="text-align:center">買える</td><td style="text-align:center">呼べる</td><td style="text-align:center">読める</td><td style="text-align:center">死ねる</td><td style="text-align:center">話せる</td></tr><tr><td style="text-align:center">使役态</td><td style="text-align:center">書かせる</td><td style="text-align:center">脱がせる</td><td style="text-align:center">立たせる</td><td style="text-align:center">売らせる</td><td style="text-align:center">買わせる</td><td style="text-align:center">呼ばせる</td><td style="text-align:center">読ませる</td><td style="text-align:center">死なせる</td><td style="text-align:center">話させる</td></tr><tr><td style="text-align:center">被动态</td><td style="text-align:center">書かれる</td><td style="text-align:center">脱がれる</td><td style="text-align:center">立たれる</td><td style="text-align:center">売られる</td><td style="text-align:center">買われる</td><td style="text-align:center">呼ばれる</td><td style="text-align:center">読まれる</td><td style="text-align:center">死なれる</td><td style="text-align:center">話される</td></tr><tr><td style="text-align:center">使役被动态</td><td style="text-align:center">書かされる</td><td style="text-align:center">脱がされる</td><td style="text-align:center">立たされる</td><td style="text-align:center">売らされる</td><td style="text-align:center">買わされる</td><td style="text-align:center">呼ばされる</td><td style="text-align:center">読まされる</td><td style="text-align:center">死なされる</td><td style="text-align:center">話さされる</td></tr><tr><td style="text-align:center">假定形</td><td style="text-align:center">書けば</td><td style="text-align:center">脱げば</td><td style="text-align:center">立てば</td><td style="text-align:center">売れば</td><td style="text-align:center">買えば</td><td style="text-align:center">呼べば</td><td style="text-align:center">読めば</td><td style="text-align:center">死ねば</td><td style="text-align:center">話せば</td></tr><tr><td style="text-align:center">命令形</td><td style="text-align:center">書け</td><td style="text-align:center">脱げ</td><td style="text-align:center">立て</td><td style="text-align:center">売れ</td><td style="text-align:center">買え</td><td style="text-align:center">呼べ</td><td style="text-align:center">読め</td><td style="text-align:center">死ね</td><td style="text-align:center">話せ</td></tr><tr><td style="text-align:center">意志形</td><td style="text-align:center">書こう</td><td style="text-align:center">脱ごう</td><td style="text-align:center">立とう</td><td style="text-align:center">売ろう</td><td style="text-align:center">買おう</td><td style="text-align:center">呼ぼう</td><td style="text-align:center">読もう</td><td style="text-align:center">死のう</td><td style="text-align:center">話そう</td></tr><tr><td style="text-align:center">ない形</td><td style="text-align:center">書かない</td><td style="text-align:center">脱がない</td><td style="text-align:center">立たない</td><td style="text-align:center">売らない</td><td style="text-align:center">買わない</td><td style="text-align:center">呼ばない</td><td style="text-align:center">読まない</td><td style="text-align:center">死なない</td><td style="text-align:center">話さない</td></tr><tr><td style="text-align:center">て形</td><td style="text-align:center">書いて</td><td style="text-align:center">脱いで</td><td style="text-align:center">立って</td><td style="text-align:center">売って</td><td style="text-align:center">買って</td><td style="text-align:center">呼んで</td><td style="text-align:center">読んで</td><td style="text-align:center">死んで</td><td style="text-align:center">話して</td></tr><tr><td style="text-align:center">た形</td><td style="text-align:center">書いた</td><td style="text-align:center">脱いだ</td><td style="text-align:center">立った</td><td style="text-align:center">売った</td><td style="text-align:center">買った</td><td style="text-align:center">呼んだ</td><td style="text-align:center">読んだ</td><td style="text-align:center">死んだ</td><td style="text-align:center">話した</td></tr></tbody></table><h2 id="时态、语气表格"><a href="#时态、语气表格" class="headerlink" title="时态、语气表格"></a>时态、语气表格</h2><p>此处只给出简体形部分，敬体形<a href="http://ringoer.com/Japanese/kihonbunpou" target="_blank" rel="noopener">参看本链接</a></p><p>以「死にます」为例</p><table><thead><tr><th style="text-align:center">时态</th><th style="text-align:center">语气</th><th style="text-align:center">表达</th></tr></thead><tbody><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">肯定式</td><td style="text-align:center">死ぬ</td></tr><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">否定式</td><td style="text-align:center">死なない（ない形）</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">肯定式</td><td style="text-align:center">死んだ（た形）</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">否定式</td><td style="text-align:center">死ななかった（ない形，按イ形容词变化而成的过去式）</td></tr></tbody></table><h1 id="一段活用动词"><a href="#一段活用动词" class="headerlink" title="一段活用动词"></a>一段活用动词</h1><p>以下用到的单词：  </p><p>食（た）べます，吃</p><h2 id="变形方式-1"><a href="#变形方式-1" class="headerlink" title="变形方式"></a>变形方式</h2><ol><li><p>敬体形  </p><p>就是ます形。</p></li><li><p>连用形  </p><p>与动词原形相同。</p></li><li><p>简体形  </p><p>动词原形+る。</p></li><li><p>可能形  </p><p>动词原形+られ，再加ます/る。  </p><p>新词变形与一段活用动词相同。</p></li><li><p>使役态</p><p>动词原形+させ，再加ます/る。  </p><p>新词变形与一段活用动词相同。</p></li><li><p>被动态  </p><p>动词原形+られ，再加ます/る。  </p><p>新词变形与一段活用动词相同。</p></li><li><p>使役被动态  </p><p>动词原形+させられ，再加ます/る。  </p><p>新词变形与一段活用动词相同。</p></li><li><p>假定形  </p><p>动词原形+れば。</p></li><li><p>命令形  </p><p>动词原形+ろ。</p></li><li><p>意志形  </p><p>动词原形+よう。</p></li><li><p>ない形  </p><p>动词原形+ない。</p></li><li><p>动词て形  </p><p>动词原形+て。</p></li><li><p>动词た形  </p><p>动词原形+た。</p></li></ol><h2 id="变形表格-1"><a href="#变形表格-1" class="headerlink" title="变形表格"></a>变形表格</h2><table><thead><tr><th style="text-align:center">敬体形</th><th style="text-align:center">食べます</th></tr></thead><tbody><tr><td style="text-align:center">连用形</td><td style="text-align:center">食べ</td></tr><tr><td style="text-align:center">简体形</td><td style="text-align:center">食べる</td></tr><tr><td style="text-align:center">可能形</td><td style="text-align:center">食べられる</td></tr><tr><td style="text-align:center">使役态</td><td style="text-align:center">食べさせる</td></tr><tr><td style="text-align:center">被动态</td><td style="text-align:center">食べられる</td></tr><tr><td style="text-align:center">使役被动态</td><td style="text-align:center">食べさせられる</td></tr><tr><td style="text-align:center">假定形</td><td style="text-align:center">食べれば</td></tr><tr><td style="text-align:center">命令形</td><td style="text-align:center">食べろ</td></tr><tr><td style="text-align:center">意志形</td><td style="text-align:center">食べよう</td></tr><tr><td style="text-align:center">ない形</td><td style="text-align:center">食べない</td></tr><tr><td style="text-align:center">て形</td><td style="text-align:center">食べて</td></tr><tr><td style="text-align:center">た形</td><td style="text-align:center">食べた</td></tr></tbody></table><h2 id="时态、语气表格-1"><a href="#时态、语气表格-1" class="headerlink" title="时态、语气表格"></a>时态、语气表格</h2><p>此处只给出简体形部分，敬体形<a href="http://ringoer.com/Japanese/kihonbunpou" target="_blank" rel="noopener">参看本链接</a></p><table><thead><tr><th style="text-align:center">时态</th><th style="text-align:center">语气</th><th style="text-align:center">表达</th></tr></thead><tbody><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">肯定式</td><td style="text-align:center">食べる</td></tr><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">否定式</td><td style="text-align:center">食べない（ない形）</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">肯定式</td><td style="text-align:center">食べた（た形）</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">否定式</td><td style="text-align:center">食べなかった（ない形，按イ形容词变化而成的过去式）</td></tr></tbody></table><h1 id="サ変動詞"><a href="#サ変動詞" class="headerlink" title="サ変動詞"></a>サ変動詞</h1><p>以下用到的单词：  </p><p>散歩（さんぽ）します，散步</p><h2 id="变形方式-2"><a href="#变形方式-2" class="headerlink" title="变形方式"></a>变形方式</h2><ol><li><p>敬体形  </p><p>就是ます形。</p></li><li><p>连用形  </p><p>动词原形+し。</p></li><li><p>简体形  </p><p>动词原形+する。</p></li><li><p>可能形  </p><p>动词原形+でき，再加ます/る。  </p><p>新词变形与一段活用动词相同。</p></li><li><p>使役态</p><p>动词原形+させ，再加ます/る。  </p><p>新词变形与一段活用动词相同。</p></li><li><p>被动态  </p><p>动词原形+され，再加ます/る。  </p><p>新词变形与一段活用动词相同。</p></li><li><p>使役被动态  </p><p>动词原形+させられ，再加ます/る。  </p><p>新词变形与一段活用动词相同。</p></li><li><p>假定形  </p><p>动词原形+すれば。</p></li><li><p>命令形  </p><p>动词原形+しろ。</p></li><li><p>意志形  </p><p>动词原形+しよう。</p></li><li><p>ない形  </p><p>动词原形+しない。</p></li><li><p>动词て形  </p><p>动词原形+して。</p></li><li><p>动词た形  </p><p>动词原形+した。</p></li></ol><h2 id="变形表格-2"><a href="#变形表格-2" class="headerlink" title="变形表格"></a>变形表格</h2><table><thead><tr><th style="text-align:center">敬体形</th><th style="text-align:center">散歩します</th></tr></thead><tbody><tr><td style="text-align:center">连用形</td><td style="text-align:center">散歩し</td></tr><tr><td style="text-align:center">简体形</td><td style="text-align:center">散歩する</td></tr><tr><td style="text-align:center">可能形</td><td style="text-align:center">散歩できる</td></tr><tr><td style="text-align:center">使役态</td><td style="text-align:center">散歩させる</td></tr><tr><td style="text-align:center">被动态</td><td style="text-align:center">散歩される</td></tr><tr><td style="text-align:center">使役被动态</td><td style="text-align:center">散歩させられる</td></tr><tr><td style="text-align:center">假定形</td><td style="text-align:center">散歩すれば</td></tr><tr><td style="text-align:center">命令形</td><td style="text-align:center">散歩しろ</td></tr><tr><td style="text-align:center">意志形</td><td style="text-align:center">散歩しよう</td></tr><tr><td style="text-align:center">ない形</td><td style="text-align:center">散歩しない</td></tr><tr><td style="text-align:center">て形</td><td style="text-align:center">散歩して</td></tr><tr><td style="text-align:center">た形</td><td style="text-align:center">散歩した</td></tr></tbody></table><h2 id="时态、语气表格-2"><a href="#时态、语气表格-2" class="headerlink" title="时态、语气表格"></a>时态、语气表格</h2><p>此处只给出简体形部分，敬体形<a href="http://ringoer.com/Japanese/kihonbunpou" target="_blank" rel="noopener">参看本链接</a></p><table><thead><tr><th style="text-align:center">时态</th><th style="text-align:center">语气</th><th style="text-align:center">表达</th></tr></thead><tbody><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">肯定式</td><td style="text-align:center">散歩する</td></tr><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">否定式</td><td style="text-align:center">散歩しない（ない形）</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">肯定式</td><td style="text-align:center">散歩した（た形）</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">否定式</td><td style="text-align:center">散歩しなかった（ない形，按イ形容词变化而成的过去式）</td></tr></tbody></table><h1 id="カ変動詞"><a href="#カ変動詞" class="headerlink" title="カ変動詞"></a>カ変動詞</h1><p>カ変動詞只有一个，就是：  </p><p>来（き）ます，来  </p><p>且几乎每种变形都有一个读音，需要牢记。</p><h2 id="变形方式-3"><a href="#变形方式-3" class="headerlink" title="变形方式"></a>变形方式</h2><ol><li><p>敬体形  </p><p>来（き）ます</p></li><li><p>连用形  </p><p>来（き）</p></li><li><p>简体形  </p><p>来（く）る</p></li><li><p>可能形  </p><p>来（こ）られ，再加ます/る。 </p><p>新词变形与一段活用动词相同。</p></li><li><p>使役态  </p><p>来（こ）させ，再加ます/る。  </p><p>新词变形与一段活用动词相同。</p></li><li><p>被动态  </p><p>来（こ）られ，再加ます/る。  </p><p>新词变形与一段活用动词相同。</p></li><li><p>使役被动态  </p><p>来（こ）させられ，再加ます/る。  </p><p>新词变形与一段活用动词相同。</p></li><li><p>假定形  </p><p>来（く）れば</p></li><li><p>命令形  </p><p>来（こ）い</p></li><li><p>意志形  </p><p>来（こ）よう</p></li><li><p>ない形  </p><p>来（こ）ない</p></li><li><p>动词て形  </p><p>来（き）て</p></li><li><p>动词た形  </p><p>来（き）た</p></li></ol><h2 id="变形表格-3"><a href="#变形表格-3" class="headerlink" title="变形表格"></a>变形表格</h2><table><thead><tr><th style="text-align:center">敬体形</th><th style="text-align:center">きます</th></tr></thead><tbody><tr><td style="text-align:center">连用形</td><td style="text-align:center">き</td></tr><tr><td style="text-align:center">简体形</td><td style="text-align:center">くる</td></tr><tr><td style="text-align:center">可能形</td><td style="text-align:center">こられる</td></tr><tr><td style="text-align:center">使役态</td><td style="text-align:center">こさせる</td></tr><tr><td style="text-align:center">被动态</td><td style="text-align:center">こられる</td></tr><tr><td style="text-align:center">使役被动态</td><td style="text-align:center">こさせられる</td></tr><tr><td style="text-align:center">假定形</td><td style="text-align:center">くれば</td></tr><tr><td style="text-align:center">命令形</td><td style="text-align:center">こい</td></tr><tr><td style="text-align:center">意志形</td><td style="text-align:center">こよう</td></tr><tr><td style="text-align:center">ない形</td><td style="text-align:center">こない</td></tr><tr><td style="text-align:center">て形</td><td style="text-align:center">きて</td></tr><tr><td style="text-align:center">た形</td><td style="text-align:center">きた</td></tr></tbody></table><h2 id="时态、语气表格-3"><a href="#时态、语气表格-3" class="headerlink" title="时态、语气表格"></a>时态、语气表格</h2><p>此处只给出简体形部分，敬体形<a href="http://ringoer.com/Japanese/kihonbunpou" target="_blank" rel="noopener">参看本链接</a></p><table><thead><tr><th style="text-align:center">时态</th><th style="text-align:center">语气</th><th style="text-align:center">表达</th></tr></thead><tbody><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">肯定式</td><td style="text-align:center">くる</td></tr><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">否定式</td><td style="text-align:center">こない（ない形）</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">肯定式</td><td style="text-align:center">きた（た形）</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">否定式</td><td style="text-align:center">こなかった（ない形，按イ形容词变化而成的过去式）</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> japanese </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日语入门向基本文法</title>
      <link href="/japanese/kihonbunpou/"/>
      <url>/japanese/kihonbunpou/</url>
      
        <content type="html"><![CDATA[<p>日语入门向基本文法</p><a id="more"></a><h1 id="词性"><a href="#词性" class="headerlink" title="词性"></a>词性</h1><h2 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h2><p>太简单，此处只说明疑问词。</p><ol><li><p>何</p><p>翻译为：什么</p><p>单字读作なに。</p><p>在句子中时，根据以下规则有变：  </p><ol><li>“何”后面的助词是が、ま、か行的助词时，读なに</li><li>“何”后面的助词是な、だ、た行的助词时，读なん</li><li>不符合1、2时，读なに</li></ol></li><li><p>誰（だれ）</p><p>翻译为：谁</p></li><li><p>何時（なんじ）</p><p>翻译为：什么时候</p><p>一般指精确到时分秒程度的时间</p></li><li><p>何処（どこ）</p><p>翻译为：哪里</p></li><li><p>いつ</p><p>翻译为：什么时候<br>一般指精确到年月日程度的时间</p></li></ol><h2 id="助词"><a href="#助词" class="headerlink" title="助词"></a>助词</h2><ol><li><p>は</p><p>常用于提示主语</p><p>复合句中主句主语用は</p><p>做助词时读wa</p></li><li><p>が</p><p>常用于提示主语</p><p>复合句中从句主语用が</p></li><li><p>を</p><p>常用于有动词的句子中，形式为</p><p>【宾语（名词）】を【动词】</p><p>表示对【宾语】进行【动词】所表示的动作</p><p>做助词时读o</p></li><li><p>へ</p><p>常用于有移动目标的句子中，形式为</p><p>【目的地】へ【（表示移动的）动词】</p><p>表示向着【目的地】进行【动词】所表示的动作</p><p>此处【（表示移动的）动词】一般需要是能表示”从A到B”这样的感觉的动词</p><p>做助词时读e</p></li><li><p>の</p><p>常用于表示从属关系，形式为</p><p>【名词1】の【名词2】</p><p>表示【名词2】是属于【名词1】的类别的</p><p>一般有两种用法：</p><ol><li><p>生徒会長（せいとかいちょう）の彼（かれ）</p><p>译作”身为学生会长的他”</p><p>此时，表示”他”属于”学生会长”这个类别，具有”学生会长”这个属性</p></li><li><p>彼のもの</p><p>译作”他的东西”</p><p>此时，表示”东西”属于”他”这个类别，即为”属于他的东西”</p><p>此时，の译作”的”</p></li></ol></li><li><p>と</p><p>常用于：</p><ol><li><p>连接两个名词，形式为</p><p>【名词1】や【名词2】</p><p>此时连接而成的这个短语可以作为某个句子中的主语组分或宾语组分等</p><p>翻译为：和</p></li><li><p>在特定语法中充当连接成分，如：</p><p>小句 + と思（おも）います</p><p>此时不译</p></li></ol></li><li><p>や</p><p>常用于连接两个名词，形式为</p><p>【名词1】や【名词2】</p><p>连接而成的这个短语可以作为某个句子中的主语组分或宾语组分等</p><p>此时翻译为：或</p></li><li><p>も</p><p>常用于替代は或が</p><p>前接名词</p><p>此时翻译为：也</p></li><li><p>に</p><p>并不基本，以后提到再学习</p></li><li><p>で</p><p>并不基本，以后提到再学习</p></li></ol><h2 id="语气词"><a href="#语气词" class="headerlink" title="语气词"></a>语气词</h2><p>语气词一般放在句尾。</p><p>常见语气词如下：</p><ol><li><p>よ</p><p>～哟</p><p>有以下作用：</p><ol><li><p>表示主张、叮嘱、或引起对方注意。</p><p>  例：あなたが行かなくても、私は行くよ。</p></li><li><p>表示怀疑，责难的语气。</p><p>  例：なぜ、ぼくに教えてくれなかったんだよ。</p></li><li><p>表示命令，请求，接在动词和动词活用形助动词的命令形后面，或接在表示禁止和命令的な后面，一般是男性用语。</p><p>  例：遅くなるから、早く行けよ。</p></li><li><p>表示劝诱，恳求，接在助动词“う，よう”后面。</p><p>  例：さあ、遅れないように早く行こうよ。</p></li></ol></li><li><p>ね</p><p>～呢</p><p>有以下作用：</p><ol><li><p>表示轻微的感叹。</p><p>  例：やあ、ずいぶんきれいな部屋だね。</p><p>  　　いいお天気だね。</p></li><li><p>表示轻微的主张或叮嘱的心情。</p><p>  例：あの人はきっと成功すると思いますね。</p></li><li><p>征求同意，或希望对方确认，促使对方回答。</p><p>  例：もう一度行きましょうね。</p></li><li><p>表示疑问，责问。男性用语。</p><p>  例：私にはよく読めないが、ここになんと書いてあるね。</p></li></ol></li><li><p>よね</p><p>是「よ」和「ね」的复合性终助词。</p><p>有以下作用：</p><ol><li>要求对方同意自己的观点</li><li>表明自己同意对方的观点</li></ol></li><li><p>わ</p><p>主要是女性使用，语调偏高，男性也有用的，但要降调。</p><p>有以下作用：</p><ol><li><p>表示强调，用来调整或加强语气。</p><p>  例：私はこれが好きだわ。</p><p>  　　あそこに田中さんがいるわ。</p><p>  用わよ、わね的形式，前者强调自己的主张，后者希望别人赞成或证实自己的看法。、</p><p>  ​    例：今度の旅行には、私も行くわよ。</p><p>  ​    　　あの花、本当にきれいだわね。</p></li><li><p>表示惊奇，感叹的语气。</p><p>  例：まあ、きれいだわ。</p><p>  　　雨がまた降り出しましたわ。</p></li></ol></li><li><p>の</p><p>主要是女性和儿童使用。</p><ol><li><p>表示断定，语气较亲密。读降调。</p><p>  例：とてもいやなの。</p><p>  　　今おなかがいっぱいなので、何も食べたくないの。</p></li><li><p>表示叮嘱的语气，常用のね的形式。</p><p>  例：きっと引き受けてくれるのね。</p><p>  　　明日は必ず来てくれるのね。待ってますよ。</p></li><li><p>表示命令，语气较强，发音要重。</p><p>  例：ご飯は黙って食べるの。</p></li><li><p>表示质问，疑问。读升调。</p><p>  例：きれいな着物を着て、どこへ行くの。</p></li></ol></li><li><p>ぞ</p><p>一般由男性使用，表示一种强调和肯定的判断，有一种大男子主义的语气。</p></li><li><p>な</p><p>表示说话人再次确认自己的感情等。</p><p>一般是男性使用。 </p></li><li><p>ぜ</p><p>用于说话人单方面向听话人传达语句的内容。想要改变听话人对某事情认识的意图并不强。</p><p>一般是男性使用。</p></li><li><p>さ</p><p>表示说话人并非对所作的判断负责，而是作为理所当然的事情或暂且的判断表示提示。</p><p>一般是男性使用。</p></li><li><p>かな</p><p>   是「か」和「な」的复合性终助词，后面一般接「思う」之类的动词。一般是男性使用。</p></li><li><p>かしら</p><p>   かな的女性版。</p></li></ol><h2 id="动词"><a href="#动词" class="headerlink" title="动词"></a>动词</h2><h3 id="五段活用动词-一类动词"><a href="#五段活用动词-一类动词" class="headerlink" title="五段活用动词/一类动词"></a>五段活用动词/一类动词</h3><p>五段活用，指因为该动词的动词原形结尾有五种情况，所以有五种变形</p><ol><li>き</li><li>ぎ</li><li>ち、り、い</li><li>び、み、に</li><li>し</li></ol><p>无特殊说明的情况下，符合上述形态的动词都是五段活用动词</p><h3 id="一段活用动词-二类动词"><a href="#一段活用动词-二类动词" class="headerlink" title="一段活用动词/二类动词"></a>一段活用动词/二类动词</h3><p>与五段活用相对，一段活用，指该动词不论动词原形结尾是什么形态，都只有一种变形</p><p>无特殊说明的情况下，不是五段活用动词或サ変动词、カ変动词的动词，就是一段活用动词</p><h3 id="サ変动词、カ変动词-三类动词"><a href="#サ変动词、カ変动词-三类动词" class="headerlink" title="サ変动词、カ変动词/三类动词"></a>サ変动词、カ変动词/三类动词</h3><ol><li><p>サ変动词</p><p>无特殊说明的情况下，符合”名词+します”的动词就是サ変动词</p><p>因为这类动词的变形集中在对后面的”します”进行变形，而不管怎么变，这一部分的第一个假名都是さ行的，所以称之为サ変动词</p></li><li><p>カ変动词</p><p>只有一个单词，就是来（き）ます</p><p>因为这个单词的几种变形中，汉字”来”虽然读音不尽相同，但都属于か行，所以称之为カ変动词</p></li></ol><h2 id="形容词"><a href="#形容词" class="headerlink" title="形容词"></a>形容词</h2><h3 id="イ形容词"><a href="#イ形容词" class="headerlink" title="イ形容词"></a>イ形容词</h3><p>无特殊说明的情况下，以い结尾的形容词就是イ形容词</p><h3 id="ナ形容词-形容动词"><a href="#ナ形容词-形容动词" class="headerlink" title="ナ形容词/形容动词"></a>ナ形容词/形容动词</h3><p>无特殊说明的情况下，不以い结尾的形容词就是ナ形容词</p><p>因为该类形容词在使用时通常要加上な，所以称之为ナ形容词</p><h2 id="副词"><a href="#副词" class="headerlink" title="副词"></a>副词</h2><p>一般副词主要有三种：</p><ol><li>天生就是副词，如ごろごろ：无所事事</li><li>イ形容词中，结尾的い变为く</li><li>ナ形容词+に</li></ol><h1 id="敬体形、简体形"><a href="#敬体形、简体形" class="headerlink" title="敬体形、简体形"></a>敬体形、简体形</h1><h2 id="敬体形"><a href="#敬体形" class="headerlink" title="敬体形"></a>敬体形</h2><h3 id="一般陈述句"><a href="#一般陈述句" class="headerlink" title="一般陈述句"></a>一般陈述句</h3><table><thead><tr><th style="text-align:center">时态</th><th style="text-align:center">语气</th><th style="text-align:center">表达</th></tr></thead><tbody><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">肯定式</td><td style="text-align:center">です</td></tr><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">否定式</td><td style="text-align:center">ではありません（此处は读wa）</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">肯定式</td><td style="text-align:center">でした</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">否定式</td><td style="text-align:center">ではありませんでした</td></tr></tbody></table><h3 id="一般动词句"><a href="#一般动词句" class="headerlink" title="一般动词句"></a>一般动词句</h3><table><thead><tr><th style="text-align:center">时态</th><th style="text-align:center">语气</th><th style="text-align:center">表达</th></tr></thead><tbody><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">肯定式</td><td style="text-align:center">ます</td></tr><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">否定式</td><td style="text-align:center">ません</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">肯定式</td><td style="text-align:center">ました</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">否定式</td><td style="text-align:center">ませんでした</td></tr></tbody></table><h3 id="一般形容词句"><a href="#一般形容词句" class="headerlink" title="一般形容词句"></a>一般形容词句</h3><h4 id="イ形容词-1"><a href="#イ形容词-1" class="headerlink" title="イ形容词"></a>イ形容词</h4><p>与一般陈述句相同</p><h4 id="ナ形容词"><a href="#ナ形容词" class="headerlink" title="ナ形容词"></a>ナ形容词</h4><p>与一般陈述句相同</p><h2 id="简体形"><a href="#简体形" class="headerlink" title="简体形"></a>简体形</h2><h3 id="一般陈述句-1"><a href="#一般陈述句-1" class="headerlink" title="一般陈述句"></a>一般陈述句</h3><table><thead><tr><th style="text-align:center">时态</th><th style="text-align:center">语气</th><th style="text-align:center">表达</th></tr></thead><tbody><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">肯定式</td><td style="text-align:center">だ</td></tr><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">否定式</td><td style="text-align:center">ではない（此处は读wa）</td></tr><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">否定式</td><td style="text-align:center">じゃない（ではない的口语化）</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">肯定式</td><td style="text-align:center">だった</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">否定式</td><td style="text-align:center">ではなかった</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">否定式</td><td style="text-align:center">じゃなかった</td></tr></tbody></table><h3 id="一般动词句-1"><a href="#一般动词句-1" class="headerlink" title="一般动词句"></a>一般动词句</h3><p><a href="http://ringoer.com/Japanese/doushihenkashiki" target="_blank" rel="noopener">参看本链接</a></p><h3 id="一般形容词句-1"><a href="#一般形容词句-1" class="headerlink" title="一般形容词句"></a>一般形容词句</h3><h4 id="イ形容词-2"><a href="#イ形容词-2" class="headerlink" title="イ形容词"></a>イ形容词</h4><p>イ形容词的变形体现在对于单词结尾的い的变形</p><table><thead><tr><th style="text-align:center">时态</th><th style="text-align:center">语气</th><th style="text-align:center">表达</th></tr></thead><tbody><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">肯定式</td><td style="text-align:center">～い</td></tr><tr><td style="text-align:center">一般现在时</td><td style="text-align:center">否定式</td><td style="text-align:center">～くない</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">肯定式</td><td style="text-align:center">～かった</td></tr><tr><td style="text-align:center">一般过去时</td><td style="text-align:center">否定式</td><td style="text-align:center">～くなかった</td></tr></tbody></table><h4 id="ナ形容词-1"><a href="#ナ形容词-1" class="headerlink" title="ナ形容词"></a>ナ形容词</h4><p>与一般陈述句相同</p><h1 id="句型"><a href="#句型" class="headerlink" title="句型"></a>句型</h1><h2 id="一般陈述句-2"><a href="#一般陈述句-2" class="headerlink" title="一般陈述句"></a>一般陈述句</h2><ol><li><p>【名词1】は【名词2】です。</p><p>【名词1】是【名词2】</p><p>其中【名词1】是已知的，【名词2】是新引入的。</p><p>示例：</p><p>それはリンゴです。</p><p>那是苹果。（先看到那里有个物件，然后才认出是苹果）</p></li><li><p>【名词1】が【名词2】です。</p><p>【名词1】是【名词2】</p><p>其中【名词2】是已知的，【名词1】是新引入的。</p><p>示例：</p><p>それがリンゴです。</p><p>那是苹果。（先知道有苹果这么一个东西，然后四下张望，看到一个物件）</p></li><li><p>です的变形</p><p>默认的です表达一般现在时，有以下变形。对于每个变形，若无特殊说明，使用时直接替换です即可。</p></li></ol><h2 id="一般疑问句"><a href="#一般疑问句" class="headerlink" title="一般疑问句"></a>一般疑问句</h2><p>直接在小句后加か即可，结尾用句号。</p><p>也可直接问号，但此时有惊叹的效果，故而一般不用。</p><p>示例：</p><p>それはリンゴですか。</p><p>那是苹果吗？  </p><p>有疑问词的句子，发问时只能使用以下句式。</p><p>【疑问词】が【名词】ですか</p><p>不能用は</p><h2 id="一般存在句"><a href="#一般存在句" class="headerlink" title="一般存在句"></a>一般存在句</h2><ol><li><p>有主观意识的存在</p><p>【名词】が【地点】にいます。</p><p>示例：</p><p>猫がそこにいます</p><p>地点成分在句子中可以提前，如：</p><p>そこに猫がいます</p></li><li><p>没有主观意识的存在</p><p>【名词】が【地点】にあります。</p><p>示例：</p><p>花がそこにあります</p><p>地点成分在句子中可以提前，如：</p><p>そこに花があります</p></li><li><p>区别</p><p>有生命的存在，不一定有主观意识。</p><p>如动物有意识，植物没有。</p><p>没有生命的存在，则一定没有意识。</p></li><li><p>います和あります的变形</p><p>います和あります均为动词。</p><p>います的简体形为いる，其它变形与一段活用动词相同。</p><p>あります的简体形为ある，其它变形与五段活用动词相同。</p></li></ol><h2 id="一般动词句-2"><a href="#一般动词句-2" class="headerlink" title="一般动词句"></a>一般动词句</h2><p>【主语】は【宾语】を【动词】ます</p><p>表示【主语】对【宾语】做出了【动词】所表示的动作。</p><h2 id="一般形容词句-2"><a href="#一般形容词句-2" class="headerlink" title="一般形容词句"></a>一般形容词句</h2><h3 id="イ形容词-3"><a href="#イ形容词-3" class="headerlink" title="イ形容词"></a>イ形容词</h3><ol><li><p>【名词】は【イ形容词】です</p><p>表示【名词】是【イ形容词】的。</p><p>示例：</p><p>彼女は美しいです</p><p>她是美丽的</p></li><li><p>【名词】が【イ形容词】です</p><p>表示【名词】是【イ形容词】的。</p><p>此处的【イ形容词】是【名词】的固有属性。</p><p>示例：</p><p>太陽が丸いです</p><p>太阳是圆的</p></li></ol><h3 id="ナ形容词-2"><a href="#ナ形容词-2" class="headerlink" title="ナ形容词"></a>ナ形容词</h3><ol><li><p>【名词】は【ナ形容词】です</p><p>表示【名词】是【ナ形容词】的。</p><p>示例：</p><p>その山は有名です</p><p>那座山是有名的</p></li><li><p>【名词】が【ナ形容词】です</p><p>表示【名词】是【ナ形容词】的。</p><p>此处的【ナ形容词】是【名词】的固有属性。</p><p>示例：</p><p>その花がきれいです</p><p>那朵花是漂亮的</p></li></ol><h1 id="惯用句"><a href="#惯用句" class="headerlink" title="惯用句"></a>惯用句</h1><p>以下句子中，小括号表示对读音的注释。</p><p>若无小括号，则按一般规则处理。</p><table><thead><tr><th style="text-align:center">句子</th><th style="text-align:center">意思</th><th style="text-align:center">备注</th></tr></thead><tbody><tr><td style="text-align:center">こんにちは(wa)</td><td style="text-align:center">你好</td><td style="text-align:center">常用于白天</td></tr><tr><td style="text-align:center">こんばんは(wa)</td><td style="text-align:center">晚上好</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">おはようございます</td><td style="text-align:center">早上好</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">おはよう</td><td style="text-align:center">早上好</td><td style="text-align:center">是上一句的缩写</td></tr><tr><td style="text-align:center">ありがとうございます</td><td style="text-align:center">谢谢</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">ありがとう</td><td style="text-align:center">谢谢</td><td style="text-align:center">是上一句的缩写</td></tr><tr><td style="text-align:center">すみません</td><td style="text-align:center">对不起</td><td style="text-align:center">较正式</td></tr><tr><td style="text-align:center">すいません</td><td style="text-align:center">对不起</td><td style="text-align:center">是上一句的口语形式</td></tr><tr><td style="text-align:center">ごめんなさい</td><td style="text-align:center">对不起</td><td style="text-align:center">较随意，常用于熟人</td></tr><tr><td style="text-align:center">ごめん</td><td style="text-align:center">对不起</td><td style="text-align:center">是上一句的缩写</td></tr><tr><td style="text-align:center">申(もう)し訳(わけ)ございません</td><td style="text-align:center">对不起</td><td style="text-align:center">最为郑重的说法</td></tr><tr><td style="text-align:center">更多句子待更新…</td><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> japanese </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>汉明码</title>
      <link href="/knowledge/HammingCode/"/>
      <url>/knowledge/HammingCode/</url>
      
        <content type="html"><![CDATA[<p>汉明码编码方式详解<br><a id="more"></a></p><h1 id="确定位数"><a href="#确定位数" class="headerlink" title="确定位数"></a>确定位数</h1><p>已知有n位信息码，k位校验码，则在汉明码的构造规则中，应满足：<br>2^k&gt;=n+k+1<br>其中k位校验码应至少有n+k种状态，用来表达n+k位的错误，还有1位用来表示整个代码正确无误。<br>故通常有下表。</p><table><thead><tr><th style="text-align:center">n</th><th style="text-align:center">k（最小）</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">2~4</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">5~11</td><td style="text-align:center">4</td></tr><tr><td style="text-align:center">12~26</td><td style="text-align:center">5</td></tr><tr><td style="text-align:center">27~57</td><td style="text-align:center">6</td></tr><tr><td style="text-align:center">58~120</td><td style="text-align:center">7</td></tr><tr><td style="text-align:center">…</td><td style="text-align:center">…</td></tr></tbody></table><h1 id="构造序列"><a href="#构造序列" class="headerlink" title="构造序列"></a>构造序列</h1><p>设n+k位序列每一位编号分别为1,2,3,…,n+k，k位汉明码分别为C1、C2、C4、…、C2^(k-1)，则对于任意i(1&lt;=i&lt;=k)，C2^(i-1)应放在序列中第i号位置上。<br>示例：<br>现有n=4的信息码，由上表可得k=3，则n+k位序列编号为1~7，k位汉明码编号为C1、C2、C4。同时，设信息码的4位分别为b4、b3、b2、b1，则有下表序列。</p><table><thead><tr><th style="text-align:center">二进制序号</th><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">3</th><th style="text-align:center">4</th><th style="text-align:center">5</th><th style="text-align:center">6</th><th style="text-align:center">7</th></tr></thead><tbody><tr><td style="text-align:center">名称</td><td style="text-align:center">C1</td><td style="text-align:center">C2</td><td style="text-align:center">b4</td><td style="text-align:center">C4</td><td style="text-align:center">b3</td><td style="text-align:center">b2</td><td style="text-align:center">b1</td></tr></tbody></table><p>以此类推。<br>此时，对于任意i(1&lt;=i&lt;=k)，C2^(i-1)负责检测的范围为[i+m*i*2，i*2-1+m*i*2]，m&gt;=0且m为整数<br>以上表为例，则有：<br>C1负责检测1,3,5,7位<br>C2负责检测2,3,6,7位<br>C4负责检测4,5,6,7位</p><h1 id="奇偶校验"><a href="#奇偶校验" class="headerlink" title="奇偶校验"></a>奇偶校验</h1><p>设C2^(i-1)负责检测t位，若为偶校验，则这t位相加，所得结果应为偶数，即二进制为最后一位为0；若为奇校验，则这t位相加，所得结果应为奇数，即二进制位最后一位为1。<br>以上表为例，则有：<br>第1,3,5,7位相加为偶数，C1在第1位，所以C1=(第3位+第5位+第7位)的和取二进制最后一位，简写为C1=3位 + 5位 + 7位，即C1=b4 + b3 + b1<br>第2,3,6,7位相加为偶数，C2在第2位，所以C2=3位 + 6位 + 7位，即C2=b4 + b2 + b1<br>第4,5,6,7位相加为偶数，C4在第4位，所以C4=5位 + 6位 + 7位，即C4=b3 + b2 + b1</p><p>若设信息码为0101，采用偶校验，则<br>C1=0+1+1=0<br>C2=0+0+1=1<br>C4=1+0+1=0<br>所以信息码0101对应的汉明码为0100101</p><h1 id="纠错过程"><a href="#纠错过程" class="headerlink" title="纠错过程"></a>纠错过程</h1><p>前面说到，对于任意i(1&lt;=i&lt;=k)，C2^(i-1)负责检测的范围为[i+m*i*2，i*2-1+m*i*2]，m&gt;=0且m为整数。则收信一方只需要按该规则重新计算即可。<br>于是，设对于任意i(1&lt;=i&lt;=k)，已知C2^(i-1)负责检测t位，则有P2^(i-1)=∑这t位（包括C2^(i-1)所在位）。<br>接上例，则有：<br>P4=4位 + 5位 + 6位 + 7位<br>P2=2位 + 3位 + 6位 + 7位<br>P1=1位 + 3位 + 5位 + 7位<br>若全0，则表示信息完全正确</p><p>若此时设收到的码字为0100111，则通过计算，得：<br>P4=0+1+1+1=1<br>P2=1+0+1+1=1<br>P1=0+0+1+1=0<br>说明C1负责的分组没错，C2和C4负责的分组有错。<br>经检查发现，只有计算结果110对应第110位（也就是第6位）有错。此时计算机会直接修改第110位，于是完成纠错。</p><p>又若正确码字为0100101，收到码字为1100101，则通过计算，得：<br>P4=0+1+0+1=0<br>P2=1+0+0+1=0<br>P1=1+0+1+1=1<br>此时P4P2P1=001，所以第1位出错，应该修改第1位。但因为第1位是C1所在地，是校验位，对信息码没有影响，故一般不纠正此处错误。</p><p>以上，就是汉明码的工作过程。</p>]]></content>
      
      
      <categories>
          
          <category> knowledge </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 汉明码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日语入门向基本单词</title>
      <link href="/japanese/kihontango/"/>
      <url>/japanese/kihontango/</url>
      
        <content type="html"><![CDATA[<p>日语入门向基本单词</p><a id="more"></a><h1 id="人称"><a href="#人称" class="headerlink" title="人称"></a>人称</h1><h2 id="我"><a href="#我" class="headerlink" title="我"></a>我</h2><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">通常适用范围</th></tr></thead><tbody><tr><td style="text-align:center">私（わたし）</td><td style="text-align:center">共通</td></tr><tr><td style="text-align:center">俺（おれ）</td><td style="text-align:center">男性</td></tr><tr><td style="text-align:center">僕（ぼく）</td><td style="text-align:center">男性</td></tr><tr><td style="text-align:center">吾輩（わがはい）</td><td style="text-align:center">文人/咒术师等等</td></tr><tr><td style="text-align:center">あたし</td><td style="text-align:center">女性</td></tr><tr><td style="text-align:center">うち</td><td style="text-align:center">女性</td></tr></tbody></table><p>没有绝对的情况，想用什么其实都可以，只不过别人可能觉得你有点奇怪</p><h2 id="你"><a href="#你" class="headerlink" title="你"></a>你</h2><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">通常适用范围</th></tr></thead><tbody><tr><td style="text-align:center">君（きみ）</td><td style="text-align:center">对同辈、晚辈</td></tr><tr><td style="text-align:center">貴方（あなた）</td><td style="text-align:center">对陌生人，或女人称呼丈夫</td></tr><tr><td style="text-align:center">お前（まえ）</td><td style="text-align:center">对同辈、晚辈。比较不礼貌</td></tr><tr><td style="text-align:center">貴様（きさま）</td><td style="text-align:center">一般用于斥责</td></tr><tr><td style="text-align:center">～さん</td><td style="text-align:center">「～」处填入对方姓名，共通</td></tr><tr><td style="text-align:center">～くん</td><td style="text-align:center">「～」处填入对方姓名，男性</td></tr><tr><td style="text-align:center">～ちゃん</td><td style="text-align:center">「～」处填入对方姓名，女性</td></tr></tbody></table><h2 id="他-她-它"><a href="#他-她-它" class="headerlink" title="他/她/它"></a>他/她/它</h2><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">通常适用范围</th></tr></thead><tbody><tr><td style="text-align:center">彼（かれ）</td><td style="text-align:center">男性</td></tr><tr><td style="text-align:center">彼女（かのじょ）</td><td style="text-align:center">女性</td></tr><tr><td style="text-align:center">あの～</td><td style="text-align:center">「～」处填入「它」的种类</td></tr></tbody></table><h2 id="～们"><a href="#～们" class="headerlink" title="～们"></a>～们</h2><p>一般用「～たち」或者「～ら」表示。</p><p>以下为示例。</p><table><thead><tr><th style="text-align:center">中文</th><th style="text-align:center">日文</th></tr></thead><tbody><tr><td style="text-align:center">我们</td><td style="text-align:center">私たち</td></tr><tr><td style="text-align:center">你们</td><td style="text-align:center">君たち</td></tr><tr><td style="text-align:center">他们</td><td style="text-align:center">彼たち</td></tr><tr><td style="text-align:center">那些猫</td><td style="text-align:center">あの猫たち</td></tr></tbody></table><h1 id="方位"><a href="#方位" class="headerlink" title="方位"></a>方位</h1><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">通常适用范围</th></tr></thead><tbody><tr><td style="text-align:center">ここ</td><td style="text-align:center">这里（离说话人更近）</td></tr><tr><td style="text-align:center">そこ</td><td style="text-align:center">那里（离听话人更近）</td></tr><tr><td style="text-align:center">あそこ</td><td style="text-align:center">那里（离双方都远）</td></tr><tr><td style="text-align:center">こちら</td><td style="text-align:center">ここ的较为尊敬的说法</td></tr><tr><td style="text-align:center">そちら</td><td style="text-align:center">そこ的较为尊敬的说法</td></tr><tr><td style="text-align:center">あちら</td><td style="text-align:center">あそこ的较为尊敬的说法</td></tr><tr><td style="text-align:center">こっち</td><td style="text-align:center">こちら的口语形式</td></tr><tr><td style="text-align:center">そっち</td><td style="text-align:center">そちら的口语形式</td></tr><tr><td style="text-align:center">あっち</td><td style="text-align:center">あちら的口语形式</td></tr><tr><td style="text-align:center">中（なか）</td><td style="text-align:center">中间</td></tr><tr><td style="text-align:center">前（まえ）</td><td style="text-align:center">前面</td></tr><tr><td style="text-align:center">後（うし）ろ</td><td style="text-align:center">后面</td></tr><tr><td style="text-align:center">上（うえ）</td><td style="text-align:center">上面</td></tr><tr><td style="text-align:center">下（した）</td><td style="text-align:center">下面</td></tr><tr><td style="text-align:center">左（ひだり）</td><td style="text-align:center">左边</td></tr><tr><td style="text-align:center">右（みぎ）</td><td style="text-align:center">右边</td></tr><tr><td style="text-align:center">内（うち）</td><td style="text-align:center">里边</td></tr><tr><td style="text-align:center">外（そと）</td><td style="text-align:center">外边</td></tr></tbody></table><h1 id="数字"><a href="#数字" class="headerlink" title="数字"></a>数字</h1><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">读音</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">れい/ぜろ</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">いち</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">に</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">さん</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">し/よん</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">ご</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">ろく</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">しち/なな</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">はち</td></tr><tr><td style="text-align:center">9</td><td style="text-align:center">きゅう/く</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">じゅう</td></tr><tr><td style="text-align:center">11</td><td style="text-align:center">じゅういち</td></tr><tr><td style="text-align:center">20</td><td style="text-align:center">にじゅう</td></tr><tr><td style="text-align:center">40</td><td style="text-align:center">しじゅう</td></tr><tr><td style="text-align:center">70</td><td style="text-align:center">しちじゅう</td></tr><tr><td style="text-align:center">90</td><td style="text-align:center">きゅうじゅう</td></tr><tr><td style="text-align:center">100</td><td style="text-align:center">ひゃく</td></tr><tr><td style="text-align:center">200</td><td style="text-align:center">にひゃく</td></tr><tr><td style="text-align:center">300</td><td style="text-align:center">さんびゃく</td></tr><tr><td style="text-align:center">400</td><td style="text-align:center">よんひゃく</td></tr><tr><td style="text-align:center">600</td><td style="text-align:center">ろっぴゃく</td></tr><tr><td style="text-align:center">700</td><td style="text-align:center">ななひゃく</td></tr><tr><td style="text-align:center">800</td><td style="text-align:center">はっぴゃく</td></tr><tr><td style="text-align:center">1000</td><td style="text-align:center">いちせん</td></tr><tr><td style="text-align:center">10000</td><td style="text-align:center">いちまん</td></tr><tr><td style="text-align:center">一億</td><td style="text-align:center">いちおく</td></tr><tr><td style="text-align:center">数～</td><td style="text-align:center">すう～</td></tr><tr><td style="text-align:center">何～</td><td style="text-align:center">なん～</td></tr></tbody></table><p>「数～」的示例：</p><p>数年（すうねん），几年。</p><p>与英语 some years 相同。</p><p>「何～」的示例：</p><p>何年（なんねん），几年。</p><p>与英语 what year 相同。</p><p>没提及的可以按照规律推算，比如11是10的读音和1的读音拼起来，那么12就是10和2拼起来，变成じゅうに。</p><p>其中7做个位时，读しち或者なな都可以，做高位时，读しち。4、9同理。</p><p>拼接亦可用于多个不同等级数字间，如837=800+30+7，则读音为</p><p>はっぴゃくさんじゅうしち</p><h1 id="个数"><a href="#个数" class="headerlink" title="个数"></a>个数</h1><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">读音</th><th style="text-align:center">意思</th></tr></thead><tbody><tr><td style="text-align:center">一つ</td><td style="text-align:center">ひとつ</td><td style="text-align:center">一个</td></tr><tr><td style="text-align:center">二つ</td><td style="text-align:center">ふたつ</td><td style="text-align:center">两个</td></tr><tr><td style="text-align:center">三つ</td><td style="text-align:center">みっつ</td><td style="text-align:center">三个</td></tr><tr><td style="text-align:center">四つ</td><td style="text-align:center">よっつ</td><td style="text-align:center">四个</td></tr><tr><td style="text-align:center">五つ</td><td style="text-align:center">いつつ</td><td style="text-align:center">五个</td></tr><tr><td style="text-align:center">六つ</td><td style="text-align:center">むっつ</td><td style="text-align:center">六个</td></tr><tr><td style="text-align:center">七つ</td><td style="text-align:center">ななつ</td><td style="text-align:center">七个</td></tr><tr><td style="text-align:center">八つ</td><td style="text-align:center">やっつ</td><td style="text-align:center">八个</td></tr><tr><td style="text-align:center">九つ</td><td style="text-align:center">ここのつ</td><td style="text-align:center">九个</td></tr><tr><td style="text-align:center">十つ</td><td style="text-align:center">とおつ</td><td style="text-align:center">十个</td></tr><tr><td style="text-align:center">何つ</td><td style="text-align:center">なんつ</td><td style="text-align:center">几个</td></tr></tbody></table><h1 id="人数"><a href="#人数" class="headerlink" title="人数"></a>人数</h1><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">读音</th><th style="text-align:center">意思</th></tr></thead><tbody><tr><td style="text-align:center">一人</td><td style="text-align:center">ひとり</td><td style="text-align:center">一个人</td></tr><tr><td style="text-align:center">二人</td><td style="text-align:center">ふたり</td><td style="text-align:center">两个人</td></tr><tr><td style="text-align:center">三人</td><td style="text-align:center">さんにん</td><td style="text-align:center">三个人</td></tr><tr><td style="text-align:center">四人</td><td style="text-align:center">よんにん</td><td style="text-align:center">四个人</td></tr><tr><td style="text-align:center">五人</td><td style="text-align:center">ごにん</td><td style="text-align:center">五个人</td></tr><tr><td style="text-align:center">六人</td><td style="text-align:center">ろくにん</td><td style="text-align:center">六个人</td></tr><tr><td style="text-align:center">七人</td><td style="text-align:center">しちにん</td><td style="text-align:center">七个人</td></tr><tr><td style="text-align:center">八人</td><td style="text-align:center">はちにん</td><td style="text-align:center">八个人</td></tr><tr><td style="text-align:center">九人</td><td style="text-align:center">きゅうにん</td><td style="text-align:center">九个人</td></tr><tr><td style="text-align:center">十人</td><td style="text-align:center">じゅうにん</td><td style="text-align:center">十个人</td></tr><tr><td style="text-align:center">何人</td><td style="text-align:center">なんにん</td><td style="text-align:center">几个人</td></tr></tbody></table><h1 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h1><h2 id="时-分-秒"><a href="#时-分-秒" class="headerlink" title="时/分/秒"></a>时/分/秒</h2><ul><li><p>时</p><p>直接数字+時（じ）即可</p><p>示例：7時（しちじ）-&gt;7点</p></li><li><p>分</p></li></ul><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">读音</th><th style="text-align:center">单词</th><th style="text-align:center">读音</th><th style="text-align:center">单词</th><th style="text-align:center">读音</th></tr></thead><tbody><tr><td style="text-align:center">1分</td><td style="text-align:center">いっぷん</td><td style="text-align:center">2分</td><td style="text-align:center">にふん</td><td style="text-align:center">3分</td><td style="text-align:center">さんぷん</td></tr><tr><td style="text-align:center">4分</td><td style="text-align:center">よんぷん</td><td style="text-align:center">5分</td><td style="text-align:center">ごふん</td><td style="text-align:center">6分</td><td style="text-align:center">ろっぷん</td></tr><tr><td style="text-align:center">7分</td><td style="text-align:center">ななふん</td><td style="text-align:center">8分</td><td style="text-align:center">はちふん/はっぷん</td><td style="text-align:center">9分</td><td style="text-align:center">きゅうふん</td></tr><tr><td style="text-align:center">10分</td><td style="text-align:center">じっぷん/じゅっぷん</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table><ul><li><p>秒</p><p>除了下面几个特殊的以外，其余均为数字读法+秒（びょう）</p></li></ul><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">读音</th></tr></thead><tbody><tr><td style="text-align:center">4秒</td><td style="text-align:center">よんびょう</td></tr><tr><td style="text-align:center">7秒</td><td style="text-align:center">ななびょう</td></tr><tr><td style="text-align:center">9秒</td><td style="text-align:center">きゅうびょう</td></tr></tbody></table><h2 id="一天的变化"><a href="#一天的变化" class="headerlink" title="一天的变化"></a>一天的变化</h2><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">读音</th><th style="text-align:center">意思</th></tr></thead><tbody><tr><td style="text-align:center">朝</td><td style="text-align:center">あさ</td><td style="text-align:center">早上</td></tr><tr><td style="text-align:center">午前</td><td style="text-align:center">ごぜん</td><td style="text-align:center">早上（可用于与时分秒搭配）</td></tr><tr><td style="text-align:center">昼</td><td style="text-align:center">ひる</td><td style="text-align:center">中午</td></tr><tr><td style="text-align:center">午後</td><td style="text-align:center">ごご</td><td style="text-align:center">下午（可用于与时分秒搭配）</td></tr><tr><td style="text-align:center">夕方</td><td style="text-align:center">ゆうがた</td><td style="text-align:center">傍晚</td></tr><tr><td style="text-align:center">晩</td><td style="text-align:center">ばん</td><td style="text-align:center">晚上（稍早些）</td></tr><tr><td style="text-align:center">夜</td><td style="text-align:center">よる</td><td style="text-align:center">夜晚（稍晚些）</td></tr></tbody></table><h2 id="星期"><a href="#星期" class="headerlink" title="星期"></a>星期</h2><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">读音</th><th style="text-align:center">意思</th></tr></thead><tbody><tr><td style="text-align:center">月曜日</td><td style="text-align:center">げつようび</td><td style="text-align:center">周一</td></tr><tr><td style="text-align:center">火曜日</td><td style="text-align:center">かようび</td><td style="text-align:center">周二</td></tr><tr><td style="text-align:center">水曜日</td><td style="text-align:center">すいようび</td><td style="text-align:center">周三</td></tr><tr><td style="text-align:center">木曜日</td><td style="text-align:center">もくようび</td><td style="text-align:center">周四</td></tr><tr><td style="text-align:center">金曜日</td><td style="text-align:center">きんようび</td><td style="text-align:center">周五</td></tr><tr><td style="text-align:center">土曜日</td><td style="text-align:center">どようび</td><td style="text-align:center">周六</td></tr><tr><td style="text-align:center">日曜日</td><td style="text-align:center">にちようび</td><td style="text-align:center">周日</td></tr><tr><td style="text-align:center">何曜日</td><td style="text-align:center">なんようび</td><td style="text-align:center">星期几</td></tr></tbody></table><h2 id="四季"><a href="#四季" class="headerlink" title="四季"></a>四季</h2><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">读音</th><th style="text-align:center">意思</th></tr></thead><tbody><tr><td style="text-align:center">春</td><td style="text-align:center">はる</td><td style="text-align:center">春天</td></tr><tr><td style="text-align:center">夏</td><td style="text-align:center">なつ</td><td style="text-align:center">夏天</td></tr><tr><td style="text-align:center">秋</td><td style="text-align:center">あき</td><td style="text-align:center">秋天</td></tr><tr><td style="text-align:center">冬</td><td style="text-align:center">ふゆ</td><td style="text-align:center">冬天</td></tr><tr><td style="text-align:center">春季</td><td style="text-align:center">しゅんき</td><td style="text-align:center">春季</td></tr><tr><td style="text-align:center">夏季</td><td style="text-align:center">かき</td><td style="text-align:center">夏季</td></tr><tr><td style="text-align:center">秋季</td><td style="text-align:center">しゅうき</td><td style="text-align:center">秋季</td></tr><tr><td style="text-align:center">冬季</td><td style="text-align:center">とうき</td><td style="text-align:center">冬季</td></tr></tbody></table><h2 id="年-月-日期"><a href="#年-月-日期" class="headerlink" title="年/月/日期"></a>年/月/日期</h2><ul><li><p>年</p><p>直接数字+年（ねん）即可</p><p>示例：7年（しちねん）</p></li><li><p>月</p><p>直接数字+月（がつ）即可</p><p>示例：7月（しちがつ）</p><p>注：作为“几月”的一部分时，月读がつ；其他时候一般读げつ</p></li></ul><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">读音</th><th style="text-align:center">单词</th><th style="text-align:center">读音</th><th style="text-align:center">单词</th><th style="text-align:center">读音</th><th style="text-align:center">单词</th><th style="text-align:center">读音</th></tr></thead><tbody><tr><td style="text-align:center">1日</td><td style="text-align:center">ついたち</td><td style="text-align:center">2日</td><td style="text-align:center">ふつか</td><td style="text-align:center">3日</td><td style="text-align:center">みっか</td><td style="text-align:center">4日</td><td style="text-align:center">よっか</td></tr><tr><td style="text-align:center">5日</td><td style="text-align:center">いつか</td><td style="text-align:center">6日</td><td style="text-align:center">むいか</td><td style="text-align:center">7日</td><td style="text-align:center">なのか</td><td style="text-align:center">8日</td><td style="text-align:center">ようか</td></tr><tr><td style="text-align:center">9日</td><td style="text-align:center">ここのか</td><td style="text-align:center">10日</td><td style="text-align:center">とおか</td><td style="text-align:center">11日</td><td style="text-align:center">じゅういちにち</td><td style="text-align:center">12日</td><td style="text-align:center">じゅうににち</td></tr><tr><td style="text-align:center">13日</td><td style="text-align:center">じゅうさんにち</td><td style="text-align:center">14日</td><td style="text-align:center">じゅうよっか</td><td style="text-align:center">15日</td><td style="text-align:center">じゅうごにち</td><td style="text-align:center">16日</td><td style="text-align:center">じゅうろくにち</td></tr><tr><td style="text-align:center">17日</td><td style="text-align:center">じゅうしちにち</td><td style="text-align:center">18日</td><td style="text-align:center">じゅうはちにち</td><td style="text-align:center">19日</td><td style="text-align:center">じゅうくにち</td><td style="text-align:center">20日</td><td style="text-align:center">はつか</td></tr><tr><td style="text-align:center">21日</td><td style="text-align:center">にじゅういちにち</td><td style="text-align:center">22日</td><td style="text-align:center">にじゅうににち</td><td style="text-align:center">23日</td><td style="text-align:center">にじゅうさんにち</td><td style="text-align:center">24日</td><td style="text-align:center">にじゅうよっか</td></tr><tr><td style="text-align:center">25日</td><td style="text-align:center">にじゅうごにち</td><td style="text-align:center">26日</td><td style="text-align:center">にじゅうろくにち</td><td style="text-align:center">27日</td><td style="text-align:center">にじゅうしちにち</td><td style="text-align:center">28日</td><td style="text-align:center">にじゅうはちにち</td></tr><tr><td style="text-align:center">29日</td><td style="text-align:center">にじゅうくにち</td><td style="text-align:center">30日</td><td style="text-align:center">さんじゅう</td><td style="text-align:center">31日</td><td style="text-align:center">さんじゅういちにち</td><td style="text-align:center">何日</td><td style="text-align:center">なんにち</td></tr></tbody></table><ul><li><p>时段</p><p>对于年/时/分/秒，直接数字+間（かん）即可</p><p>示例：7年間（しちねんかん）-&gt;7年</p><p>对于月，用数字+月間（げつかん）即可</p><p>对于日，用数字+日間（にちかん）即可</p></li><li><p>多久以前</p></li></ul><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">读音</th><th style="text-align:center">意思</th></tr></thead><tbody><tr><td style="text-align:center">～前</td><td style="text-align:center">～ぜん</td><td style="text-align:center">前接时间，表示多长时间以前</td></tr><tr><td style="text-align:center">～後</td><td style="text-align:center">～ご</td><td style="text-align:center">前接时间，表示多长时间以后</td></tr></tbody></table><p>示例：三年前（さんねんぜん）</p><h2 id="今天-本周-本月-本年"><a href="#今天-本周-本月-本年" class="headerlink" title="今天/本周/本月/本年"></a>今天/本周/本月/本年</h2><table><thead><tr><th style="text-align:center">单词</th><th style="text-align:center">读音</th><th style="text-align:center">意思</th></tr></thead><tbody><tr><td style="text-align:center">一昨日</td><td style="text-align:center">おととい</td><td style="text-align:center">前天</td></tr><tr><td style="text-align:center">昨日</td><td style="text-align:center">きのう</td><td style="text-align:center">昨天</td></tr><tr><td style="text-align:center">今日</td><td style="text-align:center">きょう</td><td style="text-align:center">今天</td></tr><tr><td style="text-align:center">明日</td><td style="text-align:center">あした/あす</td><td style="text-align:center">明天</td></tr><tr><td style="text-align:center">明後日</td><td style="text-align:center">あさって</td><td style="text-align:center">后天</td></tr><tr><td style="text-align:center">先々周</td><td style="text-align:center">せんせんしゅう</td><td style="text-align:center">上上周</td></tr><tr><td style="text-align:center">先周</td><td style="text-align:center">せんしゅう</td><td style="text-align:center">上周</td></tr><tr><td style="text-align:center">今周</td><td style="text-align:center">こんしゅう</td><td style="text-align:center">本周</td></tr><tr><td style="text-align:center">来周</td><td style="text-align:center">らいしゅう</td><td style="text-align:center">下周</td></tr><tr><td style="text-align:center">再来周</td><td style="text-align:center">さらいしゅう</td><td style="text-align:center">下下周</td></tr><tr><td style="text-align:center">先々月</td><td style="text-align:center">せんせんげつ</td><td style="text-align:center">上上个月</td></tr><tr><td style="text-align:center">先月</td><td style="text-align:center">せんげつ</td><td style="text-align:center">上个月</td></tr><tr><td style="text-align:center">今月</td><td style="text-align:center">こんげつ</td><td style="text-align:center">本月</td></tr><tr><td style="text-align:center">来月</td><td style="text-align:center">らいげつ</td><td style="text-align:center">下个月</td></tr><tr><td style="text-align:center">再来月</td><td style="text-align:center">さらいげつ</td><td style="text-align:center">下下个月</td></tr><tr><td style="text-align:center">前年</td><td style="text-align:center">ぜんねん</td><td style="text-align:center">前年</td></tr><tr><td style="text-align:center">一昨年</td><td style="text-align:center">おととし</td><td style="text-align:center">前年</td></tr><tr><td style="text-align:center">去年</td><td style="text-align:center">きょねん</td><td style="text-align:center">去年</td></tr><tr><td style="text-align:center">昨年</td><td style="text-align:center">さくねん</td><td style="text-align:center">去年</td></tr><tr><td style="text-align:center">今年</td><td style="text-align:center">ことし</td><td style="text-align:center">今年</td></tr><tr><td style="text-align:center">来年</td><td style="text-align:center">らいねん</td><td style="text-align:center">明年</td></tr><tr><td style="text-align:center">再来年</td><td style="text-align:center">さらいねん</td><td style="text-align:center">后年</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> japanese </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>五十音图</title>
      <link href="/japanese/gojuuonzu/"/>
      <url>/japanese/gojuuonzu/</url>
      
        <content type="html"><![CDATA[<p>五十音图详解</p><a id="more"></a><h1 id="五十音图基本图样"><a href="#五十音图基本图样" class="headerlink" title="五十音图基本图样"></a>五十音图基本图样</h1><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">平假名</th><th style="text-align:center">片假名</th><th style="text-align:center">罗马音</th><th style="text-align:center">平假名</th><th style="text-align:center">片假名</th><th style="text-align:center">罗马音</th><th style="text-align:center">平假名</th><th style="text-align:center">片假名</th><th style="text-align:center">罗马音</th><th style="text-align:center">平假名</th><th style="text-align:center">片假名</th><th style="text-align:center">罗马音</th><th style="text-align:center">平假名</th><th style="text-align:center">片假名</th><th style="text-align:center">罗马音</th></tr></thead><tbody><tr><td style="text-align:center">あ行</td><td style="text-align:center">あ</td><td style="text-align:center">ア</td><td style="text-align:center">a</td><td style="text-align:center">い</td><td style="text-align:center">イ</td><td style="text-align:center">i</td><td style="text-align:center">う</td><td style="text-align:center">ウ</td><td style="text-align:center">u</td><td style="text-align:center">え</td><td style="text-align:center">エ</td><td style="text-align:center">e</td><td style="text-align:center">お</td><td style="text-align:center">オ</td><td style="text-align:center">o</td></tr><tr><td style="text-align:center">か行</td><td style="text-align:center">か</td><td style="text-align:center">カ</td><td style="text-align:center">ka</td><td style="text-align:center">き</td><td style="text-align:center">キ</td><td style="text-align:center">ki</td><td style="text-align:center">く</td><td style="text-align:center">ク</td><td style="text-align:center">ku</td><td style="text-align:center">け</td><td style="text-align:center">ケ</td><td style="text-align:center">ke</td><td style="text-align:center">こ</td><td style="text-align:center">コ</td><td style="text-align:center">ko</td></tr><tr><td style="text-align:center">た行</td><td style="text-align:center">た</td><td style="text-align:center">タ</td><td style="text-align:center">ta</td><td style="text-align:center">ち</td><td style="text-align:center">チ</td><td style="text-align:center">chi</td><td style="text-align:center">つ</td><td style="text-align:center">ツ</td><td style="text-align:center">tsu</td><td style="text-align:center">て</td><td style="text-align:center">テ</td><td style="text-align:center">te</td><td style="text-align:center">と</td><td style="text-align:center">ト</td><td style="text-align:center">to</td></tr><tr><td style="text-align:center">さ行</td><td style="text-align:center">さ</td><td style="text-align:center">サ</td><td style="text-align:center">sa</td><td style="text-align:center">し</td><td style="text-align:center">シ</td><td style="text-align:center">shi/si</td><td style="text-align:center">す</td><td style="text-align:center">ス</td><td style="text-align:center">su</td><td style="text-align:center">せ</td><td style="text-align:center">セ</td><td style="text-align:center">se</td><td style="text-align:center">そ</td><td style="text-align:center">ソ</td><td style="text-align:center">so</td></tr><tr><td style="text-align:center">は行</td><td style="text-align:center">は</td><td style="text-align:center">ハ</td><td style="text-align:center">ha</td><td style="text-align:center">ひ</td><td style="text-align:center">ヒ</td><td style="text-align:center">hi</td><td style="text-align:center">ふ</td><td style="text-align:center">フ</td><td style="text-align:center">fu/hu</td><td style="text-align:center">へ</td><td style="text-align:center">ヘ</td><td style="text-align:center">he</td><td style="text-align:center">ほ</td><td style="text-align:center">ホ</td><td style="text-align:center">ho</td></tr><tr><td style="text-align:center">な行</td><td style="text-align:center">な</td><td style="text-align:center">ナ</td><td style="text-align:center">na</td><td style="text-align:center">に</td><td style="text-align:center">ニ</td><td style="text-align:center">ni</td><td style="text-align:center">ぬ</td><td style="text-align:center">ヌ</td><td style="text-align:center">nu</td><td style="text-align:center">ね</td><td style="text-align:center">ネ</td><td style="text-align:center">ne</td><td style="text-align:center">の</td><td style="text-align:center">ノ</td><td style="text-align:center">no</td></tr><tr><td style="text-align:center">ま行</td><td style="text-align:center">ま</td><td style="text-align:center">マ</td><td style="text-align:center">ma</td><td style="text-align:center">み</td><td style="text-align:center">ミ</td><td style="text-align:center">mi</td><td style="text-align:center">む</td><td style="text-align:center">ム</td><td style="text-align:center">mu</td><td style="text-align:center">め</td><td style="text-align:center">メ</td><td style="text-align:center">me</td><td style="text-align:center">も</td><td style="text-align:center">モ</td><td style="text-align:center">mo</td></tr><tr><td style="text-align:center">ら行</td><td style="text-align:center">ら</td><td style="text-align:center">ラ</td><td style="text-align:center">ra</td><td style="text-align:center">り</td><td style="text-align:center">リ</td><td style="text-align:center">ri</td><td style="text-align:center">る</td><td style="text-align:center">ル</td><td style="text-align:center">ru</td><td style="text-align:center">れ</td><td style="text-align:center">レ</td><td style="text-align:center">re</td><td style="text-align:center">ろ</td><td style="text-align:center">ロ</td><td style="text-align:center">ro</td></tr><tr><td style="text-align:center">や行</td><td style="text-align:center">や</td><td style="text-align:center">ヤ</td><td style="text-align:center">ya</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">ゆ</td><td style="text-align:center">ユ</td><td style="text-align:center">yu</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">よ</td><td style="text-align:center">ヨ</td><td style="text-align:center">yo</td></tr><tr><td style="text-align:center">わ行</td><td style="text-align:center">わ</td><td style="text-align:center">ワ</td><td style="text-align:center">wa</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">を</td><td style="text-align:center">ヲ</td><td style="text-align:center">wo</td></tr><tr><td style="text-align:center">ん行</td><td style="text-align:center">ん</td><td style="text-align:center">ン</td><td style="text-align:center">n</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">が行</td><td style="text-align:center">が</td><td style="text-align:center">ガ</td><td style="text-align:center">ga</td><td style="text-align:center">ぎ</td><td style="text-align:center">ギ</td><td style="text-align:center">gi</td><td style="text-align:center">ぐ</td><td style="text-align:center">グ</td><td style="text-align:center">gu</td><td style="text-align:center">げ</td><td style="text-align:center">ゲ</td><td style="text-align:center">ge</td><td style="text-align:center">ご</td><td style="text-align:center">ゴ</td><td style="text-align:center">go</td></tr><tr><td style="text-align:center">だ行</td><td style="text-align:center">だ</td><td style="text-align:center">ダ</td><td style="text-align:center">da</td><td style="text-align:center">ぢ</td><td style="text-align:center">ヂ</td><td style="text-align:center">di</td><td style="text-align:center">づ</td><td style="text-align:center">ヅ</td><td style="text-align:center">du</td><td style="text-align:center">で</td><td style="text-align:center">デ</td><td style="text-align:center">de</td><td style="text-align:center">ど</td><td style="text-align:center">ド</td><td style="text-align:center">do</td></tr><tr><td style="text-align:center">ざ行</td><td style="text-align:center">ざ</td><td style="text-align:center">ザ</td><td style="text-align:center">za</td><td style="text-align:center">じ</td><td style="text-align:center">ジ</td><td style="text-align:center">ji/zi</td><td style="text-align:center">ず</td><td style="text-align:center">ズ</td><td style="text-align:center">zu</td><td style="text-align:center">ぜ</td><td style="text-align:center">ゼ</td><td style="text-align:center">ze</td><td style="text-align:center">ぞ</td><td style="text-align:center">ゾ</td><td style="text-align:center">zo</td></tr><tr><td style="text-align:center">ば行</td><td style="text-align:center">ば</td><td style="text-align:center">バ</td><td style="text-align:center">ba</td><td style="text-align:center">び</td><td style="text-align:center">ビ</td><td style="text-align:center">bi</td><td style="text-align:center">ぶ</td><td style="text-align:center">ブ</td><td style="text-align:center">bu</td><td style="text-align:center">べ</td><td style="text-align:center">ベ</td><td style="text-align:center">be</td><td style="text-align:center">ぼ</td><td style="text-align:center">ボ</td><td style="text-align:center">bo</td></tr><tr><td style="text-align:center">ぱ行</td><td style="text-align:center">ぱ</td><td style="text-align:center">パ</td><td style="text-align:center">pa</td><td style="text-align:center">ぴ</td><td style="text-align:center">ピ</td><td style="text-align:center">pi</td><td style="text-align:center">ぷ</td><td style="text-align:center">プ</td><td style="text-align:center">pu</td><td style="text-align:center">ぺ</td><td style="text-align:center">ペ</td><td style="text-align:center">pe</td><td style="text-align:center">ぽ</td><td style="text-align:center">ポ</td><td style="text-align:center">po</td></tr></tbody></table><h1 id="五十音图附加部分（拗音）"><a href="#五十音图附加部分（拗音）" class="headerlink" title="五十音图附加部分（拗音）"></a>五十音图附加部分（拗音）</h1><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">平假名</th><th style="text-align:center">片假名</th><th style="text-align:center">罗马音</th><th style="text-align:center">平假名</th><th style="text-align:center">片假名</th><th style="text-align:center">罗马音</th><th style="text-align:center">平假名</th><th style="text-align:center">片假名</th><th style="text-align:center">罗马音</th></tr></thead><tbody><tr><td style="text-align:center">か行</td><td style="text-align:center">きゃ</td><td style="text-align:center">キャ</td><td style="text-align:center">kya</td><td style="text-align:center">きゅ</td><td style="text-align:center">キュ</td><td style="text-align:center">kyu</td><td style="text-align:center">きょ</td><td style="text-align:center">キョ</td><td style="text-align:center">kyo</td></tr><tr><td style="text-align:center">が行</td><td style="text-align:center">ぎゃ</td><td style="text-align:center">ギャ</td><td style="text-align:center">gya</td><td style="text-align:center">ぎゅ</td><td style="text-align:center">ギュ</td><td style="text-align:center">gyu</td><td style="text-align:center">ぎょ</td><td style="text-align:center">ギョ</td><td style="text-align:center">gyo</td></tr><tr><td style="text-align:center">た行</td><td style="text-align:center">ちゃ</td><td style="text-align:center">チャ</td><td style="text-align:center">cha</td><td style="text-align:center">ちゅ</td><td style="text-align:center">チュ</td><td style="text-align:center">chu</td><td style="text-align:center">ちょ</td><td style="text-align:center">チョ</td><td style="text-align:center">cho</td></tr><tr><td style="text-align:center">だ行</td><td style="text-align:center">でゃ</td><td style="text-align:center">デャ</td><td style="text-align:center">dha</td><td style="text-align:center">でゅ</td><td style="text-align:center">デュ</td><td style="text-align:center">dhu</td><td style="text-align:center">でょ</td><td style="text-align:center">デョ</td><td style="text-align:center">dho</td></tr><tr><td style="text-align:center">さ行</td><td style="text-align:center">しゃ</td><td style="text-align:center">シャ</td><td style="text-align:center">sha</td><td style="text-align:center">しゅ</td><td style="text-align:center">シュ</td><td style="text-align:center">shu</td><td style="text-align:center">しょ</td><td style="text-align:center">ショ</td><td style="text-align:center">sho</td></tr><tr><td style="text-align:center">ざ行</td><td style="text-align:center">じゃ</td><td style="text-align:center">ジャ</td><td style="text-align:center">ja</td><td style="text-align:center">じゅ</td><td style="text-align:center">ジュ</td><td style="text-align:center">ju</td><td style="text-align:center">じょ</td><td style="text-align:center">ジョ</td><td style="text-align:center">jo</td></tr><tr><td style="text-align:center">は行</td><td style="text-align:center">ひゃ</td><td style="text-align:center">ヒャ</td><td style="text-align:center">hya</td><td style="text-align:center">ひゅ</td><td style="text-align:center">ヒュ</td><td style="text-align:center">hyu</td><td style="text-align:center">ひょ</td><td style="text-align:center">ヒョ</td><td style="text-align:center">hyo</td></tr><tr><td style="text-align:center">ば行</td><td style="text-align:center">びゃ</td><td style="text-align:center">ビャ</td><td style="text-align:center">bya</td><td style="text-align:center">びゅ</td><td style="text-align:center">ビュ</td><td style="text-align:center">byu</td><td style="text-align:center">びょ</td><td style="text-align:center">ビョ</td><td style="text-align:center">byo</td></tr><tr><td style="text-align:center">ぱ行</td><td style="text-align:center">ぴゃ</td><td style="text-align:center">ピャ</td><td style="text-align:center">pya</td><td style="text-align:center">ぴゅ</td><td style="text-align:center">ピュ</td><td style="text-align:center">pyu</td><td style="text-align:center">ぴょ</td><td style="text-align:center">ピョ</td><td style="text-align:center">pyo</td></tr><tr><td style="text-align:center">な行</td><td style="text-align:center">にゃ</td><td style="text-align:center">ニャ</td><td style="text-align:center">nya</td><td style="text-align:center">にゅ</td><td style="text-align:center">ニュ</td><td style="text-align:center">nyu</td><td style="text-align:center">にょ</td><td style="text-align:center">ニョ</td><td style="text-align:center">nyo</td></tr><tr><td style="text-align:center">ま行</td><td style="text-align:center">みゃ</td><td style="text-align:center">ミャ</td><td style="text-align:center">mya</td><td style="text-align:center">みゅ</td><td style="text-align:center">ミュ</td><td style="text-align:center">myu</td><td style="text-align:center">みょ</td><td style="text-align:center">ミョ</td><td style="text-align:center">myo</td></tr><tr><td style="text-align:center">ら行</td><td style="text-align:center">りゃ</td><td style="text-align:center">リャ</td><td style="text-align:center">rya</td><td style="text-align:center">りゅ</td><td style="text-align:center">リュ</td><td style="text-align:center">ryu</td><td style="text-align:center">りょ</td><td style="text-align:center">リョ</td><td style="text-align:center">ryo</td></tr></tbody></table><h1 id="促音-长音"><a href="#促音-长音" class="headerlink" title="促音/长音"></a>促音/长音</h1><ol><li><p>促音（っ或ッ）</p><p>示例：はっきり</p><p>罗马音：ha kki ri</p><p>意思：清楚、明朗</p><p>要点：</p><ol><li>写罗马音时，促音的标记与后一个音的第一个字母一致</li><li>读的时候，发音的位置要停半个字符的时间</li><li>唱歌的时候，有时候明显地停顿半个字符的话会显得很奇怪，此时促音的读音应该和前一个假名的最后一个字母一致</li></ol></li><li><p>长音</p><p>在一个平假名单词中，如果前一个音以i结尾且后一个是い，或以e结尾且后一个是え，或以o结尾且后一个是う，此时对于这些い、え、う，不单独发音，而是发长音</p><p>在一个片假名单词中，如果出现一条横线，就意味着长音</p><p>示例：誓（ちか）おう</p><p>罗马音：chi ka o u</p><p>意思：（主观上想要）起誓</p><p>要点：</p><ol><li>写罗马音时，长音的标记是自己原本的标记</li><li>读的时候，长音的发音与前一个假名的最后一个字母一致，且不停顿，相当于前一个假名发音时长增加一个字符的时间</li></ol></li></ol><h1 id="相关软件下载"><a href="#相关软件下载" class="headerlink" title="相关软件下载"></a>相关软件下载</h1><p>以下软件至少适用于Windows环境</p><p><a href="http://download.ringoer.com/五十音图（仅清音）.exe" target="_blank" rel="noopener">五十音图（仅清音）</a></p><p><a href="http://download.ringoer.com/日语五十音测试.exe" target="_blank" rel="noopener">日语五十音测试</a></p><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><h2 id="读音"><a href="#读音" class="headerlink" title="读音"></a>读音</h2><ol><li>按谐音方法（全都读第一声）：</li></ol><table><thead><tr><th style="text-align:center">罗马音</th><th style="text-align:center">对应谐音</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td style="text-align:center">啊</td></tr><tr><td style="text-align:center">i</td><td style="text-align:center">衣</td></tr><tr><td style="text-align:center">u</td><td style="text-align:center">呜</td></tr><tr><td style="text-align:center">e</td><td style="text-align:center">诶</td></tr><tr><td style="text-align:center">o</td><td style="text-align:center">哦</td></tr></tbody></table><ol start="2"><li>表格中标注的罗马音，若有斜杠分割的，说明这两个音都可以</li></ol><h2 id="书写"><a href="#书写" class="headerlink" title="书写"></a>书写</h2><p>请注意区分以下几个假名：</p><ol><li><p>片假名tsu（ツ）和片假名shi（シ）</p><p>ツ是从上向下的一撇，シ是从下往上</p></li><li><p>片假名so（ソ）和片假名n（ン）</p><p>ソ是从上向下的一撇，ン是从下往上</p></li><li><p>平假名he（へ）和片假名he（ヘ）</p><p>平假名的へ在书写时，向下的一划与水平方向夹角较小，片假名的较大</p></li><li><p>片假名ra（ラ）和片假名（ヲ）</p></li></ol><h2 id="变音"><a href="#变音" class="headerlink" title="变音"></a>变音</h2><p>在作助词时，以下平假名会发生变音：</p><table><thead><tr><th style="text-align:center">假名</th><th style="text-align:center">原罗马音</th><th style="text-align:center">变音后罗马音</th></tr></thead><tbody><tr><td style="text-align:center">は</td><td style="text-align:center">ha</td><td style="text-align:center">wa</td></tr><tr><td style="text-align:center">へ</td><td style="text-align:center">he</td><td style="text-align:center">e</td></tr><tr><td style="text-align:center">を</td><td style="text-align:center">wo</td><td style="text-align:center">o</td></tr></tbody></table><h2 id="打字要点"><a href="#打字要点" class="headerlink" title="打字要点"></a>打字要点</h2><p>希望打出以下罗马音所对应的假名时，需要注意打字的方法</p><table><thead><tr><th style="text-align:center">罗马音</th><th style="text-align:center">对应平假名</th><th style="text-align:center">对应片假名</th><th style="text-align:center">打字变化</th></tr></thead><tbody><tr><td style="text-align:center">n</td><td style="text-align:center">ん</td><td style="text-align:center">ン</td><td style="text-align:center">nn</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">ぁ</td><td style="text-align:center">ァ</td><td style="text-align:center">la/xa</td></tr></tbody></table><p>变小的假名只要在原读音前面加上l或x就行，建议用x</p>]]></content>
      
      
      <categories>
          
          <category> japanese </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>捕获并分析帧和IP报文</title>
      <link href="/experiment/interception/"/>
      <url>/experiment/interception/</url>
      
        <content type="html"><![CDATA[<p>计算机网络实验3</p><a id="more"></a><h1 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h1><ul><li>捕获并分析以太网的帧，获取目标与源网卡的MAC 地址  </li><li>获取本机地址  </li><li>获取远端MAC地址  </li></ul><h1 id="实验环境"><a href="#实验环境" class="headerlink" title="实验环境"></a>实验环境</h1><ul><li>Windows 10  </li><li>C#  </li><li>Visual Studio 2017  </li></ul><h1 id="实验结果"><a href="#实验结果" class="headerlink" title="实验结果"></a>实验结果</h1><p>测试时，设置为超过10000Bps就会报警</p><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-结果.png" alt="实验结果"></p><h1 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h1><h2 id="全局初始化"><a href="#全局初始化" class="headerlink" title="全局初始化"></a>全局初始化</h2><p>安装WinPcap和SharpPcap</p><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-using.png" alt="using"></p><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-struct.png" alt="struct"></p><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-全局变量.png" alt="全局变量"></p><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-初始化.png" alt="初始化"></p><h2 id="查看网卡信息"><a href="#查看网卡信息" class="headerlink" title="查看网卡信息"></a>查看网卡信息</h2><p>通过调用ipconfig.exe实现</p><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-ipconfig.png" alt="ipconfig"></p><h2 id="适配器"><a href="#适配器" class="headerlink" title="适配器"></a>适配器</h2><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-载入适配器列表.png" alt="适配器"></p><h3 id="计时动作"><a href="#计时动作" class="headerlink" title="计时动作"></a>计时动作</h3><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-time_ing.png" alt="计时动作"></p><h3 id="载入适配器列表"><a href="#载入适配器列表" class="headerlink" title="载入适配器列表"></a>载入适配器列表</h3><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-load_devices.png" alt="load_devices"></p><h3 id="载入适配器信息"><a href="#载入适配器信息" class="headerlink" title="载入适配器信息"></a>载入适配器信息</h3><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-载入适配器信息.png" alt="载入适配器信息"></p><h2 id="开始侦听"><a href="#开始侦听" class="headerlink" title="开始侦听"></a>开始侦听</h2><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-start.png" alt="start"></p><h3 id="收包动作"><a href="#收包动作" class="headerlink" title="收包动作"></a>收包动作</h3><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-recv.png" alt="收包"></p><h3 id="成帧"><a href="#成帧" class="headerlink" title="成帧"></a>成帧</h3><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-get_frame_1.png" alt="成帧1"></p><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-get_frame_2.png" alt="成帧2"></p><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-get_frame_3.png" alt="成帧3"></p><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-get_frame_4.png" alt="成帧4"></p><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-get_frame_5.png" alt="成帧5"></p><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-get_frame_6.png" alt="成帧6"></p><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-get_frame_7.png" alt="成帧7"></p><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-BitConverter.png" alt="BitConverter"></p><h3 id="成帧时修改流量统计"><a href="#成帧时修改流量统计" class="headerlink" title="成帧时修改流量统计"></a>成帧时修改流量统计</h3><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-monitor_traffic.png" alt="更新流量统计"></p><h3 id="监视流量"><a href="#监视流量" class="headerlink" title="监视流量"></a>监视流量</h3><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-cal_traffic.png" alt="计算流量"></p><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-报警.png" alt="报警"></p><h2 id="暂停侦听"><a href="#暂停侦听" class="headerlink" title="暂停侦听"></a>暂停侦听</h2><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-pause.png" alt="pause"></p><h2 id="继续侦听"><a href="#继续侦听" class="headerlink" title="继续侦听"></a>继续侦听</h2><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-continue.png" alt="continue"></p><h2 id="停止侦听"><a href="#停止侦听" class="headerlink" title="停止侦听"></a>停止侦听</h2><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-stop.png" alt="stop"></p><h2 id="保存日志"><a href="#保存日志" class="headerlink" title="保存日志"></a>保存日志</h2><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-save_diary.png" alt="save_diary"></p><h2 id="退出程序"><a href="#退出程序" class="headerlink" title="退出程序"></a>退出程序</h2><p><img src="http://pic.ringoer.com/捕获并分析帧和IP报文-exit.png" alt="exit"></p><h2 id="技术细节"><a href="#技术细节" class="headerlink" title="技术细节"></a>技术细节</h2><h3 id="计算流量的方法"><a href="#计算流量的方法" class="headerlink" title="计算流量的方法"></a>计算流量的方法</h3><p>构建新结构体（mac + ip +mode）放进dictionary当key，各key累计收发包大小当value。</p><p>新建线程，每隔1s遍历各来源的收发流量，超过1MB的，可以认为在这1s内平流量达到1MBps以上，故而给本机警告</p><h3 id="遍历dictionary"><a href="#遍历dictionary" class="headerlink" title="遍历dictionary"></a>遍历dictionary</h3><p>因为多线程同时在访问dictionary，所以会出现在一个线程遍历dictionary的时候，另一个线程正在新增dictionary的项。此时采用foreach遍历会报错，因为foreach要求正在遍历的对象不能有变化</p><h3 id="有网络但侦听不到包体"><a href="#有网络但侦听不到包体" class="headerlink" title="有网络但侦听不到包体"></a>有网络但侦听不到包体</h3><p>如果确认程序没错，那么可能是</p><ol><li>选错网卡，要注意选一个有网络的网卡</li><li>当前的网络收发包类型不是ip and tcp，应该是filter的问题，关掉filter即可</li></ol><h3 id="BitConverter"><a href="#BitConverter" class="headerlink" title="BitConverter"></a>BitConverter</h3><p>会反向获取。</p><p>如，现有byte[] test={0x01,0x10,0x0f,0xff};</p><p>二进制为00000001 00010000 00001111 11111111</p><p>十进制为17829887</p><p>此时进行uint ans=BitConverter.ToUInt32(test,0);</p><p>会得到ans= 4279177217</p><p>十六进制为ff0f1001</p><p>二进制为11111111 00001111 00010000 00000001</p><p>可见不能得到想要的结果，因为BitConverter会反向转换所给的byte数组</p><p>所以应该先将要转换的数组反向，再使用BitConverter</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.codeproject.com/Articles/12458/SharpPcap-A-Packet-Capture-Framework-for-NET" target="_blank" rel="noopener">SharpPcap</a></p>]]></content>
      
      
      <categories>
          
          <category> experiment </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>模拟RS-232接口双机互联编程</title>
      <link href="/experiment/RS-232/"/>
      <url>/experiment/RS-232/</url>
      
        <content type="html"><![CDATA[<p>计算机网络实验2</p><a id="more"></a><h1 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h1><p>实现两台计算机通过串口通信  </p><h1 id="实验环境"><a href="#实验环境" class="headerlink" title="实验环境"></a>实验环境</h1><p>本机Windows10</p><p>虚拟机系统VirtualBox</p><p>虚拟机1 Windows7</p><p>虚拟机2 Windows7</p><p>C#</p><p>Visual Studio 2017</p><h1 id="实验结果"><a href="#实验结果" class="headerlink" title="实验结果"></a>实验结果</h1><p><img src="http://pic.ringoer.com/模拟RS-232接口双机互联编程-结果.png" alt="结果"></p><p>启动应用，得到如图界面。因为每个空格都会在确定了前一个空格后变为可编辑，而且会给出相应的默认值，所以可以一直点击确定，直到所有设置都被确定</p><p><img src="http://pic.ringoer.com/模拟RS-232接口双机互联编程-启动界面.png" alt="启动界面"></p><p>设置完成后得到如图情况，此时点击“启动服务”</p><p><img src="http://pic.ringoer.com/模拟RS-232接口双机互联编程-已经启动.png" alt="成功启动"></p><p>正常启动服务后收到提示</p><p><img src="http://pic.ringoer.com/模拟RS-232接口双机互联编程-连接中.png" alt="连接中"></p><p>双机互联时应有如图态势</p><h1 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h1><p>基于VirtualBox</p><ol><li><p>配置两台虚拟机时，应选择相同的串口</p><p><img src="http://pic.ringoer.com/模拟RS-232接口双机互联编程-vbox-1.png" alt="选择串口"></p></li><li><p>端口模式选择“主机管道”，路径/地址格式为<code>\\.\pipe\xxxx</code>，其中xxxx可以任意填写，但要保证两台虚拟机一致</p><p><img src="http://pic.ringoer.com/模拟RS-232接口双机互联编程-vbox-2.png" alt="选择模式"></p></li><li><p>对于选项“连接至现有通道或套接字”，其中一台虚拟机不勾选，称为pc1，另一台勾选，称为pc2</p></li><li><p>启动时，应先启动pc1，再启动pc2，否则会报如下错误</p><p><img src="http://pic.ringoer.com/模拟RS-232接口双机互联编程-vbox-3.png" alt="报错"></p></li><li><p>软件层面通信前应确保两台虚拟机上的软件都已经成功启动服务，否则不能互联</p></li><li><p>配置属性</p><p><img src="http://pic.ringoer.com/模拟RS-232接口双机互联编程-username.png" alt="属性"></p><p><img src="http://pic.ringoer.com/模拟RS-232接口双机互联编程-attribute-1.png" alt="属性"></p><p><img src="http://pic.ringoer.com/模拟RS-232接口双机互联编程-attribute-2.png" alt="属性"></p></li><li><p>接收</p><p><img src="http://pic.ringoer.com/模拟RS-232接口双机互联编程-read.png" alt="接收"></p></li><li><p>发送</p><p><img src="http://pic.ringoer.com/模拟RS-232接口双机互联编程-send.png" alt="发送"></p></li><li><p>退出</p><p><img src="http://pic.ringoer.com/模拟RS-232接口双机互联编程-exit.png" alt="退出"></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> experiment </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日本語教程索引</title>
      <link href="/japanese/JapaneseMenu/"/>
      <url>/japanese/JapaneseMenu/</url>
      
        <content type="html"><![CDATA[<p>只是想写一个日语教程，为了将来方便给云霄一中日语部教学。</p><p>于是这里就当成目录吧。</p><a id="more"></a><p><a href="http://ringoer.com/japanese/gojuuonzu/" target="_blank" rel="noopener">五十音图</a><br><a href="http://ringoer.com/japanese/kihontango/" target="_blank" rel="noopener">日语入门向基本单词</a></p>]]></content>
      
      
      <categories>
          
          <category> japanese </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>制作网线</title>
      <link href="/experiment/makereticle/"/>
      <url>/experiment/makereticle/</url>
      
        <content type="html"><![CDATA[<p>计算机网络实验1</p><a id="more"></a><video id="video" controls preload="none"><br>  <source id="mp4" src="http://video.ringoer.com/优酷网-网线水晶头接法.mp4" type="video/mp4"><br></video><p>制作网线时应注意将线插到水晶头底部</p>]]></content>
      
      
      <categories>
          
          <category> experiment </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库系统实验报告-实验1 oracle 11g的安装、配置和使用</title>
      <link href="/experiment/db-ex1/"/>
      <url>/experiment/db-ex1/</url>
      
        <content type="html"><![CDATA[<p>只是一篇实验报告。</p><a id="more"></a><h1 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h1><ol><li><p>掌握Oracle 11g Server的安装</p></li><li><p>掌握Oracle的监听与网络配置</p></li><li><p>掌握Oracle数据库的启动与关闭</p></li><li><p>掌握Oracle的交互式开发环境、工具及常用管理操作命令</p></li></ol><h1 id="实验内容-步骤"><a href="#实验内容-步骤" class="headerlink" title="实验内容/步骤"></a>实验内容/步骤</h1><ol><li><p>安装Oracle 11g（服务器版本）</p></li><li><p>理解安装过程中各选项的含义及作用</p></li><li><p>了解内置用户的登录和服务器预定义角色</p></li><li><p>安装完成后以OEM方式登录、管理数据库</p><p><img src="http://pic.ringoer.com/db-ex1-p3.png" alt="安装完成后以OEM方式登录、管理数据库"></p></li><li><p>创建以自己学号为账号的新用户(S+自己学号)。</p></li><li><p>对账号做相应授权。</p></li><li><p>使用网络配置工具进行网络配置</p></li></ol><h1 id="存在的问题及解决方案"><a href="#存在的问题及解决方案" class="headerlink" title="存在的问题及解决方案"></a>存在的问题及解决方案</h1><ol><li><p>Windows10安装障碍（不满足最低配置）</p><ol><li><p>提取iso中所有文件</p></li><li><p>记事本打开\stage\cvu\cvu_prereq.xml</p></li><li><p>修改如图字段，重点修改6.2以及Windows 10</p><p><img src="http://pic.ringoer.com/db-ex1-p61.png" alt="重点"></p><p><a href="https://blog.csdn.net/qq_33991989/article/details/77418129" target="_blank" rel="noopener">参考链接</a></p></li></ol></li></ol><ol start="2"><li><p>Environment Variable: “PATH”       失败</p><ol><li><p>打开环境变量配置，选择PATH</p></li><li><p>先备份PATH，之后删除一部分PATH项，直到不会报错</p></li><li><p>正常安装，结束后恢复原PATH列表</p><p><a href="https://www.cnblogs.com/quixon/p/4852946.html" target="_blank" rel="noopener">参考链接</a></p></li></ol></li><li><p>以OEM方式登录</p><p>访问 <a href="localhost:1158/em/console/logon/logon" target="_blank" rel="noopener">localhost:1158/em/console/logon/logon</a></p></li><li><p>创建新用户</p><ol><li><p>打开SQL Plus</p></li><li><p>新建数据表空间，语句如下：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> dbsp_2 <span class="keyword">datafile</span> <span class="string">'url\filename.dbf'</span></span><br><span class="line"><span class="keyword">size</span> <span class="number">10</span>m</span><br><span class="line"><span class="keyword">extent</span> <span class="keyword">management</span> <span class="keyword">local</span> <span class="keyword">autoallocate</span>;</span><br></pre></td></tr></table></figure><p>其中单引号内链接自行指定，注意指定的文件夹应是已创建的，且新建的文件后缀名为.dbf </p></li><li><p>新建用户，语句如下</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> username <span class="keyword">identified</span> <span class="keyword">by</span> <span class="keyword">password</span></span><br></pre></td></tr></table></figure><p>其中username为用户名，by后面为密钥</p></li><li><p>授权，语句格式如下：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">connect</span>,<span class="keyword">resource</span>,dba <span class="keyword">to</span> username;</span><br></pre></td></tr></table></figure><p>可以是如下形式：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> [权限] <span class="keyword">to</span> [用户名];</span><br></pre></td></tr></table></figure><p><a href="https://www.cnblogs.com/bjh1117/p/6605037.html" target="_blank" rel="noopener">参考链接</a>  </p></li></ol></li><li><p>配置网络  </p><ol><li><p>运行Net Configuration Assist</p></li><li><p>选择“本地网络服务名配置”</p></li><li><p>选择“添加”</p></li><li><p>这一步要求输入你要访问的数据库的“全局数据库名”，“全局数据库名”在安装数据库时指定，默认为<code>name.domain</code>（即：数据库名+数据库域名），当然也可以根据自己喜好随意命名，可以通过<code>select * from global_name;</code>进行查询。</p><p>*可以直接命名为myorcl</p></li><li><p>选择网络语数据库的通信协议，默认TCP即可</p></li><li><p>主机名填写127.0.0.1用以访问本地数据库，并选择“使用标准端口号1521”</p></li><li><p>选择“是，进行测试”</p></li><li><p>默认的测试使用Oracle的Scott用户，因为用户被锁或口令不对，一般情况都会测试不成功，这时候可以通过“更改登录”重新输入数据库的用户/口令来进行测试是否连接成功</p></li><li><p>网络服务名，即为该远程连接配置命名。默认即可。</p><p>至此，如果不需要再配置其他的网络服务，则该网络服务名配置完毕。</p><p><a href="https://blog.csdn.net/dingguanyi/article/details/80875293" target="_blank" rel="noopener">参考链接</a></p></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> experiment </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库系统实验 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>哈夫曼树</title>
      <link href="/algorithm/HuffmanTree/"/>
      <url>/algorithm/HuffmanTree/</url>
      
        <content type="html"><![CDATA[<p>一棵裸的哈夫曼树，看点可能在于封装（  </p><p>嘛，反正是留档给自己看的</p><a id="more"></a><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">char</span> Type;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">NODE</span>&#123;</span></span><br><span class="line">Type data;</span><br><span class="line"><span class="keyword">int</span> weight;</span><br><span class="line">NODE* Lchild;</span><br><span class="line">NODE* Rchild;</span><br><span class="line">NODE* Parent;</span><br><span class="line">&#125;NODE,*node;<span class="comment">//树的结点 </span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">cmp</span>&#123;</span></span><br><span class="line">Type data;</span><br><span class="line"><span class="keyword">int</span> weight;</span><br><span class="line">node selfroot;</span><br><span class="line"><span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &gt;(<span class="keyword">const</span> cmp&amp; a,<span class="keyword">const</span> cmp&amp; b)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> a.weight&gt;b.weight;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;<span class="comment">//为了使用优先队列，必须重载大于号，而重载大于号不能针对指针，故有此类型 </span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HuffmanTree</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line">node root;</span><br><span class="line">cmp temp[<span class="number">100</span>];</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="built_in">string</span>,<span class="keyword">char</span>&gt;m;<span class="comment">//序列对字符的映射 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">char</span> x,<span class="built_in">string</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;x&lt;&lt;<span class="string">" "</span>&lt;&lt;y&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cal</span><span class="params">(node T,<span class="built_in">string</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(n==<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">print(root-&gt;data,<span class="string">"0"</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(T-&gt;data==<span class="string">'#'</span>)</span><br><span class="line">&#123;</span><br><span class="line">cal(T-&gt;Lchild,num+<span class="string">"0"</span>);</span><br><span class="line">cal(T-&gt;Rchild,num+<span class="string">"1"</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">print(T-&gt;data,num);</span><br><span class="line">m[num]=T-&gt;data;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">(node T)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(T-&gt;Lchild!=<span class="literal">NULL</span>) destroy(T-&gt;Lchild);</span><br><span class="line"><span class="keyword">if</span>(T-&gt;Rchild!=<span class="literal">NULL</span>) destroy(T-&gt;Rchild);</span><br><span class="line"><span class="keyword">delete</span> T;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">HuffmanTree()</span><br><span class="line">&#123;</span><br><span class="line">root=<span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"请输入字符个数n（n&lt;100）。接下来n行，每行输入一个字符及其权重。（输入的字符不可以是#）\n"</span>;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;temp[i].data&gt;&gt;temp[i].weight;</span><br><span class="line">temp[i].selfroot=<span class="keyword">new</span> NODE;</span><br><span class="line">node p=temp[i].selfroot;</span><br><span class="line">p-&gt;data=temp[i].data;</span><br><span class="line">p-&gt;weight=temp[i].weight;</span><br><span class="line">p-&gt;Lchild=p-&gt;Rchild=p-&gt;Parent=<span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">priority_queue&lt;cmp,<span class="built_in">vector</span>&lt;cmp&gt;,greater&lt;cmp&gt; &gt;q;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) q.push(temp[i]);</span><br><span class="line"><span class="keyword">while</span>(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">cmp p1=q.top();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">if</span>(q.empty())</span><br><span class="line">&#123;</span><br><span class="line">root=p1.selfroot;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">cmp p2=q.top();</span><br><span class="line">q.pop();</span><br><span class="line">cmp tmp;</span><br><span class="line">tmp.data=<span class="string">'#'</span>;</span><br><span class="line">tmp.weight=p1.weight+p2.weight;</span><br><span class="line">tmp.selfroot=<span class="keyword">new</span> NODE;</span><br><span class="line"></span><br><span class="line">node kp=tmp.selfroot;</span><br><span class="line">kp-&gt;data=tmp.data;</span><br><span class="line">kp-&gt;weight=tmp.weight;</span><br><span class="line">kp-&gt;Parent=<span class="literal">NULL</span>;</span><br><span class="line">p1.selfroot-&gt;Parent=p2.selfroot-&gt;Parent=kp;</span><br><span class="line"><span class="keyword">if</span>(p1.weight&lt;p2.weight)</span><br><span class="line">&#123;</span><br><span class="line">kp-&gt;Lchild=p1.selfroot;</span><br><span class="line">kp-&gt;Rchild=p2.selfroot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">kp-&gt;Rchild=p2.selfroot;</span><br><span class="line">kp-&gt;Lchild=p1.selfroot;</span><br><span class="line">&#125;</span><br><span class="line">q.push(tmp);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"所求出的对应编码表如下（不按顺序）：\n"</span>;</span><br><span class="line">cal(root,<span class="string">""</span>);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">string</span> str,ans=<span class="string">""</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"请输入待解码的合法01序列\n"</span>;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;str;</span><br><span class="line"><span class="keyword">int</span> len=str.length();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">string</span> tmp=str.substr(i,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="built_in">string</span>,<span class="keyword">char</span>&gt;::iterator it=m.find(tmp);</span><br><span class="line"><span class="keyword">while</span>(it==m.end())</span><br><span class="line">&#123;</span><br><span class="line">cnt++;</span><br><span class="line"><span class="keyword">if</span>(i+cnt&gt;len)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"输入序列不合法！\n"</span>;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">tmp=str.substr(i,cnt);</span><br><span class="line">it=m.find(tmp);</span><br><span class="line">&#125;</span><br><span class="line">ans+=m[tmp];</span><br><span class="line">i+=cnt<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"解码后的序列为："</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">del</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">destroy(root);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"该哈夫曼树已经成功销毁！\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">HuffmanTree ht;</span><br><span class="line">ht.init();</span><br><span class="line">ht.build();</span><br><span class="line">ht.show();</span><br><span class="line">ht.solve();</span><br><span class="line">ht.del();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 哈夫曼树 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>职业测试结果-UX课程要求</title>
      <link href="/others/ux/"/>
      <url>/others/ux/</url>
      
        <content type="html"><![CDATA[<p>物流师</p><a id="more"></a><hr><p>ISTJ</p><p>ISTJ人格类型被认为是数量最多的，大约占人口总数的13%。他们明显的正直，实际，奉献的优点使他们成为很多家庭以及拥护传统，规则，标准的组织的重要一员，比如律所，监管部门和军队。ISTJ类型的人愿意为自己的行为负责，为努力完成目标所做的事感到骄傲。ISTJ会毫不吝啬时间和精力来准确和耐心地完成每个任务。</p><p>ISTJ不喜欢做假设，而是分析周围环境，根据事实来找到最实际的做法。ISTJ从不废话，当他们做了决定时，会把取得目标需要的所有信息传播给别人，期待他人立刻掌握情况马上行动。ISTJ不能容忍犹豫不决，在自己的决定受到不切实际，尤其是忽略事实的理论的挑战时会很快失去耐心。如果这些挑战变成了浪费时间的辩论，截止日期越近他们就会变得越发气愤。</p><p>如果你尊重你的名誉，就结交那些优秀的人</p><p>ISTJ说做就做，不惜一切完成任务，那些不同样说话算话的人使他们感到困惑。如果再加上懒惰和虚伪就最为ISTJ所不齿。因为这样，ISTJ通常更喜欢独自工作，或至少要建立明确的等级制度，使他们可以计划并完成目标而不用为别人的不可靠所扰。</p><p>ISTJ有敏锐的建立在事实上的思维，与依靠别人相比更愿意自给自足。对别人的依赖在他们看来是弱点，他们对责任的热情，可靠，和正直的人格不允许他们落入这样的陷阱。</p><p>正直的人格对ISTJ很重要，他们不论代价遵守已经建立的规则和准则，时刻报告自己的错误，实话实说，即使这样做有灾难性的后果。对ISTJ来说，诚信比感性思考重要得多，他们直截了当的方式可能让别人误解他们冷漠，机械化。这种类型的人很难对外表达自己的情绪和好感，但是说他们没感情甚至没人性会让他们很受伤。</p><p>与不合适的人在一起还不如独自一人</p><p>ISTJ的尽心尽力是很好的品质，使得他们能成就许多，但同时也是能被一些不严谨的人利用的弱点。ISTJ寻求安全和稳定，把平缓的运营看作自己的责任，他们可能发现同事和爱人把他们的责任转移给自己，因为自己总会接受。ISTJ趋向于保留自己的看法用事实说话，但要等观察得到的证据解释一切可能需要很长时间。</p><p>ISTJ需要记得照顾自己，他们对稳定和高效顽固的尽心尽力可能使一些长期目标变得困难，因为别人会更加依赖他们，使ISTJ产生一些可能很多年都不会表现出来的情绪压力，在表现出来时通常为时已晚。如果他们能找到真正感激和赞扬他们的品质，享受他们的聪慧清晰和可靠的同事或配偶，ISTJ会发现他们使事情稳定的角色是很有满足感的，因为自己是一个完美运行的系统的一部分。</p>]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>HDU P1166 敌兵布阵 题解</title>
      <link href="/answer/hdu-p1166/"/>
      <url>/answer/hdu-p1166/</url>
      
        <content type="html"><![CDATA[<p>HDU P1166 敌兵布阵 题解</p><a id="more"></a><h1 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h1><p>C国的死对头A国这段时间正在进行军事演习，所以C国间谍头子Derek和他手下Tidy又开始忙乎了。A国在海岸线沿直线布置了N个工兵营地,Derek和Tidy的任务就是要监视这些工兵营地的活动情况。由于采取了某种先进的监测手段，所以每个工兵营地的人数C国都掌握的一清二楚,每个工兵营地的人数都有可能发生变动，可能增加或减少若干人手,但这些都逃不过C国的监视。</p><p>中央情报局要研究敌人究竟演习什么战术,所以Tidy要随时向Derek汇报某一段连续的工兵营地一共有多少人,例如Derek问:“Tidy,马上汇报第3个营地到第10个营地共有多少人!”Tidy就要马上开始计算这一段的总人数并汇报。但敌兵营地的人数经常变动，而Derek每次询问的段都不一样，所以Tidy不得不每次都一个一个营地的去数，很快就精疲力尽了，Derek对Tidy的计算速度越来越不满:”你个死肥仔，算得这么慢，我炒你鱿鱼!”Tidy想：“你自己来算算看，这可真是一项累人的工作!我恨不得你炒我鱿鱼呢!”无奈之下，Tidy只好打电话向计算机专家Windbreaker求救,Windbreaker说：“死肥仔，叫你平时做多点acm题和看多点算法书，现在尝到苦果了吧!”Tidy说：”我知错了。。。”但Windbreaker已经挂掉电话了。Tidy很苦恼，这么算他真的会崩溃的，聪明的读者，你能写个程序帮他完成这项工作吗？不过如果你的程序效率不够高的话，Tidy还是会受到Derek的责骂的.</p><h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>第一行一个整数T，表示有T组数据。</p><p>每组数据第一行一个正整数N（N&lt;=50000）,表示敌人有N个工兵营地，接下来有N个正整数,第i个正整数ai代表第i个工兵营地里开始时有ai个人（1&lt;=ai&lt;=50）。</p><p>接下来每行有一条命令，命令有4种形式：</p><p>(1) Add i j,i和j为正整数,表示第i个营地增加j个人（j不超过30）</p><p>(2)Sub i j ,i和j为正整数,表示第i个营地减少j个人（j不超过30）;</p><p>(3)Query i j ,i和j为正整数,i&lt;=j，表示询问第i到第j个营地的总人数;</p><p>(4)End 表示结束，这条命令在每组数据最后出现; </p><p>每组数据最多有40000条命令</p><h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>对第i组数据,首先输出“Case i:”和回车, </p><p>对于每个Query询问，输出一个整数并回车,表示询问的段中的总人数,这个数保持在int以内。</p><h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">10</span><br><span class="line">1 2 3 4 5 6 7 8 9 10</span><br><span class="line">Query 1 3</span><br><span class="line">Add 3 6</span><br><span class="line">Query 2 7</span><br><span class="line">Sub 10 2</span><br><span class="line">Add 6 3</span><br><span class="line">Query 3 10</span><br><span class="line">End</span><br></pre></td></tr></table></figure><h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Case 1:</span><br><span class="line">6</span><br><span class="line">33</span><br><span class="line">59</span><br></pre></td></tr></table></figure><p>显然是线段树题，而且还是单点修改的……把 luogu 3372 的 AC Code 改一下就完事了。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line">ll ans[<span class="number">1000010</span>],tag[<span class="number">1000010</span>],a[<span class="number">1000010</span>],n,m;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">ls</span><span class="params">(ll p)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p&lt;&lt;<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">rs</span><span class="params">(ll p)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">push_up</span><span class="params">(ll p)</span></span>&#123;</span><br><span class="line">    ans[p]=ans[ls(p)]+ans[rs(p)];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(ll p,ll l,ll r)</span></span>&#123;</span><br><span class="line">    tag[p]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l==r)</span><br><span class="line">    &#123;</span><br><span class="line">        ans[p]=a[l];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ll mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(ls(p),l,mid);</span><br><span class="line">    build(rs(p),mid+<span class="number">1</span>,r);</span><br><span class="line">    push_up(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">f</span><span class="params">(ll p,ll l,ll r,ll k)</span></span>&#123;</span><br><span class="line">    ans[p]+=k*(r-l+<span class="number">1</span>);</span><br><span class="line">    tag[p]+=k;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">push_down</span><span class="params">(ll p,ll l,ll r)</span></span>&#123;</span><br><span class="line">    ll mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    f(ls(p),l,mid,tag[p]);</span><br><span class="line">    f(rs(p),mid+<span class="number">1</span>,r,tag[p]);</span><br><span class="line">    tag[p]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(ll x,ll y,ll l,ll r,ll p,ll k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=l&amp;&amp;r&lt;=y)</span><br><span class="line">    &#123;</span><br><span class="line">        ans[p]+=k*(r-l+<span class="number">1</span>);</span><br><span class="line">        tag[p]+=k;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    push_down(p,l,r);</span><br><span class="line">    ll mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=mid) update(x,y,l,mid,ls(p),k);</span><br><span class="line">    <span class="keyword">if</span>(y&gt;mid) update(x,y,mid+<span class="number">1</span>,r,rs(p),k);</span><br><span class="line">    push_up(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(ll x,ll y,ll l,ll r,ll p)</span></span>&#123;</span><br><span class="line">    ll tmp=<span class="number">0</span>,mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=l&amp;&amp;r&lt;=y) <span class="keyword">return</span> ans[p];</span><br><span class="line">    push_down(p,l,r);</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=mid) tmp+=query(x,y,l,mid,ls(p));</span><br><span class="line">    <span class="keyword">if</span>(y&gt;mid) tmp+=query(x,y,mid+<span class="number">1</span>,r,rs(p));</span><br><span class="line">    <span class="keyword">return</span> tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> CASE=<span class="number">1</span>;CASE&lt;=T;CASE++)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case %d:\n"</span>,CASE);</span><br><span class="line">        ll x,y,k,t;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;a[i]);</span><br><span class="line">        build(<span class="number">1</span>,<span class="number">1</span>,n);</span><br><span class="line">        <span class="built_in">string</span> command;</span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;command)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(command==<span class="string">"End"</span>) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span>(command==<span class="string">"Add"</span>)&#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%lld %lld"</span>,&amp;x,&amp;k);</span><br><span class="line">                update(x,x,<span class="number">1</span>,n,<span class="number">1</span>,k);<span class="comment">//在luogu P3372这里是对[x,y]区间修改，现在改成对[x,x]就是单点了（</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(command==<span class="string">"Sub"</span>)&#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%lld %lld"</span>,&amp;x,&amp;k);</span><br><span class="line">                update(x,x,<span class="number">1</span>,n,<span class="number">1</span>,-k);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(command==<span class="string">"Query"</span>)&#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%lld %lld"</span>,&amp;x,&amp;y);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,query(x,y,<span class="number">1</span>,n,<span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 线段树 </tag>
            
            <tag> 题解 </tag>
            
            <tag> HDU </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>排序专题</title>
      <link href="/algorithm/sort/"/>
      <url>/algorithm/sort/</url>
      
        <content type="html"><![CDATA[<p>排序专题  </p><a id="more"></a><p>基本题面：  </p><p>设有n个正整数，保证n不大于100且这n个数都不大于1000，对其进行从小到大的排序。</p><h1 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,a[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)<span class="comment">//依次确定应该填在下标为i的位置的数</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;n;j++)<span class="comment">//将下标i上保存的数依次与其后所有数字比较</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]&gt;a[j])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> temp=a[i];</span><br><span class="line">                a[i]=a[j];</span><br><span class="line">                a[j]=temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;a[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,a[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)<span class="comment">//通过第i次交换，能确定下标为i的位置所应该填写的数</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=n<span class="number">-1</span>;j&gt;i;j--)<span class="comment">//每次把最小的交换到最前面</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[j<span class="number">-1</span>]&gt;a[j])<span class="comment">//比较相邻两个</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> temp=a[j<span class="number">-1</span>];</span><br><span class="line">                a[j<span class="number">-1</span>]=a[j];</span><br><span class="line">                a[j]=temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;a[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="桶排序"><a href="#桶排序" class="headerlink" title="桶排序"></a>桶排序</h1><p>桶排序有其缺点：  </p><p>1、必须全是整数（负数可以平移数轴）  </p><p>2、必须知道数字最大不超过多少  </p><p>3、所开数组不得超过题目的内存限制  </p><p>需要以上三点同时满足，否则不可以使用桶排序  </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,a[<span class="number">100</span>];</span><br><span class="line">    <span class="keyword">int</span> bucket[<span class="number">1000</span>]=&#123;<span class="number">0</span>&#125;;<span class="comment">//用bucket[i]表示数字i出现的次数，初始化为0</span></span><br><span class="line">    <span class="comment">//因为题目中说了都是正整数而且均小于1000，所以数组开到1000</span></span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> number=a[i];</span><br><span class="line">        bucket[number]++;<span class="comment">//每当数字i出现，就令其出现次数+1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1000</span>;i++)<span class="comment">//因为题目中说了都是正整数而且均小于1000，所以循环小于1000</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(bucket[i]!=<span class="number">0</span>)<span class="comment">//如果bucket[i]==0，则表示数字i没有出现过，就不需要输出了</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;bucket[i];j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//因为数字出现了bucket[i]次，所以需要循环bucket[i]次</span></span><br><span class="line">                <span class="comment">//否则会造成重复数字只会输出一个</span></span><br><span class="line">                <span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="sort函数"><a href="#sort函数" class="headerlink" title="sort函数"></a>sort函数</h1><p>sort函数默认是从小到大排序的。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,a[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">    sort(a,a+n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;a[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>如果要令sort函数实现从大到小排序，可以写作如下程序段。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a&gt;b) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,a[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">    sort(a,a+n,cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;a[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>其中cmp函数因为bool类型的特性，又可简写，变为如下程序段。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a&gt;b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,a[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">    sort(a,a+n,cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;a[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>还可以有不写cmp函数，而使用重载运算符的方法。此处不做介绍，详见C++语言-9-结构体。</p><h1 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h1><p>堆排序需要使用优先队列，开始学习队列后才需要学习。  </p><p>优先队列默认是最大堆，也就是说最大的数在队首。要实现从小到大排序的话只能写作如下程序段。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    priority_queue&lt;<span class="keyword">int</span>,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;,greater&lt;<span class="keyword">int</span>&gt; &gt;q;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> t;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line">        q.push(t);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;q.top()&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">        q.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>而若要用优先队列实现从大到小排序，只需写作如下程序段。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    priority_queue&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> t;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line">        q.push(t);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;q.top()&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">        q.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h1><p>快速排序是分治算法的入门题，开始学分治算法后才需要学习。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">kuai</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span><span class="comment">//每次确定区间最中间的数字</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i=l,j=r,mid=a[(l+r)/<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">while</span>(i&lt;=j)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(a[i]&lt;mid) i++;</span><br><span class="line">        <span class="keyword">while</span>(a[j]&gt;mid) j--;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;=j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp=a[i];</span><br><span class="line">            a[i]=a[j];</span><br><span class="line">            a[j]=tmp;</span><br><span class="line">            i++;</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(l&lt;j) kuai(l,j);<span class="comment">//排序左区间</span></span><br><span class="line">    <span class="keyword">if</span>(r&gt;i) kuai(i,r);<span class="comment">//排序右区间</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,a[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">    kuai(<span class="number">0</span>,n<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;a[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 排序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>最短路三大算法核心程序段</title>
      <link href="/algorithm/ShortestPath/"/>
      <url>/algorithm/ShortestPath/</url>
      
        <content type="html"><![CDATA[<p>以下第1和第2均假设起点为1号点，终点为n号点。</p><a id="more"></a><h1 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h1><p>等待重写</p><h1 id="SPFA"><a href="#SPFA" class="headerlink" title="SPFA"></a>SPFA</h1><p>适用于单源最短路，可以处理负权边，不能处理负环。<br>思路：从起点开始寻找起点能到达的结点，然后按次序将结点入队，每当入队时标记入队，每当出队取消标记，重复处理，直到队列为空。<br>重点：和Dijkstra相比就是多了v数组用来保存结点是否在队列里，其结果导致同一个结点可以重复入队。而Dijkstra中所有结点都只能入队一次。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> e[<span class="number">1010</span>][<span class="number">1010</span>],ans[<span class="number">1010</span>],v[<span class="number">1010</span>],n;</span><br><span class="line"><span class="comment">//取e[a][b]=w表示存在一条从a通向b的道路，道路长度为w，其值应该在main中已经处理好</span></span><br><span class="line"><span class="comment">//取ans[i]表示从起点到结点i的距离为ans[i]</span></span><br><span class="line"><span class="comment">//取v[i]表示结点i是否在队列中</span></span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(!q.empty()) q.pop();<span class="comment">//清空队列</span></span><br><span class="line">    <span class="built_in">memset</span>(v,<span class="number">0</span>,<span class="keyword">sizeof</span>(v));<span class="comment">//初始化v数组</span></span><br><span class="line">    <span class="built_in">memset</span>(ans,<span class="number">0</span>,<span class="keyword">sizeof</span>(ans));<span class="comment">//初始化ans数组</span></span><br><span class="line">    q.push(<span class="number">1</span>);<span class="comment">//起点入队</span></span><br><span class="line">    v[<span class="number">1</span>]=<span class="number">1</span>;<span class="comment">//起点标记为已经在队列中</span></span><br><span class="line">    <span class="keyword">while</span>(!q.empty())<span class="comment">//当队列非空时</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> st=q.front();<span class="comment">//取队头元素</span></span><br><span class="line">        q.pop();<span class="comment">//弹出</span></span><br><span class="line">        v[st]=<span class="number">0</span>;<span class="comment">//标记队头元素为不在队列中</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="comment">//枚举所有点</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">1</span>) <span class="keyword">continue</span>;<span class="comment">//如果i是起点，跳过</span></span><br><span class="line">            <span class="keyword">int</span> p=<span class="number">0</span>;<span class="comment">//取变量p来记录是否发生更优解的更新</span></span><br><span class="line">            <span class="keyword">if</span>(e[st][i]&amp;&amp;(!ans[i]||ans[i]&gt;ans[st]+e[st][i])) ans[i]=ans[st]+e[st][i],p=<span class="number">1</span>;<span class="comment">//发生更优解的更新，p=1</span></span><br><span class="line">            <span class="keyword">if</span>(p&amp;&amp;!v[i]) q.push(i),v[i]=<span class="number">1</span>;<span class="comment">//如果发生更优解的更新，且结点i未入队，则结点i入队，标记为已入队</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="Floyd"><a href="#Floyd" class="headerlink" title="Floyd"></a>Floyd</h1><p>适用于求所有结点间的最短路径。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> d[<span class="number">100</span>][<span class="number">100</span>];<span class="comment">//用d[i][j]表示从i到j的最短路径</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;n;k++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)</span><br><span class="line">            d[i][j]=min(d[i][j],d[i][k]+d[k][j]);</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 最短路 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Luogu P1880 [NOI1995]石子合并 题解</title>
      <link href="/answer/luogu-p1880/"/>
      <url>/answer/luogu-p1880/</url>
      
        <content type="html"><![CDATA[<p>Luogu P1880 [NOI1995]石子合并 题解  </p><p>请先掌握区间dp。</p><a id="more"></a><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>在一个圆形操场的四周摆放N堆石子,现要将石子有次序地合并成一堆.规定每次只能选相邻的2堆合并成新的一堆，并将新的一堆的石子数，记为该次合并的得分。  </p><p>试设计出1个算法,计算出将N堆石子合并成1堆的最小得分和最大得分.</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>数据的第1行试正整数N,1≤N≤100,表示有N堆石子.第2行有N个数,分别表示每堆石子的个数.</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出共2行,第1行为最小得分,第2行为最大得分.</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">4 5 9 4</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">43</span><br><span class="line">54</span><br></pre></td></tr></table></figure><p>典型的环形dp题。  </p><p>思路见注释。</p><p>代码：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF (1&lt;&lt;30)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn(a,b) (a&gt;b)?a:b</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> minn(a,b) (a&lt;b)?a:b</span></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">110</span>],f[<span class="number">110</span>][<span class="number">110</span>][<span class="number">2</span>],n,ma,mi;</span><br><span class="line"><span class="comment">//用f[i][j][0]表示合并从i到j的最小花费，f[i][j][1]表示合并从i到j的最大花费</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i&lt;=j) ans+=a[i++];</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;<span class="comment">//计算合并从i到j（含i和j）的总费用</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;n;t++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n-t;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> j=i+t;</span><br><span class="line">            f[i][j][<span class="number">0</span>]=INF;</span><br><span class="line">            f[i][j][<span class="number">1</span>]=-INF;</span><br><span class="line">            <span class="keyword">int</span> tmp=sum(i,j);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=i;k&lt;j;k++)</span><br><span class="line">            &#123;</span><br><span class="line">            <span class="keyword">if</span>(f[i][j][<span class="number">0</span>]&gt;f[i][k][<span class="number">0</span>]+f[k+<span class="number">1</span>][j][<span class="number">0</span>]+tmp) f[i][j][<span class="number">0</span>]=f[i][k][<span class="number">0</span>]+f[k+<span class="number">1</span>][j][<span class="number">0</span>]+tmp;</span><br><span class="line">            <span class="keyword">if</span>(f[i][j][<span class="number">1</span>]&lt;f[i][k][<span class="number">1</span>]+f[k+<span class="number">1</span>][j][<span class="number">1</span>]+tmp) f[i][j][<span class="number">1</span>]=f[i][k][<span class="number">1</span>]+f[k+<span class="number">1</span>][j][<span class="number">1</span>]+tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    mi=minn(mi,f[<span class="number">0</span>][n<span class="number">-1</span>][<span class="number">0</span>]);</span><br><span class="line">    ma=maxn(ma,f[<span class="number">0</span>][n<span class="number">-1</span>][<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    ma=-INF;mi=INF;<span class="comment">//初始化最大值为极小值，最小值为极大值</span></span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="keyword">sizeof</span>(f));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</span><br><span class="line">    solve();<span class="comment">//先按原顺序计算一遍</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="keyword">sizeof</span>(f));</span><br><span class="line">        <span class="keyword">int</span> tmp=a[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n<span class="number">-1</span>;j++) a[j]=a[j+<span class="number">1</span>];</span><br><span class="line">        a[n<span class="number">-1</span>]=tmp;<span class="comment">//第一个数移到最后，其余每个数向前移动一位</span></span><br><span class="line">        solve();<span class="comment">//重算</span></span><br><span class="line">        <span class="comment">//环形dp的重点在于变更原有顺序重算</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;mi&lt;&lt;<span class="built_in">endl</span>&lt;&lt;ma;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Luogu </tag>
            
            <tag> 题解 </tag>
            
            <tag> dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Luogu P3366 【模板】最小生成树 题解</title>
      <link href="/answer/luogu-p3366/"/>
      <url>/answer/luogu-p3366/</url>
      
        <content type="html"><![CDATA[<p>Luogu P3366 【模板】最小生成树 题解</p><a id="more"></a><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>如题，给出一个无向图，求出最小生成树，如果该图不连通，则输出orz  </p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h2><p>第一行包含两个整数N、M，表示该图共有N个结点和M条无向边。（N&lt;=5000，M&lt;=200000）  </p><p>接下来M行每行包含三个整数Xi、Yi、Zi，表示有一条长度为Zi的无向边连接结点Xi、Yi</p><h2 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h2><p>输出包含一个数，即最小生成树的各边的长度之和；如果该图不连通则输出orz</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><h2 id="输入样例-1："><a href="#输入样例-1：" class="headerlink" title="输入样例#1："></a>输入样例#1：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">4 5</span><br><span class="line">1 2 2</span><br><span class="line">1 3 2</span><br><span class="line">1 4 3</span><br><span class="line">2 3 4</span><br><span class="line">3 4 3</span><br></pre></td></tr></table></figure><h2 id="输出样例-1："><a href="#输出样例-1：" class="headerlink" title="输出样例#1："></a>输出样例#1：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">7</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>时空限制：1000ms,128M  </p><p>数据规模：  </p><p>对于20%的数据：N&lt;=5，M&lt;=20  </p><p>对于40%的数据：N&lt;=50，M&lt;=2500  </p><p>对于70%的数据：N&lt;=500，M&lt;=10000  </p><p>对于100%的数据：N&lt;=5000，M&lt;=200000  </p><p>最小生成树板子题，没什么好说的……  </p><p>算法说明：  </p><p>以下两个算法都基于贪心实现。  </p><p>kruskal算法采用并查集思想。步骤如下：  </p><ol><li>把每个点单独拆分，使得每个点的父亲都是它自己，即每个点单独成一个连通块。</li><li>每次取最短边，如果边两端的点处于同一个连通块，则pop掉，再取最短的边，直到边两端的点不处于同一个连通块为止。</li><li>合并两个点所在的连通块，并且ans+=两个点的距离。</li><li>重复2和3，共n-1遍。</li></ol><p>prim算法采用遍历。步骤如下：  </p><ol><li>初始把1号点标记为已经使用过，并将与其相连的所有边加入队列。</li><li>每次取最短边，如果边的终点已使用过，则pop掉，再取最短的边，直到边的终点未使用过为止，</li><li>将边的终点标记为已经使用过，并且ans+=该边长度，再将与该边终点相连的所有边加入队列。</li><li>重复2和3，共n-1遍。<br>*因为每次选择可用的新边时，该边起点都是已经使用过的（所以该边才有加入队列），所以只要判断该边终点即可。</li></ol><p>代码：  </p><p>kruskal算法：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> u,v,w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> n,m,f[<span class="number">5010</span>],v[<span class="number">5010</span>];</span><br><span class="line">priority_queue&lt;edge,<span class="built_in">vector</span>&lt;edge&gt;,greater&lt;edge&gt; &gt;q;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &gt;(<span class="keyword">const</span> edge &amp;a,<span class="keyword">const</span> edge &amp;b)&#123;</span><br><span class="line">    <span class="keyword">return</span> a.w&gt;b.w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x==f[x]) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">return</span> f[x]=find(f[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">join</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">    f[x]=y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">kruskal</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">1</span>;x&lt;n;x++)</span><br><span class="line">    &#123;</span><br><span class="line">        edge temp=q.top();</span><br><span class="line">        <span class="keyword">while</span>(find(temp.u)==find(temp.v))</span><br><span class="line">        &#123;</span><br><span class="line">            q.pop();</span><br><span class="line">            temp=q.top();</span><br><span class="line">        &#125;</span><br><span class="line">        q.pop();</span><br><span class="line">        <span class="keyword">int</span> tu=find(temp.u),tv=find(temp.v);</span><br><span class="line">        join(tu,tv);</span><br><span class="line">        ans+=temp.w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) f[i]=i;</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x,y,z;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;x,&amp;y,&amp;z);</span><br><span class="line">        v[x]=v[y]=<span class="number">1</span>;</span><br><span class="line">        edge temp;</span><br><span class="line">        temp.u=x;</span><br><span class="line">        temp.v=y;</span><br><span class="line">        temp.w=z;</span><br><span class="line">        q.push(temp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(!v[i])&#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"orz"</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;kruskal();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>prim算法：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> v,w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">bool</span> v[<span class="number">5010</span>]=&#123;<span class="literal">false</span>&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt;G[<span class="number">5010</span>];</span><br><span class="line">priority_queue&lt;edge,<span class="built_in">vector</span>&lt;edge&gt;,greater&lt;edge&gt; &gt;q;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &gt;(<span class="keyword">const</span> edge &amp;a,<span class="keyword">const</span> edge &amp;b)&#123;</span><br><span class="line">    <span class="keyword">return</span> a.w&gt;b.w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">prim</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans=<span class="number">0</span>;</span><br><span class="line">    v[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">vector</span>&lt;edge&gt;::iterator i=G[<span class="number">1</span>].begin();i!=G[<span class="number">1</span>].end();i++)</span><br><span class="line">        q.push(*i);</span><br><span class="line">    <span class="keyword">int</span> x=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(x++&lt;n)&#123;</span><br><span class="line">        edge temp=q.top();</span><br><span class="line">        <span class="keyword">while</span>(v[temp.v])&#123;</span><br><span class="line">            q.pop();</span><br><span class="line">            temp=q.top();</span><br><span class="line">        &#125;</span><br><span class="line">        ans+=temp.w;</span><br><span class="line">        v[temp.v]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">vector</span>&lt;edge&gt;::iterator i=G[temp.v].begin();i!=G[temp.v].end();i++)</span><br><span class="line">            q.push(*i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> x,y,z;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;x,&amp;y,&amp;z);</span><br><span class="line">        edge temp;</span><br><span class="line">        temp.v=y;</span><br><span class="line">        temp.w=z;</span><br><span class="line">        G[x].push_back(temp);</span><br><span class="line">        temp.v=x;</span><br><span class="line">        G[y].push_back(temp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(G[i].empty())&#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"orz"</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;prim();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Luogu </tag>
            
            <tag> 题解 </tag>
            
            <tag> 最小生成树 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年4月月赛 Day2 Violet 题解</title>
      <link href="/answer/yxyz201804-0203/"/>
      <url>/answer/yxyz201804-0203/</url>
      
        <content type="html"><![CDATA[<p>2018年4月月赛 Day2 Violet 题解</p><a id="more"></a><h1 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h1><p>少佐在哪！！别拦着我！！我要去找少佐！！ 自从那天的别离之后，Violet和少佐已经分别许久。就在Violet从昏迷中恢复意识的那一刻起，Violet一直在计划着去寻找少佐。  </p><p>现在，时机成熟了。</p><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>Violet只能确定少佐在n个城市中的某一个，却不知道具体在哪一个，而从疗养院所在地s去到任意一个城市，都需要经过若干城市之间的若干有向道路。这些道路错综复杂，Violet想尽快赶到。  </p><p>请你帮她算算到各个城市的最短时间吧。</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行包含三个整数N、M、S，分别表示点的个数、有向边的个数、出发点的编号。</p><p>接下来M行每行包含三个整数Fi、Gi、Wi，分别表示第i条有向边的出发点、目标点和长度。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行，包含N个用空格分隔的整数，其中第i个整数表示从点S出发到点i的最短路径长度（若S=i则最短路径长度为0，若从点S无法到达点i，则最短路径长度为2147483647）</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">4 6 1</span><br><span class="line">1 2 2</span><br><span class="line">2 3 2</span><br><span class="line">2 4 1</span><br><span class="line">1 3 5</span><br><span class="line">3 4 3</span><br><span class="line">1 4 4</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 2 4 3</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>1&lt;=N&lt;=10000，1&lt;=M&lt;=500000</p><p>邻接表板子题……  </p><p>可类比Luogu P3371  </p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span><span class="keyword">int</span> next,dis;&#125;; </span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; e[<span class="number">10010</span>];</span><br><span class="line"><span class="keyword">int</span> ans[<span class="number">10010</span>];</span><br><span class="line"><span class="keyword">bool</span> v[<span class="number">10010</span>]=&#123;<span class="literal">false</span>&#125;;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">addedge</span><span class="params">(<span class="keyword">int</span> f,<span class="keyword">int</span> g,<span class="keyword">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge x;</span><br><span class="line">    x.next=g;</span><br><span class="line">    x.dis=w;</span><br><span class="line">    e[f].push_back(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(!q.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> t=q.front();</span><br><span class="line">        q.pop();</span><br><span class="line">        v[t]=<span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">vector</span>&lt;edge&gt;::iterator i=e[t].begin();i!=e[t].end();i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp=ans[t]+i-&gt;dis,ttt=i-&gt;next;</span><br><span class="line">            <span class="keyword">if</span>(tmp&lt;ans[ttt])</span><br><span class="line">            &#123;</span><br><span class="line">                ans[ttt]=tmp;</span><br><span class="line">                <span class="keyword">if</span>(!v[ttt])</span><br><span class="line">                &#123;</span><br><span class="line">                    q.push(ttt);</span><br><span class="line">                    v[ttt]=<span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,m,s;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;s;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) ans[i]=<span class="number">2147483647</span>;</span><br><span class="line">    ans[s]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> f,g,w;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;f,&amp;g,&amp;w);</span><br><span class="line">        addedge(f,g,w);</span><br><span class="line">    &#125;</span><br><span class="line">    q.push(s);</span><br><span class="line">    v[s]=<span class="literal">true</span>;</span><br><span class="line">    spfa();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">printf</span>(<span class="string">"%d "</span>,ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> SPFA </tag>
            
            <tag> 云霄一中月赛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年4月月赛 Day2 工作分配问题 题解</title>
      <link href="/answer/yxyz201804-0202/"/>
      <url>/answer/yxyz201804-0202/</url>
      
        <content type="html"><![CDATA[<p>2018年4月月赛 Day2 工作分配问题 题解</p><a id="more"></a><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>设有 n 件工作分配给 n 个人。将工作 i 分配给第 j 个人所需的费用为c[i][j] 。试设计一个算法，为每一个人都分配 1 件不同的工作，并使总费用达到最小。</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行有 1 个正整数 n 。接下来的 n 行，每行 n 个正整数，表示工作费用。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行，包含一个正整数，为计算出的最小总费用。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">10 2 3</span><br><span class="line">2 3 4</span><br><span class="line">3 4 5</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">9</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>对于100%的数据，1&lt;=n&lt;=20，1&lt;=c[i][j]&lt;=100。</p><p>1月月赛的原题。  </p><p>本题除了一月月赛中已经给出的dfs解，还可以有mcmf解。  </p><p>代码：  </p><p>dfs解：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">bool</span> v[<span class="number">30</span>]=&#123;<span class="literal">false</span>&#125;;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> c[<span class="number">30</span>][<span class="number">30</span>],n;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> sum)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x&gt;n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(sum&lt;ans) ans=sum;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ans&gt;sum)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!v[i])</span><br><span class="line">            &#123;</span><br><span class="line">                v[i]=<span class="literal">true</span>;</span><br><span class="line">                dfs(x+<span class="number">1</span>,sum+c[x][i]);</span><br><span class="line">                v[i]=<span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cin</span>&gt;&gt;c[i][j];</span><br><span class="line">            ans+=c[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;ans;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>感谢cyy dalao支援的MCMF解。  </p><p>MCMF解：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">queue</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::min;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxe = <span class="number">2510</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">55</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> u,v,f,c;</span><br><span class="line">    <span class="keyword">int</span> next;</span><br><span class="line">&#125;e[maxe];</span><br><span class="line"><span class="keyword">int</span> head[maxn];</span><br><span class="line"><span class="keyword">int</span> ecnt;</span><br><span class="line"><span class="keyword">void</span> _AddEdge(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> f,<span class="keyword">int</span> c) &#123;</span><br><span class="line">    e[ecnt].u = u;</span><br><span class="line">    e[ecnt].v = v;</span><br><span class="line">    e[ecnt].f = f;</span><br><span class="line">    e[ecnt].c = c;</span><br><span class="line">    e[ecnt].next = head[u];</span><br><span class="line">    head[u] = ecnt;</span><br><span class="line">    ecnt ++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddEdge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> f,<span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">    _AddEdge(u,v,f,c);</span><br><span class="line">    _AddEdge(v,u,<span class="number">0</span>,-c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> inq[maxn];</span><br><span class="line"><span class="keyword">int</span> dis[maxn];</span><br><span class="line"><span class="keyword">int</span> pre[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">    <span class="built_in">memset</span>(dis,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(dis));</span><br><span class="line">    <span class="built_in">memset</span>(inq,<span class="literal">false</span>,<span class="keyword">sizeof</span>(inq));</span><br><span class="line">    <span class="built_in">memset</span>(pre,<span class="number">-1</span>,<span class="keyword">sizeof</span>(pre));</span><br><span class="line">    dis[s] = <span class="number">0</span>;</span><br><span class="line">    inq[s] = <span class="literal">true</span>;</span><br><span class="line">    q.push(s);</span><br><span class="line">    <span class="keyword">while</span> (!q.empty()) &#123;</span><br><span class="line">        <span class="keyword">int</span> cur = q.front();</span><br><span class="line">        q.pop();</span><br><span class="line">        inq[cur] = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=head[cur];~i;i=e[i].next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (e[i].f &gt; <span class="number">0</span> &amp;&amp; dis[cur] + e[i].c &lt; dis[e[i].v]) &#123;</span><br><span class="line">                dis[e[i].v] = dis[cur] + e[i].c;</span><br><span class="line">                pre[e[i].v] = i;</span><br><span class="line">                <span class="keyword">if</span> (!inq[e[i].v]) &#123;</span><br><span class="line">                    q.push(e[i].v);</span><br><span class="line">                    inq[e[i].v] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dis[t] != inf;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MCMF</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t,<span class="keyword">int</span> &amp;flow,<span class="keyword">int</span> &amp;cost)</span> </span>&#123;</span><br><span class="line">    flow = <span class="number">0</span>;</span><br><span class="line">    cost = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (spfa(s,t)) &#123;</span><br><span class="line">        <span class="keyword">int</span> curFlow = inf;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=pre[t];~i;i=pre[e[i].u]) curFlow = min(curFlow,e[i].f);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=pre[t];~i;i=pre[e[i].u]) &#123;</span><br><span class="line">            e[ i ].f -= curFlow;</span><br><span class="line">            e[i^<span class="number">1</span>].f += curFlow;</span><br><span class="line">        &#125;</span><br><span class="line">        cost += curFlow * dis[t];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">编号规则：</span></span><br><span class="line"><span class="comment">源点：0</span></span><br><span class="line"><span class="comment">汇点：1</span></span><br><span class="line"><span class="comment">人：2*n</span></span><br><span class="line"><span class="comment">任务：2*n+1</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(head,<span class="number">-1</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</span><br><span class="line">        AddEdge(  <span class="number">0</span>  ,<span class="number">2</span>*i,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">        AddEdge(<span class="number">2</span>*i+<span class="number">1</span>, <span class="number">1</span> ,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++) &#123;</span><br><span class="line">            <span class="keyword">int</span> t;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;t);</span><br><span class="line">            AddEdge(<span class="number">2</span>*i,<span class="number">2</span>*j+<span class="number">1</span>,<span class="number">1</span>,t);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> f,c;</span><br><span class="line">    MCMF(<span class="number">0</span>,<span class="number">1</span>,f,c);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,c);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> 云霄一中月赛 </tag>
            
            <tag> dfs </tag>
            
            <tag> MCMF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年4月月赛 Day2 携带 题解</title>
      <link href="/answer/yxyz201804-0201/"/>
      <url>/answer/yxyz201804-0201/</url>
      
        <content type="html"><![CDATA[<p>2018年4月月赛 Day2 携带 题解</p><a id="more"></a><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>一般的九键手机的键盘是这样的：</p><table><thead><tr><th style="text-align:center">&nbsp;</th><th style="text-align:center">&nbsp;</th><th style="text-align:center">&nbsp;</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">2 abc</td><td style="text-align:center">3 def</td></tr><tr><td style="text-align:center">4 ghi</td><td style="text-align:center">5 jkl</td><td style="text-align:center">6 mno</td></tr><tr><td style="text-align:center">7 pqrs</td><td style="text-align:center">8 tuv</td><td style="text-align:center">9 wxyz</td></tr><tr><td style="text-align:center">*</td><td style="text-align:center">0</td><td style="text-align:center">#</td></tr></tbody></table><p>要按出英文字母就必须要按数字键多下。例如要按出x就得按9三下，第一下会出9，第二下会出w，而第三下会把w变成x。0键按两下会出一个空格。  </p><p>你的任务是读取一个句子，求出要在手机上打出这个句子至少需要按多少下键盘。</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>一行一个句子，只包含英文小写字母、数字、空格、星号(*)和井号(#)，且不超过200个字符。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行一个整数，表示按键盘的总次数。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i have a dream</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">37</span><br></pre></td></tr></table></figure><p>大模拟。  </p><p>可类比Luogu P1765  </p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">char</span>,<span class="keyword">int</span>&gt;m;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">m[<span class="string">'*'</span>]=m[<span class="string">'#'</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">char</span> i=<span class="string">'0'</span>;i&lt;=<span class="string">'9'</span>;i++) m[i]=<span class="number">1</span>;</span><br><span class="line">    m[<span class="string">'a'</span>]=m[<span class="string">'d'</span>]=m[<span class="string">'g'</span>]=m[<span class="string">'j'</span>]=m[<span class="string">'m'</span>]=m[<span class="string">'p'</span>]=m[<span class="string">'t'</span>]=m[<span class="string">'w'</span>]=<span class="number">2</span>;</span><br><span class="line">    m[<span class="string">'b'</span>]=m[<span class="string">'e'</span>]=m[<span class="string">'h'</span>]=m[<span class="string">'k'</span>]=m[<span class="string">'n'</span>]=m[<span class="string">'q'</span>]=m[<span class="string">'u'</span>]=m[<span class="string">'x'</span>]=<span class="number">3</span>;</span><br><span class="line">    m[<span class="string">'c'</span>]=m[<span class="string">'f'</span>]=m[<span class="string">'i'</span>]=m[<span class="string">'l'</span>]=m[<span class="string">'o'</span>]=m[<span class="string">'r'</span>]=m[<span class="string">'v'</span>]=m[<span class="string">'y'</span>]=<span class="number">4</span>;</span><br><span class="line">    m[<span class="string">'s'</span>]=m[<span class="string">'z'</span>]=<span class="number">5</span>;</span><br><span class="line">    m[<span class="string">' '</span>]=<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">set</span>();</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    getline(<span class="built_in">cin</span>,s);</span><br><span class="line">    <span class="keyword">int</span> ans=<span class="number">0</span>,len=s.length();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++) ans+=m[s[i]];</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;ans;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> 模拟 </tag>
            
            <tag> 云霄一中月赛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年4月月赛 Day1 游艇 题解</title>
      <link href="/answer/yxyz201804-0103/"/>
      <url>/answer/yxyz201804-0103/</url>
      
        <content type="html"><![CDATA[<p>2018年4月月赛 Day1 游艇 题解</p><a id="more"></a><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>长江游艇俱乐部在长江上设置了n 个游艇出租站1，2，…，n。游客可在这些游艇出租站租用游艇，并在下游的任何一个游艇出租站归还游艇。游艇出租站i 到游艇出租站j 之间的租金为r(i,j),1&lt;=i&lt;=j&lt;=n。试设计一个算法，计算出从任意游艇出租站i到任意游艇出租站j所需的最少租金。保证i严格小于j。  </p><p>对于给定的游艇出租站i 到游艇出租站j 之间的租金为r(i,j),1&lt;=i&lt;j&lt;=n。  </p><p>保证计算过程中任何时刻数值都不超过10^6</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第1 行中有1 个正整数n，表示有n个游艇出租站。 接下来的n-1 行,第i行第j个元素表示从i号游艇出租站到j号游艇出租站(1&lt;=i&lt;j&lt;=n)的租金价格r。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>共n-1行，第i行输出i-1个数，每行第j个数表示从i号游艇出租站出发到达第j号游艇出租站的最少租金。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">5 15</span><br><span class="line">7</span><br></pre></td></tr></table></figure><p>输出样例#1：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5 12</span><br><span class="line">7</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>1&lt;=n&lt;=200</p><p>Floyd板子题……  </p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,d[<span class="number">210</span>][<span class="number">210</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">floyd</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=n;k++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=k+<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">                <span class="keyword">if</span>(d[i][j]&gt;d[i][k]+d[k][j]) d[i][j]=d[i][k]+d[k][j];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;d[i][j]);</span><br><span class="line">    floyd();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;=n;j++) <span class="built_in">cout</span>&lt;&lt;d[i][j]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> 云霄一中月赛 </tag>
            
            <tag> Floyd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年4月月赛 Day1 亲属关系 题解</title>
      <link href="/answer/yxyz201804-0102/"/>
      <url>/answer/yxyz201804-0102/</url>
      
        <content type="html"><![CDATA[<p>2018年4月月赛 Day1 亲属关系 题解</p><a id="more"></a><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>若某个家族人员过于庞大，要判断两个是否是亲属，确实还很不容易，现在给出某个亲属关系图，求任意给出的两个人是否具有亲属关系。 规定：x和y是亲属，y和z是亲属，那么x和z也是亲属。如果x,y是亲属，那么x的亲属都是y的亲属，y的亲属也都是x的亲属。</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行：三个整数n,m,p，分别表示有n个人，m个亲属关系，询问p对亲属关系。  </p><p>以下m行：每行两个数Mi，Mj，1&lt;=Mi，Mj&lt;=N，表示Mi和Mj具有亲属关系。  </p><p>接下来p行：每行两个数Pi，Pj，询问Pi和Pj是否具有亲属关系。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>P行，每行一个’Yes’或’No’。表示第i个询问的答案为“具有”或“不具有”亲属关系。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">6 5 3</span><br><span class="line">1 2</span><br><span class="line">1 5</span><br><span class="line">3 4</span><br><span class="line">5 2</span><br><span class="line">1 3</span><br><span class="line">1 4</span><br><span class="line">2 3</span><br><span class="line">5 6</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Yes</span><br><span class="line">Yes</span><br><span class="line">No</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>1&lt;=n,m,p&lt;=5000。</p><p>并查集板子题……  </p><p>可类比Luogu P3367  </p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> p,n,m,q,d[<span class="number">10100</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> r=x;</span><br><span class="line">    <span class="keyword">while</span>(d[r]!=r) r=d[r];</span><br><span class="line">    <span class="keyword">int</span> i=x,j;</span><br><span class="line">    <span class="keyword">while</span>(i!=r)</span><br><span class="line">    &#123;</span><br><span class="line">        j=d[i];</span><br><span class="line">        d[i]=r;</span><br><span class="line">        i=j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">join</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> fx=find(x),fy=find(y);</span><br><span class="line">    <span class="keyword">if</span>(fx!=fy) d[fx]=fy;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">10100</span>;i++) d[i]=i;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;m,&amp;p);</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">int</span> x,y;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</span><br><span class="line">    join(x,y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) find(i);</span><br><span class="line">    <span class="keyword">while</span>(p--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x,y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</span><br><span class="line">        <span class="keyword">if</span>(d[x]==d[y]) <span class="built_in">printf</span>(<span class="string">"Yes\n"</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"No\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> 并查集 </tag>
            
            <tag> 云霄一中月赛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年4月月赛 Day1 哥德巴赫猜想 题解</title>
      <link href="/answer/yxyz201804-0101/"/>
      <url>/answer/yxyz201804-0101/</url>
      
        <content type="html"><![CDATA[<p>2018年4月月赛 Day1 哥德巴赫猜想 题解</p><a id="more"></a><h1 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h1><p>要想证明哥德巴赫猜想，首先需要知道足够大的素数。求一下试试吧！</p><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>如题，给定一个范围N，你需要处理M个某数字是否为质数的询问（每个数字均在范围[1,N]内）</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行包含两个正整数N、M，分别表示查询的范围和查询的个数。  </p><p>接下来M行每行包含一个不小于1且不大于N的整数，即询问该数是否为质数。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出包含M行，每行为Yes或No，即依次为每一个询问的结果。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">100 5</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">91</span><br><span class="line">97</span><br></pre></td></tr></table></figure><p>输出样例#1：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Yes</span><br><span class="line">Yes</span><br><span class="line">No</span><br><span class="line">No</span><br><span class="line">Yes</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>1&lt;=N&lt;=10000000，1&lt;=M&lt;=100000  </p><p>样例说明：  </p><p>N=100，说明接下来的询问数均属于[1,100]。  </p><p>所以2、3、97为质数，4、91非质数。  </p><p>故依次输出Yes、Yes、No、No、Yes。  </p><p>筛法求素数的板子题，没什么说的。  </p><p>可类比Luogu P3383  </p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">bool</span> ans[<span class="number">10000010</span>]=&#123;<span class="literal">false</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> n,m,x,t;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    t=n&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    ans[<span class="number">1</span>]=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=t;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(ans[i]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i&lt;&lt;<span class="number">1</span>;j&lt;=n;j+=i) ans[j]=<span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;x;</span><br><span class="line">        <span class="keyword">if</span>(ans[x]) <span class="built_in">cout</span>&lt;&lt;<span class="string">"No\n"</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"Yes\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">set</span>();</span><br><span class="line">    solve();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> 数论 </tag>
            
            <tag> 云霄一中月赛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Luogu P3367 【模板】并查集 题解</title>
      <link href="/answer/luogu-p3367/"/>
      <url>/answer/luogu-p3367/</url>
      
        <content type="html"><![CDATA[<p>Luogu P3367 【模板】并查集 题解</p><a id="more"></a><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>如题，现在有一个并查集，你需要完成合并和查询操作。  </p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h2><p>第一行包含两个整数N、M，表示共有N个元素和M个操作。  </p><p>接下来M行，每行包含三个整数Zi、Xi、Yi  </p><p>当Zi=1时，将Xi与Yi所在的集合合并  </p><p>当Zi=2时，输出Xi与Yi是否在同一集合内，是的话输出Y；否则话输出N</p><h2 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h2><p>如上，对于每一个Zi=2的操作，都有一行输出，每行包含一个大写字母，为Y或者N</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><h2 id="输入样例-1："><a href="#输入样例-1：" class="headerlink" title="输入样例#1："></a>输入样例#1：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">4 7</span><br><span class="line">2 1 2</span><br><span class="line">1 1 2</span><br><span class="line">2 1 2</span><br><span class="line">1 3 4</span><br><span class="line">2 1 4</span><br><span class="line">1 2 3</span><br><span class="line">2 1 4</span><br></pre></td></tr></table></figure><h2 id="输出样例-1："><a href="#输出样例-1：" class="headerlink" title="输出样例#1："></a>输出样例#1：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">N</span><br><span class="line">Y</span><br><span class="line">N</span><br><span class="line">Y</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>时空限制：1000ms,128M  </p><p>数据规模：  </p><p>对于30%的数据，N&lt;=10，M&lt;=20；  </p><p>对于70%的数据，N&lt;=100，M&lt;=1000；  </p><p>对于100%的数据，N&lt;=10000，M&lt;=200000。  </p><p>从100%数据的范围来看，显然不可能暴搜。所以为解决此题，我们采用基于树的数据结构——并查集。  </p><p>基本并查集应该提供两个操作：查询（最大祖先）操作和合并操作。  </p><p>详情见代码注释。  </p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,f[<span class="number">10010</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x==f[x]) <span class="keyword">return</span> x;<span class="comment">//边界</span></span><br><span class="line">    <span class="keyword">return</span> f[x]=find(f[x]);<span class="comment">//递归查找结点x的最大祖先y，同时通过路径压缩令x与y之间的所有结点，最大祖先都置为y</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">join</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    f[x]=y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) f[i]=i;<span class="comment">//初始化令所有结点的最大祖先都是自己</span></span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x,y,z,tx,ty;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;z,&amp;x,&amp;y);</span><br><span class="line">        ty=find(y);<span class="comment">//寻找y的最大祖先ty</span></span><br><span class="line">        tx=find(x);<span class="comment">//寻找x的最大祖先tx</span></span><br><span class="line">        <span class="keyword">if</span>(z==<span class="number">1</span>) join(tx,ty);<span class="comment">//现在tx是ty家里的人了</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(tx==ty) <span class="built_in">printf</span>(<span class="string">"Y\n"</span>);<span class="comment">//如果是同一家的</span></span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"N\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Luogu </tag>
            
            <tag> 题解 </tag>
            
            <tag> 并查集 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20180417 Python学习随录</title>
      <link href="/python/python-20180417/"/>
      <url>/python/python-20180417/</url>
      
        <content type="html"><![CDATA[<p>学习随录系列</p><a id="more"></a><hr><h1 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h1><p>Python使用缩进来示意作用域，效果同C++的函数大括号</p><p>Python不需要定义变量，任何合理的、未有重复的变量名均可直接使用，使用过程中也可以更改其类型。任意变量默认类型为字符串。  </p><h1 id="I-O"><a href="#I-O" class="headerlink" title="I/O"></a>I/O</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s=input().split(<span class="string">' '</span>)</span><br><span class="line"><span class="comment">#Python中一次均读取整行</span></span><br><span class="line"><span class="comment">#本代码中，split括号中的内容为一个空格，表示s以空格为界断开成为一个列表</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(s)</span><br><span class="line"><span class="comment">#自带回车</span></span><br></pre></td></tr></table></figure><h1 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h1><h2 id="选择结构"><a href="#选择结构" class="headerlink" title="选择结构"></a>选择结构</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> A1:</span><br><span class="line">    代码块<span class="number">1</span>)</span><br><span class="line"><span class="keyword">elif</span> A2:</span><br><span class="line">    (代码块<span class="number">2</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    (代码块<span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>同理C++参考：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(A1)</span><br><span class="line">&#123;(代码块<span class="number">1</span>)&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(A2)</span><br><span class="line">&#123;(代码块<span class="number">2</span>)&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;(代码块<span class="number">3</span>)&#125;</span><br></pre></td></tr></table></figure><h2 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">5</span>):</span><br><span class="line">    (代码块)</span><br><span class="line"><span class="comment">#范围为[1,5)也就是[1,4]</span></span><br><span class="line"><span class="comment">#当range写成range(5)的时候范围为[0,5)</span></span><br><span class="line"><span class="comment">#默认自加1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> x&lt;n:</span><br><span class="line">    (代码块)</span><br><span class="line"></span><br><span class="line"><span class="comment">#若把x强制类型转换为int类型，写法如下</span></span><br><span class="line"><span class="comment"># int(x)</span></span><br><span class="line"><span class="comment">#调用int()函数把x转换为int类型</span></span><br><span class="line"><span class="comment">#转换为其它类型，有同理操作</span></span><br></pre></td></tr></table></figure><h1 id="成分"><a href="#成分" class="headerlink" title="成分"></a>成分</h1><p>len(x)函数，可以求x字符串的长度，或x元组/列表…等等的元素数量，等等</p><p>元组(tuple)  使用小括号声明，指向成员地址不可变。可以使用数组下标访问其中元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s=(<span class="string">'1'</span>,<span class="string">'2'</span>,<span class="string">'3'</span>)</span><br></pre></td></tr></table></figure><p>此时 s[0]=’1’，输出时也会自带一对单引号</p><p>*声明一个元素的元组时，应加上逗号，以区别(1)的数学意义。此时输出也会自动输出逗号</p><p>*无成员函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s=(<span class="string">'1'</span>,)</span><br></pre></td></tr></table></figure><p>列表(list)  使用中括号声明，指向成员地址可变。可理解为C++中的数组。可以使用数组下标访问其中元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s=[<span class="string">'1'</span>,<span class="string">'2'</span>,<span class="string">'3'</span>]</span><br></pre></td></tr></table></figure><p>*与元组相比，单个元素不需强调</p><p>*带有成员函数 x.append(y)、x.pop(z)、x.insert(u,v) 和 x.sort()，其中 y 是元素，z、u 是下标，v是元素。</p><p>z置空时默认为弹出列表尾部元素</p><p>u置空时默认为在列表尾部插入元素v</p><p>字典(dict)  使用大括号声明，声明方法为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s=&#123;A1:B1,A2:B2,A3:B3&#125;</span><br></pre></td></tr></table></figure><p>此时 s[A1]=B1，即自定义数组下标及其元素，使用方法同 C++ 的 map</p><p>*具有list所有成员函数</p><p>*还具有 s.get(A1,x)，若在字典s中存在以 A1 为下标的组合，则返回其对应值 B1，否则返回 x，当只写 s.get(A1)，即忽略 x 时，x 自动设为 None。Python 不会输出 None</p><p>集合(set) 使用小括号和中括号声明</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s1=set(\[<span class="string">'1'</span>,<span class="string">'2'</span>\])</span><br><span class="line">s2=set(\[<span class="string">'2'</span>,<span class="string">'3'</span>\])</span><br></pre></td></tr></table></figure><p>*自动筛除重复元素</p><p>*自带并集、交集操作</p><p>s1 &amp; s2返回’1’,’2’,’3’</p><p>s1 | s2返回’2’</p><p>*成员函数 s.add(x)，将 x 添加进集合 s 中。</p><p>*成员函数 s.remove(x)，将集合 s 中的 x 删除。</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Luogu P3373 【模板】线段树 2 题解</title>
      <link href="/answer/luogu-p3373/"/>
      <url>/answer/luogu-p3373/</url>
      
        <content type="html"><![CDATA[<p>阅读本篇题解之前，请先完成Luogu P3372。</p><a id="more"></a><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>如题，已知一个数列，你需要进行下面三种操作：</p><ol><li>将某区间每一个数乘上x</li><li>将某区间每一个数加上x</li><li>求出某区间每一个数的和<h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h2>第一行包含三个整数N、M、P，分别表示该数列数字的个数、操作的总个数和模数。  </li></ol><p>第二行包含N个用空格分隔的整数，其中第i个数字表示数列第i项的初始值。  </p><p>接下来M行每行包含3或4个整数，表示一个操作，具体如下：  </p><p>操作1： 格式：1 x y k 含义：将区间[x,y]内每个数乘上k  </p><p>操作2： 格式：2 x y k 含义：将区间[x,y]内每个数加上k  </p><p>操作3： 格式：3 x y 含义：输出区间[x,y]内每个数的和对P取模所得的结果  </p><h2 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h2><p>输出包含若干行整数，即为所有操作3的结果。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><h2 id="输入样例-1："><a href="#输入样例-1：" class="headerlink" title="输入样例#1："></a>输入样例#1：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">5 5 38</span><br><span class="line">1 5 4 2 3</span><br><span class="line">2 1 4 1</span><br><span class="line">3 2 5</span><br><span class="line">1 2 4 2</span><br><span class="line">2 3 5 5</span><br><span class="line">3 1 4</span><br></pre></td></tr></table></figure><h2 id="输出样例-1："><a href="#输出样例-1：" class="headerlink" title="输出样例#1："></a>输出样例#1：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">17</span><br><span class="line">2</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>时空限制：1000ms,128M  </p><p>数据规模：  </p><p>对于30%的数据：N&lt;=8，M&lt;=10  </p><p>对于70%的数据：N&lt;=1000，M&lt;=10000  </p><p>对于100%的数据：N&lt;=100000，M&lt;=100000  </p><p>（数据已经过加强^_^）  </p><p>样例说明：<br><img src="https://cdn.luogu.org/upload/pic/2255.png" alt="样例说明"></p><p>故输出应为17、2（40 mod 38=2）</p><p>对比P3372，本题的提升在于，多了对乘法的要求（大家都看见了啊喂）。  </p><p>不过，这一看起来小小的要求，真的要实现的时候，才发现真的难写。果然加了这一条就从P3372的绿题变成蓝题了。  </p><p>在P3372中，区间修改仅要求了加法，因而每次下放lazy标记的时候只需要暴力下放，也就是ans[p]+和tag[p]+。然鹅，在本题中因为多了乘法，lazy标记在下放时就出现了一个问题：先下放加法lazy标记(addtag)还是乘法lazy标记(multag)？  </p><p>答案就是先下放multag，再下放addtag。  </p><p>为什么呢？因为在四则运算中，加法优先级较低，乘法较高，故乘法会影响加法，在下放multag的时候不仅要ans[p]+，还要addtag[p]+，还要multag[p]+（三个p均为同一子结点）。这样，之后在下放addtag的时候才能加出正常数值。  </p><p>还有就是，时刻注意取模。  </p><p>附代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line">ll ans[<span class="number">1000010</span>],addtag[<span class="number">1000010</span>],multag[<span class="number">1000010</span>],a[<span class="number">1000010</span>],n,m,ppp;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">ls</span><span class="params">(ll p)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p&lt;&lt;<span class="number">1</span>;</span><br><span class="line">&#125;<span class="comment">//同P3372</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">rs</span><span class="params">(ll p)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>;</span><br><span class="line">&#125;<span class="comment">//同P3372</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">push_up</span><span class="params">(ll p)</span></span>&#123;</span><br><span class="line">    ans[p]=(ans[ls(p)]+ans[rs(p)])%ppp;</span><br><span class="line">&#125;<span class="comment">//注意取模</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(ll p,ll l,ll r)</span></span>&#123;</span><br><span class="line">    multag[p]=<span class="number">1</span>;<span class="comment">//乘法tag应为1，若为0则造成一旦发生乘法，数值即刻归零</span></span><br><span class="line">    addtag[p]=<span class="number">0</span>;<span class="comment">//其余同P3372</span></span><br><span class="line">    <span class="keyword">if</span>(l==r)</span><br><span class="line">    &#123;</span><br><span class="line">        ans[p]=a[l];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ll mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(ls(p),l,mid);</span><br><span class="line">    build(rs(p),mid+<span class="number">1</span>,r);</span><br><span class="line">    push_up(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">f</span><span class="params">(ll p,ll l,ll r,ll addv,ll mulv)</span></span>&#123;</span><br><span class="line">    ans[p]=(ans[p]*mulv)%ppp;</span><br><span class="line">    addtag[p]=(addtag[p]*mulv)%ppp;</span><br><span class="line">    multag[p]=(multag[p]*mulv)%ppp;<span class="comment">//先下放multag</span></span><br><span class="line">    ans[p]=(ans[p]+addv*(r-l+<span class="number">1</span>))%ppp;</span><br><span class="line">    addtag[p]=(addtag[p]+addv)%ppp;<span class="comment">//再下放addtag</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">push_down</span><span class="params">(ll p,ll l,ll r)</span></span>&#123;</span><br><span class="line">    ll mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    f(ls(p),l,mid,addtag[p],multag[p]);</span><br><span class="line">    f(rs(p),mid+<span class="number">1</span>,r,addtag[p],multag[p]);</span><br><span class="line">    addtag[p]=<span class="number">0</span>;</span><br><span class="line">    multag[p]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(ll x,ll y,ll l,ll r,ll p,ll k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=l&amp;&amp;r&lt;=y)</span><br><span class="line">    &#123;</span><br><span class="line">        ans[p]=(ans[p]+k*(r-l+<span class="number">1</span>))%ppp;</span><br><span class="line">        addtag[p]=(addtag[p]+k)%ppp;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(multag[p]!=<span class="number">1</span>||addtag[p]) push_down(p,l,r);</span><br><span class="line">    ll mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=mid) add(x,y,l,mid,ls(p),k);</span><br><span class="line">    <span class="keyword">if</span>(y&gt;mid) add(x,y,mid+<span class="number">1</span>,r,rs(p),k);</span><br><span class="line">    push_up(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mul</span><span class="params">(ll x,ll y,ll l,ll r,ll p,ll k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=l&amp;&amp;r&lt;=y)</span><br><span class="line">    &#123;</span><br><span class="line">        ans[p]=(ans[p]*k)%ppp;</span><br><span class="line">        addtag[p]=(addtag[p]*k)%ppp;</span><br><span class="line">        multag[p]=(multag[p]*k)%ppp;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(multag[p]!=<span class="number">1</span>||addtag[p]) push_down(p,l,r);</span><br><span class="line">    ll mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=mid) mul(x,y,l,mid,ls(p),k);</span><br><span class="line">    <span class="keyword">if</span>(y&gt;mid) mul(x,y,mid+<span class="number">1</span>,r,rs(p),k);</span><br><span class="line">    push_up(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(ll x,ll y,ll l,ll r,ll p)</span></span>&#123;</span><br><span class="line">    ll tmp=<span class="number">0</span>,mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=l&amp;&amp;r&lt;=y) <span class="keyword">return</span> ans[p]%ppp;</span><br><span class="line">    <span class="keyword">if</span>(multag[p]!=<span class="number">1</span>||addtag[p]) push_down(p,l,r);</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=mid) tmp+=query(x,y,l,mid,ls(p));</span><br><span class="line">    <span class="keyword">if</span>(y&gt;mid) tmp+=query(x,y,mid+<span class="number">1</span>,r,rs(p));</span><br><span class="line">    <span class="keyword">return</span> tmp%ppp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll x,y,t,k;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;ppp;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;a[i]);</span><br><span class="line">    build(<span class="number">1</span>,<span class="number">1</span>,n);</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;t);</span><br><span class="line">        <span class="keyword">switch</span>(t)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%lld %lld %lld"</span>,&amp;x,&amp;y,&amp;k);</span><br><span class="line">                mul(x,y,<span class="number">1</span>,n,<span class="number">1</span>,k);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%lld %lld %lld"</span>,&amp;x,&amp;y,&amp;k);</span><br><span class="line">                add(x,y,<span class="number">1</span>,n,<span class="number">1</span>,k);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%lld %lld"</span>,&amp;x,&amp;y);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,query(x,y,<span class="number">1</span>,n,<span class="number">1</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 线段树 </tag>
            
            <tag> Luogu </tag>
            
            <tag> 题解 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>线段树(Segment Tree)</title>
      <link href="/algorithm/SegmentTree/"/>
      <url>/algorithm/SegmentTree/</url>
      
        <content type="html"><![CDATA[<p>阅读本文基础知识：二分思想，二叉树，位运算。  </p><a id="more"></a><p>本文适用于解决Luogu P3372  </p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line">ll ans[<span class="number">1000010</span>],tag[<span class="number">1000010</span>],a[<span class="number">1000010</span>],n,m;</span><br><span class="line"><span class="comment">//ans为各节点保存值，tag为各节点的lazy标记，a为各节点初始值</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">ls</span><span class="params">(ll p)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p&lt;&lt;<span class="number">1</span>;<span class="comment">//求左儿子的编号</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">rs</span><span class="params">(ll p)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>;<span class="comment">//求右儿子的编号</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">push_up</span><span class="params">(ll p)</span></span>&#123;</span><br><span class="line">    ans[p]=ans[ls(p)]+ans[rs(p)];<span class="comment">//更新p的保存值为p的左儿子保存值加上p的右儿子保存值</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(ll p,ll l,ll r)</span></span>&#123;</span><br><span class="line">    tag[p]=<span class="number">0</span>;<span class="comment">//初始化lazy标记</span></span><br><span class="line">    <span class="keyword">if</span>(l==r)<span class="comment">//递归边界</span></span><br><span class="line">    &#123;</span><br><span class="line">        ans[p]=a[l];<span class="comment">//初始化p的保存值</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ll mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(ls(p),l,mid);<span class="comment">//构建左子树</span></span><br><span class="line">    build(rs(p),mid+<span class="number">1</span>,r);<span class="comment">//构建右子树</span></span><br><span class="line">    push_up(p);<span class="comment">//求和，作为p的保存值</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">f</span><span class="params">(ll p,ll l,ll r,ll k)</span></span>&#123;</span><br><span class="line">    ans[p]+=k*(r-l+<span class="number">1</span>);<span class="comment">//更新p的保存值为原值加上该区间长度乘以变化量</span></span><br><span class="line">    tag[p]+=k;<span class="comment">//更新lazy标记</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">push_down</span><span class="params">(ll p,ll l,ll r)</span></span>&#123;</span><br><span class="line">    ll mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    f(ls(p),l,mid,tag[p]);</span><br><span class="line">    f(rs(p),mid+<span class="number">1</span>,r,tag[p]);</span><br><span class="line">    tag[p]=<span class="number">0</span>;<span class="comment">//重置lazy标记</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(ll x,ll y,ll l,ll r,ll p,ll k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=l&amp;&amp;r&lt;=y)<span class="comment">//递归边界</span></span><br><span class="line">    &#123;</span><br><span class="line">        ans[p]+=k*(r-l+<span class="number">1</span>);<span class="comment">//更新p的保存值为原值加上该区间长度乘以变化量</span></span><br><span class="line">        tag[p]+=k;<span class="comment">//更新lazy标记</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    push_down(p,l,r);<span class="comment">//下放lazy标记</span></span><br><span class="line">    ll mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=mid) update(x,y,l,mid,ls(p),k);<span class="comment">//如果所求区间左端点小于当前区间中点，则所求区间与当前区间的左半区间仍然有重叠，需要更新左子树</span></span><br><span class="line">    <span class="keyword">if</span>(y&gt;mid) update(x,y,mid+<span class="number">1</span>,r,rs(p),k);<span class="comment">//若...（参照左子树说明），更新右子树</span></span><br><span class="line">    push_up(p);<span class="comment">//求和</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(ll x,ll y,ll l,ll r,ll p)</span></span>&#123;</span><br><span class="line">    ll tmp=<span class="number">0</span>,mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=l&amp;&amp;r&lt;=y) <span class="keyword">return</span> ans[p];<span class="comment">//递归边界</span></span><br><span class="line">    push_down(p,l,r);<span class="comment">//下放lazy标记</span></span><br><span class="line">    <span class="keyword">if</span>(x&lt;=mid) tmp+=query(x,y,l,mid,ls(p));<span class="comment">//若...（参照update里的说明），对左子树求和</span></span><br><span class="line">    <span class="keyword">if</span>(y&gt;mid) tmp+=query(x,y,mid+<span class="number">1</span>,r,rs(p));<span class="comment">//同上，对右子树求和</span></span><br><span class="line">    <span class="keyword">return</span> tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll x,y,k,t;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;a[i]);</span><br><span class="line">    build(<span class="number">1</span>,<span class="number">1</span>,n);<span class="comment">//建树</span></span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;t);</span><br><span class="line">        <span class="keyword">switch</span>(t)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%lld %lld %lld"</span>,&amp;x,&amp;y,&amp;k);</span><br><span class="line">                update(x,y,<span class="number">1</span>,n,<span class="number">1</span>,k);<span class="comment">//更新</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%lld %lld"</span>,&amp;x,&amp;y);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,query(x,y,<span class="number">1</span>,n,<span class="number">1</span>));<span class="comment">//求值</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>对于递归边界的说明：  </p><ol><li><p>l==r</p><p>我们在build函数中，用[l,r]表示一段区间，显然l==r时该区间内只有一个元素，故可以直接返回。所以此处以l==r作为递归边界。</p></li><li><p>x&lt;=l&amp;&amp;r&lt;=y</p><p>在此种情况中，[x,y]表示所求区间，[l,r]表示当前通过递归来到的区间。若满足x&lt;=l&amp;&amp;r&lt;=y，则表示[l,r]完全包含于[x,y]内部，此时不论如何二分递归[l,r]，子区间都是完全包含于[x,y]内部的，故可以直接返回。所以此处以x&lt;=l&amp;&amp;r&lt;=y作为递归边界。</p></li></ol><p>给萌新看的代码：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans[<span class="number">1000010</span>],tag[<span class="number">1000010</span>],a[<span class="number">1000010</span>],n,m;</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">ls</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> p)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p*<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">rs</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> p)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p*<span class="number">2</span>+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_up</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> p)</span></span>&#123;</span><br><span class="line">    ans[p]=ans[ls(p)]+ans[rs(p)];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> p,<span class="keyword">long</span> <span class="keyword">long</span> l,<span class="keyword">long</span> <span class="keyword">long</span> r)</span></span>&#123;</span><br><span class="line">    tag[p]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l==r)</span><br><span class="line">    &#123;</span><br><span class="line">        ans[p]=a[l];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> mid=(l+r)/<span class="number">2</span>;</span><br><span class="line">    build(ls(p),l,mid);</span><br><span class="line">    build(rs(p),mid+<span class="number">1</span>,r);</span><br><span class="line">    push_up(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> p,<span class="keyword">long</span> <span class="keyword">long</span> l,<span class="keyword">long</span> <span class="keyword">long</span> r,<span class="keyword">long</span> <span class="keyword">long</span> k)</span></span>&#123;</span><br><span class="line">    ans[p]+=k*(r-l+<span class="number">1</span>);</span><br><span class="line">    tag[p]+=k;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_down</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> p,<span class="keyword">long</span> <span class="keyword">long</span> l,<span class="keyword">long</span> <span class="keyword">long</span> r)</span></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> mid=(l+r)/<span class="number">2</span>;</span><br><span class="line">    f(ls(p),l,mid,tag[p]);</span><br><span class="line">    f(rs(p),mid+<span class="number">1</span>,r,tag[p]);</span><br><span class="line">    tag[p]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> x,<span class="keyword">long</span> <span class="keyword">long</span> y,<span class="keyword">long</span> <span class="keyword">long</span> l,<span class="keyword">long</span> <span class="keyword">long</span> r,<span class="keyword">long</span> <span class="keyword">long</span> p,<span class="keyword">long</span> <span class="keyword">long</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=l&amp;&amp;r&lt;=y)</span><br><span class="line">    &#123;</span><br><span class="line">        ans[p]+=k*(r-l+<span class="number">1</span>);</span><br><span class="line">        tag[p]+=k;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    push_down(p,l,r);</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> mid=(l+r)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=mid) update(x,y,l,mid,ls(p),k);</span><br><span class="line">    <span class="keyword">if</span>(y&gt;mid) update(x,y,mid+<span class="number">1</span>,r,rs(p),k);</span><br><span class="line">    push_up(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">query</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> x,<span class="keyword">long</span> <span class="keyword">long</span> y,<span class="keyword">long</span> <span class="keyword">long</span> l,<span class="keyword">long</span> <span class="keyword">long</span> r,<span class="keyword">long</span> <span class="keyword">long</span> p)</span></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> tmp=<span class="number">0</span>,mid=(l+r)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=l&amp;&amp;r&lt;=y) <span class="keyword">return</span> ans[p];</span><br><span class="line">    push_down(p,l,r);</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=mid) tmp+=query(x,y,l,mid,ls(p));</span><br><span class="line">    <span class="keyword">if</span>(y&gt;mid) tmp+=query(x,y,mid+<span class="number">1</span>,r,rs(p));</span><br><span class="line">    <span class="keyword">return</span> tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> x,y,k,t;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;a[i]);</span><br><span class="line">    build(<span class="number">1</span>,<span class="number">1</span>,n);</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;t);</span><br><span class="line">        <span class="keyword">switch</span>(t)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%lld %lld %lld"</span>,&amp;x,&amp;y,&amp;k);</span><br><span class="line">                update(x,y,<span class="number">1</span>,n,<span class="number">1</span>,k);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%lld %lld"</span>,&amp;x,&amp;y);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,query(x,y,<span class="number">1</span>,n,<span class="number">1</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 线段树 </tag>
            
            <tag> Luogu </tag>
            
            <tag> 题解 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年2/3月月赛 Day2 愤怒的瓦里安 题解</title>
      <link href="/answer/yxyz201802-0203/"/>
      <url>/answer/yxyz201802-0203/</url>
      
        <content type="html"><![CDATA[<p>2018年2/3月月赛 Day2 愤怒的瓦里安 题解</p><a id="more"></a><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>传奇国王，暴风城主瓦里安·乌瑞恩的儿子安度因又跑到酒馆里和人打牌，还用的是十分肮脏的套牌（脏牧去死啦）。瓦里安听了十分愤怒，掰了筷子就杀了过去。安度因十分慌张，连忙找一起打牌的萨尔帮忙。充满绿色能量的萨尔答应帮安度因破坏一条道路来帮他开溜。但是智商为0的安度因并不知道到底能拖延多长时间。好吧，你写个程序帮他算算咯。（已知萨尔的智商很高，破坏的道路能最大程度上拖延瓦里安的到来）</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行有两个用空格隔开的数n和m，分别表示道路节点的数量以及道路的数量。道路节点用数字1至n标识，瓦里安的出发地暴风城在节点1，安度因打牌的酒馆在节点n。  </p><p>接下来的m行中每行包含三个用空格隔开的数u，v和w。这些数字表示在节点u和节点v中间有一条道路，并且花费w的时间通过。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出瓦里安到达酒馆所需要的最短时间。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">10 14</span><br><span class="line">1 2 7</span><br><span class="line">1 9 10</span><br><span class="line">7 9 1</span><br><span class="line">7 3 13</span><br><span class="line">2 3 2</span><br><span class="line">2 4 15</span><br><span class="line">2 8 6</span><br><span class="line">5 9 7</span><br><span class="line">4 8 3</span><br><span class="line">8 5 1</span><br><span class="line">6 8 3</span><br><span class="line">5 6 20</span><br><span class="line">6 10 5</span><br><span class="line">5 10 60</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">74</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>对于100%的数据，1&lt;=n&lt;=1000，1&lt;=m&lt;=n*(n-1)/2，1&lt;=u,v&lt;=n，1&lt;=w&lt;=1000。  </p><p>对于本样例，原本走1-&gt;2-&gt;8-&gt;6-&gt;10为最短路，时间为21。但萨尔破坏了6-&gt;10的路径，使得最短路变为了1-&gt;2-&gt;8-&gt;5-&gt;10，时间变为74。可以证明破坏其它道路时所得到的最短路径长度均小于本方案。</p><p>通过题意可初步分析为最短路问题的变种，且有明确的起点和终点，又数据较大，故必然使用广搜。  </p><p>分析题意后可知，可以枚举所有边，逐一删除，再寻找最短路。但边数巨大，逐一枚举必然超时，故采用优化方法：先计算不删边的最短路，并记录该路径，之后枚举该路径上每条边，进行逐一删除，计算，恢复的过程，取最短路最大值即可。此处不证明该算法的正确性。  </p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> e[<span class="number">1010</span>][<span class="number">1010</span>]=&#123;<span class="number">0</span>&#125;,ans[<span class="number">1010</span>]=&#123;<span class="number">0</span>&#125;,v[<span class="number">1010</span>]=&#123;<span class="number">0</span>&#125;,f[<span class="number">1010</span>]=&#123;<span class="number">0</span>&#125;,maxn=<span class="number">0</span>,n,m;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(!q.empty()) q.pop();</span><br><span class="line">  <span class="built_in">memset</span>(v,<span class="number">0</span>,<span class="keyword">sizeof</span>(v));</span><br><span class="line">  <span class="built_in">memset</span>(ans,<span class="number">0</span>,<span class="keyword">sizeof</span>(ans));</span><br><span class="line">  v[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">  q.push(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">while</span>(!q.empty())</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">int</span> st=q.front();</span><br><span class="line">      q.pop();</span><br><span class="line">      v[st]=<span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="keyword">int</span> p=<span class="number">0</span>;</span><br><span class="line">          <span class="keyword">if</span>(e[st][i]&amp;&amp;(!ans[i]||ans[i]&gt;ans[st]+e[st][i])) ans[i]=ans[st]+e[st][i],p=<span class="number">1</span>;</span><br><span class="line">          <span class="keyword">if</span>(p&amp;&amp;!v[i]) q.push(i),v[i]=<span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">int</span> a,b;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;a,&amp;b);</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;e[a][b]);</span><br><span class="line">      e[b][a]=e[a][b];</span><br><span class="line">  &#125;</span><br><span class="line">  v[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">  q.push(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">while</span>(!q.empty())</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">int</span> st=q.front();</span><br><span class="line">      q.pop();</span><br><span class="line">      v[st]=<span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="keyword">int</span> p=<span class="number">0</span>;</span><br><span class="line">          <span class="keyword">if</span>(e[st][i]&amp;&amp;(!ans[i]||ans[i]&gt;ans[st]+e[st][i])) ans[i]=ans[st]+e[st][i],p=<span class="number">1</span>,f[i]=st;</span><br><span class="line">          <span class="keyword">if</span>(p&amp;&amp;!v[i]) q.push(i),v[i]=<span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">int</span> t=n,tmp,temp;</span><br><span class="line">  <span class="keyword">while</span>(t!=<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">      tmp=f[t];</span><br><span class="line">      temp=e[t][tmp];</span><br><span class="line">      e[t][tmp]=e[tmp][t]=<span class="number">0</span>;</span><br><span class="line">      bfs();</span><br><span class="line">      e[t][tmp]=e[tmp][t]=temp;</span><br><span class="line">      <span class="keyword">if</span>(ans[n]&gt;maxn) maxn=ans[n];</span><br><span class="line">      t=f[t];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">cout</span>&lt;&lt;maxn;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> SPFA </tag>
            
            <tag> 云霄一中月赛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年2/3月月赛 Day2 石化 题解</title>
      <link href="/answer/yxyz201802-0202/"/>
      <url>/answer/yxyz201802-0202/</url>
      
        <content type="html"><![CDATA[<p>2018年2/3月月赛 Day2 石化 题解</p><a id="more"></a><h1 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h1><p>漫长战斗终于分出胜负了。  </p><p>“喂，我可没听说非拼成这样才赢得了。”  </p><p>七道亡国级禁咒，十一把开刃到自毁程度的帕西瓦尔系列，甚至青年本身没资格动用的勇者剑技最终奥义都已经强行祭出。  </p><p>假如这样还不能将其灭绝，也无计可施了。  </p><p>「真是惊天动地啊。身为无力的凡人之躯，却能独自使出此等力量吗？实在可怕。不过，看来要发挥那样的力量，实在不可能毫无代价。」  </p><p>“啪”的一声，青年脚踝前面的部分已经变成粗糙的石块了。  </p><p>又是好几声脆响重叠在一起，灰色面积开始沿着他的身体往上蔓延扩散，到了膝盖，到了腿，到了腰，还在继续往上。</p><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>威廉即将在t个单位时间内完全石化，现在他对往事无限怀念，希望尽可能多的想起重要的人。  </p><p>威廉有n个重要的人，而每个单位时间里他同时只能想一个人。  </p><p>在此时此刻，回想第i个重要的人有关的事情都要消耗p[i]的时间，且只有时间p[i]完全经过才算确实回想起这个人。  </p><p>威廉该按什么顺序回想，才能尽可能多的回顾和重要的人经历的事情呢？</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行，包含两个正整数t,n。  </p><p>接下来n行，每行包含一个字符串和一个正整数p[i]。其中字符串表示第i个重要的人的姓名。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出按最佳回想顺序能想起的人数。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">5 3</span><br><span class="line">Ri-ria 3</span><br><span class="line">Naiguranto 5</span><br><span class="line">Arumaria 2</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><p>输入样例#2：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">10 5</span><br><span class="line">Chtholly 2</span><br><span class="line">Nephren 5</span><br><span class="line">Ithea 3</span><br><span class="line">Rhantolk 6</span><br><span class="line">Lakhesh 4</span><br></pre></td></tr></table></figure><p>输出样例#2：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>每个字符串均不超过50个字符。  </p><p>对于100%的数据，1&lt;=t&lt;=10000000,1&lt;=n&lt;=500000,1&lt;=p[i]&lt;=1000。</p><p>通过题目中描述，可知姓名是无用参数，不需保存处理；且仅有时间一种属性，可定性为dp的特例：贪心。当然用dp做也可以得出正解。  </p><p>贪心做法：  </p><p>sort之后从小到大开始算。  </p><p>dp做法：  </p><p>同背包问题。  </p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">char</span> s[<span class="number">50</span>];</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">500000</span>],sum=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> t,n,i,j;</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;t,&amp;n);</span><br><span class="line">  <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">scanf</span>(<span class="string">"%s %d"</span>,s,&amp;a[i]);</span><br><span class="line">  sort(a,a+n);</span><br><span class="line">  <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">  &#123;</span><br><span class="line">      t-=a[i];</span><br><span class="line">      <span class="keyword">if</span>(t&lt;<span class="number">0</span>)</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="keyword">if</span>(!i) <span class="built_in">printf</span>(<span class="string">"0"</span>);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      sum++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(i) <span class="built_in">printf</span>(<span class="string">"%d"</span>,sum);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> dp </tag>
            
            <tag> 云霄一中月赛 </tag>
            
            <tag> 贪心 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年2/3月月赛 Day2 被7整除 题解</title>
      <link href="/answer/yxyz201802-0201/"/>
      <url>/answer/yxyz201802-0201/</url>
      
        <content type="html"><![CDATA[<p>2018年2/3月月赛 Day2 被7整除 题解</p><a id="more"></a><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>输出从1~n有多少个整数满足2^n-n^2能被7整除。</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>一行，包含一个整数n。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行，包含一个整数x，表示从1~n有x个整数满足2^n-n^2能被7整除。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure><p>输入样例#2：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure><p>输出样例#2：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>对于100%的数据，1&lt;=n&lt;=1000000。</p><p>定性为数论题。  </p><p>通过打表可发现有周期为21的规律。  </p><p>只能打表自行找规律，没有别种办法。  </p><p>找不出规律也可暴力，不过会超时。  </p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> num[<span class="number">30</span>]=&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>&#125;;</span><br><span class="line">  <span class="keyword">int</span> n;</span><br><span class="line">  <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">  <span class="keyword">int</span> k=n/<span class="number">21</span>,q=n%<span class="number">21</span>;</span><br><span class="line">  <span class="built_in">cout</span>&lt;&lt;k*<span class="number">6</span>+num[q];</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> 数论 </tag>
            
            <tag> 云霄一中月赛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年2/3月月赛 Day1 胜利大逃亡 题解</title>
      <link href="/answer/yxyz201802-0103/"/>
      <url>/answer/yxyz201802-0103/</url>
      
        <content type="html"><![CDATA[<p>原题，不再赘述。详见<a href="http://ringoer.com/answer/hdu-p1253/" target="_blank" rel="noopener">本链接</a></p>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> SPFA </tag>
            
            <tag> 云霄一中月赛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年2/3月月赛 Day1 疯狂的机器人 题解</title>
      <link href="/answer/yxyz201802-0102/"/>
      <url>/answer/yxyz201802-0102/</url>
      
        <content type="html"><![CDATA[<p>2018年2/3月月赛 Day1 疯狂的机器人 题解</p><a id="more"></a><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>MH：“前几个月给一个机器人写了段代码，发现它只能往两个方向走，不能回退，而且还是随机的，真是无语…”  </p><p>CL：“我看你也够随机的，最后那家伙竟然疯了一样，在上下左右四个方向乱走了，可真是吓死我了”  </p><p>MH：“是啊是啊。我记下了它当时的所在的地图，希望能找到它最远可能从哪里来的”</p><p>还是机智的你，知道这个机器人最远可能从哪里来的吗？  </p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行两个正整数n,m，表示机器人所在地图的规模。  </p><p>第2行到第n+1行，每行m个数字，分别是0,1,-1三种之一。  </p><p>其中，0表示可以行走的路，1表示墙壁，-1表示机器人所在的坐标。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行，包含一个数字。若能有最远可到达的地方，输出该距离，否则输出0。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4 5</span><br><span class="line">1 0 0 0 1</span><br><span class="line">0 1 0 1 0</span><br><span class="line">1 1 0 1 0</span><br><span class="line">0 -1 0 0 0</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5</span><br></pre></td></tr></table></figure><p>输入样例#2：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4 5</span><br><span class="line">1 0 0 0 1</span><br><span class="line">0 1 0 1 0</span><br><span class="line">1 1 0 1 0</span><br><span class="line">0 0 1 -1 0</span><br></pre></td></tr></table></figure><p>输出样例#2：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>对于100%的数据，1&lt;=n,m&lt;=50。</p><p>定性为搜索题，搜索所有点中到起点走最短路仍最远的地方，也就是求起点到所有点的最短距离的最大值。  </p><p>此处采用dfs。使用bfs的话需要有明确的终点，而本题没有固定终点，因此不适合bfs。  </p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,final=<span class="number">0</span>,d[<span class="number">60</span>][<span class="number">60</span>],ans[<span class="number">60</span>][<span class="number">60</span>]=&#123;<span class="number">0</span>&#125;,stx,sty;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=x<span class="number">-1</span>;i&lt;=x+<span class="number">1</span>;i++)</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">if</span>(i&lt;<span class="number">0</span>||i&gt;=n) <span class="keyword">continue</span>;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> j=y<span class="number">-1</span>;j&lt;=y+<span class="number">1</span>;j++)</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="keyword">if</span>(j&lt;<span class="number">0</span>||j&gt;=m) <span class="keyword">continue</span>;</span><br><span class="line">          <span class="keyword">if</span>(i==stx&amp;&amp;j==sty) <span class="keyword">continue</span>;</span><br><span class="line">          <span class="keyword">if</span>(i==x&amp;&amp;y==j) <span class="keyword">continue</span>;</span><br><span class="line">          <span class="keyword">if</span>(i!=x&amp;&amp;y!=j) <span class="keyword">continue</span>;</span><br><span class="line">          <span class="keyword">if</span>(d[i][j]) <span class="keyword">continue</span>;</span><br><span class="line">          <span class="keyword">int</span> &amp;t=ans[i][j];</span><br><span class="line">          <span class="keyword">if</span>(!t||(t&amp;&amp;t&gt;ans[x][y]+<span class="number">1</span>))</span><br><span class="line">          &#123;</span><br><span class="line">              t=ans[x][y]+<span class="number">1</span>;</span><br><span class="line">              dfs(i,j);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="built_in">cin</span>&gt;&gt;d[i][j];</span><br><span class="line">          <span class="keyword">if</span>(d[i][j]==<span class="number">-1</span>)</span><br><span class="line">          &#123;</span><br><span class="line">              stx=i;</span><br><span class="line">              sty=j;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  dfs(stx,sty);</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++) <span class="keyword">if</span>(final&lt;ans[i][j]) final=ans[i][j];</span><br><span class="line">  <span class="built_in">cout</span>&lt;&lt;final;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> 云霄一中月赛 </tag>
            
            <tag> dfs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年2/3月月赛 Day1 行军（改） 题解</title>
      <link href="/answer/yxyz201802-0101/"/>
      <url>/answer/yxyz201802-0101/</url>
      
        <content type="html"><![CDATA[<p>2018年2/3月月赛 Day1 行军（改） 题解</p><a id="more"></a><h1 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h1><p>再过十几天，人类远征军就要出发去讨伐星神(visitor)了。  </p><p>正规勇者莉莉娅·阿斯普雷伊及一众准勇者们正在为行军问题而焦头烂额。  </p><p>“这么多的粮草，还有那么远的路，这该怎么办啊？”莉莉娅抱怨道。  </p><p>你能帮帮莉莉娅吗？</p><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>从皇都到达星神居住地，这之间有无数座城市和无数条道路，将会消耗很多时间。  </p><p>而为了保证军士们的生活，需要带上足够的粮草。  </p><p>皇都共有n堆粮草可供选择，每堆粮草有重量p，体积q和价值w，而为了便于行军，莉莉娅只能选择不超过u重量且不超过v体积的粮草带走。</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行，包含三个正整数，分别为粮草数量n,最大载重量u,最大体积v。  </p><p>接下来n行，每行包含三个正整数p[i]、q[i]和w[i]。  </p><p>第i+1行的p[i]表示第i堆粮草的重量，q[i]表示第i堆粮草的体积，w[i]表示第i堆粮草的价值。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行，输出能载的粮草的最大价值。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">6 10 10</span><br><span class="line">1 1 1</span><br><span class="line">2 3 1</span><br><span class="line">3 2 1</span><br><span class="line">2 5 1</span><br><span class="line">5 2 1</span><br><span class="line">4 3 1</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure><p>输入样例#2：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">10 16 24</span><br><span class="line">2 9 4</span><br><span class="line">5 6 5</span><br><span class="line">3 7 3</span><br><span class="line">6 2 9</span><br><span class="line">7 6 5</span><br><span class="line">7 5 6</span><br><span class="line">3 3 8</span><br><span class="line">1 4 1</span><br><span class="line">9 5 9</span><br><span class="line">9 7 6</span><br></pre></td></tr></table></figure><p>输出样例#2：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">26</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>1&lt;=n&lt;=1000,1&lt;=u&lt;=1000,1&lt;=v&lt;=1000  </p><p>所有数据不大于maxint</p><p>非常简单的一个二维约束的背包问题。解题方法详见<a href="http://ringoer.com/knapsack-dp/knapsack/" target="_blank" rel="noopener">这里</a>  </p><p>数据较大，最好scanf输入。  </p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,u,v;</span><br><span class="line"><span class="keyword">int</span> p[<span class="number">1010</span>],q[<span class="number">1010</span>],w[<span class="number">1010</span>],f[<span class="number">1010</span>][<span class="number">1010</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="keyword">int</span> i,j,k;</span><br><span class="line"> <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;u&gt;&gt;v;</span><br><span class="line"> <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;p[i],&amp;q[i],&amp;w[i]);</span><br><span class="line"> <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"> &#123;</span><br><span class="line">     <span class="keyword">for</span>(j=u;j&gt;=p[i];j--)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="keyword">for</span>(k=v;k&gt;=q[i];k--)</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="keyword">int</span> temp=f[j-p[i]][k-q[i]]+w[i];</span><br><span class="line">             <span class="keyword">if</span>(f[j][k]&lt;temp) f[j][k]=temp;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="built_in">cout</span>&lt;&lt;f[u][v];</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> dp </tag>
            
            <tag> 云霄一中月赛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>背包问题专项</title>
      <link href="/algorithm/knapsack/"/>
      <url>/algorithm/knapsack/</url>
      
        <content type="html"><![CDATA[<p>背包问题专项</p><a id="more"></a><h1 id="01背包问题"><a href="#01背包问题" class="headerlink" title="01背包问题"></a>01背包问题</h1><p>每种物品只能拿一个的问题称为01背包问题。</p><p>对于一维约束的情况，先正向枚举数量，再反向枚举约束条件。</p><p>核心代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=m;j&gt;=v[i];j--)</span><br><span class="line">        <span class="keyword">if</span>(!ans[j]||ans[j]&gt;ans[j-v[i]]+w[i])</span><br><span class="line">            ans[j]=ans[j-v[i]]+w[i];</span><br></pre></td></tr></table></figure><p>上述代码中设n为数量，m为最大重量，v[i]为第i个物品重量，w[i]为第i个物品价值。  </p><p>对于二维约束的情况，只需要改用二维数组，并再加一个for即可。  </p><p>核心代码：  </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=m;j&gt;=v[i];j--)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=u;k&gt;=p[i];k--)</span><br><span class="line">            <span class="keyword">if</span>(!ans[j][k]||ans[j][k]&gt;ans[j-v[i]][k-p[i]]+w[i])</span><br><span class="line">                ans[j][k]=ans[j-v[i]][k-p[i]]+w[i];</span><br></pre></td></tr></table></figure><p>上述代码中设n为数量，m为最大重量，u为最大体积，v[i]为第i个物品重量，p[i]为第i个物品体积，w[i]为第i个物品价值。  </p><p>对于更多维约束条件，可参照二维约束外推。</p><h1 id="完全背包问题"><a href="#完全背包问题" class="headerlink" title="完全背包问题"></a>完全背包问题</h1><p>每种物品可以拿无限个的问题称为完全背包问题。  </p><p>对于一维约束的情况，先正向枚举数量，再正向枚举约束条件。（01背包是反向枚举约束条件）  </p><p>核心代码：  </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=v[i];j&lt;=m;j++)</span><br><span class="line">        <span class="keyword">if</span>(!ans[j]||ans[j]&gt;ans[j-v[i]]+w[i])</span><br><span class="line">            ans[j]=ans[j-v[i]]+w[i];</span><br></pre></td></tr></table></figure><p>上述代码中设n为数量，m为最大重量，v[i]为第i个物品重量，w[i]为第i个物品价值。</p><p>对于二维约束的情况，只需要改用二维数组，并再加一个for即可。  </p><p>核心代码：  </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=v[i];j&lt;=m;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=p[i];k&lt;=u;k++)</span><br><span class="line">            <span class="keyword">if</span>(!ans[j][k]||ans[j][k]&gt;ans[j-v[i]][k-p[i]]+w[i])</span><br><span class="line">                ans[j][k]=ans[j-v[i]][k-p[i]]+w[i];</span><br></pre></td></tr></table></figure><p>上述代码中设n为数量，m为最大重量，u为最大体积，v[i]为第i个物品重量，p[i]为第i个物品体积，w[i]为第i个物品价值。  </p><p>对于更多维约束条件，可参照二维约束外推。</p><h1 id="多重背包问题"><a href="#多重背包问题" class="headerlink" title="多重背包问题"></a>多重背包问题</h1><p>01背包问题是每种物品只能拿一个，完全背包问题是每种物品可以拿无限个，而多重背包就是每种物品可以取一个或多个，但绝对是有限个，不可能无限取。</p><p>解决此类问题，只需把每种物品拆成单个即可。如第i种物品有j个，单个重量为v[i]，价值为w[i]，那就可以拆分成j的单个重量为v[i]，价值为w[i]的物品。</p><p>拆单之后，即可使用01背包问题的解法来解决。</p><h1 id="混合三种背包问题"><a href="#混合三种背包问题" class="headerlink" title="混合三种背包问题"></a>混合三种背包问题</h1><p>顾名思义，混合三种背包问题就是以上三种的混合。每种物品既可能只有1个，又可能有多个，还可能有无数个。  </p><p>对于该类问题，先按多重背包问题的解法，将有多个的物品全部拆单，使得混合三种背包问题简化为01背包和完全背包的混合；再正向枚举每件物品，按每件物品所属性质不同而决定采用正向枚举约束条件还是反向。  </p><p>核心代码：  </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    <span class="keyword">if</span>(f[i]==<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=m;j&gt;=v[i];j--)</span><br><span class="line">            <span class="keyword">if</span>(!ans[j]||ans[j]&gt;ans[j-v[i]]+w[i])</span><br><span class="line">                ans[j]=ans[j-v[i]]+w[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=v[i];j&lt;=m;j++)</span><br><span class="line">            <span class="keyword">if</span>(!ans[j]||ans[j]&gt;ans[j-v[i]]+w[i])</span><br><span class="line">                ans[j]=ans[j-v[i]]+w[i];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>上述代码中设n为数量，m为最大重量，v[i]为第i个物品重量，w[i]为第i个物品价值，f[i]=1表示第i个物品属于01背包，否则属于完全背包。<br>对于二维约束的情况，只需要改用二维数组，并再加一个for即可。<br>核心代码：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    <span class="keyword">if</span>(f[i]==<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=m;j&gt;=v[i];j--)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=u;k&gt;=p[i];k--)</span><br><span class="line">                <span class="keyword">if</span>(!ans[j][k]||ans[j][k]&gt;ans[j-v[i]][k-p[i]]+w[i])</span><br><span class="line">                    ans[j][k]=ans[j-v[i]][k-p[i]]+w[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=v[i];j&lt;=m;j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=p[i];k&lt;=u;k++)</span><br><span class="line">                <span class="keyword">if</span>(!ans[j][k]||ans[j][k]&gt;ans[j-v[i]][k-p[i]]+w[i])</span><br><span class="line">                    ans[j][k]=ans[j-v[i]][k-p[i]]+w[i];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><p>上述代码中设n为数量，m为最大重量，u为最大体积，v[i]为第i个物品重量，p[i]为第i个物品体积，w[i]为第i个物品价值，f[i]=1表示第i个物品属于01背包，否则属于完全背包。  </p><p>对于更多维约束条件，可参照二维约束外推。</p>]]></content>
      
      
      <categories>
          
          <category> algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Luogu P1126 机器人搬重物 题解</title>
      <link href="/answer/luogu-p1126/"/>
      <url>/answer/luogu-p1126/</url>
      
        <content type="html"><![CDATA[<p>Luogu P1126 机器人搬重物 题解</p><a id="more"></a><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>机器人移动学会（RMI）现在正尝试用机器人搬运物品。机器人的形状是一个直径1.6米的球。在试验阶段，机器人被用于在一个储藏室中搬运货物。储藏室是一个N*M的网格，有些格子为不可移动的障碍。机器人的中心总是在格点上，当然，机器人必须在最短的时间内把物品搬运到指定的地方。机器人接受的指令有：向前移动1步（Creep）；向前移动2步（Walk）；向前移动3步（Run）；向左转（Left）；向右转（Right）。每个指令所需要的时间为1秒。请你计算一下机器人完成任务所需的最少时间。</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>输入的第一行为两个正整数N,M（N,M&lt;=50）</p><p>下面N行是储藏室的构造，0表示无障碍，1表示有障碍，数字之间用一个空格隔开</p><p>接着一行有四个整数和一个大写字母，分别为起始点和目标点左上角网格的行与列，起始时的面对方向（东E，南S，西W，北N），数与数，数与字母之间均用一个空格隔开。终点的面向方向是任意的。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>一个整数，表示机器人完成任务所需的最少时间。如果无法到达，输出-1。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">9 10</span><br><span class="line">0 0 0 0 0 0 1 0 0 0</span><br><span class="line">0 0 0 0 0 0 0 0 1 0</span><br><span class="line">0 0 0 1 0 0 0 0 0 0</span><br><span class="line">0 0 1 0 0 0 0 0 0 0</span><br><span class="line">0 0 0 0 0 0 1 0 0 0</span><br><span class="line">0 0 0 0 0 1 0 0 0 0</span><br><span class="line">0 0 0 1 1 0 0 0 0 0</span><br><span class="line">0 0 0 0 0 0 0 0 0 0</span><br><span class="line">1 0 0 0 0 0 0 0 1 0</span><br><span class="line">7 2 2 7 S</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">12</span><br></pre></td></tr></table></figure><p>本题思路不难，无非就是广搜的一步变成123步或者转向而已，麻烦的是对地图的理解……本人写的时候卡了2小时在地图的处理，然后才A掉。  </p><p>还有坑点，就是起点可能和终点重合，需要特判。  </p><p>对地图的理解：  </p><p>一开始我采用了化格子为点的做法，先弄个可行点地图再搞，然而WA了，只好换。</p><p>后来我用的就是AC的做法，在图上制造虚空点，每个点四周的4个格子都得是0才能通过，只要有一个是1就过不了。  </p><p>附代码</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x,y,face;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> ==(<span class="keyword">const</span> node a,<span class="keyword">const</span> node b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a.x!=b.x) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(a.y!=b.y) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(a.face!=b.face) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;st,di,fx[<span class="number">4</span>];</span><br><span class="line"><span class="built_in">queue</span>&lt;node&gt;q;</span><br><span class="line"><span class="keyword">char</span> dire;</span><br><span class="line"><span class="keyword">int</span> n,m,ans[<span class="number">60</span>][<span class="number">60</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">bool</span> d[<span class="number">60</span>][<span class="number">60</span>]=&#123;<span class="literal">false</span>&#125;,v[<span class="number">60</span>][<span class="number">60</span>][<span class="number">4</span>]=&#123;<span class="literal">false</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> &amp;sum=ans[di.x][di.y];</span><br><span class="line">    q.push(st);</span><br><span class="line">    v[st.x][st.y][st.face]=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span>(!q.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        node t=q.front();</span><br><span class="line">        q.pop();</span><br><span class="line">        v[t.x][t.y][t.face]=<span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> ti;</span><br><span class="line">            node tmp=t;</span><br><span class="line">            tmp.face=i;</span><br><span class="line">            <span class="keyword">if</span>(tmp.face+t.face==<span class="number">3</span>) ti=<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(tmp.face==t.face) ti=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> ti=<span class="number">1</span>;</span><br><span class="line">            ti++;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                tmp.x+=fx[i].x;</span><br><span class="line">                tmp.y+=fx[i].y;</span><br><span class="line">                <span class="keyword">if</span>(tmp.x&lt;<span class="number">1</span>||tmp.y&lt;<span class="number">1</span>||tmp.x&gt;=n||tmp.y&gt;=m) <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">if</span>(d[tmp.x][tmp.y]||d[tmp.x<span class="number">-1</span>][tmp.y]||d[tmp.x][tmp.y<span class="number">-1</span>]||d[tmp.x<span class="number">-1</span>][tmp.y<span class="number">-1</span>]) <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">if</span>(tmp.x==st.x&amp;&amp;tmp.y==st.y) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">int</span> temp=ans[t.x][t.y]+ti;</span><br><span class="line">                <span class="keyword">if</span>(sum&amp;&amp;temp&gt;=sum) <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">if</span>(!ans[tmp.x][tmp.y]||temp&lt;ans[tmp.x][tmp.y])</span><br><span class="line">                &#123;</span><br><span class="line">                    ans[tmp.x][tmp.y]=temp;</span><br><span class="line">                    <span class="keyword">if</span>(!v[tmp.x][tmp.y][tmp.face])</span><br><span class="line">                    &#123;</span><br><span class="line">                        v[tmp.x][tmp.y][tmp.face]=<span class="literal">true</span>;</span><br><span class="line">                        q.push(tmp);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    fx[<span class="number">0</span>].x=<span class="number">-1</span>,fx[<span class="number">0</span>].y=<span class="number">0</span>;</span><br><span class="line">    fx[<span class="number">1</span>].x=<span class="number">0</span>,fx[<span class="number">1</span>].y=<span class="number">-1</span>;</span><br><span class="line">    fx[<span class="number">2</span>].x=<span class="number">0</span>,fx[<span class="number">2</span>].y=<span class="number">1</span>;</span><br><span class="line">    fx[<span class="number">3</span>].x=<span class="number">1</span>,fx[<span class="number">3</span>].y=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;d[i][j]);</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;st.x&gt;&gt;st.y&gt;&gt;di.x&gt;&gt;di.y&gt;&gt;dire;</span><br><span class="line">    <span class="keyword">if</span>(dire==<span class="string">'N'</span>) dire=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(dire==<span class="string">'W'</span>) dire=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(dire==<span class="string">'E'</span>) dire=<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(dire==<span class="string">'S'</span>) dire=<span class="number">3</span>;</span><br><span class="line">    di.face=st.face=dire;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">set</span>();</span><br><span class="line">    <span class="keyword">if</span>(st==di)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    spfa();</span><br><span class="line">    <span class="keyword">if</span>(ans[di.x][di.y]) <span class="built_in">cout</span>&lt;&lt;ans[di.x][di.y];</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Luogu </tag>
            
            <tag> 题解 </tag>
            
            <tag> bfs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ノーゲームノーライフ ゼロ 观影体验</title>
      <link href="/diary/20180311/"/>
      <url>/diary/20180311/</url>
      
        <content type="html"><![CDATA[<p>「向遗志起誓」<br><a id="more"></a></p><hr><p>啊啊，怎么说呢，算是从寒假开始就想看了吧。但是拖到这周周二才把动画本编补完，小说也堪堪起步。本来昨天就打算腾出 2 小时的时间来看的，但是林林总总事情不少（详见上一篇文章），于是便拖到了今天。再加上我妹这两天体调不佳，于是便与她一起，下午用 2 小时（她没看过本编要我慢慢解释）的时间看完了该剧场版。</p><p>那么，以下有剧透，未看过的各位请慎重往下看。</p><p>这是未看过小说，仅看过动画本编的人，的视角。</p><hr><p>故事开始便是男主利库（人类）被毁了家乡，然后与女主休比（机凯种）远距离相看见。这该是最初的相遇了，也与后面女主自称是毁了男主家乡的罪魁祸首相呼应。</p><p>之后开始解释本片视角，原来是唯一神特图在向兽人种的伊纲陈述这个故事，这个发生在 6000 年前，悠久大战终结之时的故事。</p><p>叙述的开篇，利库等 3 人遇到了地精种的特殊设备，在记录过程中却有危险来临，不得不命令一人去死。回据点后，该死去的人是一个萝莉的父亲，利库遭到了萝莉的怨恨发言，回屋后自己也是很难过，在为自己的无能而发怒。</p><p>之后，利库在探险过程中偶然来到森精种旧都（就是被吉普莉尔一个天击毁掉的地方），在这里发生了男女主第一次正式相遇。结果刚一相遇就爆发了重大糟糕台词啊2333，有兴趣的请自行观看，太糟糕了不便透露。</p><p>然后休比申请对局（结果当然输了），于是被利库带回人类据点。然后又是一堆污的事情……不对，是休比向利库陈述了自己的目的——了解「心」。接下来有一起洗澡，呸，是利库给休比擦澡。期间利库的姐姐进了房间，发现了一根休比遗留的头发，扯不断。此时姐姐应该已经发现休比是机凯种了。</p><p>三个字，瞬间一年后。</p><p>利库和休比一同前往相遇的地方，在那里却遭遇了森精种研发的「虚空第零加护」，休比被打中，之后却复制了该招式接近 10% 的威力打破了关上的门成功和利库一起逃出。然后就是卿卿我我的狗粮，期间利库也渐渐打开内心。</p><p>回据点之后利库开始和休比研究地图，企图搞点大新闻。</p><p>好景不长，在地精种对龙精种的攻击中，人类受到了波及。结果利库还趁机套路了一把他姐姐，真是这种时候还有这种闲心啊2333</p><p>利库把首领大位交给姐姐后，开始和其他人谋划「幽灵」行动，引导上位种族休战，并引导其在指定地点开战，计划利用 32 个『典开』「通行规制」把能量引导到贯穿星球，然后利库取得「星杯」来结束这场悠久之战。</p><p>宣布完此事，本片开始最后一段不虐的狗粮——利库向休比求婚了！求婚了！！！</p><p>然后利库向兽人种透露了地精种拥有「水爆」的事情，又去森精种那里下棋，故意输掉讨取情报。但为了不被森精种发现自己是人类，用了很多「黑灰」来掩盖自己的精灵回廊气息，让森精种的克莱布误以为自己是上位种族，不敢贸然动武。</p><p>顺利讨取情报后，利库却因黑灰在身上过久而被侵染严重，不得不截肢了。</p><p>在临时营地里利库过于劳累晕倒了，醒来后休比依旧劝他休息，一来二去利库就睡了。</p><p>这是利库和休比的永别。高虐开始。</p><p>休比为了节约时间，一个人去设置『典开』「通行规制」，结果只设置了一个（目前共24个）就被吉普莉尔发现了，打了起来，休比不敌，开始申请和连接体同步数据，却一直被驳回，隔了好一会才被接受了。于是休比开大，立志坚持 251 秒到同步结束。最终还是被吉普莉尔打爆了，在最后关头同步完成，休比被「天击」秒了。</p><p>这段别看我简单描述过去了，其实是因为太虐了！！！简直就是吉普莉尔掉粉时间啊！！！高虐！！！</p><p>因为休比挂了，利库也十分难受，要自杀的时候，机凯种中连接体的一员来到利库面前，声明剩余8个不可能设置完成，请求修正策略。利库做出了决定。</p><p>机凯种在僵持之处模仿天翼种使用「天击」诱发各方全弹发射，并成功引导能量偏移。机凯种使用第十一连接体全员4807体承接了这股能量，并将其同步给利库所在的『真典』「弑星者」，成功贯穿星球，使得星杯显现，利库的身体却因消耗过度了，被星杯周围的黑灰所侵蚀，不能靠近。绝望之下利库只得祈祷，人生第一次，也是最后的祈祷，祈祷游戏之神能现身取得星杯。最终的最终，游戏之神因为利库的信仰而成形，取得星杯，成为唯一神，重塑世界。</p><p>这段也是巨虐啊！</p><p>啊，到此为止了，真是让我和我妹都哭惨了。</p><p>向全体机凯种致以最高的敬意。  </p><hr><p>以下是部分个人感想吧。</p><p>利库和休比，怎么看都是空白的前世啊。（虽然作者说不是不过不瞎都能看出来吧）</p><p>想看动画第二季啊，也想补小说，但是作业还没写完，还是省省吧2333</p><p>好，到此为止吧。</p><hr><p>「向盟约起誓」</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>20180310 随录</title>
      <link href="/diary/20180310/"/>
      <url>/diary/20180310/</url>
      
        <content type="html"><![CDATA[<p>今日早上8点起床了。</p><a id="more"></a><hr><p>哎呀，前一天是真的累，结果还折腾到快1点，所以早上不得不睡到8点再起来了。</p><p>然后日常，吃完饭后就去公寓305准备面试了。结果到场才不到8点40分，只有lyh在场，又等了很久才等到游神等。</p><p>9点就开始面试了。我还是第一个啊2333被问了基础、时间安排，甚至还有梦想之类的xs</p><p>然后9点5分就出来了，发生了一点小意外——居然碰到了自主招生的时候同组的同学，不仅面试同组体测也同组的xsj同学。他现在在信科。机缘巧合之下居然在之前就加好了qq。他还高呼“原来cgp就是你啊”。缘分啊缘分。</p><p>之后回寝室，居然忘记充电了，结果60多的电到中午2点多点就没电了哭哭。</p><p>10点多和wise相约一起去前一天和同年几位约好的芙蓉湖小广场，结果发现哇游客真的多，周六周日恐怖如斯。之后等几位，陈总没空来，一盆基本上踩点，之后是琛，再是弘哥。然后说人太多了，于是先去吃饭。</p><p>出了西村校门，来到富万邦，然后决定吃杨国福。但是好像没什么东西能吃啊，还不如云霄的，随便点点21块就完了。</p><p>然后去未开放的南校门（不同于大南校门），但是没地方摆手机，于是又前往化院校门，进去一看是上弦场的一边（另一边靠白城）。真是打开了新世界的大门。</p><p>然后在上弦场的中轴线录像，录了一会，聊了会天，wise就去做家教了。剩下的我们就去经院咖啡厅休息，我还点了卡布奇诺，15块啊。不过总算明白经院咖啡厅怎么识别同学和游客了——只能校园卡支付，不支持其它方式。</p><p>啊，3点多就各自散了，4点刚过的时候到了寝室，然后休息，一不小心就5点半多了，去二期吃晚饭，紫菜汤好料啊，还有辣包菜。</p><p>晚上就休闲了，也没什么大事，摸了。</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Luogu P1388 算式 题解</title>
      <link href="/answer/luogu-p1388/"/>
      <url>/answer/luogu-p1388/</url>
      
        <content type="html"><![CDATA[<p>Luogu P1388 算式 题解</p><a id="more"></a><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>给出N个数字，不改变它们的相对位置，在中间加入K个乘号和N-K-1个加号，（括号随便加）使最终结果尽量大。因为乘号和加号一共就是N-1个了，所以恰好每两个相邻数字之间都有一个符号。例如：  </p><p>N=5, K=2，5个数字分别为1、2、3、4、5，可以加成：  </p><p>1*2*(3+4+5)=24  </p><p>1*(2+3)*(4+5)=45  </p><p>(1*2+3)*(4+5)=45  </p><p>……</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>输入文件共有二行，第一行为两个有空格隔开的整数，表示N和K，其中(2&lt;=N&lt;=15, 0&lt;=K&lt;=N-1)。第二行为 N个用空格隔开的数字（每个数字在0到9之间）。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出文件仅一行包含一个整数，表示要求的最大的结果  </p><p>最后的结果&lt;=maxlongint</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5 2</span><br><span class="line">1 2 3 4 5</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">120</span><br></pre></td></tr></table></figure><p>如果可以改变顺序，一个最大堆就解决了。  </p><p>奈何不能改变相对顺序，于是采用dp。  </p><p>用ans[i][j]表示在前i个数的序列中插入j个乘号的最优解。由于乘号和加号数量之和为n-1，所以当乘号数量确定后，加号数量也唯一确定。  </p><p>之后可以发现，因为不能改变顺序，所以在前i个数中插入乘号后，剩下的连续序列必然相加。故有状态转移方程：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ans[i][j]=max(ans[i][j],ans[t][j<span class="number">-1</span>]*(a[i]-a[t]))</span><br></pre></td></tr></table></figure><p>其中t表示前i个数中某个小于i的位置，ans[t][j-1]表示在前i个数构成的序列中的一段由前t个数构成的子序列里插入j-1个乘号的最优解。  </p><p>附代码</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,k,a[<span class="number">20</span>],ans[<span class="number">20</span>][<span class="number">20</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;k;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">        <span class="keyword">if</span>(i<span class="number">-1</span>) a[i]+=a[i<span class="number">-1</span>];</span><br><span class="line">        ans[i][<span class="number">0</span>]=a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=min(k,i<span class="number">-1</span>);j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> t=j;t&lt;i;t++)</span><br><span class="line">                ans[i][j]=max(ans[i][j],ans[t][j<span class="number">-1</span>]*(a[i]-a[t]));</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;ans[n][k];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Luogu </tag>
            
            <tag> 题解 </tag>
            
            <tag> dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Luogu P2085 最小函数值 题解</title>
      <link href="/answer/luogu-p2085/"/>
      <url>/answer/luogu-p2085/</url>
      
        <content type="html"><![CDATA[<p>Luogu P2085 最小函数值 题解</p><a id="more"></a><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>有n个函数，分别为F1,F2,…,Fn。定义Fi(x)=Ai*x^2+Bi*x+Ci (x∈N*)。给定这些Ai、Bi和Ci，请求出所有函数的所有函数值中最小的m个（如有重复的要输出多个）。</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行输入两个正整数n和m。以下n行每行三个正整数，其中第i行的三个数分别位Ai、Bi和Ci。Ai&lt;=10，Bi&lt;=100，Ci&lt;=10 000。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出将这n个函数所有可以生成的函数值排序后的前m个元素。这m个数应该输出到一行，用空格隔开。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3 10</span><br><span class="line">4 5 3</span><br><span class="line">3 4 5</span><br><span class="line">1 7 1</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">9 12 12 19 25 29 31 44 45 54</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>数据规模：n,m&lt;=10000</p><p>方案1：暴力枚举。数据小了能过，但是肯定会T几个点。  </p><p>方案2：采用最小堆。  </p><ol><li><p>保存每个函数的fi(1)值为sum，num为fi(x)中的i，step为fi(x)中的x。全部入队。</p></li><li><p>每次取队首元素，保存为t，然后pop()。</p></li><li><p>输出t.sum（此时已经是最小），t.step++（自变量+1），</p><p>t.sum=a[t.num]<em>t.step</em>t.step+b[t.num]*t.step+c[t.num];（求值），push(t);</p></li><li><p>重复，直到执行了m次。</p></li></ol><p>值得注意的是，此处采用了自定义类型，但普通优先队列并不支持自定义类型，只支持基本类型。此时需要重载运算符。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> rbq u,<span class="keyword">const</span> rbq o)&#123;<span class="keyword">return</span> u.sum&gt;o.sum;&#125;</span><br></pre></td></tr></table></figure></p><p>附代码<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">rbq</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> num,sum,step;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> rbq u,<span class="keyword">const</span> rbq o)&#123;<span class="keyword">return</span> u.sum&gt;o.sum;&#125;</span><br><span class="line">&#125;t;</span><br><span class="line">priority_queue&lt;rbq&gt;q;</span><br><span class="line"><span class="keyword">int</span> n,m,a[<span class="number">10010</span>],b[<span class="number">10010</span>],c[<span class="number">10010</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;a[i],&amp;b[i],&amp;c[i]);</span><br><span class="line">        t.num=i;t.sum=a[i]+b[i]+c[i];t.step=<span class="number">1</span>;</span><br><span class="line">        q.push(t); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        t=q.top();</span><br><span class="line">        q.pop();</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;t.sum&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">        t.step++;</span><br><span class="line">        t.sum=a[t.num]*t.step*t.step+b[t.num]*t.step+c[t.num];</span><br><span class="line">        q.push(t);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Luogu </tag>
            
            <tag> 题解 </tag>
            
            <tag> 数论 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU P1253 胜利大逃亡 题解</title>
      <link href="/answer/hdu-p1253/"/>
      <url>/answer/hdu-p1253/</url>
      
        <content type="html"><![CDATA[<p>HDU P1253 胜利大逃亡 题解</p><a id="more"></a><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1253" target="_blank" rel="noopener">卡常数神题</a></p><h1 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h1><p>Ignatius被魔王抓走了,有一天魔王出差去了,这可是Ignatius逃亡的好机会.</p><p>魔王住在一个城堡里,城堡是一个A*B*C的立方体,可以被表示成A个B*C的矩阵,刚开始Ignatius被关在(0,0,0)的位置,离开城堡的门在(A-1,B-1,C-1)的位置,现在知道魔王将在T分钟后回到城堡,Ignatius每分钟能从一个坐标走到相邻的六个坐标中的其中一个.现在给你城堡的地图,请你计算出Ignatius能否在魔王回来前离开城堡(只要走到出口就算离开城堡,如果走到出口的时候魔王刚好回来也算逃亡成功),如果可以请输出需要多少分钟才能离开,如果不能则输出-1.</p><p><img src="http://acm.hdu.edu.cn/data/images/c15-1003-1.jpg" alt="胜利大逃亡"></p><h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>输入数据的第一行是一个正整数K,表明测试数据的数量.每组测试数据的第一行是四个正整数A,B,C和T(1&lt;=A,B,C&lt;=50,1&lt;=T&lt;=1000),它们分别代表城堡的大小和魔王回来的时间.然后是A块输入数据(先是第0块,然后是第1块,第2块……),每块输入数据有B行,每行有C个正整数,代表迷宫的布局,其中0代表路,1代表墙.(如果对输入描述不清楚,可以参考Sample Input中的迷宫描述,它表示的就是上图中的迷宫)  </p><p>特别注意:本题的测试数据非常大,请使用scanf输入,我不能保证使用cin能不超时.在本OJ上请使用Visual C++提交.</p><h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>对于每组测试数据,如果Ignatius能够在魔王回来前离开城堡,那么请输出他最少需要多少分钟,否则输出-1.</p><h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">3 3 4 20</span><br><span class="line">0 1 1 1</span><br><span class="line">0 0 1 1</span><br><span class="line">0 1 1 1</span><br><span class="line">1 1 1 1</span><br><span class="line">1 0 0 1</span><br><span class="line">0 1 1 1</span><br><span class="line">0 0 0 0</span><br><span class="line">0 1 1 0</span><br><span class="line">0 1 1 0</span><br></pre></td></tr></table></figure><h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">11</span><br></pre></td></tr></table></figure><p>从50*50*50的范围来看，显然dfs是不现实的，故采用bfs。那既然都用bfs了，当然是祭出spfa大法。</p><p>本题最大坑点在于，要么高度耦合，要么要内联，总之就是常数要优化到极致，不然就T，果断T。<br>说明已附在code里。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;qa,qb,qc;</span><br><span class="line"><span class="keyword">bool</span> d[<span class="number">60</span>][<span class="number">60</span>][<span class="number">60</span>],v[<span class="number">60</span>][<span class="number">60</span>][<span class="number">60</span>];</span><br><span class="line"><span class="keyword">int</span> ans[<span class="number">60</span>][<span class="number">60</span>][<span class="number">60</span>],k,a,b,c,t;<span class="comment">//50*50*50，故开60*60*60 </span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> aa,<span class="keyword">int</span> bb,<span class="keyword">int</span> cc)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">qa.push(aa);</span><br><span class="line">qb.push(bb);</span><br><span class="line">qc.push(cc);<span class="comment">//入队 </span></span><br><span class="line">v[aa][bb][cc]=<span class="literal">true</span>;<span class="comment">//标记已用 </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">cut</span><span class="params">(<span class="keyword">int</span> aa,<span class="keyword">int</span> bb,<span class="keyword">int</span> cc)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">qa.pop();</span><br><span class="line">qb.pop();</span><br><span class="line">qc.pop();<span class="comment">//出队 </span></span><br><span class="line">v[aa][bb][cc]=<span class="literal">false</span>;<span class="comment">//取消标记 </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> aa,<span class="keyword">int</span> bb,<span class="keyword">int</span> cc,<span class="keyword">int</span> sum)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!aa&amp;&amp;!bb&amp;&amp;!cc) <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//1、不是起点 </span></span><br><span class="line"><span class="keyword">if</span>(aa&lt;<span class="number">0</span>||bb&lt;<span class="number">0</span>||cc&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//2、不能向下越界 </span></span><br><span class="line"><span class="keyword">if</span>(aa&gt;=a||bb&gt;=b||cc&gt;=c) <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//3、不能向上越界 </span></span><br><span class="line"><span class="keyword">if</span>(v[aa][bb][cc]) <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//4、不能是已经使用过的点 </span></span><br><span class="line"><span class="keyword">if</span>(d[aa][bb][cc]) <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//5、不能是墙 </span></span><br><span class="line"><span class="keyword">int</span> tmp=ans[aa][bb][cc];</span><br><span class="line"><span class="keyword">if</span>(tmp&amp;&amp;sum&gt;=tmp) <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//6、目前计算所得值必须比已有最优解更优，否则走人 </span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//都通过了，合格了 </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">direct</span><span class="params">(<span class="keyword">int</span> aa,<span class="keyword">int</span> bb,<span class="keyword">int</span> cc,<span class="keyword">int</span> sum)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!check(aa,bb,cc,sum)) <span class="keyword">return</span>;<span class="comment">//如果不可行，不再计算 </span></span><br><span class="line">ans[aa][bb][cc]=sum;<span class="comment">//更新值 </span></span><br><span class="line"><span class="keyword">if</span>(!(aa==a<span class="number">-1</span>&amp;&amp;bb==b<span class="number">-1</span>&amp;&amp;cc==c<span class="number">-1</span>)) add(aa,bb,cc);<span class="comment">//如果被更新点不是终点，入队 </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(!qa.empty())<span class="comment">//当队列非空 </span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> ta=qa.front(),tb=qb.front(),tc=qc.front();<span class="comment">//取值 </span></span><br><span class="line">cut(ta,tb,tc);<span class="comment">//出队 </span></span><br><span class="line"><span class="keyword">int</span> sum=ans[ta][tb][tc]+<span class="number">1</span>;<span class="comment">//计算当前最优解 </span></span><br><span class="line">direct(ta<span class="number">-1</span>,tb,tc,sum);</span><br><span class="line">direct(ta+<span class="number">1</span>,tb,tc,sum);</span><br><span class="line">direct(ta,tb<span class="number">-1</span>,tc,sum);</span><br><span class="line">direct(ta,tb+<span class="number">1</span>,tc,sum);</span><br><span class="line">direct(ta,tb,tc<span class="number">-1</span>,sum);</span><br><span class="line">direct(ta,tb,tc+<span class="number">1</span>,sum);<span class="comment">//判断6个方向 </span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">freopen(<span class="string">"in.txt"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);<span class="comment">//文件读入，节省调试时输入的时间 </span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;k);<span class="comment">//输入数据组数 </span></span><br><span class="line"><span class="keyword">while</span>(k--)<span class="comment">//循环k次 </span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">memset</span>(v,<span class="number">0</span>,<span class="keyword">sizeof</span>(v));<span class="comment">//初始化标记数组 </span></span><br><span class="line"><span class="built_in">memset</span>(d,<span class="number">0</span>,<span class="keyword">sizeof</span>(d));<span class="comment">//初始化地图 </span></span><br><span class="line"><span class="built_in">memset</span>(ans,<span class="number">0</span>,<span class="keyword">sizeof</span>(ans));<span class="comment">//初始化答案数组 </span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d %d %d %d"</span>,&amp;a,&amp;b,&amp;c,&amp;t);<span class="comment">//输入 </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;a;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;b;j++)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> z=<span class="number">0</span>;z&lt;c;z++)</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;d[i][j][z]);<span class="comment">//输入 </span></span><br><span class="line">add(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);<span class="comment">//将起点入队 </span></span><br><span class="line">spfa();<span class="comment">//搜索 </span></span><br><span class="line"><span class="keyword">int</span> answer=ans[a<span class="number">-1</span>][b<span class="number">-1</span>][c<span class="number">-1</span>];<span class="comment">//取终点答案，直接访问三维数组耗时太长，故新建一个变量用于保存 </span></span><br><span class="line"><span class="keyword">if</span>(!answer||answer&gt;t) <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);<span class="comment">//如果答案还是初始值，或答案大于规定时间，则无法 </span></span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,answer);<span class="comment">//输出可行答案 </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> HDU </tag>
            
            <tag> SPFA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20180304 随录</title>
      <link href="/diary/20180304/"/>
      <url>/diary/20180304/</url>
      
        <content type="html"><![CDATA[<p>啊，又是回校的日子了。</p><a id="more"></a><hr><p>周末做了什么？似乎也没做什么，无非是打打隔膜，氪氪金，不得已时候写写作业，睡个好觉，如是而已。</p><p>下周就acm面试了，不能回家。还好妹妹也开学了，也算有个照应（虽然远了点）。</p><p>该做什么呢？</p><p>写个爬七天的爬虫，写个爬本网站、提供更新信息的爬虫，好好准备六级，好好学习数学。</p><p>该是这样了吧。</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>20180303 随录</title>
      <link href="/diary/20180303/"/>
      <url>/diary/20180303/</url>
      
        <content type="html"><![CDATA[<p>啊，好想学习啊。</p><p>其实还是想打4y。</p><p>不过总是要认真学习吧？2333</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>狗年元宵随录</title>
      <link href="/diary/20180302/"/>
      <url>/diary/20180302/</url>
      
        <content type="html"><![CDATA[<p>啊，这是狗年的第一次发文吧。</p><a id="more"></a><hr><p>也是，我天天摸鱼，哪来的时间刷题写题解之类的啊2333</p><p>开学的第一周要过去了，今天周五，也是元宵节，正好应该回去过节了。</p><p>差点买不到票啊……不过还好用转车之法多花点钱还能回去，不然就独在异乡为异客了2333  周五，没发生什么大事。最大的感受，可能就是设计心理学真好玩，软件竞赛渣渣，略略略。</p><p>上学期的排名昨天也出了，顺位92%，绝了啊，不过卓越毕竟还是看专业和数学，问题不大（</p><p>艾尔基本也都99了，活动也打完了，我也该休息一下，留给妹妹玩吧。</p><p>啊啊，好像也没什么说的了。</p><p>诸君，学习吧。</p><p>我也去写大物和微积分了。</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>20180211 随录</title>
      <link href="/diary/20180211/"/>
      <url>/diary/20180211/</url>
      
        <content type="html"><![CDATA[<p>一点点记录</p><a id="more"></a><hr><p>cbs 超越 5/5 5/20</p><p>98 约一半</p><p>dw 超越 5/5 0/20</p><p>97 约一半</p><p>交织together 约50s</p><p>伟明家走了一圈</p><p>kf家走了一圈</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>2018年1月月赛 工作分配问题 题解</title>
      <link href="/answer/yxyz201801-04/"/>
      <url>/answer/yxyz201801-04/</url>
      
        <content type="html"><![CDATA[<p>2018年1月月赛 工作分配问题 题解</p><a id="more"></a><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>设有 n 件工作分配给 n 个人。将工作 i 分配给第 j 个人所需的费用为c[i][j] 。试设计一个算法，为每一个人都分配 1 件不同的工作，并使总费用达到最小。</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行有 1 个正整数 n 。接下来的 n 行，每行 n 个正整数，表示工作费用。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行，包含一个正整数，为计算出的最小总费用。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">10 2 3</span><br><span class="line">2 3 4</span><br><span class="line">3 4 5</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">9</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>对于100%的数据，1&lt;=n&lt;=20，1&lt;=c[i][j]&lt;=100。</p><p>分析数据，发现最大数据为所有c[i][j]的和。而格子数最大只有n*n=400，每个c[i][j]最大只有100，故最大数据不大于40000，可以采用int类型。  </p><p>本题也有网络流解法，但网络流解法思维难度过大，不予讨论。  </p><p>采用dfs解决本问题。</p><p>代码：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">bool</span> v[<span class="number">30</span>]=&#123;<span class="literal">false</span>&#125;;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> c[<span class="number">30</span>][<span class="number">30</span>],n;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> sum)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x&gt;n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(sum&lt;ans) ans=sum;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ans&gt;sum)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!v[i])</span><br><span class="line">            &#123;</span><br><span class="line">                v[i]=<span class="literal">true</span>;</span><br><span class="line">                dfs(x+<span class="number">1</span>,sum+c[x][i]);</span><br><span class="line">                v[i]=<span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cin</span>&gt;&gt;c[i][j];</span><br><span class="line">            ans+=c[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;ans;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>采用ans先存储所有c[i][j]的和，这里也可以将ans初始化为一个远大于40000的值。</p><p>用v数组保存工作分配情况，v[i]=true表示第i件工作已经被分配，v[i]=false表示第i件工作未被分配。  </p><p>用dfs函数来执行深搜。dfs函数带有两个参量，其中x表示现在正在被分配工作的人的编号，sum表示目前总花费。  </p><p>当x&gt;n时表示人已经被枚举完了，此时判断sum是否小于已有答案ans，若是，则表示产生了更优解，更新ans的值。  </p><p>如果数据简单的话，到这里就可以过了。但本题数据较为复杂，需要剪枝。</p><p>不论当前枚举到第几个人，只要当前sum&gt;=ans，就表示最终的sum不会比ans小，不会产生更优的解答。所以当且仅当ans&gt;sum的时候继续递归。</p>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> 云霄一中月赛 </tag>
            
            <tag> dfs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年1月月赛 子数整数 题解</title>
      <link href="/answer/yxyz201801-03/"/>
      <url>/answer/yxyz201801-03/</url>
      
        <content type="html"><![CDATA[<p>2018年1月月赛 子数整数 题解</p><a id="more"></a><h1 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h1><p>zc趁着大家都在hanoi，偷偷跑来研究五位数了！</p><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>对于一个五位数a1a2a3a4a5，可将其拆分为三个子数：  </p><p>sub1=a1a2a3  </p><p>sub2=a2a3a4  </p><p>sub3=a3a4a5  </p><p>例如，五位数20207可以拆分成  </p><p>sub1=202  </p><p>sub2=020（=20）  </p><p>sub3=207  </p><p>现在给定一个正整数K，要求你编程求出10000到30000之间所有满足下述条件的五位数，条件是这些五位数的三个子数sub1，sub2，sub3都可被K整除。</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>一行，包含一个正整数K。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出的每一行为一个满足条件的五位数，要求从小到大输出。<br>不得重复输出或遗漏。  </p><p>如果无解，则输出”No”。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：   </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">15</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">22555</span><br><span class="line">25555</span><br><span class="line">28555</span><br><span class="line">30000</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>对于100%的数据，1&lt;=k&lt;=1000。</p><p>枚举10000~30000之间的所有整数，并将其拆分成三块，逐块判断即可。</p><p>代码：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">bool</span> p=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">int</span> k;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;k;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">10000</span>;i&lt;=<span class="number">30000</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> s1=i/<span class="number">100</span>,s2=i/<span class="number">10</span>%<span class="number">1000</span>,s3=i%<span class="number">1000</span>;</span><br><span class="line">        <span class="keyword">if</span>(s1%k)</span><br><span class="line">        &#123;</span><br><span class="line">            i+=<span class="number">99</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s2%k)</span><br><span class="line">        &#123;</span><br><span class="line">            i+=<span class="number">9</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s3%k) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        p=<span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(p) <span class="built_in">cout</span>&lt;&lt;<span class="string">"No"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> 模拟 </tag>
            
            <tag> 云霄一中月赛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年1月月赛 复仇的汉诺塔 题解</title>
      <link href="/answer/yxyz201801-02/"/>
      <url>/answer/yxyz201801-02/</url>
      
        <content type="html"><![CDATA[<p>2018年1月月赛 复仇的汉诺塔 题解</p><a id="more"></a><h1 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h1><p>汉诺塔觉得自己不被mh和cl尊重，决定发动复仇！  </p><p>它把mh和cl困在了古印度圣庙中，并告诉wy，如果不能输出最少搬动的方案，那mh和cl就再也出不来了！</p><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>题目的要求是输出最少搬动方案。</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>一行，包含一个整数n，即为盘子数n，n为正整数，且最大值为10</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>若干行。每一行格式如下：  </p><p>Step i:X -&gt; Y  </p><p>其中，i为第i步，从1开始计算。  </p><p>X，Y为A、B、C中某一个值。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：   </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure><p>输出样例#1：   </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Step 1:A -&gt; C</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>对于100%的数据，1&lt;=n&lt;=20。</p><p>裸的递归，没什么好说的。</p><p>代码：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">move</span><span class="params">(<span class="keyword">char</span> x,<span class="keyword">char</span> y)</span></span>&#123;<span class="built_in">printf</span>(<span class="string">"Step %d:%c -&gt; %c\n"</span>,sum++,x,y);&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">hanoi</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">char</span> from,<span class="keyword">char</span> temp,<span class="keyword">char</span> destination)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) move(from,destination);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        hanoi(n<span class="number">-1</span>,from,destination,temp);</span><br><span class="line">        move(from,destination);</span><br><span class="line">        hanoi(n<span class="number">-1</span>,temp,from,destination);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    hanoi(n,<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>在上述代码中，我们在hanoi函数里定义了剩余盘子数量n，起始盘子位置from，中转盘子位置temp，目标盘子位置destination。  </p><p>在每一步移动中，都可以分成两部分，一部分是最下面的那个盘子，一部分是剩下的盘子。每一步都可以看成先将剩下的盘子全部移动到其中转位置，再将最下面的盘子移动到其目标位置。每当发生最下面的盘子被移动到其目标位置时就输出。递归操作即可。</p>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> 模拟 </tag>
            
            <tag> 云霄一中月赛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年1月月赛 打卡的汉诺塔 题解</title>
      <link href="/answer/yxyz201801-01/"/>
      <url>/answer/yxyz201801-01/</url>
      
        <content type="html"><![CDATA[<p>2018年1月月赛 打卡的汉诺塔 题解</p><a id="more"></a><h1 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h1><p>比赛总是需要打卡题~~</p><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>mh和cl最近玩起了汉诺塔。  </p><p>相传在古印度圣庙中，有一种被称为汉诺塔(Hanoi)的游戏。该游戏是在一块铜板装置上，有三根杆(编号A、B、C)，在A杆自下而上、由大到小按顺序放置64个金盘。  </p><p>游戏的目标：把A杆上的金盘全部移到C杆上，并仍保持原有顺序叠好。  </p><p>操作规则：每次只能移动一个盘子，并且在移动过程中三根杆上都始终保持大盘在下，小盘在上，操作过程中盘子可以置于A、B、C任一杆上。现有n个盘子，有A、B、C三个柱子。  </p><p>mh认为汉诺塔有最优解，而cl认为没有，这可怎么办呢？请你帮忙算算吧。</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>一行，包含一个正整数n，表示A柱子上有的盘子数量。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行，包含一个整数，表示最少需要的步数。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1：   </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><p>输出样例#1：   </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>对于60%的数据，1&lt;=n&lt;=32。</p><p>对于100%的数据，1&lt;=n&lt;=64。  </p><p>样例说明：  </p><p>按A-&gt;B，A-&gt;C，B-&gt;C的方式即可三步完成。</p><p>通过手推n=1,2,3,4的情况，可以发现ans=pow(2,n)-1，故答案最大为2^64-1。  </p><p>观察数据范围，发现n&lt;=64。  </p><p>因为int范围-2^31~2^31-1  </p><p>long long范围-2^63~2^63-1  </p><p>unsigned long long范围0~2^64-1  </p><p>所以选用unsigned long long。  </p><p>但又因为pow函数返回值为double类型，浮点数类型在数字很大时会发生浮点误差，因此用pow只能80分。故采用循环。</p><p>代码：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ans=<span class="number">1</span>,n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) ans*=<span class="number">2</span>;</span><br><span class="line">    ans--;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;ans;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>在上述代码中，我们发现，极端情况时ans=2^64，超过unsigned long long的0~2^64-1的范围，发生向上溢出（上溢），此时变为(2^64)-1-(2^64-1)=0。  </p><p>之后又发生ans–，ans本该变为-1，但因为超过unsigned long long的0~2^64-1的范围，发生向下溢出（下溢），此时变为(-1)+1+(2^64-1)=2^64-1，即是答案。</p>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题解 </tag>
            
            <tag> 数论 </tag>
            
            <tag> 云霄一中月赛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Luogu P1001 A+B Problem Python 题解</title>
      <link href="/answer/luogu-p1001/"/>
      <url>/answer/luogu-p1001/</url>
      
        <content type="html"><![CDATA[<p>A+B没什么好说的……  </p><p>直接上Code</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a,b=(int(x) <span class="keyword">for</span> x <span class="keyword">in</span> input().split(<span class="string">' '</span>))</span><br><span class="line"><span class="keyword">print</span> (a+b)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> Luogu </tag>
            
            <tag> 题解 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2017へのさよなら</title>
      <link href="/diary/end-of-2017/"/>
      <url>/diary/end-of-2017/</url>
      
        <content type="html"><![CDATA[<p>2017也算是过去了，聊表感想。</p><a id="more"></a><hr><h1 id="PART1"><a href="#PART1" class="headerlink" title="PART1"></a>PART1</h1><p>不知不觉 2017 已经过去了。</p><p>实话实说，2017年，真是对我来说人生中重要的一年。经历了严酷的高三总复习，参加了大大小小的模拟考试（省质检一竟然还漏题了，笑），直到高考，直到来到 XMU，直到……</p><p>也算是命中注定吧，为了冲 XMU 经院，放着自招 20 分不用，报了普通本一批，第一志愿经院，第二志愿软院。但是在 FJ，经院收到 597 分，而我才考了 596，因而还是来了软院。</p><p>若是我当时多考一分，现在又如何呢？</p><h1 id="PART2"><a href="#PART2" class="headerlink" title="PART2"></a>PART2</h1><p>除了正式的学业之外，我还参加了一些可做可不做的事。</p><ol><li>云一 OI 培训</li><li>云一日语部</li><li>N3 考试</li><li>等等</li></ol><p>但是结果？</p><ol><li>NOIP2017 无人通过初赛</li><li>集训学员学习热情忽高忽低</li><li>日语部成员竟然因为一个人退部了就热情降到冰点</li><li>N3 考试尚无结果</li></ol><p>又有什么事情成功了呢？只是我的一厢情愿吗？</p><h1 id="PART3"><a href="#PART3" class="headerlink" title="PART3"></a>PART3</h1><p>在XMU软院，似乎借着 FJTG2= 的基础，大有风生水起之势。但 lyh，YJQAQ，hiijar，都能在专业水平方面甩我若干条街。我能做些什么？怕是只有学习。</p><p>即使是学习，也面临我长期以来的问题：听不下课。</p><p>小学时期，我发现课不难，上课写作业的话回家可以有更多时间玩。于是一发不可收拾，直到高中毕业我都贯彻落实这一点。这直接造成我现在只有在上课时候才能写作业，也只有写作业才能保证清醒，否则我一旦认真听课，立刻睡着。</p><p>长期以来的习惯，如今被婊了。</p><p>我曾经也试过改，然后就睡着了，根深蒂固。</p><p>但是我能怎么办呢？我就想上课睡觉吗？我就不想改吗？</p><h1 id="PART4"><a href="#PART4" class="headerlink" title="PART4"></a>PART4</h1><p>12.30 去了上海，在浦东赶星尘宝宝的演唱会，然后去松江找同学玩。</p><p>从松江到外滩，真的蛮久的，用时好像在 2 小时？结果见到了重度污染的东方明珠，还因为地铁要封站而匆匆赶回。次日早上兜兜转转，虽然中午开心地聚餐了，但是飞机险些来不及，唉，虹桥居然提前 20 分钟截停，还是高崎 15 分钟截停好。</p><p>只有照片，留下了一点回忆。</p><h1 id="PART5"><a href="#PART5" class="headerlink" title="PART5"></a>PART5</h1><p>想起一句名言？也许不算名言。</p><p>“未来永远在手中，手中抓不住的是过去”。</p><p>似乎没什么事情的 2017，已经抓不住了。</p><p>那么，再见。</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>本站建站指导</title>
      <link href="/others/MyWebsiteGuide/"/>
      <url>/others/MyWebsiteGuide/</url>
      
        <content type="html"><![CDATA[<p>本站建站指导</p><a id="more"></a><hr><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="本地配置"><a href="#本地配置" class="headerlink" title="本地配置"></a>本地配置</h2><ol><li><p>注册 github 账号，并新建一个 github 仓库（Repositories）</p><p>该仓库命名为你的 github 用户名+.github.io</p><p>比如我的 github 用户名是 Ringoer，那我的仓库名就叫 Ringoer.github.io</p><p>如果不这么写，你的博客会被放到子路径下，不能使用根路径直接访问</p></li><li><p>下载 node.js。</p><p><a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">https://nodejs.org/en/download/</a></p></li><li><p>安装 git。</p><p><a href="https://git-for-windows.github.io/" target="_blank" rel="noopener">https://git-for-windows.github.io/</a></p></li><li><p>鼠标右键安装 node.js 的地方，进入 nodemudule 文件夹，选择 Git Bash，使用以下命令安装 hexo</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>最新版 nodejs 不需要 –save 参数</p></li><li><p>创建放置博客文件的文件夹：hexo 文件夹，如 E:\hexo。最好不在中文目录下。   </p><p>注意：以后进行 hexo 操作都要进入到此文件夹中；对于 git 操作，若无特殊说明，则也进入到此文件夹中（在此文件夹中启动 Git Bash）</p></li><li><p>进入 E:\hexo文件夹，鼠标右键选择“Git Bash”，执行以下命令，初始化 hexo，这时候会在该文件夹中创建网站所需要的文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br><span class="line">npm install</span><br><span class="line">hexo g</span><br></pre></td></tr></table></figure><p>此时已经可以在本地访问。在Git Bash中输入命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure></li></ol><p>   访问 127.0.0.1:4000 或 localhost:4000 即可看到网页预览。</p><h2 id="布置到-github-上。"><a href="#布置到-github-上。" class="headerlink" title="布置到 github 上。"></a>布置到 github 上。</h2><ol><li><p>启动 Git Bash，输入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config  --global user.name <span class="string">"your name"</span></span><br><span class="line">git config  --global user.email your_email@youremail.com</span><br></pre></td></tr></table></figure><p>其中每条命令的最后一个参数修改为自己的数据</p></li><li><p>输入命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C ringoer@qq.com</span><br></pre></td></tr></table></figure></li></ol><pre><code>此时会生成 ssh 密钥。命令中邮件地址替换为自己的。</code></pre><ol start="3"><li><p>输入命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><p>此时会在控制台显示一串密钥，复制下来。</p></li><li><p>打开 github，打开 settings，选择 SSH and GPG keys，选择New SSH key。  </p><p>title 随便写，key 的文本则填写刚才复制出来的密钥，然后 add key。</p></li><li><p>输入命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>上述命令不可修改</p></li><li><p>打开 hexo 文件夹中的 _config.yml，修改文档末尾的 deploy，示例如下：</p><p><img src="http://pic.ringoer.com/建站教程-修改deploy.png" alt="修改deploy"></p><p>因为 zzzq，现在新建的 repository 的默认 branch 已经变成 main 了，记得检查一下是 master 还是 main</p><p>其中蓝色部分应替换成自己的链接。链接来源参考自己 github 仓库的链接（如图）：</p><p><img src="http://pic.ringoer.com/建站教程-github仓库链接示例.png" alt="github仓库链接示例"></p><p>注意：hexo 的配置文件中任何<code>:</code>后面都是带一个空格的。  </p></li><li><p>输入命令 <code>hexo g</code> 和 <code>hexo d</code> 生成页面并部署到 github 上</p></li><li><p>绑定自己的域名</p><ol><li>在 /hexo/source 文件夹中新建一个 CNAME 文件，然后里面添加自己的网站域名。</li></ol></li></ol><p>   可以在 github 的 setting 中查看是否发布成功。  </p><ol start="2"><li>到自己的域名解析中添加 CNAME 值，解析到 username.github.io. (注意最后面有点)</li></ol><h1 id="个性化"><a href="#个性化" class="headerlink" title="个性化"></a>个性化</h1><ol><li><p>下载主题。可以前往 <a href="https://hexo.io/themes/" target="_blank" rel="noopener">Themes | Hexo</a> 选择主题。</p><p>此处我选用 next 主题，Pisces 主题风格（默认为 Muse）。</p><p>修改 /themes/next 下的配置文件中的 schemes 字段。</p><p><img src="http://pic.ringoer.com/建站教程-配置主题-1.png" alt="配置主题-1"></p><p>取消需要的主题风格前的井字号，然后在之前的主题风格前加入井字号即可。</p><p>之后配置网站信息，如图。</p><p><img src="http://pic.ringoer.com/建站教程-配置主题-2.png" alt="配置主题-2"></p></li><li><p>底部信息。修改 /themes/next 下的配置文件中的 footer 字段。</p><p><img src="http://pic.ringoer.com/建站教程-配置footer.png" alt="配置footer"></p></li><li><p>文章缩略。修改 /themes/next 下的配置文件中的 auto_excerpt 字段。</p><p><img src="http://pic.ringoer.com/建站教程-文章缩略.png" alt="文章缩略"></p><p>enable 改成 true 即可。</p><p>也可以手动在每篇文章中添加 <code>&lt;!--more--&gt;</code> 字段，在该字段后的部分会被隐藏。</p></li><li><p>修改导航栏。修改 /themes/next 下的配置文件中的menu字段。</p><p><img src="http://pic.ringoer.com/建站教程-修改导航栏.png" alt="修改导航栏"></p><p>想要什么选项，就去掉其之前的井字号，或自己新加入一个。</p><p><code>||</code>左边是该项所用的路径</p><p><code>||</code>右边是该项所用的图标</p></li><li><p>菜单项图标。在 <a href="http://www.fontawesome.com.cn/icons-ui/" target="_blank" rel="noopener">http://www.fontawesome.com.cn/icons-ui/</a> 中选择。取用时要去掉前缀 fa-。修改 /themes/next 下的配置文件中的menu字段。</p></li><li><p>取消页面动画。修改 /themes/next 下的配置文件中的 motion 字段。</p><p><img src="http://pic.ringoer.com/建站教程-取消页面动画.png" alt="取消页面动画"><br>enable: false即可</p></li><li><p>设置头像。修改 /themes/next 下的配置文件中的 avatar 字段。</p><p><img src="http://pic.ringoer.com/建站教程-设置头像.png" alt="设置头像"></p><p>须确认有 /source/images 文件夹（如没有则应新建），后在其中添加图片，如图写入路径即可。  </p><p>该路径也可以是来自网络的图片路径。</p></li><li><p>设置社交媒体。修改 /themes/next 下的配置文件中的 social 字段。</p><p><img src="http://pic.ringoer.com/建站教程-社交媒体.png" alt="社交媒体"></p><p>icons_only 默认为 false，会显示各个图标的名字。若为 true 则仅有图标。</p></li><li><p>顶部加载进度条。修改 /themes/next 下的配置文件中的 pace 字段。</p><p><img src="http://pic.ringoer.com/建站教程-顶部加载进度条.png" alt="顶部加载进度条"></p></li><li><p>文章结尾标识。分为以下三个步骤。</p><ol><li><p>打开 \themes\next\layout_macro 文件夹，新建文件 passage-end-tag.swig，向其中写入以下片段。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% if not is_index %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;color: #ccc;font-size:14px;"</span>&gt;</span>-------------It's the end.<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-life-ring"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>Thanks for your read.-------------<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>打开 \themes\next\layout_macro\post.swig 文件，进行如图操作。</p><p><img src="http://pic.ringoer.com/建站教程-文章结尾标识.png" alt="文章结尾标识"></p><p>插入的文本如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% if not is_index %&#125;</span><br><span class="line">    &#123;% include 'passage-end-tag.swig' %&#125;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>在 /themes/next 下的配置文件中加入以下字段。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 文章末尾添加“本文结束”标记</span><br><span class="line">passage_end_tag:</span><br><span class="line">   enabled: true</span><br></pre></td></tr></table></figure></li></ol></li></ol><ol start="12"><li><p>添加外链网易云音乐。分为以下两个步骤。</p><ol><li><p>访问网页版网易云，找到合适的歌曲/歌单，生成分享外链，复制 html 代码。</p></li><li><p>找到合适的位置插入这段代码。本博客插入在 \source\about\index.md 中图片的后面（如图）。</p><p><img src="http://pic.ringoer.com/建站教程-外链网易云音乐.png" alt="外链网易云音乐"></p></li></ol></li><li><p>本地可视化编辑文章。启动 git bash，执行以下命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-admin –save</span><br></pre></td></tr></table></figure><p>之后执行 hexo s 时，访问 localhost:4000/admin 即可进入文章后台。  </p><p>此处文章编辑使用 markdown。</p></li><li><p>文章置顶。把需要置顶的文章的发布时间改到200年之后（233333333）。</p></li><li><p>修改菜单中的选项名称。打开 \themes\next\language\zh-Hans.yml，找到 menu 字段，进行如图配置。</p><p><img src="http://pic.ringoer.com/建站教程-导航栏项目改名.png" alt="导航栏项目改名"></p></li></ol><h1 id="迁移"><a href="#迁移" class="headerlink" title="迁移"></a>迁移</h1><ol><li><p>拷贝原有 hexo 文件夹至新电脑</p></li><li><p>重新配置 git 和 node.js</p></li><li><p>安装 hexo</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure></li><li><p>进入 hexo 文件夹，执行以下指令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">npm install hexo-generator-feed --save</span><br><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure></li><li><p>重新配置SSH密钥</p></li><li><p>正常使用</p></li></ol><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="https://blog.csdn.net/qq_27754983/article/details/76143478" target="_blank" rel="noopener">https://blog.csdn.net/qq_27754983/article/details/76143478</a><br><a href="https://www.jianshu.com/p/21c94eb7bcd1" target="_blank" rel="noopener">https://www.jianshu.com/p/21c94eb7bcd1</a><br><a href="https://www.jianshu.com/p/393d067dba8d" target="_blank" rel="noopener">https://www.jianshu.com/p/393d067dba8d</a><br><a href="https://www.jianshu.com/p/9f0e90cc32c2" target="_blank" rel="noopener">https://www.jianshu.com/p/9f0e90cc32c2</a><br><a href="https://blog.csdn.net/eternity1118_/article/details/71194395?ref=myread" target="_blank" rel="noopener">https://blog.csdn.net/eternity1118_/article/details/71194395?ref=myread</a></p>]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 建站指导 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Luogu P2308 添加括号 题解及心得</title>
      <link href="/answer/luogu-p2308/"/>
      <url>/answer/luogu-p2308/</url>
      
        <content type="html"><![CDATA[<p>Luogu P2308 添加括号 题解及心得</p><a id="more"></a><h1 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h1><p>给定一个正整数序列a(1)，a(2)，…，a(n),(1&lt;=n&lt;=20)  </p><p>不改变序列中每个元素在序列中的位置，把它们相加，并用括号记每次加法所得的和，称为中间和。  </p><p>例如:  </p><p>给出序列是4，1，2，3。  </p><p>第一种添括号方法:  </p><p>((4+1)+(2+3))=((5)+(5))=(10)  </p><p>有三个中间和是5，5，10，它们之和为:5+5+10=20  </p><p>第二种添括号方法  </p><p>(4+((1+2)+3))=(4+((3)+3))=(4+(6))=(10)  </p><p>中间和是3，6，10，它们之和为19。</p><h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>现在要添上n-1对括号，加法运算依括号顺序进行，得到n-1个中间和，求出使中间和之和最小的添括号方法。</p><h1 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h1><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>共两行。 第一行，为整数n。(1&lt; =n&lt; =20) 第二行，为a(1),a(2),…,a(n)这n个正整数，每个数字不超过100。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出3行。 第一行，为添加括号的方法。 第二行，为最终的中间和之和。 第三行，为n-1个中间和，按照从里到外，从左到右的顺序输出。</p><h1 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h1><p>输入样例#1： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">4 1 2 3</span><br></pre></td></tr></table></figure><p>输出样例#1：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(4+((1+2)+3))</span><br><span class="line">19</span><br><span class="line">3 6 10</span><br></pre></td></tr></table></figure><p>显然加括号过程是依赖最小中间和的，而最小中间和势必从一个区间中得出，故不难看出这是一个区间dp。  </p><p>不难得出状态转移方程：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f[i][j]=min(f[i][j],f[i][k]+f[k+<span class="number">1</span>][j]+sum[j]-sum[i<span class="number">-1</span>])</span><br></pre></td></tr></table></figure><p>解题思路：</p><ol><li><p>先区间dp，逆向枚举i，正向枚举j，阶段k=i,k&lt;j。由于括号添加时要尽可能靠左，所以当新值&lt;=f[i][j]时即发生更新。</p><p>//求最小值时i逆序j正序，最大值时都正序</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i=n<span class="number">-1</span>;i;i--)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span>(j=i+<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(k=i;k&lt;j;k++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> t=f[i][k]+f[k+<span class="number">1</span>][j]+sum[j]-sum[i<span class="number">-1</span>];</span><br><span class="line">            <span class="keyword">if</span>(t&lt;=f[i][j]) f[i][j]=t,g[i][j]=k;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>为了能解决第二问和第三问，令g[i][j]=k保存从下标i~j之间断点k的位置。</p></li><li><p>对于第二问，递归查找每个点左边有多少个左括号，右边有多少个右括号，然后输出。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span>;</span><br><span class="line">    l[x]++;</span><br><span class="line">    r[y]++;</span><br><span class="line">    search(x,g[x][y]);</span><br><span class="line">    search(g[x][y]+<span class="number">1</span>,y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;l[i];j++) <span class="built_in">printf</span>(<span class="string">"("</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>,a[i]);</span><br><span class="line">    <span class="keyword">if</span>(r[i]==<span class="number">0</span>&amp;&amp;i&lt;n) <span class="built_in">printf</span>(<span class="string">"+"</span>);</span><br><span class="line">    <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;r[i];j++) <span class="built_in">printf</span>(<span class="string">")"</span>);</span><br><span class="line">    <span class="keyword">if</span>(r[i]&gt;<span class="number">0</span>&amp;&amp;i&lt;n) <span class="built_in">printf</span>(<span class="string">"+"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>对于第三问，递归求每个中间和，然后输出。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span>;</span><br><span class="line">    dfs(x,g[x][y]);</span><br><span class="line">    dfs(g[x][y]+<span class="number">1</span>,y);</span><br><span class="line">    ans[top++]=sum[y]-sum[x<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>心得：虽然大部分区间dp是在最外层枚举阶段，但是偶尔也要像这题这样最内层枚举阶段吧。//还有可能是我没想到最外层枚举阶段的做法（小声）。  </p><p>总之，終わり！  </p><p>&lt;附送全篇代码&gt;</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdbool.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn(a,b) (a&gt;b)?a:b</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> minn(a,b) (a&lt;b)?a:b</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxnn(a,b,c) (a&gt;b&amp;&amp;a&gt;c)?a:((b&gt;a&amp;&amp;b&gt;c)?b:c)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">30</span>]=&#123;<span class="number">0</span>&#125;,f[<span class="number">30</span>][<span class="number">30</span>],g[<span class="number">30</span>][<span class="number">30</span>],sum[<span class="number">30</span>]=&#123;<span class="number">0</span>&#125;,l[<span class="number">30</span>],r[<span class="number">30</span>],ans[<span class="number">30</span>],top;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span>;</span><br><span class="line">    l[x]++;</span><br><span class="line">    r[y]++;</span><br><span class="line">    search(x,g[x][y]);</span><br><span class="line">    search(g[x][y]+<span class="number">1</span>,y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span>;</span><br><span class="line">    dfs(x,g[x][y]);</span><br><span class="line">    dfs(g[x][y]+<span class="number">1</span>,y);</span><br><span class="line">    ans[top++]=sum[y]-sum[x<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,i,j,k;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n)!=EOF)</span><br><span class="line">    &#123;</span><br><span class="line">        top=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(ans,<span class="number">0</span>,<span class="keyword">sizeof</span>(ans));</span><br><span class="line">        <span class="built_in">memset</span>(sum,<span class="number">0</span>,<span class="keyword">sizeof</span>(sum));</span><br><span class="line">        <span class="built_in">memset</span>(a,<span class="number">0</span>,<span class="keyword">sizeof</span>(a));</span><br><span class="line">        <span class="built_in">memset</span>(l,<span class="number">0</span>,<span class="keyword">sizeof</span>(l));</span><br><span class="line">        <span class="built_in">memset</span>(r,<span class="number">0</span>,<span class="keyword">sizeof</span>(r));</span><br><span class="line">        <span class="built_in">memset</span>(g,<span class="number">0</span>,<span class="keyword">sizeof</span>(g));</span><br><span class="line">        <span class="built_in">memset</span>(f,<span class="number">1</span>,<span class="keyword">sizeof</span>(f));</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</span><br><span class="line">            f[i][i]=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++) sum[i]=a[i]+sum[i<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">for</span>(i=n<span class="number">-1</span>;i;i--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(j=i+<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(k=i;k&lt;j;k++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">int</span> t=f[i][k]+f[k+<span class="number">1</span>][j]+sum[j]-sum[i<span class="number">-1</span>];</span><br><span class="line">                    <span class="keyword">if</span>(t&lt;=f[i][j]) f[i][j]=t,g[i][j]=k;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        search(<span class="number">1</span>,n);</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;l[i];j++) <span class="built_in">printf</span>(<span class="string">"("</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d"</span>,a[i]);</span><br><span class="line">            <span class="keyword">if</span>(r[i]==<span class="number">0</span>&amp;&amp;i&lt;n) <span class="built_in">printf</span>(<span class="string">"+"</span>);</span><br><span class="line">            <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;r[i];j++) <span class="built_in">printf</span>(<span class="string">")"</span>);</span><br><span class="line">            <span class="keyword">if</span>(r[i]&gt;<span class="number">0</span>&amp;&amp;i&lt;n) <span class="built_in">printf</span>(<span class="string">"+"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n%d\n"</span>,f[<span class="number">1</span>][n]);</span><br><span class="line">        dfs(<span class="number">1</span>,n);</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;top;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i&lt;top<span class="number">-1</span>) <span class="built_in">printf</span>(<span class="string">"%d "</span>,ans[i]);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d"</span>,ans[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> answer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Luogu </tag>
            
            <tag> 题解 </tag>
            
            <tag> dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++语言-11-竞赛相关的其余操作及编程时应有的良好习惯</title>
      <link href="/cpp/cpp-11/"/>
      <url>/cpp/cpp-11/</url>
      
        <content type="html"><![CDATA[<p>待更新</p><a id="more"></a><hr><p>缩进</p><p>高内聚，低耦合</p><p>freopen</p><p>inline</p>]]></content>
      
      
      <categories>
          
          <category> cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cpp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++语言-10-指针</title>
      <link href="/cpp/cpp-10/"/>
      <url>/cpp/cpp-10/</url>
      
        <content type="html"><![CDATA[<p>待更新</p><a id="more"></a><hr><p>地址（分配地址，取地址符号，取值符号）</p><p>(*p)++</p><p>*p++</p><p>结构体指针（->）</p><p>链表</p>]]></content>
      
      
      <categories>
          
          <category> cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cpp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++语言-9-结构体与运算符重载</title>
      <link href="/cpp/cpp-9/"/>
      <url>/cpp/cpp-9/</url>
      
        <content type="html"><![CDATA[<p>本章学习结构体与运算符重载。</p><a id="more"></a><hr><p>在各路题目中，我们有时候会看到，一个主体有很多个属性。比如你是一个学生，你可以被拆分为以下属性的集合体：</p><ol><li>姓名</li><li>性别</li><li>年龄</li><li>年级</li><li>班级<br>……</li></ol><p>而且，其余的学生也都是跟你一样有这些属性。那么，我们现在假设一个年级有1000人，难道我们要针对每个属性都开一个1000单位的数组吗？</p><p>这时候我们就可以使用结构体，把这些属性整合，产生一个新的类型。</p><p>比如上文中的属性，我们就可以整合为一个student类型。写法如下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span>//<span class="title">struct</span>是必须的，不可更改；后面的<span class="title">student</span>则可以自定义</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="built_in">string</span> name;<span class="comment">//用一个名为name的字符串保存姓名</span></span><br><span class="line"><span class="keyword">char</span> sex;<span class="comment">//假设我们用M和W来表示Man和Woman，那么可以用一个字符型来保存</span></span><br><span class="line"><span class="keyword">int</span> age;</span><br><span class="line"><span class="keyword">int</span> grade;</span><br><span class="line"><span class="keyword">int</span> <span class="class"><span class="keyword">class</span>;</span><span class="comment">//分别用三个int类型变量来保存年龄，年级和班级</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;name&lt;&lt;” ”&lt;&lt;sex&lt;&lt;” ”&lt;&lt;age&lt;&lt;” ”&lt;&lt;grade&lt;&lt;” “&lt;&lt;<span class="class"><span class="keyword">class</span>&lt;&lt;endl;</span></span><br><span class="line"><span class="class">&#125;//该函数可以输出5个变量</span></span><br><span class="line"><span class="class">&#125;;//注意这里有个分号，不要漏了</span></span><br></pre></td></tr></table></figure><p>通过上文的代码段，我们就建立了一个结构体类型，类型名称为student。其下属有5个变量，我们称之为“成员变量”，又叫“成员表”；还有1个函数，我们称之为“成员函数”。</p><p>这样，我们就可以总结一个格式：  </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> 类型名称</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">成员表</span><br><span class="line">成员函数</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>没有严格的顺序，但一般成员函数写在成员表之后，因为变量/数组等必须先定义才能调用。<br>注意结构体的右大括号后必须有个分号，不要漏掉。</p><p>那么，我们如何使用结构体？</p><p>结构体类型，俗称自定义类型。因此，可以效仿其它类型的定义方法。如上文中的student，此时就可以用作数据类型。如，我们称<code>int a;</code>为定义一个名为a的int类型变量。同样的，我们可以<code>student a;</code>来定义一个名为a的student类型变量。</p><p>因此，我们可以写出如下代码：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="built_in">string</span> name;</span><br><span class="line"><span class="keyword">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">student a,b;<span class="comment">//定义两个student类型的变量，分别名为a和b</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>定义student类型的变量也可以写在struct student的右大括号后分号前。写法如下：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="built_in">string</span> name;</span><br><span class="line"><span class="keyword">int</span> age;</span><br><span class="line">&#125;a,b;<span class="comment">//定义两个student类型的变量，分别名为a和b</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>如果采取上述方法定义结构体变量，还可以不写结构体类型的类型名称。如下：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="built_in">string</span> name;</span><br><span class="line"><span class="keyword">int</span> age;</span><br><span class="line">&#125;a,b;<span class="comment">//定义两个student类型的变量，分别名为a和b</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>此时该结构体类型是一次性类型，因为没有填写结构体类型名称，所以不可以被再次使用。</p><p>讲完了结构体类型变量的定义，现在我们来讲一下如何访问结构体变量的成员。</p><p>假设我们有如下结构体及变量定义：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="built_in">string</span> name; </span><br><span class="line"><span class="keyword">int</span> age; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;name&lt;&lt;” ”&lt;&lt;age &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; </span><br><span class="line">&#125;a;</span><br></pre></td></tr></table></figure></p><p>则我们可以通过“.”，就是跟小数点一样的那个点，来访问结构体变量的成员。</p><p>示例：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="built_in">string</span> name; </span><br><span class="line"><span class="keyword">int</span> age; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;name&lt;&lt;” ”&lt;&lt;age &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; </span><br><span class="line">&#125;a;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a.name&gt;&gt;a.age;<span class="comment">//分别输入student类型变量a的成员变量name和age</span></span><br><span class="line">a.show();<span class="comment">//调用student类型变量a的成员函数show</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如上示例中，我们可以通过“.”来访问结构体变量的成员。此时“.”叫做“成员访问符”。访问到成员变量或成员数组或成员函数的时候，可以如同一般的变量/数组/函数一般使用。</p><p>对于结构体类型，我们还可以对其进行运算符重载。</p><p>如，设有以下结构体类型及变量定义：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">complex</span>//<span class="title">complex</span>表示复数</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">int</span> a,b;<span class="comment">//a表示实部，b表示虚部</span></span><br><span class="line">&#125;x,y,z;</span><br></pre></td></tr></table></figure><p><a href="https://baike.baidu.com/item/%E5%A4%8D%E6%95%B0/254365" target="_blank" rel="noopener">关于复数</a></p><p>显然，我们不能直接使用+号来做到z=x+y;只能分别写z.a=x.a+y.a;和z.b=x.b+y.b;这样就显得很繁琐。</p><p>那么，该如何才能用+号直接操作呢？</p><p>我们可以在struct complex中进行对于+号的重载，格式如下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">complex</span>//<span class="title">complex</span>表示复数</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">int</span> a,b;<span class="comment">//a表示实部，b表示虚部</span></span><br><span class="line"><span class="keyword">friend</span> <span class="keyword">complex</span> <span class="keyword">operator</span> +(<span class="keyword">const</span> <span class="keyword">complex</span>&amp; p,<span class="keyword">const</span> <span class="keyword">complex</span>&amp; q)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">complex</span> ans;</span><br><span class="line">ans.a=p.a+q.a;</span><br><span class="line">ans.b=p.b+q.b;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line">&#125;x,y,z;</span><br></pre></td></tr></table></figure><p>这样就可以在程序的其余位置，对complex类型的变量使用+号直接操作了。</p><p>同理，除加号外，“-”，“*”，“/”，“%”也可以采用这样的方式重载，格式为：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">friend</span> 类型名 <span class="keyword">operator</span> 符号(<span class="keyword">const</span> 类型名&amp; a,<span class="keyword">const</span> 类型名&amp; b)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上，是对算术运算符的重载。</p><p>再设有以下结构体类型及变量定义：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">double</span> chinese,math;<span class="comment">//用来表示语文成绩和数学成绩</span></span><br><span class="line">&#125;a,b;</span><br></pre></td></tr></table></figure></p><p>这样虽然可以使用==和!=来判断a和b是否相等（所有成员变量的值完全相同与否），但不能直接使用大于号或小于号来判断a和b谁大谁小，因为它不知道要用哪个来判断。所以我们需要重载一下，告诉程序怎么处理。示例：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">double</span> chinese,math;<span class="comment">//用来表示语文成绩和数学成绩</span></span><br><span class="line"><span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &gt;(<span class="keyword">const</span> student&amp; p,<span class="keyword">const</span> student&amp; q)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(p.chinese!=q.chinese) <span class="keyword">return</span> p.chinese&gt;q.chinese;</span><br><span class="line"><span class="keyword">return</span> p.math&gt;q.math;</span><br><span class="line">&#125;</span><br><span class="line">&#125;a,b;</span><br></pre></td></tr></table></figure></p><p>这样就可以使得大于号能判断a和b的大小（小于号还是不行）：在判断是否a&gt;b时，先判断a的语文成绩是否比b高，若是则a大；若语文成绩相等则判断数学成绩，若a数学成绩较高则a大；数学成绩也相等则a不比b大。</p><p>同理，可以对其它逻辑符号进行重载，格式为：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> 符号(<span class="keyword">const</span> 类型名&amp; a,<span class="keyword">const</span> 类型名&amp; b)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上，是对逻辑运算符的重载。</p><p>再设有以下结构体类型及变量定义：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="built_in">string</span> name; </span><br><span class="line"><span class="keyword">int</span> age; </span><br><span class="line">&#125;a;</span><br></pre></td></tr></table></figure></p><p>这样我们是不能使用cin和cout直接输入和输出的，需要重载流插入符合流输出符才行。示例：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt; </span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="built_in">string</span> name; </span><br><span class="line"><span class="keyword">int</span> age; </span><br><span class="line"><span class="keyword">friend</span> istream&amp; <span class="keyword">operator</span> &gt;&gt;(istream&amp; in,student&amp; x)</span><br><span class="line">&#123;</span><br><span class="line">in&gt;&gt;x.name&gt;&gt;x.age;</span><br><span class="line"><span class="keyword">return</span> in;</span><br><span class="line">&#125;<span class="comment">//对输入的重载，使得可以使用cin直接输入student类型的变量</span></span><br><span class="line"><span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span> &lt;&lt;(ostream&amp; out,student&amp; x)</span><br><span class="line">&#123;</span><br><span class="line">out&lt;&lt;x.name&lt;&lt;<span class="string">" "</span>&lt;&lt;x.age;</span><br><span class="line"><span class="keyword">return</span> out;</span><br><span class="line">&#125;<span class="comment">//对输出的重载，使得可以使用cout直接输出student类型的变量</span></span><br><span class="line"><span class="comment">//为了符合一般的使用习惯，endl一般不写在对&lt;&lt;的重载中</span></span><br><span class="line">&#125;a;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;a&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>以上便是对输入和输出的重载。格式为：</p><p>对输入重载：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">friend</span> istream&amp; <span class="keyword">operator</span> &gt;&gt;(istream&amp; in,类型名&amp; x)</span><br><span class="line">&#123;</span><br><span class="line">in&gt;&gt;变量<span class="number">1</span>&gt;&gt;变量<span class="number">2</span>;<span class="comment">//可以更多</span></span><br><span class="line"><span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>对输出重载：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span> &lt;&lt;(ostream&amp; out,类型名&amp; x)</span><br><span class="line">&#123;</span><br><span class="line">out&lt;&lt;变量<span class="number">1</span>&lt;&lt;” “&lt;&lt;变量<span class="number">2</span>;<span class="comment">//可以更多</span></span><br><span class="line"><span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>以上，是对输入输出运算符的重载。</p><p>还可以对=,(),[],->四种运算符进行重载，但这已经严重超纲，有兴趣的同学可以自行百度一下。</p><p>第九章到此结束。</p>]]></content>
      
      
      <categories>
          
          <category> cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cpp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++语言-8-递归与递推</title>
      <link href="/cpp/cpp-8/"/>
      <url>/cpp/cpp-8/</url>
      
        <content type="html"><![CDATA[<p>本章学习递归/递推相关知识。</p><a id="more"></a><hr><p>首先，请大家熟悉对于斐波那契数列第n项的定义。</p><p><a href="https://baike.baidu.com/item/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97/99145?fr=aladdin" target="_blank" rel="noopener">斐波那契数列</a></p><p>接下来，我们将借助斐波那契数列来说明递归和递推。  </p><h1 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h1><p>在上一章中我们学习了自定义函数，知道可以在主函数中，或其它函数中调用自定义函数。但其实，不止不同函数之间可以相互调用，函数自己也可以调用自己。这个过程称之为递归。</p><p>递归的示例程序如下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x==<span class="number">1</span>||x==<span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> f(x<span class="number">-1</span>)+f(x<span class="number">-2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;x;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;f(x);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以看到，在函数f中又调用了函数f。函数f内部的运行可以解释为下述过程：</p><ol><li>判断x是否与1相等或x是否与2相等，若是，则函数返回值为1</li><li>若1中的判断失败，则函数返回值为【参数为x-1的函数f的返回值】与【参数为x-2的函数f的返回值】之和。</li></ol><p>如x=4，则调用过程如图所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">                       f(4)</span><br><span class="line"></span><br><span class="line">       f(3)                        f(2)</span><br><span class="line"></span><br><span class="line">f(2)       f(1)                     1</span><br><span class="line"></span><br><span class="line">1            1</span><br></pre></td></tr></table></figure></p><p>也就是说，函数首先发现要计算f(4)，但此时x=4，不满足x与1相等或x与2相等，所以将f(4)展开为f(3)和f(2)，先计算f(3)和f(2)的值，再相加后，作为f(4)的返回值。</p><p>接下来根据从左往右执行的规则，函数要计算f(3)。计算f(3)的过程仍然与上述过程类似，展开为f(2)和f(1)后求和。</p><p>接下来求解由f(3)展开而得到的f(2)，发现符合x与2相等，因此f(2)返回1</p><p>求解由f(3)展开而得的的f(1)也同理返回1，因此f(3)=1+1=2，返回2</p><p>现在f(3)求解完成，再求解由f(4)展开的f(2)，得1，所以f(4)=f(3)+f(2)=2+1=3，因此f(4)最终返回值为3。</p><p>需要注意的是，在使用递归的时候，我们一定要给函数一个边界，让它不会在无限的自调用中迷失。该边界称为递归边界，没有边界的递归将如无限循环一般，必然造成超时。</p><p>以上就是斐波那契数列的递归过程。</p><p>但是在实际运行的时候我们发现，当求解斐波那契数列的项数较高的时候会卡在运行中很久，造成超时（TLE）。为什么呢？从上文我们对f(4)的分析就可以看出，f(2)被计算了2次。由此可以推断，当求解f(10)甚至f(100)的时候，会产生大量重复的计算过程，无意义地消耗了时间。此时，我们采用递归求解便不再合理，应该换用递推。 </p><h1 id="递推"><a href="#递推" class="headerlink" title="递推"></a>递推</h1><p>在上文中，求斐波那契数列第n项，我们采用的是从f(n)开始，一层层向下展开。而根据斐波那契数列的特点，我们其实可以从第1项开始向上推，直到第n项。代码如下：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x,f[<span class="number">1000</span>];</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;x;</span><br><span class="line">f[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">f[<span class="number">2</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">3</span>;i&lt;=x;i++)</span><br><span class="line">f[i]=f[i<span class="number">-1</span>]+f[i<span class="number">-2</span>];</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;f[x];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>对于上述代码，求解f[4]的过程就变为如下描述：</p><ol><li><p>已知x==1或x==2时，f[x]=1，所以初始化令f[1]=1,f[2]=1。</p></li><li><p>因为f[1]和f[2]都已经赋值，所以接下来从f[3]开始计算就可以。枚举f[3]~f[x]的每个单位，根据f[x]=f[x-1]+f[x-2]来求解。此处f[x]=f[x-1]+f[x-2]称为递推式。</p></li><li><p>求解完成，输出f[x]。</p><p>可以发现，递推求解是需要数组配合的。与递归不同的是，递推是采用空间换时间的做法，将每次求出来的f[x]保存下来，避免了重复求解，大大节约了时间。</p><p>以上，就是对递归和递推的基本描述。</p></li></ol><p>第八章到此结束。</p><p>本章练习：</p><p><a href="https://www.luogu.org/problemnew/show/T17548" target="_blank" rel="noopener">T17548 斐波那契数列</a></p><p><a href="https://www.luogu.org/problemnew/show/T17551" target="_blank" rel="noopener">T17551 Pell数列</a></p><p><a href="https://www.luogu.org/problemnew/show/P1028" target="_blank" rel="noopener">P1028 数的计算</a></p><p><a href="https://www.luogu.org/problemnew/show/P1036" target="_blank" rel="noopener">P1036 选数</a></p><p><a href="https://www.luogu.org/problemnew/show/P1217" target="_blank" rel="noopener">P1217 回文质数 Prime Palindromes</a></p><p><a href="https://www.luogu.org/problemnew/show/P1706" target="_blank" rel="noopener">P1706 全排列问题</a></p>]]></content>
      
      
      <categories>
          
          <category> cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cpp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++语言-7-函数的自定义与函数的类型</title>
      <link href="/cpp/cpp-7/"/>
      <url>/cpp/cpp-7/</url>
      
        <content type="html"><![CDATA[<p>本章学习函数相关知识。</p><a id="more"></a><hr><p>采用以下程序段进行说明：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">double</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a=x;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> a;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;a;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;f(a);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>样例输入1：1.1</p><p>样例输出1：1</p><p>样例输入2：0.9</p><p>样例输出2：0</p><p>可以看出，我们在公共域（又称全局）里定义了两个函数，一个是int类型的f（自带一个参数，是double类型的x），另一个就是main。</p><p>main就不多说了，毕竟int main()是强制要求，不能改动。但是这个f就很有意思了。</p><p>首先，我们学到过在公共域直接int f的话表示定义一个int类型的名为f的变量，但现在为什么是个函数呢？那就是因为f后面的小括号了。那么就有以下定义及使用规范四点。  </p><ol><li>满足形如【数据类型 名称(参数列表)】的程序段，就是函数。</li><li>自定义函数的函数体只能写在公共域或自定义类型内。其中，当自定义函数的函数体写在公共域内时：<ol><li>若自定义函数的函数体写在main函数之前，则可以不在main函数里写其定义语句，因为其函数体那边就已经定义了。</li><li>若自定义函数的函数体写在main函数之后，则必须在main函数里写其定义语句。总之就是必须满足先定义再使用。</li><li>只要是函数，就必须使用大括号来告诉程序哪些语句属于这个函数。</li><li>小括号里可以放空，也可以不放空，定义若干个参数。 </li></ol></li></ol><p>前3点都是很好懂的，主要是这个第4点了。</p><p>在文章开头的程序段中，我在f后面的空格里定义了一个double类型的x作为f的自带参数（当然也可以定义多个，中间用逗号隔开就行了），在main里定义了一个double类型的a，在f里int了一个a（根据变量的作用域，这个a属于不同的域，是不算重复的）。并且，在输入a之后，我让程序输出了f(a)的值。过程如下：</p><ol><li>cout检查到要输出f(a)。</li><li>按照填写的先后顺序访问填入f后面的括号中的变量所对应的值，并填入对应的位置（这个过程叫传递参数）。在本例中是访问main中a的值，填入f的括号中，使f的double类型的x等于main的double类型的a，并执行f。</li><li>进入f，定义一个属于f的int类型的a，使这个a等于x。</li><li>使f(x)返回a的值，并且此值重置为int类型。</li><li>返回main，输出f(a)此时的值。  </li></ol><p>关于第2点，举个例子。比如int f(int x,int y,int z)，那么main里如果定义了a，b，c三个变量的话，cout&lt;&lt;f(a,b,c);就是输出当f中的x等于main的a，f中的y等于main的b，f中的z等于main中的c时，f(x,y,z)返回的值。</p><p>在上述过程中，第二步所提到的那些值里，在main中填入f函数括号内的，称为“实际参数”；而在传递到f函数，开始执行f函数时，f函数中的x称为“形式参数”。</p><p>回到本文的例子，在返回f(x)的值之前，程序中经历了以下3次的数据类型转换：</p><ol><li>获得double类型的待传递参数的值，转换为被传递参数的double类型，并填入被传递参数。</li><li>获得double类型的f里的x的值，转换为int类型的值，并赋值给f里的a。</li><li>因为函数f返回f里a的值，所以获得int类型的f里的a的值，转换为int类型的值，并赋值给整个函数f，然后结束f。<br>（如果你这时return 0的话，函数f一定就返回0，那输出也就是0了）</li></ol><p>简而言之，在return某个值之前，每个自定义函数都和main一样，可以执行程序语句，不过main以外的其它自定义函数需要被某个正在执行的函数调用就是了。而一旦return某个值，函数就相当于变量，产生一个确定的值，但这个值是一次性的，下次函数再被调用时，依然要重新经过一遍语句的执行来得出一个新的结果。</p><p>以上就是函数的自定义了。那么，函数的类型又是什么呢？</p><p>有的时候，你自定义一个函数，是为了让它执行一段语句，并不是为了让它返回一个值。这时，函数的类型可以都使用int，结尾都写return 0；也可以令函数的类型为void（英文翻译：虚空，此处用作“空类型”之意），结尾不写return 0;</p><p>需要注意的是，void类型只能用于自定义函数，不可用于main函数，更不可用于一般变量/数组等等。且void类型的函数也可以强制退出，即，使用return;语句。此时return后不能写值，应该直接写分号，当void类型函数在执行中遇到return;时即结束。</p><p>但是，更多的时候，你是为了让这个自定义函数返回一个值。这时候，函数的类型必须要与你要得到的值相同。如果你想让函数返回一个double类型的值，就必须定义函数为double类型，不可以是float类型，更别说int了。</p><p>不过，函数后面的括号里的自带参量的类型，就没有特别要求，依你的需要而定。</p><p>那么，又是什么时候要使用自定义函数呢？这就涉及到编程时的一个重要思想：高内聚，低耦合。</p><p>高内聚，就是相同或相似功能的语句块尽可能集中在一起。</p><p>低耦合，就是功能差异较大的语句块尽可能不要集中在一起。</p><p>那么，我们就需要用自定义函数，来表示一个功能。这个把功能实现为自定义函数的过程，叫做“封装”。</p><p>这大概可以理解为，你手里有一件事情，这件事可以分解为几个不同的步骤，不同的步骤可以起到不同的效果（功能）。然后你把这几件事分配给另外的人（自定义函数），让他们替你去做。再结合上文的话，你要告诉他具体步骤怎么做，这就是他的函数体；还要告诉他应该用什么东西来做，这就是他的参数。大概就是这样了。</p><p>接下来，如何使用自定义函数呢？</p><p>在之前的学习中，我们已经使用过诸如pow等数学函数。自定义函数也可以如同数学函数一般调用。如同本文开头的程序段，我们在主函数中输出语句处调用了自定义函数f。自然的，我们也可以在主函数其它区域调用自定义函数。这些地方都属于主函数的函数体。</p><p>那么我们可以给出总结：可以在任意函数体内的任意合理位置调用任意函数（主函数除外）。</p><p>比如，我们可以在自定义函数中输出helloworld，如下文代码：  </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pr</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"helloworld"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    pr();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述代码段中，我们定义了一个自定义函数pr。因为它不需要返回值，所以可以使用void类型；又因为它只是用来输出一个字符串常量，所以不需要参数，因此参数列表为空。</p><p>如上，即是自定义函数的使用方法。</p><p>第七章到此结束。</p>]]></content>
      
      
      <categories>
          
          <category> cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cpp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++语言-6-变量和语句的作用域</title>
      <link href="/cpp/cpp-6/"/>
      <url>/cpp/cpp-6/</url>
      
        <content type="html"><![CDATA[<p>本章学习作用域相关知识。</p><a id="more"></a><hr><p>采用以下程序段进行说明：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> x=<span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(a&lt;<span class="number">10</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> b=<span class="number">3</span>;</span><br><span class="line">        a++;</span><br><span class="line">        <span class="keyword">while</span>(b&lt;<span class="number">5</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> c=<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(c&gt;=<span class="number">4</span>) <span class="keyword">break</span>;</span><br><span class="line">            b++;</span><br><span class="line">            c+=b;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>先说明一下，a++的效果等于a+=1等于a=a+1，不过a++的执行速度比a=a+1快就是了。同理c+=b是等于c=c+b的。</p><p>我们可以看到，在本程序段中有4个变量，分别是x，a，b，c，定义的位置各不相同，甚至x是定义在int main()之外的。这是什么意思呢？</p><p>原来，变量不是定义了之后就通用的，而是有所属范围的。</p><p>定义在int main外的，不属于任何函数的x，是可以在本程序所有函数中调用的。它定义的位置叫做公共域。而定义在int main里的a，是属于main而不是公共域的。它在main结束时就会清空，不能再访问。也就是说，x可以在程序的任何函数中被访问和修改，而a只能在main里被访问和修改。</p><p>但是b，c去哪了？我们可以看到，在进入第1个while之后，b才被定义，而c更是定义在第2个while里，且这两个while都属于main，第2个while又属于第1个while。</p><p>所以，变量b只能在第1个while中被访问和修改，变量c只能在第2个while中被修改。</p><p>又因为第2个while属于第1个while，所以它能访问和修改变量b，而两个while都属于main，所以能访问和修改变量a。但反过来，不在第1个while里的话，main和其它定义在公共域的函数是不能访问和修改变量b的。同理，不是在第2个while里的话，即使是第1个while里的其它语句，也不能访问和修改变量c。</p><p>至此，我们能得到一个上下级关系：  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">程序本体</span><br><span class="line">——main</span><br><span class="line">————while</span><br><span class="line">——————while</span><br></pre></td></tr></table></figure><p>下级可以访问和修改上级中已经定义的变量，而上级不可以访问和修改定义在下级中的变量。</p><p>根据这套理论，你能猜到第2个while里的break作用范围有多大了吗？就是只能跳出第2个while而已，对第1个while半毛钱影响都没有。continue也是一样的。</p><p>但是return 0不能乱写，这是特例，所有int类型的函数，比如main，在碰到return 0时会直接结束这个函数自身，跳过下面的所有语句。基于这个特性，也可以用return 0来当程序断点，用来检测当编译成功却运行时错误时哪些语句有问题。</p><p>当然，不止是return 0，事实上自定义函数和main，碰到return时，不管return是什么都会结束函数。只不过main要求一定要return 0罢了。</p><p>第六章到此结束。</p>]]></content>
      
      
      <categories>
          
          <category> cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cpp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++语言-5-字符型，字符数组与字符串</title>
      <link href="/cpp/cpp-5/"/>
      <url>/cpp/cpp-5/</url>
      
        <content type="html"><![CDATA[<p>本章学习字符相关内容。</p><a id="more"></a><hr><p>让我们从介绍字符型（char）开始。</p><h1 id="字符型"><a href="#字符型" class="headerlink" title="字符型"></a>字符型</h1><p>字符型，顾名思义，就是可以保存字符的数据类型，与int、double等保存数字的略有区别。什么区别呢？</p><ol><li><p>表示上的区别</p><p>比如我们要表示数字1，则int a=1;即可。</p><p>而若要表示字符1，则需要<code>char a=&#39;1&#39;;</code> </p><p>注意到字符1被单引号所围住。这就是表示字符的方法。</p><p>若写char a=1;则会令a被赋值为一个与字符1毫无关系的符号。</p></li><li><p>使用上的区别</p><p>首先声明三个概念：数字、数值、字符。</p><p>毋庸置疑的是，在计算机内部，不论是数字还是字符，都是转化为数值进行处理的。</p><p>显然，数字1的数值也是1，以此类推。</p><p>但是字符1的数值就不是1了，而是49。</p><p>为什么呢？可以查询一下ASCII码，此处不多解释。</p><p>常见的字符与其数值：</p><p>‘0’=48,’1’=49，以此类推</p><p>‘A’=65,’B’=66，以此类推</p><p>‘a’=97,’b’=98，以此类推</p><p>但有时候我们还会经常看到’\n’,’\0’之类的。这些是什么呢？这些叫转义字符。其中，’\0’表示空字符，’\n’表示换行符。</p><p>*<code>printf(“\n”);</code>与<code>cout&lt;&lt;endl;</code>一致。</p><p>数值匹配如下：</p><p>‘\0’=0</p><p>‘\n’=10</p><p>查看数值匹配的方法：</p><ol><li>cout&lt;&lt;int(‘0’);可以查看字符0的ascii码（数值）</li><li>printf(“%d”,’0’);也可以实现1的效果</li><li>cout&lt;&lt;char(48);可以查看数值48对应的字符</li><li>printf(“%c”,48);也可以</li></ol></li></ol><p>以上，就是字符型的简单表示。</p><p>接下来是字符数组。</p><h1 id="字符数组"><a href="#字符数组" class="headerlink" title="字符数组"></a>字符数组</h1><p>在前几章中，我们已经学习了数组的相关知识。那么很显然，字符数组的声明应该满足下述格式：</p><p><code>char str[100];</code></p><p>本语句声明了一个名为str的char类型数组，有100个单位可供使用。</p><p>我们知道，对于数组，其内部存储的时候是一个个值连续存储的。那么对于字符数组，因为字符型的值是字符，所以字符数组内部就是一个个字符连续存储的。如将“helloworld”保存在上述字符数组str内，则内部表示为’h’,’e’,’l’,’l’,’o’,’w’,’o’,’r’,’l’,’d’，如同一连串的字符，此时便可称之为字符串。</p><p>对于字符数组的初始化，除了前述的对于数组的通用初始化方法，还可以使用双引号，也就是用字符串常量直接初始化。如：</p><ol><li>采用通用方法：<code>char str[100]={&#39;h&#39;,&#39;e&#39;,&#39;l&#39;,&#39;l&#39;,&#39;o&#39;,&#39;w&#39;,&#39;o&#39;,&#39;r&#39;,&#39;l&#39;,&#39;d&#39;};</code></li><li>采用双引号：<code>char str[100]=&quot;helloworld&quot;;</code></li></ol><p>注意到采用通用方法时，需要大括号，而采用字符串常量时不需要大括号。</p><p>上面我们为str数组开设了100个单位，并且注意到”helloworld”只有10个字符。那么我们可不可以只开10个单位呢？问题可以转化成，以下两种写法可不可行？</p><ol><li>采用通用方法：<code>char str[10]={&#39;h&#39;,&#39;e&#39;,&#39;l&#39;,&#39;l&#39;,&#39;o&#39;,&#39;w&#39;,&#39;o&#39;,&#39;r&#39;,&#39;l&#39;,&#39;d&#39;};</code></li><li>采用双引号：<code>char str[10]=&quot;helloworld&quot;;</code></li></ol><p>答案是，两种都不可行。</p><p>在第一种中，虽然我们显式指定了str数组各个位上的值，但编译时其会在结尾补一个空字符’\0’，导致其最终有11个元素，超出了str数组10个元素的限制，引起访问错误。所以，在使用通用方法进行对字符数组的初始化时，应该预留足够的位置，至少应该是显示指定的字符数+1。</p><p>在第二种中，我们直接使用字符串常量来对字符数组进行初始化，依然会有第一种的问题，所以仍然需要多留一位。但要注意的是，第一种引发的是运行时的紊乱，而第二种引发的是编译错误，相比第一种更加容易发现。</p><p>特殊的，可以采用这样的写法来对字符数组进行初始化：<code>char str[]=&quot;helloworld&quot;;</code></p><p>这样的写法可以不指定数组的长度，其内部会自动适配长度。但仅仅在对字符数组使用字符串常量进行初始化时可以不指定数组长度，其它类型/写法均不可以。</p><p>*仅在定义的时候可以用字符串常量对其进行赋值，在之后便不再可行，会引发编译错误。后续要操作的话只能按普通数组的方法。</p><p>对于二维数组，可以采用下述方法进行初始化：</p><p><code>char a[][10]={&quot;hello&quot;,&quot;hi&quot;};</code></p><p>第一维可以放空，若填写则不得少于字符串数量。</p><p>第二维必填，不得少于最长的字符串长度+1。</p><p>一般不需要使用更多维的char数组。</p><p>在cstring头文件中，提供了下列函数来对字符数组进行操作。</p><p>基本假设：设有<code>char a[20]=&quot;hello&quot;,b[20]=&quot;hi&quot;;</code>  </p><ol><li><p>strcpy(目标，来源);</p><p>此函数为复制函数，能将来源的字符串复制给目标。</p><p>示例：<code>strcpy(a,b);</code></p><p>运行后a数组和b数组都将等于”hi”。</p></li><li><p>strcat(目标，来源);</p><p>此函数为拼接函数，能将来源的字符串拼接到目标字符串后面。</p><p>示例：<code>strcat(a,b);</code></p><p>运行后a数组将等于”hellohi”，b数组不变。</p></li><li><p>strlen(数组名称);</p><p>此函数可以求出字符串长度（直到’\0’）。</p><p>示例：<code>strlen(a);</code></p><p>求出来的值是”hello”的长度5。因为a数组内部有赋值的部分是’h’,’e’,’l’,’l’,’o’,’\0’，strlen会从下标0开始往后计算直到第一个’\0’之前。</p><p>*若令<code>a[2]=&#39;\0&#39;</code>，则a数组内部有赋值的部分变为’h’,’e’,’\0’,’l’,’o’,’\0’，将导致strlen所求得的值变为2。</p><p>*若令<code>a[0]=&#39;\0&#39;</code>，则a数组内部有赋值的部分变为’\0’,’e’,’l’,’l’,’o’,’\0’，将导致strlen所求得的值变为0。  </p></li><li><p>strcmp(数组1名称，数组2名称);</p><p>此函数可以按字典序比较数组1中的字符串1与数组2中的字符串2的大小。若字符串1大则返回正数，小则返回负数，一样大则返回0。</p><p>*字典序的比较方法：</p><p>设有<code>char a[]=&quot;13&quot;,b[]=&quot;120&quot;;</code></p><p>字典序是逐位比较的。先比较下标0的位置，发现字符串1和2的该位置都是’1’，则继续比较下标1的位置，发现字符串1的该位置是’3’而字符串2的该位置是’2’，因为’3’&gt;’2’，所以字符串1比字符串2大。</p><p>再设有<code>char a[]=&quot;12&quot;,b[]=&quot;120&quot;;</code></p><p>先比较下标0的位置，发现字符串1和2的该位置都是’1’，则继续比较下标1的位置，发现字符串1和2的该位置都是’2’，则继续比较下标2的位置，发现字符串1的该位置是’\0’而字符串2的该位置是’0’，因为’\0’&lt;’0’，所以字符串1比字符串2小。</p></li></ol><p>以上就是对于字符数组的相关描述。对字符串的了解有没有清晰一些呢？现在开始介绍string类型，也即字符串类型。</p><h1 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h1><p>使用string类型需要包含string头文件。</p><p>上面说到，一个一维字符数组可以表示一个字符串。那么对于string类型，该如何表示一个字符串呢？答案是一个变量即可。string在有string头文件的情况下可以如int等类型一般使用。</p><p>示例：<code>string str=&quot;helloworld&quot;;</code></p><p>对于string类型，无需指定字符串长度，其内部会自动适配。且string类型可以在任意时候更改其赋值。如，可以在上述已有定义的情况下，令str=”hi”，则str会变成字符串”hi”。</p><p>尽管我们上述声明的str仅仅是一个变量，不是数组，但因为它是string类型，所以我们也可以使用下标来访问它内部的字符。如在string str=”helloworld”的基础上，我们可以访问str[4]得到其第五个字符’o’，也可以令str[4]=’r’使得str变为”hellrworld”。</p><p>同样的，对于string类型，我们也可以使用数组。如<code>string str[2]={&quot;hi&quot;,&quot;helloworld&quot;};</code>可以通过str[i]来访问在str数组中下标为i的字符串，也可以通过str[i][j]来访问在str数组中下标为i的字符串的下标为j的位置。更多维数组同理。</p><p>在string头文件中，提供了下列成员函数来对string类型变量进行操作。</p><p>基本假设：设有<code>string a=&quot;hello&quot;,b=&quot;hi&quot;;</code></p><p>（以下基于与上文中适用于字符数组的函数的对比）</p><ol><li><p>a=b;</p><p>可以直接令a的值等于b的值，使用赋值符号即可。</p></li><li><p>a=a+b;</p><p>可以直接令字符串a和字符串b拼接在一起产生一个新的字符串，然后再把这个新的字符串赋值给a。</p></li><li><p>length();</p><p>可以求得字符串a的长度（求值方法与strlen一致）。</p></li><li><p>直接使用运算符进行比较。比较方法仍然是根据字典序（详见上文）。</p></li></ol><p>以上，我们可以显而易见地发现，使用string类型比使用char数组更为方便。故实际使用时，若无特殊要求，一般建议使用string类型。</p><p>第五章到此结束。</p><p>本章练习：</p><p><a href="https://www.luogu.org/problemnew/show/P1055" target="_blank" rel="noopener">P1055 ISBN号码</a></p><p><a href="https://www.luogu.org/problemnew/show/P1200" target="_blank" rel="noopener">P1200你的飞碟在这儿Your Ride Is Here</a></p><p><a href="https://www.luogu.org/problemnew/show/P1308" target="_blank" rel="noopener">P1308 统计单词数</a></p><p><a href="https://www.luogu.org/problemnew/show/P1914" target="_blank" rel="noopener">P1914 小书童——密码</a></p><p><a href="https://www.luogu.org/problemnew/show/P1553" target="_blank" rel="noopener">P1553 数字反转（升级版）</a></p>]]></content>
      
      
      <categories>
          
          <category> cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cpp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++语言-4-数组</title>
      <link href="/cpp/cpp-4/"/>
      <url>/cpp/cpp-4/</url>
      
        <content type="html"><![CDATA[<p>本章学习数组的定义及使用方式。</p><a id="more"></a><hr><p>数组，实际上就是一段连续的存储区间，概念上就是一个变量（元素）的集合。</p><p>以变量作为例子，每定义一个变量，就相当于为这个变量声明了一个存储空间，用来保存它的值。而当你声明了很多变量时，比如你声明了10个不同变量，那就在内存里占用了10个单位的存储空间。但是，如果你使用数组的话，声明长度为10的数组，也相当于占用了10个单位的存储空间，且是连续的，所以又叫存储区间。</p><p>语句就是：</p><p><code>类型　名称[长度];</code></p><p>如：</p><p><code>int a[10];</code></p><p>其中数组名称的命名要求也与变量一致。</p><p>设名称为a，长度为n，用一张表格来表示的话，就是下面这样。</p><table><thead><tr><th>a0</th><th>a1</th><th>a2</th><th>…</th><th>a(n-2)</th><th>a(n-1)  </th></tr></thead><tbody><tr><td>值1</td><td>值2</td><td>值3</td><td>…</td><td>值n-1</td><td>值n</td></tr></tbody></table><p>这样的一张表格，就表示一个数组。有0~n-1一共n个元素，每个元素对应一个值，并且每个元素都可以完全像变量一样使用。</p><p>也可以用一个0~n-1的整数坐标轴来表示，每个整数点上有一个值。</p><p>效果就相当于你定义了a0，a1，a2，…，an-1一共n个变量。</p><p>简单说，就是：  </p><ol><li>可以当做变量使用。</li><li>是一个有n个不同下标的元素的集合。</li></ol><p>如上，这是一维数组。那么二维数组怎么表示呢？</p><p><code>int a[n][m];</code></p><p>这样就是定义了一个n*m个单位的二维数组。表格形式如下。</p><table><thead><tr><th>a</th><th>0</th><th>1</th><th>2</th><th>…</th><th>m-2</th><th>m-1</th></tr></thead><tbody><tr><td>0</td><td></td><td></td><td></td><td>…</td><td></td><td></td></tr><tr><td>1</td><td></td><td></td><td></td><td>…</td><td></td><td></td></tr><tr><td>2</td><td></td><td></td><td></td><td>…</td><td></td><td></td></tr><tr><td>…</td><td></td><td></td><td></td><td>…</td><td></td><td></td></tr><tr><td>n-2</td><td></td><td></td><td></td><td>…</td><td></td><td></td></tr><tr><td>n-1</td><td></td><td></td><td></td><td>…</td><td></td><td></td></tr></tbody></table><p>每个元素属于某一行某一列，设i表示行，j表示列，则当i和j确定时，所对应的元素唯一确定。</p><p>以此类推，还有三维数组，四维五维……不过常用的就是一维和二维了。  </p><p>当一个数组定义后，我们可以通过“数组下标”来访问数组内的元素。所谓“数组下标”就是数组后中括号里填的东西。如，假设我们现在有一个定义：<code>int a[100];</code>则我们可以使用a[i]来访问a数组中下标为i的元素，i的范围为0-99。</p><p>发现了吧？假设数组被定义的长度为n，则可以使用的下标范围就是0~n-1，这正是上文中之所以写a0,a1,…,an-1的原因。这不以编程人员的意志为转移。哪怕你不使用下标为0的位置，它还是在那里，你最大可使用下标还是n-1。</p><p>所以，设有<code>int a[100];</code>则对于每一个a[i]，都可以像普通变量一样使用。a[i]可以参与运算，也可以在等式左边来接受一个值。如<code>int b=a[1];</code>表示定义一个int类型变量b，并令其等于a数组第二个元素的值。同样的，也可以写<code>a[10]=100;</code>表示令a数组的第十一个元素的值等于100。</p><p>同理，对于二维数组，可以使用a[i][j]来访问a数组中第i行第j列的元素。两个维度的下标范围各自分离。如有<code>int a[n][m];</code>则在a数组中第一维下标范围为0~n-1，第二维的下标范围为0~m-1。二维数组的a[i][j]，就如同一维数组的a[i]，就如同普通变量，可以参与运算或在等式左边来接受一个值。</p><p>更多维数组可以以此类推。  </p><p>但是数组只是定义的话，依然也是如同定义的变量一样，初始是未赋值状态。已知我们可以<code>int a=0;</code>来定义一个int类型的变量a，并对其赋初始值0。那么我们想对数组也进行每个位都赋初始值，该怎么做呢？可以写成如下形式：</p><p><code>int a[100]={0};</code></p><p>如上语句声明了一个int类型的数组a，有100个单位，将其每个单位都赋值为初始值0。</p><p>但要注意的是，如果想赋初始值1，这样写是不行的：</p><p><code>int a[100]={1};</code></p><p>这样将导致只有a[0]的值被初始化为1，其余位仍然都是0。</p><p>我们称这个1为显式指定的初始值。当使用大括号初始化时，数组会按顺序分配所有显式指定的初始值，而对没有显式指定的其余位置均分配为0。</p><p>例如，<code>int a[100]={3,1,2,4};</code>这样会按顺序令<code>a[0]=3,a[1]=1,a[2]=2,a[3]=4</code>，之后令其余位置均赋初始值为0。</p><p>所以，如果想全部初始化为1，则要么手写n个1在大括号里，要么用循环令a[i]=1。</p><p>而对于多维数组，我们则需要使用嵌套大括号。假设有<code>int a[2][3];</code>则可以以如下方式初始化：  </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a[<span class="number">2</span>][<span class="number">3</span>]=&#123;&#123;<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;,&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;&#125;;</span><br></pre></td></tr></table></figure><p>因为数组第一维的容量是2，所以在最外层大括号中嵌套两层大括号，表示分别对第一维的每一行的三列进行初始化。而因为数组第二维容量是3，所以在每个第二级大括号里写3个数。</p><p>上述声明执行过后，会令<code>a[0][0]=3,a[0][1]=4,a[0][2]=5,a[1][0]=1,a[1][1]=2,a[1][2]=3。</code><br>但其实写成这样：<code>int a[2][3]={3,4,5,1,2,3};</code>结果也与上述写法相同，只是对于人类来说没有那么直观。</p><p>为什么会一样呢？因为数组内部在分配顺序的时候，是从最后一维开始分配的，比如有三维数组<code>a[2][2][2]</code>，则顺序是<code>a[0][0][0],a[0][0][1],a[0][1][0],a[0][1][1],a[1][0][0],a[1][0][1],a[1][1][0],a[1][1][1]</code>。可见，顺序的规则是恒定不变的，需要的是程序员来调整初始化数值的顺序。</p><p>需要注意的是，如果不采用嵌套大括号，则必然是按顺序初始化。而采用嵌套大括号的话，可以按需求针对不同维度进行初始化。示例如下：</p><p>假设有二维数组:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a[<span class="number">4</span>][<span class="number">4</span>];</span><br></pre></td></tr></table></figure><p>则我可以写:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a[<span class="number">4</span>][<span class="number">4</span>]=&#123;&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">3</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>&#125;,&#123;<span class="number">6</span>&#125;&#125;;</span><br></pre></td></tr></table></figure><p>进行初始化。初始化的结果为：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">0</span>,a[<span class="number">0</span>][<span class="number">1</span>]=<span class="number">1</span>,a[<span class="number">0</span>][<span class="number">2</span>]=<span class="number">1</span></span><br><span class="line">a[<span class="number">1</span>][<span class="number">0</span>]=<span class="number">1</span>,a[<span class="number">1</span>][<span class="number">1</span>]=<span class="number">2</span></span><br><span class="line">a[<span class="number">2</span>][<span class="number">0</span>]=<span class="number">3</span>,a[<span class="number">2</span>][<span class="number">1</span>]=<span class="number">1</span>,a[<span class="number">2</span>][<span class="number">2</span>]=<span class="number">4</span>,a[<span class="number">2</span>][<span class="number">3</span>]=<span class="number">5</span></span><br><span class="line">a[<span class="number">3</span>][<span class="number">0</span>]=<span class="number">6</span></span><br></pre></td></tr></table></figure></p><p>其余单位因为没有显式指定而均为0。</p><p>第四章到此结束。</p><p>本章练习：</p><p><a href="https://www.luogu.org/problemnew/show/P1046" target="_blank" rel="noopener">P1046 陶陶摘苹果</a></p><p><a href="https://www.luogu.org/problemnew/show/P1427" target="_blank" rel="noopener">P1427 小鱼的数字游戏</a></p><p><a href="https://www.luogu.org/problemnew/show/P1428" target="_blank" rel="noopener">P1428 小鱼比可爱</a></p><p><a href="https://www.luogu.org/problemnew/show/P1567" target="_blank" rel="noopener">P1567 统计天数</a></p><p><a href="https://www.luogu.org/problemnew/show/P1047" target="_blank" rel="noopener">P1047 校门外的树</a></p><p><a href="https://www.luogu.org/problemnew/show/P2141" target="_blank" rel="noopener">P2141 珠心算测验</a></p>]]></content>
      
      
      <categories>
          
          <category> cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cpp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++语言-3-循环语句及选择语句</title>
      <link href="/cpp/cpp-3/"/>
      <url>/cpp/cpp-3/</url>
      
        <content type="html"><![CDATA[<p>本章学习循环结构和选择结构的基本用法。</p><a id="more"></a><hr><h1 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h1><h2 id="while语句"><a href="#while语句" class="headerlink" title="while语句"></a>while语句</h2><p>while语句实现”当型”循环，它的一般格式为：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (判断条件)</span><br><span class="line">&#123;</span><br><span class="line">    循环体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>当判断条件成立时，循环执行大括号中语句。并且初始化部分和迭代部分是任选的。</li><li>while语句首先检查判断条件，当条件满足时，才去执行循环中的语句。这是”当型”循环的特点。  </li></ol><h2 id="do-while语句"><a href="#do-while语句" class="headerlink" title="do-while语句"></a>do-while语句</h2><p>do-while语句实现”直到型”循环，它的一般格式为：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">    循环体</span><br><span class="line">&#125;<span class="keyword">while</span> (判断条件);</span><br></pre></td></tr></table></figure><ol><li>do-while语句首先执行循环体，然后检查判断条件，若成立，则循环执行大括号中的语句，直到判断条件不成立。</li><li>与while语句不同的是，do-while语句的循环体至少执行一次，是”直到型”循环的特点。</li></ol><h2 id="for语句"><a href="#for语句" class="headerlink" title="for语句"></a>for语句</h2><p>for语句也用来实现”当型”循环，它的一般格式为：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (初始化操作;判断条件;迭代部分)</span><br><span class="line">&#123;</span><br><span class="line">    循环体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p>for语句执行时，首先执行初始化操作，然后检查判断条件是否满足，如果满足，则执行循环体中的语句，最后执行迭代部分。完成一次循环后，重新判断终止条件。</p></li><li><p>可以在for语句的初始化部分声明一个变量，它的作用域为一个for语句。</p></li><li><p>for语句通常用来执行循环次数确定的情况(如对数组元素进行操作)，也可以根据循环结束条件执行循环次数不确定的情况。</p></li><li><p>在初始化部分和迭代部分可以使用逗号语句，来进行多个动作。逗号语句是用逗号分隔的语句序列。例如：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>,j=<span class="number">10</span>;i&lt;j;i++,j--)</span><br><span class="line">&#123;</span><br><span class="line">    循环体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>初始化、终止以及迭代部分都可以为空语句，且只要判断条件为空，就相当于一个无限循环，如：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;;i++)</span><br><span class="line">&#123;</span><br><span class="line">    循环体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="循环语句的控制"><a href="#循环语句的控制" class="headerlink" title="循环语句的控制"></a>循环语句的控制</h2><ol><li><p>break</p><p>跳出当前所在循环，忽略break以下的所有语句。</p></li><li><p>continue</p><p>直接执行下一次循环，忽略continue以下的所有语句。  </p></li></ol><h1 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h1><h2 id="if-else语句"><a href="#if-else语句" class="headerlink" title="if-else语句"></a>if-else语句</h2><p>一般格式为：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(判断条件)</span><br><span class="line">&#123;</span><br><span class="line">    语句<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    语句<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当判断条件成立时，执行语句1，否则执行语句2。</p><h2 id="switch语句"><a href="#switch语句" class="headerlink" title="switch语句"></a>switch语句</h2><p>一般格式为：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(变量)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> 值<span class="number">1</span>:</span><br><span class="line">    语句<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> 值<span class="number">2</span>:</span><br><span class="line">    语句<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    语句<span class="number">3</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当变量为值1时执行语句1，当为值2时执行语句2，当不为已给出的任何情况时执行default的语句3。</p><p>case可以无限添加，不只限2个。</p><p>需要注意的是，当你没有break时，会一直向下执行。如以下程序段，若变量为值1，则语句1,2,3都将被执行。  </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(变量)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> 值<span class="number">1</span>:</span><br><span class="line">    语句<span class="number">1</span>;</span><br><span class="line"><span class="keyword">case</span> 值<span class="number">2</span>:</span><br><span class="line">    语句<span class="number">2</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    语句<span class="number">3</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="逻辑判断符号"><a href="#逻辑判断符号" class="headerlink" title="逻辑判断符号"></a>逻辑判断符号</h1><p>小于：<code>&lt;</code>  大于：<code>&gt;</code>  等于：<code>==（两个等号）</code>  小于等于：<code>&lt;=</code>  大于等于：<code>&gt;=</code>  不等于：<code>!=</code></p><p>特别的，计算时用的等于只有一个等号，判断时才用两个等号。</p><p>逻辑联结符号</p><p>且：<code>&amp;&amp;</code>  或：<code>||</code></p><p>或的符号由两个竖线组成，竖线可以由回车上方的那个键打出。</p><p>如：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(((x&gt;<span class="number">1</span>||x&lt;<span class="number">-1</span>)&amp;&amp;y&gt;<span class="number">2</span>)||(x&lt;<span class="number">-9</span>&amp;&amp;y&gt;<span class="number">0</span>))</span><br><span class="line">&#123;</span><br><span class="line">    sum=sum+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样表示当满足以下两种情况之一时，sum的值+1。</p><ol><li><p>x大于1且y大于2，或x小于-1且y大于2时。</p></li><li><p>x小于-9且y大于0时。</p></li></ol><p>特别的，使用if(条件1||条件2)的时候，如果条件1成立，则不会判断条件2是否成立，直接进入if的语句块。</p><p>上述两种符号也属于运算符。</p><p>使用逻辑符号时的要点</p><p>*不可以写连等式，如：</p><p>如果x大于0小于100，不可以写if(0&lt;x&lt;100)，必须拆开，写成if(0&lt;x&amp;&amp;x&lt;100)。其余逻辑符号同理。</p><p>第三章到此结束。</p><p>本章练习：</p><p>选择语句：<br><a href="https://www.luogu.org/problemnew/show/P1422" target="_blank" rel="noopener">P1422 小玉家的电费</a></p><p><a href="https://www.luogu.org/problemnew/show/P1085" target="_blank" rel="noopener">P1085 不高兴的津津</a></p><p><a href="https://www.luogu.org/problemnew/show/P1089" target="_blank" rel="noopener">P1089 津津的储蓄计划</a></p><p><a href="https://www.luogu.org/problemnew/show/P1909" target="_blank" rel="noopener">P1909 买铅笔</a></p><p><a href="https://www.luogu.org/problemnew/show/T16594" target="_blank" rel="noopener">T16594 小明的四则运算</a></p><p>循环语句：</p><p><a href="https://www.luogu.org/problemnew/show/P1008" target="_blank" rel="noopener">P1008 三连击</a>  </p><p><a href="https://www.luogu.org/problemnew/show/P1035" target="_blank" rel="noopener">P1035 级数求和</a></p><p><a href="https://www.luogu.org/problemnew/show/P1423" target="_blank" rel="noopener">P1423 小玉在游泳</a></p><p><a href="https://www.luogu.org/problemnew/show/P1424" target="_blank" rel="noopener">P1424 小鱼的航程(改进版)</a></p><p><a href="https://www.luogu.org/problemnew/show/P1980" target="_blank" rel="noopener">P1980 计数问题</a></p><p><a href="https://www.luogu.org/problemnew/show/T17068" target="_blank" rel="noopener">T17068 有多少平方数</a></p><p><a href="https://www.luogu.org/problemnew/show/T17072" target="_blank" rel="noopener">T17072 是质数吗？</a></p><p><a href="https://www.luogu.org/problemnew/show/T17073" target="_blank" rel="noopener">T17073 什么？！n！</a></p><p><a href="https://www.luogu.org/problemnew/show/T17071" target="_blank" rel="noopener">T17071 四个数的2nd问题</a></p>]]></content>
      
      
      <categories>
          
          <category> cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cpp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++语言-2-数据类型与输入输出</title>
      <link href="/cpp/cpp-2/"/>
      <url>/cpp/cpp-2/</url>
      
        <content type="html"><![CDATA[<p>本章将学习基本数据类型与输入输出的方法。</p><a id="more"></a><hr><p>首先，请大家先熟悉下面的计算指定的a+b的和并输出的代码。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a,b,c;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</span><br><span class="line">    c=a+b;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;c;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>样例输入：<code>2 3</code></p><p>样例输出：<code>5</code></p><p>在前一篇中讲过的部分就不再赘述，直接从第五行开始讲起。  </p><h1 id="第五行"><a href="#第五行" class="headerlink" title="第五行"></a>第五行</h1><p><code>int a,b,c;</code></p><p>定义三个变量，分别叫做a,b,c，返回int类型（整型），句末要有分号。可以在定义里赋值，如<code>int a=1,b=1,c=1;</code>。int后面要有一个空格。  </p><p>常用数据类型：</p><p>short有符号（即表示有正负，下同）短整型，范围-32768~32767（-2^15~2^15-1），只支持整数。</p><p>unsigned short无符号短整型，范围0~65535（2^16-1），只支持整数。</p><p>int有符号整型，范围-2147483648~2147483647（-2^31~2^31-1），只支持整数。</p><p>unsigned int无符号整型，范围0～4294967295（2^32-1），只支持整数。</p><p>long long有符号长整型，范围-9223372036854775808~9223372036854775807（-2^63~2^63-1），只支持整数。</p><p>unsigned long long无符号长整型，范围0~18446744073709551615（2^64-1），只支持整数。</p><p>float单精度，支持小数，有效数字约8位，范围-3.40<em>(10的38次方)~3.40</em>(10的38次方)。</p><p>double双精度，支持小数，有效数字约16位，范围-1.79<em>(10的308次方)~1.79</em>(10的308次方)。</p><p>char有符号字符型，不支持字符串，范围-128~127。</p><p>unsigned char无符号字符型，不支持字符串，范围0~255。</p><p>string字符串，在第五章中有具体说明。</p><p>bool布尔型，范围true或false，即非0或0。</p><p>*当遇见有的程序只写一个unsigned时，默认是unsigned int。</p><p>*在没有特殊强调时，整数类型一般用int，超过int的范围时可以使用long long或unsigned long long，别的一般不常用；浮点数类型一般用double，少用float。</p><p>标识符：</p><p>上文中提到的变量，就是标识符的一种。</p><p>对于所有的标识符，均需要满足如下名称要求：  </p><ol><li>只能是字母或下划线开头，严格区分大小写。  </li><li>不可以包含数字或字母或下划线以外的其余符号。  </li><li>不可以是系统正在使用的名称。如在linux系统中time是一个系统变量，则不可以使用time作为变量名称。  </li></ol><p>变量定义的写法：  </p><ol><li>定义一个int类型的变量a，写作<code>int a;</code>  </li><li>定义一个long long类型的变量a，写作<code>long long a;</code>  </li><li>定义一个float类型的变量a，写作<code>float a;</code>  </li><li>定义一个double类型的变量a，写作<code>double a;</code>  </li><li>定义一个char类型的变量a，写作<code>char a;</code>  </li><li>定义一个string类型的变量a，写作<code>string a;</code>  </li></ol><p>*string在编程环境中不会变色，但仍是可用类型。</p><p>*要使用string类型，需要<code>#include&lt;string&gt;</code>。</p><p>*string的具体用法在第五章中有具体说明。</p><p>*定义里可以直接赋值，如<code>int a=123;</code></p><p>*定义里一句可以写多个变量，如<code>int a,b,c;</code></p><p>*如在定义时直接对变量赋值，需要对每个想赋值的变量都赋值。</p><p>&ensp;如：<code>int a,b=1;</code>则a是未赋值变量，b被赋值为1</p><p>&ensp;再如：<code>int a=2,b=1;</code>则a被赋值为2，b被赋值为1  </p><h1 id="第六行"><a href="#第六行" class="headerlink" title="第六行"></a>第六行</h1><h2 id="cin"><a href="#cin" class="headerlink" title="cin"></a>cin</h2><p><code>cin&gt;&gt;a&gt;&gt;b;</code></p><p>按顺序输入一个变量a和一个变量b。cin包含在iostream中。句末有分号。</p><p>*每输入一个变量都需要写两个&gt;符号（该符号是半角大于号），箭头指向要输入的变量。</p><p>*cin和cout会自动识别输入/输出的值的类型，无需特意说明。</p><p>*若是使用cstdio头文件的话，需要写成<code>scanf(“%d%d”,&amp;a,&amp;b);</code>句末有分号，在变量前需加<code>&amp;</code>这个符号，相邻变量以逗号隔开。<code>&quot;%d&quot;</code>的意思是按整型来操作，有两个变量所以写两个%d。</p><p>*scanf会比cin快一些，在输入量很大（大于10万个数据）时建议使用scanf。printf同理。  </p><h2 id="scanf"><a href="#scanf" class="headerlink" title="scanf"></a>scanf</h2><p>对于scanf和printf，其均满足以下写法：</p><p>scanf(格式说明字符串,操作数);</p><p>printf(格式说明字符串,操作数);</p><p>其中，scanf和printf均可以只写格式说明字符串而不写操作数。当且仅当格式说明字符串中出现格式说明符（又叫占位符）时，才填写操作数。</p><p>并且，scanf和cin一样，均会自动跳过回车，且在格式说明符不为%c和%s时均会跳过空格。  </p><p>示例：</p><p>仅格式说明字符串：</p><p><code>scanf(&quot;a=b=&quot;);</code></p><p>当输入是a=b=时可以正常执行</p><p><code>printf(&quot;a=b=&quot;);</code></p><p>输出字符串a=b=</p><p>仅占位符：</p><p><code>scanf(&quot;%d%d&quot;,&amp;a,&amp;b);</code></p><p>当输入仅有两个数字时可以正常执行，按格式说明符%d来操作变量a和b</p><p><code>printf(&quot;%d&quot;,c);</code></p><p>按格式说明符%d来操作变量c</p><p>混用：</p><p><code>scanf(&quot;a=%d,b=%d&quot;,&amp;a,&amp;b);</code></p><p>当输入格式满足例如<code>a=1,b=2</code>时（就连逗号也不能漏掉），输入取得值1和2，分别赋值给a和b</p><p><code>printf(&quot;c=%d&quot;,c);</code></p><p>将会原样输出c=，之后将变量c的值按格式说明符%d操作后，输出值</p><p>又如，本文开头的代码段可以转化为如下代码段，样例也可转化为对应样例：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a,b,c;</span><br><span class="line">    <span class="built_in">scanf</span>(“a=%d,b=%d”,&amp;a,&amp;b);</span><br><span class="line">    c=a+b;</span><br><span class="line">    <span class="built_in">printf</span>(“c=%d”,c);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>样例输入：</p><p><code>a=2,b=3</code></p><p>样例输出：</p><p><code>c=5</code></p><p>注意到上文中，scanf的操作数前有加”&amp;”符号，而printf的操作数前没有。关于&amp;，将会在第十章中说明。</p><p>附，常见格式说明符：</p><p>%d，表示按int类型处理</p><p>%lld，表示按long long类型处理</p><p>%ull，表示按unsigned long long类型处理</p><p>%c，表示按char类型处理</p><p>%s，表示按char数组来进行处理（关于数组，后续章节会讲到）</p><p>%f，表示按float类型处理</p><p>%lf，表示按double类型处理（因为double本质上是long float，所以其格式操作符取long float的缩写）</p><p>上述格式操作符均会跳过空格和换行符。也就是说，在使用cin、或在scanf中使用上述格式操作符时，输入的不同值可以使用空格或换行符隔开。  </p><p>关于格式操作符的特殊操作（以下仅1可以适用于scanf，其余均仅适用于printf）：</p><p>1、按照指定宽度保留数字的方法：</p><p>如对int类型保留4个数字的位宽，格式操作符可选用%4d</p><p>*当数字的实际宽度大于要保留的位宽时，按照原宽度输出。所以若是%0d，就是按原宽度输出</p><p>*当数字的实际宽度小于要保留的位宽时，将数字右对齐，并在左边补空格填充</p><p>2、保留指定位数的小数（直接舍去，并不四舍五入）的方法：</p><p>如对double类型保留两位小数，格式操作符可选用%0.2lf</p><p>对其中0的说明，参加第1条；而小数点后的2，就表示保留两位小数</p><p>此种情况下，0可以省略，如%0.2lf与%.2lf等效</p><p>*内部操作是先计算保留小数，再计算保留位宽</p><p>*对于小数，小数点也占一个位宽，所以如对于2.15使用格式说明符%4.1lf的话，会因为先计算保留1位小数而变为2.1，此时位宽为3。再因为保留4个位宽，而在2.1前补一个空格后输出</p><p>3、可以使用0来代替空格进行填充（填充后需符合保留小数位数的要求，以及不能改变原数字大小）：</p><p>如对于int类型数字100，使用格式操作符%4d，本来是在左边填充一个空格，如果改用格式操作符%04d的话，就会变成在左边填充一个0，这样执行<code>printf(&quot;%04d&quot;,100);</code>就会输出0100</p><p>4、可以使用-来实现左对齐</p><p>如对于int类型数字100，使用格式操作符%-4d，就会在100右边填充一个空格后输出</p><p>但如果使用格式操作符%-04d，并不会在右边填充一个0，因为这样会改变100原本的值，所以输出会是100和一个空格</p><p>综上，如果想对一个double类型的变量a，保留5位位宽，保留1位小数，用0填充空位，实现左对齐的话，可以写成：<code>printf(&quot;%-05.1lf&quot;,a);</code></p><h1 id="第七行"><a href="#第七行" class="headerlink" title="第七行"></a>第七行</h1><p><code>c=a+b;</code></p><p>本句的执行过程是，先计算a+b的值，再赋值给c。本语句称之为赋值语句。赋值语句的等号左边必须是一个可以被赋值的对象。</p><p>其中，对于+号，=号，我们均称之为运算符。</p><p>常见运算符有：</p><p><code>+</code>,<code>-</code>,<code>*</code>,<code>\</code>，分别表示加减乘除</p><p><code>=</code>，表示赋值，先计算等式右边的值，再赋值给左边的对象</p><p><code>%</code>，表示取模，功能类似于取余数。如<code>int a=100%7;</code>最终c的值将等于100除以7的余数2</p><p><code>+=</code>，表示自加运算。如<code>i+=2</code>，表示<code>i=i+2</code>。其它的<code>-=</code>，<code>*=</code>，<code>/=</code>，<code>%=</code>同理</p><p><code>++</code>，表示自加1运算。如i++，表示<code>i=i+1</code>。三个或更多加号则不成立，只有两个+号的++可以表示自加运算。</p><p>*特别的，++有前置和后置两种写法，如i++和++i，最终都会导致i=i+1。</p><p>*当i++或++i单独存在时，它们并无区别。但当它们处于赋值语句中时，会引发差别。</p><p>i++是先取得i的值，再自加；++i是先自加，再取得i的值。</p><p>如，现在有<code>int i=1,a;</code>然后令<code>a=i++</code>，则先取得i的值1，赋值给a，然后i再自加，i变成2，所以执行完后a=1，i=2。</p><p>相对的，如现在有<code>int i=1,a;</code>然后令<code>a=++i</code>，则i先自加，i变成2，再取得i的值2，赋值给a，所以执行完后a=,2，i=2。</p><p>–与++同理。只有加减有这种写法，别的没有。  </p><p>第二章到此结束。</p><p>感谢PTW对本文的援助。</p><p>本章练习：</p><p><a href="https://www.luogu.org/problemnew/show/P1001" target="_blank" rel="noopener">P1001 A+B Problem</a></p><p><a href="https://www.luogu.org/problemnew/show/P1421" target="_blank" rel="noopener">P1421 小玉买文具</a></p><p><a href="https://www.luogu.org/problemnew/show/P1425" target="_blank" rel="noopener">P1425 小鱼的游泳时间</a></p>]]></content>
      
      
      <categories>
          
          <category> cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cpp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++语言-1-入门篇</title>
      <link href="/cpp/cpp-1/"/>
      <url>/cpp/cpp-1/</url>
      
        <content type="html"><![CDATA[<p>本章用以给新手入门。</p><a id="more"></a><hr><p>首先，请大家先熟悉下面的，输出一串字符”helloworld”的代码。  </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;”helloworld”&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这是一句注释</span></span><br></pre></td></tr></table></figure><p>该代码编译运行后，显示的结果如下面这一行：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helloworld</span><br></pre></td></tr></table></figure><p>现在开始逐行解释。</p><h1 id="include"><a href="#include" class="headerlink" title="#include"></a>#include</h1><p><code>#include&lt;iostream&gt;</code>，这句的意思是程序中包含一个叫做iostream的头文件，格式是<code>#include&lt;&gt;</code>，头文件名称填在单书名号中。单书名号结尾不需要加分号。需要包含多个头文件时换行写即可。</p><p>例：</p><p><code>#include&lt;iostream&gt;</code></p><p><code>#include&lt;cstdio&gt;</code></p><p>也有用双引号的，如<code>#include&quot;cstdio&quot;</code>，虽然这样也可以，不过建议写单书名号。区别在于双引号的是查找自己编写的类库（头文件），而单书名号是查找编译环境自带的类库。</p><p>常用头文件有：</p><p>iostream，这个单词由in/out stream组成，是标准输入输出流。</p><p>cstdio，这个单词由c++ standard in/out组成，是标准输入输出。</p><p>cmath，这个单词由c++ math组成，是数学库。</p><p>cstring，这个单词由c++ string组成，是与字符处理有关的头文件。</p><p>string，这个单词本身就存在，翻译名为“字符串”，使用string类型时需要包含该头文件。</p><p>algorithm，这个单词本身就存在，翻译名为“算法”，主要包含一些现成的函数。</p><p>有时候也会见到如”stdio.h”的头文件，这是C语言的头文件，不用管。请大家按C++写法写头文件。</p><h1 id="using"><a href="#using" class="headerlink" title="using"></a>using</h1><p><code>using namespace std;</code></p><p>这句话，称为“使用(using)命名空间(namespace)std”，其中namespace就是“姓名”和“空间”两个单词的组合，称为“命名空间”。而std是standard的缩写，表示“标准的”。</p><p>这句话写在所有include之后，不可修改。这是硬性规定，不做赘述。句末要有分号。不论包含多少头文件，都只需写一次。</p><h1 id="main"><a href="#main" class="headerlink" title="main"></a>main</h1><p><code>int main()</code></p><p>main()表示主函数，括号不可丢，句末无分号。前面的int表示main函数返回int类型。这句其实也是硬性规定。</p><h1 id="函数体"><a href="#函数体" class="headerlink" title="函数体"></a>函数体</h1><p>左大括号，与第8行的右大括号匹配，构成一个封闭区域，表示main函数的函数体。</p><p>大括号是函数的界限，表示这一组大括号里面的所有内容都属于这个函数。括号是一一匹配的，不会重复匹配，且每个左大括号只会匹配到离自己最近的且未被匹配的右大括号。</p><h1 id="cout"><a href="#cout" class="headerlink" title="cout"></a>cout</h1><p><code>cout&lt;&lt;&quot;helloworld&quot;&lt;&lt;endl;</code></p><p>输出一个句子并换行。</p><p>表示输出的是”cout”，是c++ out的缩写。要使用cout，需要包含iostream头文件。</p><p>这个“句子”的专业表述为“字符串”，因为每个句子实际上都是由一串字符构成的。输出时，在输出的内容中没有双引号。</p><p>endl是end line的缩写，表示一个换行符。所谓的换行符，就是通常意义上的回车。在输出换行符后，字符串末尾将如同被按下一个回车，光标会来到下一行。</p><p>*每输出一个变量都需要写两个单书名号，箭头指向cout。</p><p>&ensp;如<code>cout&lt;&lt;a&lt;&lt;b&lt;&lt;c;</code>//按先后顺序输出三个变量a，b，c。</p><p>*直接按此方法输出时三个变量会连在一起，如a=1，b=2，c=3时，输入为123，这时需要手动添加空格作为分隔符，代码更改为<code>cout&lt;&lt;a&lt;&lt;&quot; &quot;&lt;&lt;b&lt;&lt;&quot; &quot;&lt;&lt;c;</code>输出变更为1 2 3。</p><p>*cout支持两种换行符，endl和”\n”，如<code>cout&lt;&lt;endl;</code>或<code>cout&lt;&lt;&quot;\n&quot;;</code>都可以做到换行。</p><p>*endl中是小写的L，而不是数字1。  </p><p>既然cout是输出，相对的，就有输入。</p><p>表示输出的是”cin”，是c++ in的缩写。要使用cin，需要包含iostream头文件。</p><p>cin的用法，将在下一篇章中说明。</p><h1 id="return"><a href="#return" class="headerlink" title="return"></a>return</h1><p><code>return 0;</code></p><p>表示正常结束程序。主函数的最后必须有这一句话，句末有分号，写在主函数中时不可改动。</p><p>不论写在主函数的何处，只要程序执行时遇到这句话，都将使得程序正常结束。</p><h1 id="函数体结束"><a href="#函数体结束" class="headerlink" title="函数体结束"></a>函数体结束</h1><p>右大括号，与第4行的左大括号匹配，构成一个封闭区域，表示main函数的函数体。</p><p>大括号是函数的界限，表示这一组大括号里面的所有内容都属于这个函数。括号是一一匹配的，不会重复匹配，且每个右大括号只会匹配到离自己最近的且未被匹配的左大括号。</p><h1 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h1><p>两个除号，<code>//</code>，表示注释，程序将会忽视在<code>//</code>之后的这一行的所有内容</p><p>如果需要多行注释，可以选择<code>/*内容*/</code>的方式，程序将会忽略<code>/*</code>和<code>*/</code>之间的所有内容。</p><p>示例：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">这里还没被忽略 <span class="comment">//这句会被忽略</span></span><br><span class="line"></span><br><span class="line">这句也没被忽略</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*我们</span></span><br><span class="line"><span class="comment">这几行</span></span><br><span class="line"><span class="comment">全都</span></span><br><span class="line"><span class="comment">被忽略了*/</span></span><br></pre></td></tr></table></figure><p>以上，就是对于本篇开头的代码段的完整解释。</p><p>至此，可以总结出一个C++程序的基本框架。写程序时可以先打好该框架，然后再继续填充。</p><p>框架如下：  </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>到此，第一章结束！</p><p>感谢PTW对本文的援助。</p>]]></content>
      
      
      <categories>
          
          <category> cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cpp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/others/hello-world/"/>
      <url>/others/hello-world/</url>
      
        <content type="html"><![CDATA[<p>这篇文章是Hexo自带的文章，有兴趣的各位可以浏览。</p><a id="more"></a><hr><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
